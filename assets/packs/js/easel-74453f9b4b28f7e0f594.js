/*! For license information please see easel-78042972279cdc1f8097.js.LICENSE.txt */
!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/assets/packs/",n(n.s=655)}([,,,,,,,,,,,,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(a){"object"===typeof window&&(n=window)}e.exports=n},,,,function(e,t){e.exports={upcut:"Upcut",straight:"Straight cut",downcut:"Downcut",compression:"Compression",v:"V"}},,function(e,t){e.exports=function(e){let t=null;return function(){return null!=e&&(t=e(),e=null),t}}},,,,,,,,,function(e,t){e.exports={easelProFreeDaysPerMonth:4,saveVersionMismatchError:"version_mismatch",workpieceSaveVersionMismatchError:"workpiece_version_mismatch",defaultMaterialName:"Birch Plywood"}},function(e,t){e.exports={USER_UNSAVED_INPUT:"user_unsaved_input",INVENTABLES:"inventables",USER_ADDED_CUSTOM:"user_added_custom",GLOBAL:"global"}},,,,,,function(e,t,n){const a=n(92),r=function(){const e=function(e,t,n){const a=((0===t.depth?255:217)*(n-t.depth)/n).toFixed(0),r=`rgb(${a}, ${Number(a)}, ${Number(a)})`;switch(t.type){case"outline":{e.fill="transparent",e.stroke=r;let n=null;switch(t.outlineStyle){case"inside":n=-1;break;case"on-path":n=0;break;case"outside":n=1}e.easel.cut={useProfile:t.useProfile,profileSettings:t.profileSettings,offset:n};break}case"fill":e.stroke="transparent",e.fill=r,e.easel.cut={useProfile:t.useProfile,profileSettings:t.profileSettings,offset:0};break;case"drill":e.fill=r,e.stroke="rgb(74, 144, 226)",e.easel.cut={useProfile:t.useProfile,profileSettings:t.profileSettings,offset:0,type:"drill"}}},t=function(e,t){const{originY:n,pixelsPerInch:a}=t,r=EASEL.merge(e);return r.inchX=r.left/a,r.inchY=n-r.top/a,delete r.left,delete r.top,r},n=function(e,t){const n=function(e,t){const{pixelsPerInch:n}=t,r=Math.PI/180,o=e=>-(e||0)*r,s=e=>e/n,i=e.strokeWidth||0,l=s(e.width+i),c=s(e.height+i),p=EASEL.matrix().translatedBy(l/2,-c/2),u=EASEL.matrix().translatedBy(e.flipX?-l:0,e.flipY?c:0).scaledBy(e.flipX?-1:1,e.flipY?-1:1),d=EASEL.matrix().scaledBy(e.scaleX,e.scaleY),h=EASEL.matrix().rotatedBy(o(e.angle)),E=EASEL.matrix().premultipliedBy(d).premultipliedBy(h).transformedPoint({x:"left"===e.originX?0:-l/2,y:"top"===e.originY?0:c/2}),m=EASEL.matrix().translatedBy(e.inchX+E.x,e.inchY+E.y),S=EASEL.matrix().premultipliedBy(p).premultipliedBy(u).premultipliedBy(d).premultipliedBy(h).premultipliedBy(m);switch(e.type){case"path":case"template":{const t=a(e.path),n=EASEL.pathUtils.pathBoundingBox(t),r={x:(n.minX+n.maxX)/2-e.pathOffset.x,y:(n.minY+n.maxY)/2-e.pathOffset.y};return{type:"path",center:S.transformedPoint({x:s(r.x-e.width/2),y:s(e.height/2-r.y)}),width:s((n.maxX-n.minX)*e.scaleX),height:s((n.maxY-n.minY)*e.scaleY),rotation:o(e.angle),points:t,flipping:{horizontal:e.flipX,vertical:!e.flipY},pro:e.pro}}case"polyline":return{type:"polyline",center:S.transformedPoint({x:0,y:0}),width:s(e.width*e.scaleX),height:s(e.height*e.scaleY),rotation:o(e.angle),points:e.points,flipping:{horizontal:e.flipX,vertical:!e.flipY},pro:e.pro};case"polygon":case"triangle":case"star":return{type:"polygon",center:S.transformedPoint({x:0,y:0}),width:s(e.width*e.scaleX),height:s(e.height*e.scaleY),rotation:o(e.angle),points:e.points,flipping:{horizontal:e.flipX,vertical:!e.flipY},pro:e.pro};case"circle":case"ellipse":return{type:"ellipse",center:S.transformedPoint({x:0,y:0}),width:s(e.width*e.scaleX),height:s(e.height*e.scaleY),rotation:o(e.angle),flipping:{horizontal:e.flipX,vertical:e.flipY},pro:e.pro};case"line":{const t=e.x1<e.x2?-1:e.x1>e.x2?1:0,n=e.y1<e.y2?-1:e.y1>e.y2?1:0;return{type:"line",point1:S.transformedPoint({x:s(t*e.width/2),y:-s(n*e.height/2)}),point2:S.transformedPoint({x:-s(t*e.width/2),y:s(n*e.height/2)}),flipping:{horizontal:e.flipX,vertical:e.flipY},pro:e.pro}}case"rect":return{type:"rectangle",center:S.transformedPoint({x:0,y:0}),width:s(e.width*e.scaleX),height:s(e.height*e.scaleY),cornerRadius:{x:s(e.rx*e.scaleX),y:s(e.ry*e.scaleY)},rotation:o(e.angle),flipping:{horizontal:e.flipX,vertical:e.flipY},pro:e.pro};case"i-text":return{type:"text",text:e.text,font:e.fontFamily,center:S.transformedPoint({x:0,y:0}),width:s(e.width*e.scaleX),height:s(e.height*e.scaleY),rotation:o(e.angle),flipping:{horizontal:e.flipX,vertical:e.flipY}}}}(e,t),r=function(e,t){let n,a,r;const{materialThickness:o}=t,s=(null!=e.easel?e.easel.cut:void 0)||{};switch(s.offset){case-1:case"-1":a="inside";break;case 1:case"1":a="outside";break;default:a="on-path"}return e.cutType?"fill"===e.cutType?n="fill":(n="outline",a=e.cutType):n="transparent"===e.fill||""===e.fill||"none"===e.fill?"outline":"fill",r=null!=s.depth?s.depth:e.depth?e.depth:o*(1-EASEL.svgColorToFraction("outline"===n?e.stroke:e.fill)),{type:n,depth:r,tabPreference:s.tabPreference,outlineStyle:a}}(e,t);if(null!=n&&null!=r)return{shape:n,cut:r}};return{fabricJsonToDataObject:t,fabricJsonToVolume:function(e,a){const r=t(e,a);return n(r,a)},dataObjectToVolume:n,volumeToFabricJson:function(t,n){const{originY:a,pixelsPerInch:r,strokeSize:o,materialThickness:s}=n,{id:i,shape:l,cut:c}=t,p=180/Math.PI,u=e=>e*r,d=e=>u(e),h=e=>u(a)-u(e);let E=Math.hypot((o+l.height)/2,(o+l.width)/2),m=Math.atan2((o+l.height)/2,-(o+l.width)/2);const S=e=>d(e+E*Math.cos(l.rotation+m)),g=e=>h(e+E*Math.sin(l.rotation+m)),f={isMoving:!1,perPixelTargetFind:"text"!==t.shape.type,hasRotatingPoint:!0,strokeLineJoin:"round",strokeLineCap:"round",strokeWidth:u(o),angle:(A=l.rotation,(-A||0)*p),flipX:l.flipping.horizontal,flipY:l.flipping.vertical,easel:{id:i,selectable:!0}};var A;const b=function(e,t,n,a){const r=t.minX===t.maxX?1:n/(t.maxX-t.minX),o=t.minY===t.maxY?1:a/(t.maxY-t.minY),s=-t.minX,i=-t.maxY,l=e=>({x:u((e.x+s)*r),y:u(-(e.y+i)*o)}),c=e=>({x:u(e.x*r),y:u(-e.y*o)});return e.map((e=>{let t=[];for(let n of e){const e=l(n);null!=n.lh&&(e.lh=c(n.lh)),null!=n.rh&&(e.rh=c(n.rh)),t.push(e)}return t}))},L=function(e,t){e.type="path",e.width=u(t.width),e.height=u(t.height),e.left=S(t.center.x),e.top=g(t.center.y);const n=b(t.points,EASEL.pathUtils.pathBoundingBox(t.points),t.width,t.height);return e.path=EASEL.svgPathBuilder.components(n),e.pathOffset={x:0,y:0}};switch(l.type){case"ellipse":f.type="ellipse",f.width=u(l.width),f.height=u(l.height),f.left=S(l.center.x),f.top=g(l.center.y),f.rx=f.width/2,f.ry=f.height/2;break;case"rectangle":f.type="rect",f.width=u(l.width),f.height=u(l.height),f.left=S(l.center.x),f.top=g(l.center.y),f.rx=u((null!=l.cornerRadius?l.cornerRadius.x:void 0)||0),f.ry=u((null!=l.cornerRadius?l.cornerRadius.y:void 0)||0);break;case"line":f.type="line",f.x1=d(l.point1.x),f.y1=h(l.point1.y),f.x2=d(l.point2.x),f.y2=h(l.point2.y),f.left=Math.min(f.x1,f.x2)-u(o/2),f.top=Math.min(f.y1,f.y2)-u(o/2),f.width=Math.abs(f.x2-f.x1),f.height=Math.abs(f.y2-f.y1),f.angle=0;break;case"polyline":case"polygon":{f.type=l.type,f.width=u(l.width),f.height=u(l.height),f.left=S(l.center.x),f.top=g(l.center.y);const e=EASEL.pathUtils.pointsBoundingBox(l.points),t=e.minX===e.maxX?1:l.width/(e.maxX-e.minX),n=e.minY===e.maxY?1:l.height/(e.maxY-e.minY),a=-(e.minX+e.maxX)/2,r=-(e.minY+e.maxY)/2,o=e=>({x:u((e.x+a)*t),y:u(-(e.y+r)*n)});f.points=l.points.map((e=>o(e)));break}case"path":L(f,l);break;case"text":{const t=EASEL.merge(f),n=EASEL.fontSelectors.getFontData(EASEL.store.getState(),l.font),a=n?n.baselineOffsetFraction:1;f.type="i-text",f.text=l.text,f.fontFamily=l.font,f.fontSize=80,f.lineHeight=1.3,f._fontSizeFraction=1/a;const r=EASEL.textHelper.measure({text:l.text,font:l.font});f.width=r.width,f.height=r.height,f.scaleX=u(l.width)/f.width,f.scaleY=u(l.height)/f.height,f.strokeWidth/=Math.sqrt(f.scaleX*f.scaleY);const i=o*Math.sqrt(f.scaleX/f.scaleY),p=o*Math.sqrt(f.scaleY/f.scaleX);if(E=Math.hypot((p+l.height)/2,(i+l.width)/2),m=Math.atan2((p+l.height)/2,-(i+l.width)/2),f.left=S(l.center.x),f.top=g(l.center.y),f.editable=!l.anchored,l.text&&l.text.length>0&&l.textEffect&&l.textEffect.bezier){f.type="e-text";const n=EASEL.textHelper.textShapeToCanvasShape(l);L(t,n),e(t,c,s),f.pathObject=t;const a=EASEL.pathUtils.pathBoundingBox(n.points),r=b(n.baselines,a,n.width,n.height),o=r.length,i=r[o-1][0],p=f.height/2+f.fontSize/f._fontSizeFraction,u=f.fontSize*f.lineHeight+p;let d=o*(-160/f._fontSizeFraction+52);d+=(o-1)*(161/f._fontSizeFraction+.0681);const h=i.y+f.scaleY*(f.height-u-d);t.pathOffset={x:i.x,y:h},t.top=f.top,t.left=f.left,t.width=f.width,t.height=f.height}break}case"drill":{f.type="path";const e=u(o),t=40,n=20,a=t+2*n,r=Math.max(a,e+2*n);f.width=r,f.height=r,f.left=d(l.center.x)-f.width/2-1,f.top=h(l.center.y)-f.height/2-1;const s=Math.max(e,t),i=[[{x:0,y:-s/2},{x:0,y:-r/2}],[{x:0,y:s/2},{x:0,y:r/2}],[{x:-s/2,y:0},{x:-r/2,y:0}],[{x:s/2,y:0},{x:r/2,y:0}]],c=100,p=[];for(let o=0;o<c;o++){const t=2*o*Math.PI/c;p.push({x:e*Math.cos(t)/2,y:e*Math.sin(t)/2})}if(i.push(p),e<t){let e=null;for(let n=0;n<c;n++){const a=2*n*Math.PI/c,r={x:t*Math.cos(a)/2,y:t*Math.sin(a)/2};null!=e&&i.push([e,r]),e=r}}f.path=EASEL.svgPathBuilder.components(i),f.pathOffset={x:-r/2,y:-r/2},f.strokeWidth=2,f.angle=0,f.hasControls=!1;break}}e(f,c,s);const y=[f];return(e=>e.tabPreference&&"outline"===e.type&&e.depth===EASEL.materialStore.getCurrentDepth())(c)&&y.push(function(e,t,n,a,r,o,s){let i;const l=n.tabs.map((n=>null!=t.shape.center?{x:r(n.center.x)-r(t.shape.center.x),y:o(n.center.y)-o(t.shape.center.y)}:{x:r(n.center.x)-(e.left+s(a/2)+e.width/2),y:o(n.center.y)-(e.top+s(a/2)+e.height/2)})),c=s(n.tabLength+a)/2;if(EASEL.editorStore.isVolumeSelected(t.id))i={stroke:"rgb(255, 255, 118)",perPixelTargetFind:!0};else{const e=(n.tabHeight/EASEL.materialStore.getCurrentDepth()*255).toFixed(0);i={stroke:`rgb(${[e,e,e].join(", ")})`,evented:!1}}return EASEL.merge(e,i,{hasControls:!1,hasBorders:!1,hasRotatingPoint:!1,easel:{selectable:!1,type:"tab"},clipTo(t){const n=1/(e.scaleX||1)*(e.flipX?-1:1),a=1/(e.scaleY||1)*(e.flipY?-1:1);t.save(),t.scale(n,a),t.beginPath();for(let e of Array.from(l))t.moveTo(e.x+c,e.y),t.arc(e.x,e.y,c,0,2*Math.PI,!0);return t.closePath(),t.restore()}})}(f,t,c,o,d,h,u)),y}}}();e.exports=r},function(e,t){const n={projectMaterialAttributes:function({id:e,name:t,category:n,dimensions:a,color:r}){return null!=r&&(r={name:r.name,layers:r.layers.map((e=>({rgb:e.rgb})))}),{id:e,name:t,category:n,dimensions:a,color:r}},toCamelCase:function(e){let t;return e.variations&&e.variations.length&&(t=e.variations.map((e=>(e=>({name:e.name,storeUrl:e.store_url,thumbnailName:e.thumbnail_name,layers:e.layers,default:e.default}))(e)))),{id:e.id,category:e.category,name:e.name,displayName:e.display_name||e.name,sortName:e.sort_name,imageUrl:e.image_url,storeId:e.store_id,storeUrl:e.store_url,textureUrl:e.texture_url,baseTextureUrl:e.base_texture_url,thumbnailUrl:e.thumbnail_url,colors:e.colors,layerNames:e.layer_names,global:e.global,inToolbox:e.in_toolbox||!1,variations:t||null,source:e.source,widthX:e.width_x,lengthY:e.length_y,thicknessZ:e.thickness_z}}};e.exports=n},function(e,t){const n={formatDate(e){if(e){const t=e.getDate();return`${e.getMonth()+1}/${t}/${e.getFullYear()}`}},msToDays:e=>e/864e5,currentMidnightUTC:()=>moment.utc().startOf("day").format("YYYY-MM-DD")};e.exports=n},function(e,t,n){"use strict";(function(e){var a=n(47),r=n(48),o=n(49);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return c(this,e,t,n)}function c(e,t,n,a){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,a){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(a||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===a?new Uint8Array(t):void 0===a?new Uint8Array(t,n):new Uint8Array(t,n,a);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,n,a):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var a=0|E(t,n),r=(e=i(e,a)).write(t,n);r!==a&&(e=e.slice(0,r));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|h(t.length);return 0===(e=i(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(a=t.length)!==a?i(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function p(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(p(t),e=i(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=i(e,n);for(var a=0;a<n;a+=1)e[a]=255&t[a];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function E(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(a)return V(e).length;t=(""+t).toLowerCase(),a=!0}}function m(e,t,n){var a=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return _(this,t,n);case"latin1":case"binary":return w(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function S(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function g(e,t,n,a,r){if(0===e.length)return-1;if("string"===typeof n?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"===typeof t&&(t=l.from(t,a)),l.isBuffer(t))return 0===t.length?-1:f(e,t,n,a,r);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):f(e,[t],n,a,r);throw new TypeError("val must be string, number or Buffer")}function f(e,t,n,a,r){var o,s=1,i=e.length,l=t.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(e.length<2||t.length<2)return-1;s=2,i/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var p=-1;for(o=n;o<i;o++)if(c(e,o)===c(t,-1===p?0:o-p)){if(-1===p&&(p=o),o-p+1===l)return p*s}else-1!==p&&(o-=o-p),p=-1}else for(n+l>i&&(n=i-l),o=n;o>=0;o--){for(var u=!0,d=0;d<l;d++)if(c(e,o+d)!==c(t,d)){u=!1;break}if(u)return o}return-1}function A(e,t,n,a){n=Number(n)||0;var r=e.length-n;a?(a=Number(a))>r&&(a=r):a=r;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");a>o/2&&(a=o/2);for(var s=0;s<a;++s){var i=parseInt(t.substr(2*s,2),16);if(isNaN(i))return s;e[n+s]=i}return s}function b(e,t,n,a){return H(V(t,e.length-n),e,n,a)}function L(e,t,n,a){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,a)}function y(e,t,n,a){return L(e,t,n,a)}function R(e,t,n,a){return H(W(t),e,n,a)}function v(e,t,n,a){return H(function(e,t){for(var n,a,r,o=[],s=0;s<e.length&&!((t-=2)<0);++s)a=(n=e.charCodeAt(s))>>8,r=n%256,o.push(r),o.push(a);return o}(t,e.length-n),e,n,a)}function P(e,t,n){return 0===t&&n===e.length?a.fromByteArray(e):a.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var a=[],r=t;r<n;){var o,s,i,l,c=e[r],p=null,u=c>239?4:c>223?3:c>191?2:1;if(r+u<=n)switch(u){case 1:c<128&&(p=c);break;case 2:128===(192&(o=e[r+1]))&&(l=(31&c)<<6|63&o)>127&&(p=l);break;case 3:o=e[r+1],s=e[r+2],128===(192&o)&&128===(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(p=l);break;case 4:o=e[r+1],s=e[r+2],i=e[r+3],128===(192&o)&&128===(192&s)&&128===(192&i)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&i)>65535&&l<1114112&&(p=l)}null===p?(p=65533,u=1):p>65535&&(p-=65536,a.push(p>>>10&1023|55296),p=56320|1023&p),a.push(p),r+=u}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",a=0;for(;a<t;)n+=String.fromCharCode.apply(String,e.slice(a,a+=T));return n}(a)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,a){return p(t),t<=0?i(e,t):void 0!==n?"string"===typeof a?i(e,t).fill(n,a):i(e,t).fill(n):i(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return u(null,e)},l.allocUnsafeSlow=function(e){return u(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,a=t.length,r=0,o=Math.min(n,a);r<o;++r)if(e[r]!==t[r]){n=e[r],a=t[r];break}return n<a?-1:a<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var a=l.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var s=e[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(a,r),r+=s.length}return a},l.byteLength=E,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,a,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===a&&(a=0),void 0===r&&(r=this.length),t<0||n>e.length||a<0||r>this.length)throw new RangeError("out of range index");if(a>=r&&t>=n)return 0;if(a>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(a>>>=0),s=(n>>>=0)-(t>>>=0),i=Math.min(o,s),c=this.slice(a,r),p=e.slice(t,n),u=0;u<i;++u)if(c[u]!==p[u]){o=c[u],s=p[u];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},l.prototype.write=function(e,t,n,a){if(void 0===t)a="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)a=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===a&&(a="utf8")):(a=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var o=!1;;)switch(a){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return L(this,e,t,n);case"latin1":case"binary":return y(this,e,t,n);case"base64":return R(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function _(e,t,n){var a="";n=Math.min(e.length,n);for(var r=t;r<n;++r)a+=String.fromCharCode(127&e[r]);return a}function w(e,t,n){var a="";n=Math.min(e.length,n);for(var r=t;r<n;++r)a+=String.fromCharCode(e[r]);return a}function x(e,t,n){var a=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>a)&&(n=a);for(var r="",o=t;o<n;++o)r+=U(e[o]);return r}function k(e,t,n){for(var a=e.slice(t,n),r="",o=0;o<a.length;o+=2)r+=String.fromCharCode(a[o]+256*a[o+1]);return r}function M(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,a,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+a>e.length)throw new RangeError("Index out of range")}function I(e,t,n,a){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(a?r:1-r))>>>8*(a?r:1-r)}function D(e,t,n,a){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(a?r:3-r)&255}function O(e,t,n,a,r,o){if(n+a>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,a,o){return o||O(e,0,n,4),r.write(e,t,n,a,23,4),n+4}function j(e,t,n,a,o){return o||O(e,0,n,8),r.write(e,t,n,a,52,8),n+8}l.prototype.slice=function(e,t){var n,a=this.length;if((e=~~e)<0?(e+=a)<0&&(e=0):e>a&&(e=a),(t=void 0===t?a:~~t)<0?(t+=a)<0&&(t=0):t>a&&(t=a),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var r=t-e;n=new l(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var a=this[e],r=1,o=0;++o<t&&(r*=256);)a+=this[e+o]*r;return a},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var a=this[e+--t],r=1;t>0&&(r*=256);)a+=this[e+--t]*r;return a},l.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var a=this[e],r=1,o=0;++o<t&&(r*=256);)a+=this[e+o]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var a=t,r=1,o=this[e+--a];a>0&&(r*=256);)o+=this[e+--a]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,a){(e=+e,t|=0,n|=0,a)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,a){(e=+e,t|=0,n|=0,a)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,a){if(e=+e,t|=0,!a){var r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}var o=0,s=1,i=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===i&&0!==this[t+o-1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+n},l.prototype.writeIntBE=function(e,t,n,a){if(e=+e,t|=0,!a){var r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}var o=n-1,s=1,i=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===i&&0!==this[t+o+1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,a){if(n||(n=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<n&&(a=n),a===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-n&&(a=e.length-t+n);var r,o=a-n;if(this===e&&n<t&&t<a)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,a){if("string"===typeof e){if("string"===typeof t?(a=t,t=0,n=this.length):"string"===typeof n&&(a=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==a&&"string"!==typeof a)throw new TypeError("encoding must be a string");if("string"===typeof a&&!l.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=l.isBuffer(e)?e:V(new l(e,a).toString()),i=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%i]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){var n;t=t||1/0;for(var a=e.length,r=null,o=[],s=0;s<a;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===a){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){return a.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function H(e,t,n,a){for(var r=0;r<a&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(this,n(12))},,,,,,,function(e,t,n){(function(t){const a=n(18),r=function(e,t){null==t&&(t={});const n={};n.points=e,n.props=t;const o=()=>0===e.length,s=()=>e.length>1&&EASEL.pathUtils.pointsEqual(e[0],e[e.length-1]),i=()=>e.length>1&&!EASEL.pathUtils.pointsEqual(e[0],e[e.length-1]),l=function(t){null==t&&(t=4);const n=function(e){return e.toFixed(t)};return e.map((e=>`${n(e.x)},${n(e.y)}`)).join(" ")},c=a((()=>EASEL.pathOffsetter.area(e))),p=a((()=>EASEL.pathOffsetter.perimeter(e)));n.includesPoint=function(t,n){for(const a of e)if(t===a.x&&n===a.y)return!0;return!1};const u=a((function(){if(0===e.length)return null;let t=1/0,n=1/0,a=-1/0,r=-1/0;for(const o of e)t>o.x&&(t=o.x),n>o.y&&(n=o.y),a<o.x&&(a=o.x),r<o.y&&(r=o.y);return{minX:t,minY:n,maxX:a,maxY:r}}));return n.isEmpty=o,n.isClosed=s,n.isOpen=i,n.firstPoint=()=>e.length>0?e[0]:null,n.lastPoint=()=>e.length>0?e[e.length-1]:null,n.area=c,n.perimeter=p,n.toString=()=>`[${e.map((e=>null!=e.z?`{x: ${e.x}, y: ${e.y}, z: ${e.z}}`:`{x: ${e.x}, y: ${e.y}}`)).join(", ")}]`,n.svgPathData=function(e){return o()?"":"M"+l(e)+(s()?"Z":"")},n.svgShape=function(e){if(o())return"";return`<${s()?"polygon":"polyline"} points="${l(e)}" />`},n.close=function(){return o()||s()?n:r([].concat(e,[e[0]]),t)},n.reverse=()=>r([].concat(e).reverse(),t),n.transform=n=>r(n.transformedPath(e),t),n.rebaseNear=function(a,s){if(o()||i())return n;let l=Math.hypot(e[0].x-a.x,e[0].y-a.y);if(l<=s)return n;let c=0;for(let t=1;t<e.length-1;t++){const n=Math.hypot(e[t].x-a.x,e[t].y-a.y);if(n<l&&(c=t,l=n,n<=s))break}if(0==c)return n;const p=e.slice(c),u=e.slice(1,c+1);return r([...p,...u],t)},n.rebaseDistance=function(t){if(t<0)throw new Error("path.rebaseDistance: negative distances unsupported");if(i()||0===t||e.length<3)return n;for(let n=1;;n++){const a=e[n-1],o=e[n],s=o.x-a.x,i=o.y-a.y,l=Math.hypot(s,i);if(t-l<=0){const o=(l-t)/l,c={x:a.x+s*(1-o),y:a.y+i*(1-o)};null!=a.z&&(c.z=a.z);const p=e.slice(n),u=e.slice(1,n);return r([c,...p,...u,c])}t-=l,n==e.length-1&&(n=0)}},n.boundingBox=u,n.withZ=function(n){return r(e.map((({x:e,y:t})=>({x:e,y:t,z:n}))),t)},n.withProps=function(e){null==e&&(e={});const t={};for(const a of Object.keys(n.props))t[a]=n.props[a];for(const n of Object.keys(e))t[n]=e[n];return r(n.points,t)},n.crossesSegment=function(t,n,a,r){const o=EASEL.matrix().translatedBy(-t,-n).rotatedBy(-Math.atan2(r-n,a-t)),s=o.transformedPoint({x:a,y:r}).x,i={x:t,y:n},l={x:a,y:r};if(e.length>1)for(let c=0;c<e.length;c++){let t=e[c];if(EASEL.pathUtils.pointsEqual(t,i)||EASEL.pathUtils.pointsEqual(t,l))continue;let n=e[(c+1)%e.length];if(!EASEL.pathUtils.pointsEqual(n,i)&&!EASEL.pathUtils.pointsEqual(n,l)&&(t=o.transformedPoint(t),n=o.transformedPoint(n),t.y<0&&0<n.y||n.y<0&&0<t.y)){const e=-t.y/(n.y-t.y),a=t.x+e*(n.x-t.x);if(0<a&&a<s)return!0}}return!1},n.closestPointAndDistanceTo=function(t){let n=1/0,a=null,r=-1,o=e[0];for(let s=1;s<e.length;s++){const i=e[s],{distance:l,point:c}=EASEL.math.distToSegment(t,o,i);l<n&&(n=l,a=c,r=s),o=i}return{distance:n,point:a,index:r}},n};e.exports=r,t.EASEL&&(EASEL.path=r)}).call(this,n(12))},function(e,t,n){(function(t){const a=n(46),r=n(18),o=function(){const e=1e-5,t={},n="paths",s=function(){let e=0;return t=>null!=t._EASEL_paths_cacheIdentifier?t._EASEL_paths_cacheIdentifier:t._EASEL_paths_cacheIdentifier=e++}();t.union=function(e,...t){let n=e.all().map((e=>e.points)),a=[];for(const r of t)a=a.concat(r.all().map((e=>e.points)));return n=EASEL.pathOffsetter.add(n,a),n.map((e=>EASEL.path(e)))},t.intersection=function(e,...t){let n=e.all().map((e=>e.points));for(const a of t){if(0===n.length)break;n=EASEL.pathOffsetter.intersect(n,a.all().map((e=>e.points)))}return n.map((e=>EASEL.path(e)))},t.exclusion=function(e,...t){let n=e.all().map((e=>e.points));for(const a of t){if(0===n.length)break;n=EASEL.pathOffsetter.remove(n,a.all().map((e=>e.points)))}return n.map((e=>EASEL.path(e)))},t.exclusionFromStrokes=function(e,...t){const n=[];for(let a of e.all()){const{props:e}=a;let r=[a.points];for(const n of t)r.length>0&&n.all().length>0&&(r=EASEL.pathOffsetter.remove(r,n.all().map((e=>e.points)),!1));for(let t of r)n.push(EASEL.path(t,e))}return n},t.intersectionWithStrokes=function(e,...t){const n=[];for(let a of e.all()){const{props:e}=a;let r=[a.points];for(let n of t)r.length>0&&(r=EASEL.pathOffsetter.intersect(r,n.all().map((e=>e.points)),!1));for(let t of r)n.push(EASEL.path(t,e))}return n},t.clean=function(e){return EASEL.pathOffsetter.clean(e.all().map((e=>e.points))).map((e=>EASEL.path(e).close()))},t.simplify=function(e,t){null==t&&(t=EASEL.pathOffsetter.FILL_TYPE_NON_ZERO);return EASEL.pathOffsetter.simplify(e.all().map((e=>e.points)),t).map((e=>EASEL.path(e).close()))},t.lighten=function(e){return EASEL.pathOffsetter.lighten(e.all().map((e=>e.points))).map((e=>EASEL.path(e)))},t.offset=function(e,t,n){null==n&&(n=EASEL.pathOffsetter.JOIN_TYPE_ROUND);return EASEL.pathOffsetter.offset(e.all().map((e=>e.points)),t,n,!0).map((e=>EASEL.path(e)))},t.expand=function(e,n,a){return null==a&&(a=EASEL.pathOffsetter.JOIN_TYPE_ROUND),t.offset(e,n,a)},t.contract=function(e,n,a){return null==a&&(a=EASEL.pathOffsetter.JOIN_TYPE_ROUND),t.offset(e,-n,a)},t.offsetStrokes=function(e,t){return EASEL.pathOffsetter.offset(e.all().map((e=>e.points)),t,EASEL.pathOffsetter.JOIN_TYPE_ROUND,!1).map((e=>EASEL.path(e)))},t.transform=(e,t)=>e.all().map((e=>e.transform(t))),t.scale=(e,n)=>t.transform(e,EASEL.matrix().scaledBy(n,n)),t.translate=(e,n,a)=>t.transform(e,EASEL.matrix().translatedBy(n,a)),t.withZ=(e,t)=>e.all().map((e=>e.withZ(t))),t.add=function(e,...t){const n=[].concat(e.all());for(const a of t)n.push.apply(n,a.all());return n},t.withProps=function(e,t){return null==t&&(t={}),e.all().map((e=>e.withProps(t)))},t.selectWithProp=(e,t)=>e.all().filter((e=>e.props[t])),t.selectWithoutProp=(e,t)=>e.all().filter((e=>!e.props[t])),t.open=e=>e.all().filter((e=>e.isOpen())),t.closed=e=>e.all().filter((e=>e.isClosed())),t.select=(e,t)=>e.all().filter((e=>t(e))),t.map=(e,t)=>e.all().map((e=>t(e))),t.sort=(e,t)=>e.all().slice().sort(t);const i=function(e,...t){const a=t.map((t=>"object"===typeof t&&"function"===typeof t.getUniqueIdentifier?`[path ${t.getUniqueIdentifier()}]`:"function"===typeof t?`[function ${s(t)}]`:"object"===typeof t||e===n?`[data ${s(t)}]`:t));return`[${[e,...a].join(" ")}]`},l=function(e,t,n,...a){return null!=e?e(t,(()=>c(t,n,...a))):c(t,n,...a)};var c=function(p,u,...d){if("union"===u){let e=!1,t=[];for(let n of d)"union"===n.operation&&null!=n.params?(e=!0,t=t.concat(n.params)):t.push(n);if(e)return c(p,u,...t)}const h={};let E=0;for(const e of d)e&&null!=e.depth&&(E=Math.max(E,e.depth+1));const m=o.sharedInstanceCache||EASEL.simpleCache();for(const e in t)h[e]=function(...t){const n=i(e,h,...t);return l(m,n,e,h,...t)};const S=r((function(){const e=u===n?d[0]||[]:t[u](...d);return h.depth=E=0,h.params=d=null,e}));E>200&&S();const g=r((()=>new Promise((e=>e(S()))))),f=function(e){null==e&&(e=()=>!0);for(let t of S())if(e(t))return!0;return!1},A=r((function(){if(!f())return null;let e=1/0,t=1/0,n=-1/0,a=-1/0;for(let r of S()){const o=r.boundingBox();e>o.minX&&(e=o.minX),t>o.minY&&(t=o.minY),n<o.maxX&&(n=o.maxX),a<o.maxY&&(a=o.maxY)}return{minX:e,minY:t,maxX:n,maxY:a}}));var b=r((function(){const e=A();return null===e?0:(e.maxX-e.minX)*(e.maxY-e.minY)}));var L=r((function(){if(!f())return 0;L=0;for(const e of S())L+=e.area();return L}));return h.describe=()=>p,h.toPromise=g,h.getUniqueIdentifier=()=>s(h),h.depth=E,h.params=d,h.all=S,h.first=()=>S()[0],h.last=()=>{const e=S();return e[e.length-1]},h.any=f,h.closestPointTo=function(e){let t=null;for(let n of S()){const a=n.closestPointAndDistanceTo(e);null!=a&&(null==t||a.distance<t.distance)&&(t=a)}return t?t.point:null},h.area=L,h.toString=()=>`[${Array.from(S()).map((e=>e.toString())).join(", ")}]`,h.svgPath=e=>`<path d="${S().map((t=>t.svgPathData(e))).join(" ")}"/>`,h.contains=e=>b()>=e.boundingBoxArea()&&e.boundingBoxIntersection(h)&&!e.exclusion(h).any(),h.containsSegment=(e,t)=>{for(const a of S())if(a.crossesSegment(e.x,e.y,t.x,t.y))return!1;const n=a.pointInPolygon(S(),e),r=a.pointInPolygon(S(),t);if("ONPATH"===n&&"ONPATH"===r)return!o([EASEL.path([e,t])]).exclusionFromStrokes(h).any();if(!("INSIDE"===n&&"INSIDE"===r||"ONPATH"===n&&"INSIDE"===r||"INSIDE"===n&&"ONPATH"===r))return!1;for(let o of S()){const n=a.pointInPolygon([o],e),r=a.pointInPolygon([o],t);if("ONPATH"===n&&"ONPATH"===r)return!1;if(n!==r&&"ONPATH"!==n&&"ONPATH"!==r)return!1}return!0},h.boundingBox=A,h.boundingBoxIntersection=function(t){if(null==t)return null;const n=A(),a=t.boundingBox();return null!==n&&null!==a&&(!(a.minX-n.maxX>e)&&(!(n.minX-a.maxX>e)&&(!(n.minY-a.maxY>e)&&!(a.minY-n.maxY>e))))},h.boundingBoxArea=b,h.operation=u,h};return function(...e){const t=i(n,...e);return l(o.sharedInstanceCache,t,n,...e)}}();o.fromPointArrays=e=>o(e.map((e=>EASEL.path(e)))),o.sharedInstanceCache=null,e.exports=o,t.EASEL&&(EASEL.paths=o)}).call(this,n(12))},function(e,t){const n=function(){const e=(e,t)=>EASEL.math.closeTo(e,t,1e-6),t=function(t,n){return e(t.x,n.x)&&e(t.y,n.y)};var n=function(t,a,r){if(a.y>r.y)return n(t,r,a);const o="NO_INTERSECTION",s="INTERSECTION",i="ONPATH";if(a.y===r.y){const e=Math.min(a.x,r.x),n=Math.max(a.x,r.x);return t.y===a.y&&t.x<=n&&t.x>=e?i:o}if(t.y<=a.y||t.y>r.y)return o;if(t.x>Math.max(a.x,r.x))return o;if(t.x<Math.min(a.x,r.x))return s;{const n={dy:r.y-a.y,dx:r.x-a.x},l=function(t,n){const a=t.dx,r=t.dy,o=n.dx,s=n.dy;return e(r*o,s*a)?0:r*o>s*a?1:-1}({dy:t.y-a.y,dx:t.x-a.x},n);return 0===l?i:1===l?s:o}};return{pointInPolygon:function(e,a){let r=0;for(const o of e){const{points:e}=o;for(let o=1;o<e.length;o++){const s=e[o-1],i=e[o];if(t(s,a)||t(i,a))return"ONPATH";const l=n(a,s,i);if("ONPATH"===l)return"ONPATH";"INTERSECTION"===l&&(r+=1)}}return r%2===1?"INSIDE":"OUTSIDE"}}}();e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],a=t[1];return 3*(n+a)/4-a},t.toByteArray=function(e){var t,n,a=c(e),s=a[0],i=a[1],l=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,i)),p=0,u=i>0?s-4:s;for(n=0;n<u;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[p++]=t>>16&255,l[p++]=t>>8&255,l[p++]=255&t;2===i&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[p++]=255&t);1===i&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[p++]=t>>8&255,l[p++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o=[],s=16383,i=0,l=n-r;i<l;i+=s)o.push(p(e,i,i+s>l?l:i+s));1===r?(t=e[n-1],o.push(a[t>>2]+a[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return o.join("")};for(var a=[],r=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,l=s.length;i<l;++i)a[i]=s[i],r[s.charCodeAt(i)]=i;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function p(e,t,n){for(var r,o,s=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),s.push(a[(o=r)>>18&63]+a[o>>12&63]+a[o>>6&63]+a[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,a,r){var o,s,i=8*r-a-1,l=(1<<i)-1,c=l>>1,p=-7,u=n?r-1:0,d=n?-1:1,h=e[t+u];for(u+=d,o=h&(1<<-p)-1,h>>=-p,p+=i;p>0;o=256*o+e[t+u],u+=d,p-=8);for(s=o&(1<<-p)-1,o>>=-p,p+=a;p>0;s=256*s+e[t+u],u+=d,p-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,a),o-=c}return(h?-1:1)*s*Math.pow(2,o-a)},t.write=function(e,t,n,a,r,o){var s,i,l,c=8*o-r-1,p=(1<<c)-1,u=p>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=a?0:o-1,E=a?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=p?(i=0,s=p):s+u>=1?(i=(t*l-1)*Math.pow(2,r),s+=u):(i=t*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;e[n+h]=255&i,h+=E,i/=256,r-=8);for(s=s<<r|i,c+=r;c>0;e[n+h]=255&s,h+=E,s/=256,c-=8);e[n+h-E]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},,,,,,function(e,t,n){(function(t){const n=function(){const e=e=>e*e,t=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),n=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),a=function(e,t){const n=t/r(e)||0;return{x:e.x*n,y:e.y*n}};var r=e=>t(e,{x:0,y:0});return{clamp:(e,t,n)=>Math.min(n,Math.max(t,e)),distance:t,sub:n,scaleTo:a,distToSegment:function(n,a,r){const o=((t,n)=>e(t.x-n.x)+e(t.y-n.y))(a,r);if(0===o)return{distance:t(n,a),point:a};const s=((n.x-a.x)*(r.x-a.x)+(n.y-a.y)*(r.y-a.y))/o;switch(!1){case!(s<0):return{distance:t(n,a),point:a};case!(s>1):return{distance:t(n,r),point:r};default:var i={x:a.x+s*(r.x-a.x),y:a.y+s*(r.y-a.y)};return{distance:t(n,i),point:i}}},magnitude:r,moveToward:(e,t,r)=>{return o=e,s=a(n(t,e),r),{x:o.x+s.x,y:o.y+s.y};var o,s},normalize:e=>a(e,1),pointAtDistance:(e,t,n,a)=>({x:e.x+n*(t.x-e.x)/a,y:e.y+n*(t.y-e.y)/a}),distance3D:(e,t)=>Math.hypot(e.x-t.x,e.y-t.y,e.z-t.z),pointAtDistance3D:(e,t,n,a)=>({x:e.x+n*(t.x-e.x)/a,y:e.y+n*(t.y-e.y)/a,z:e.z+n*(t.z-e.z)/a}),pointOnSegmentAtZ:function(e,t,n){const a=(n-e.z)/(t.z-e.z);return{x:e.x+a*(t.x-e.x),y:e.y+a*(t.y-e.y),z:n}},BEZIER_MAGIC_NUMBER:.5522847498,closeTo:function(e,t,n){return null==n&&(n=1e-5),Math.abs(e-t)<n}}}();e.exports=n,t.EASEL&&(EASEL.math=n)}).call(this,n(12))},,,,,,,,,,,,function(e,t){!function(){const e=function(t,n){let a;if(null==n)return n;if("object"!==typeof n)return n;if(n instanceof Date)return new Date(n);if("[object Array]"===Object.prototype.toString.call(n))return n.map((t=>e(null,t)));null!=t&&"object"===typeof t||(t={});for(let r of Object.keys(n||{}))a=n[r],t[r]=e(t[r],a);return t};EASEL.merge=function(...t){let n=null;for(const a of t)n=e(n,a);return n},EASEL.shallowMerge=function(...e){const t={};for(const n of e)for(const e of Object.keys(n||{})){const a=n[e];t[e]=a}return t},EASEL.setIn=function(e,t,n){return 0===t.length?n:((e=EASEL.shallowMerge(e))[t[0]]=EASEL.setIn(e[t[0]],t.slice(1),n),e)},EASEL.mergeInObj=function(e,t,n){return 0===t.length?EASEL.shallowMerge(e,n):((e=EASEL.shallowMerge(e))[t[0]]=EASEL.mergeInObj(e[t[0]],t.slice(1),n),e)}}()},function(e,t){EASEL.units=function(){const e={},t={in:1,mm:25.4},n={in:3,mm:1},a=()=>EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState()),r=e=>t[o((e=>e.split("/")[0])(e))],o=function(e){switch(e.trim()){case"in":case"inch":case"inches":case'"':return"in";case"mm":return"mm"}},s=(e,t)=>parseFloat((e*r(t)).toFixed(n[t]));return e.defaultPrecision=n,e.normalizeUnitName=o,e.preferredUnitsPerInch=()=>t[a()],e.inchesPerPreferredUnit=()=>1/t[a()],e.unitsPerInch=r,e.inchesPerUnit=e=>1/r(e),e.unitConversionMultiplyValue=function(e){return"in"===e?1/t.mm:t.mm},e.convertToUnit=function(e,t,n){return e*EASEL.units.inchesPerUnit(t)*r(n)},e.convertFromIn=s,e.formatDimensions=(e,t)=>e.filter(Boolean).map((e=>s(e,t))).join(" \xd7 ")+" "+t,e}()},function(e,t){EASEL.flatten=function(e){let t=[];for(let n=0;n<e.length;n+=1e4)t=t.concat(...e.slice(n,n+1e4));return t}},function(e,t){EASEL.matrix=function(e,t,n,a,r,o){null==e&&(e=1),null==t&&(t=0),null==n&&(n=0),null==a&&(a=1),null==r&&(r=0),null==o&&(o=0);const s={};var i=function(s){const[i,l,c,p,u,d]=s.toArray();return EASEL.matrix(i*e+c*t,l*e+p*t,i*n+c*a,l*n+p*a,i*r+c*o+u,l*r+p*o+d)};const l=s=>{const i={x:e*s.x+n*s.y+r,y:t*s.x+a*s.y+o};return null!=s.z&&(i.z=s.z),i};return s.isIdentity=()=>1===e&&0===t&&0===n&&1===a&&0===r&&0===o,s.translatedBy=(e,t)=>i(EASEL.matrix(1,0,0,1,e,t)),s.scaledBy=function(e,t){if(!isFinite(e)||!isFinite(t))throw new Error(`Inputs to #scaledBy must by numbers: x=${e}, y=${t}`);return i(EASEL.matrix(e,0,0,t,0,0))},s.rotatedBy=function(e){const t=Math.cos(e),n=Math.sin(e);return i(EASEL.matrix(t,n,-n,t,0,0))},s.premultipliedBy=i,s.transformedPoint=l,s.transformedVector=r=>({x:e*r.x+n*r.y,y:t*r.x+a*r.y}),s.transformedPath=e=>e.map((e=>l(e))),s.inverse=function(){const s=e*a-n*t;if(0===s)throw new Error(`#inverse called on non-invertible matrix: [${e}, ${t}, ${n}, ${a}, ${r}, ${o}]`);const[i,l,c,p,u,d]=[a,-t,-n,e,n*o-r*a,-(e*o-r*t)];return EASEL.matrix(i/s,l/s,c/s,p/s,u/s,d/s)},s.toArray=()=>[e,t,n,a,r,o],s}},function(e,t){EASEL.pathUtils=function(){const e=()=>({minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}),t=function(e){const t={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};for(const n of e)t.minX=Math.min(t.minX,n.x),t.maxX=Math.max(t.maxX,n.x),t.minY=Math.min(t.minY,n.y),t.maxY=Math.max(t.maxY,n.y);return t},n=function(e,t,n,a){const r=3*t-e-3*n+a,o=3*e-6*t+3*n,s=-3*e+3*t,i=e,l=3*r,c=2*o,p=s,u=[0,1,-p/c,(-c+Math.sqrt(c*c-4*l*p))/(2*l),(-c-Math.sqrt(c*c-4*l*p))/(2*l)].filter((e=>0<=e&&e<=1)).map((e=>r*e*e*e+o*e*e+s*e+i));return{min:Math.min.apply(null,u),max:Math.max.apply(null,u)}},a=function(e,t,a,r){null==t&&(t={x:0,y:0}),null==a&&(a={x:0,y:0});const o=n(e.x,e.x+t.x,r.x+a.x,r.x),s=n(e.y,e.y+t.y,r.y+a.y,r.y);return{minX:o.min,minY:s.min,maxX:o.max,maxY:s.max}},r=function(e){const n=t(e);let r=null;for(const t of e){if(r&&(null!=r.rh||null!=t.lh)){const e=a(r,r.rh,t.lh,t);n.minX=Math.min(n.minX,e.minX),n.maxX=Math.max(n.maxX,e.maxX),n.minY=Math.min(n.minY,e.minY),n.maxY=Math.max(n.maxY,e.maxY)}r=t}return n},o=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),s=(e,t)=>({x:t.x-e.x,y:t.y-e.y}),i=function(e,t){const n=t.transformedPoint(e);for(const a of["lh","rh"])null!=e[a]&&(n[a]=s(n,t.transformedPoint(o(e,e[a]))));return n},l=function(e){return e.maxX<e.minX||e.maxY<e.minY?0:(e.maxX-e.minX)*(e.maxY-e.minY)};return{transformedPath:(e,t)=>e.map((e=>e.map((e=>i(e,t))))),transformedPathPoint:i,pointsBoundingBox:t,pathBoundingBox:function(e){const t={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};for(const n of e){const e=r(n);t.minX=Math.min(e.minX,t.minX),t.maxX=Math.max(e.maxX,t.maxX),t.minY=Math.min(e.minY,t.minY),t.maxY=Math.max(e.maxY,t.maxY)}return t},infiniteBox:e,pointsEqual:(e,t)=>e.x===t.x&&e.y===t.y&&(null==e.z||e.z===t.z),unionBoundingBoxes:(e,t)=>({minX:Math.min(e.minX,t.minX),maxX:Math.max(e.maxX,t.maxX),minY:Math.min(e.minY,t.minY),maxY:Math.max(e.maxY,t.maxY)}),boundingBoxArea:l,boundingBoxContains:(e,t)=>l(e)>l(t)&&e.minX<=t.minX&&t.maxX<=e.maxX&&e.minY<=t.minY&&t.maxY<=e.maxY,nearestNeighborSort:e=>{for(let t=0;t<e.length-1;t++){const n=e[t].points[e[t].points.length-1];let a=e[t+1],r=n.x-a.points[0].x,o=n.y-a.points[0].y,s=r*r+o*o;for(let i=t+2;i<e.length;i++){const r=e[i],o=n.x-r.points[0].x,l=n.y-r.points[0].y,c=o*o+l*l;c<s&&(e[i]=a,e[t+1]=r,a=r,s=c)}}},traversalWeight:function(e){let t=0;for(let n=0;n<e.length-1;n++){const a=e[n].points,r=e[n+1].points;if(0===a.length||0===r.length)continue;const o=a[a.length-1].x-r[0].x,s=a[a.length-1].y-r[0].y;t+=Math.hypot(o,s)}return t}}}()},function(e,t,n){const a=n(73);EASEL.shapeUtils=function(){const e=function(e,t){const n=t.maxX-t.minX,a=t.maxY-t.minY,r=0===n?1:e.width/n,o=0===a?1:e.height/a;return EASEL.matrix().translatedBy(-(t.minX+t.maxX)/2,-(t.minY+t.maxY)/2).scaledBy(r,o)},t=function(e){const t=e.flipping&&e.flipping.horizontal?-1:1,n=e.flipping&&e.flipping.vertical?-1:1;return EASEL.matrix().scaledBy(t,n).rotatedBy(e.rotation||0).translatedBy(e.center.x,e.center.y)},n=function(n,a){const r=EASEL.pathUtils.pathBoundingBox(n.points),o=EASEL.pathUtils.pathBoundingBox(a),s=e(n,r),i=s.transformedVector({x:o.maxX-o.minX,y:o.maxY-o.minY}),l=s.premultipliedBy(t(n)).transformedPoint({x:(o.maxX+o.minX)/2,y:(o.maxY+o.minY)/2});return EASEL.merge(n,{width:i.x,height:i.y,center:l,points:a})},r=(e,t)=>0===t||t===e.length-1,o=function(e){const t=e[0],n=e[e.length-1];return t.x===n.x&&t.y===n.y},s=(e,t)=>o(e)&&r(e,t);return{boundingBoxMatrix:e,shapeMatrix:t,pathWithTranslatedPoint:function({shape:a,constraint:r,pointType:o,subpathIndex:s,pointIndex:i,delta:l}){const c=EASEL.pathUtils.pathBoundingBox(a.points),p=EASEL.matrix().premultipliedBy(e(a,c)).premultipliedBy(t(a));let u=EASEL.pathUtils.transformedPathPoint(a.points[s][i],p);switch(o){case"anchor":u.x+=l.x,u.y+=l.y;break;case"lh":case"rh":null==u[o]&&(u[o]={x:0,y:0}),u[o].x+=l.x,u[o].y+=l.y,u=function(e,t,n){const a="lh"===t?"rh":"lh";switch(e=EASEL.merge(e),n){case EASEL.pathConstants.constraints.MIRRORED:e[a]={x:-e[t].x,y:-e[t].y};break;case EASEL.pathConstants.constraints.ASYMMETRIC:null==e[a]&&(e[a]={x:0,y:0});var r=EASEL.math.normalize(e[t]),o=EASEL.math.magnitude(e[a]);e[a]={x:-r.x*o,y:-r.y*o}}return e}(u,o,r)}const d=EASEL.pathUtils.transformedPathPoint(u,p.inverse()),h=EASEL.merge(a.points);if(h[s][i]=d,i===h[s].length-1||0===i){u=a.points[s][i];const e=h[s].length-1-i,t=a.points[s][e];u.x===t.x&&u.y===t.y&&(h[s][e]=d)}return n(a,h)},pathWithRemovedPoint:function({shape:e,subpathIndex:t,pointIndex:a}){if([].concat.apply([],e.points).length<2)return null;const r=[];for(let n=0;n<e.points.length;n++){const o=e.points[n];if(n===t){if(o.length>1){const e=o.slice(0,a).concat(o.slice(a+1)),t=o.length-1;0===a&&o[a].x===o[t].x&&o[a].y===o[t].y?e[e.length-1]=e[0]:a===t&&o[a].x===o[0].x&&o[a].y===o[0].y&&(e[0]=e[e.length-1]),r.push(e)}}else r.push(o)}return n(e,r)},pathifyShape:function(e){const t=EASEL.math.BEZIER_MAGIC_NUMBER,n={type:"path"};switch(e.type){case"path":n.points=e.points;break;case"polygon":n.points=[e.points.concat([e.points[0]])];break;case"polyline":n.points=[e.points];break;case"rectangle":var{x:a,y:r}=e.cornerRadius||{x:0,y:0};if(0===a&&0===r)n.points=[[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:0,y:0}]];else{const o=e.width/2,s=e.height/2;a=Math.min(a,o),r=Math.min(r,s),n.points=[[{x:-(o-a),y:-s},{x:o-a,y:-s,rh:{x:t*a,y:0}},{x:o,y:-(s-r),lh:{x:0,y:-t*r}},{x:o,y:s-r,rh:{x:0,y:t*r}},{x:o-a,y:s,lh:{x:t*a,y:0}},{x:-(o-a),y:s,rh:{x:-t*a,y:0}},{x:-o,y:s-r,lh:{x:0,y:t*r}},{x:-o,y:-(s-r),rh:{x:0,y:-t*r}},{x:-(o-a),y:-s,lh:{x:-t*a,y:0}}]]}break;case"ellipse":n.points=[[{x:0,y:1,lh:{x:-t,y:0},rh:{x:t,y:0}},{x:1,y:0,lh:{x:0,y:t},rh:{x:0,y:-t}},{x:0,y:-1,lh:{x:t,y:0},rh:{x:-t,y:0}},{x:-1,y:0,lh:{x:0,y:-t},rh:{x:0,y:t}},{x:0,y:1,lh:{x:-t,y:0},rh:{x:t,y:0}}]];break;case"line":var{point1:o,point2:s}=e;n.center={x:(o.x+s.x)/2,y:(o.y+s.y)/2},n.width=Math.abs(o.x-s.x),n.height=Math.abs(o.y-s.y),n.rotation=0,n.points=[[o,s]]}if(null!=n.points)return EASEL.merge(EASEL.permit(e,"center","width","height","rotation","flipping"),n)},pathWithMirroredPoint:function({shape:e,subpathIndex:t,pointIndex:i}){const l=EASEL.merge(e.points),c=l[t],p=r(c,i)&&!o(c)?a.handlesForTerminalPoint(c,0===i):a.handlesForNonTerminalPoint(c,i);if(c[i]=EASEL.merge(c[i],p),s(e.points[t],i)){c[e.points[t].length-1-i]=c[i]}return n(e,l)},pathWithStraightPoint:function({shape:e,subpathIndex:t,pointIndex:a}){const r=EASEL.merge(e.points);if(r[t][a].lh=r[t][a].rh=null,s(e.points[t],a)){const n=e.points[t].length-1-a;r[t][n]=r[t][a]}return n(e,r)},proFeatures:function(e){let t=[];return"text"===e.type&&(EASEL.fonts[e.font]||t.push({type:"font",name:e.font}),e.textEffect&&"None"!==e.textEffect.name&&t.push({type:"textEffect",name:e.textEffect.name})),e.icon&&e.icon.pro&&t.push({type:"icon",name:e.icon.name}),e.combinedProFeatures&&(t=t.concat(e.combinedProFeatures)),t}}}()},function(e,t){const n=function(){const e={},t=e=>({x:-e.x,y:-e.y}),n=e=>e*(Math.sqrt(2)/2)*EASEL.math.BEZIER_MAGIC_NUMBER;return e.handlesForNonTerminalPoint=function(e,a){const{sub:r,normalize:o,distance:s,scaleTo:i}=EASEL.math,l=0===a||a===e.length-1,c=l?e.length-2:a-1,p=l?1:a+1,u=n(Math.min(s(e[c],e[a]),s(e[p],e[a]))),d=i(o(r(e[c],e[p])),u);return{lh:d,rh:t(d)}},e.handlesForTerminalPoint=function(e,a){const{sub:r,normalize:o,distance:s}=EASEL.math,[i,l]=a?[0,1]:[e.length-1,e.length-2],c=o(r(e[i],e[l])),p=n(s(e[i],e[l])),u={x:p*c.y,y:-p*c.x};return{lh:u,rh:t(u)}},e}();e.exports=n},function(e,t){EASEL.simpleCache=function(){const e={};return(t,n)=>null!=e[t]?e[t]:e[t]=n()}},function(e,t){EASEL.timeProfiling=function(){let e={};const t=()=>e={};return{performance:function(){const n=[];for(let t in e){const a=e[t];for(let e in a){const r=a[e],o=r.timer,s=r.calls,i=o.end().then((n=>({prefix:t,name:e,duration:n,calls:s})));n.push(i)}}return t(),Promise.all(n)},profileDecorator:(e,t)=>function(){console.profile(e);const n=t.apply(null,arguments);return console.profileEnd(e),n},reset:t,timeDecorator:(t,n)=>function(){e[t]=e[t]||{},null==e[t][n.name]?(e[t][n.name]={},e[t][n.name].timer=EASEL.timedEvent(),e[t][n.name].calls=1):(e[t][n.name].timer.resume(),e[t][n.name].calls+=1);const a=n.apply(null,arguments);return e[t][n.name].timer.pause(),a}}}()},function(e,t){EASEL.timedEvent=function(e){null==e&&(e=Date.now());let t=0,n=null,a=null;const r=new Promise((function(e,t){a=e,n=t}));return{pause:function(a){const r=a||Date.now();return null==e?n(new Error("Trying to pause a paused timer")):e<=r?(t=r-e+t,void(e=null)):n(new Error("Trying to pause a timer before it started"))},resume:function(t){const a=t||Date.now();if(null!=e)return n(new Error("Trying to resume a running timer"));e=a},end:function(){return null!=e?n(new Error("Trying to end a running timer")):a(t),r}}}},function(e,t,n){const a=n(16);EASEL.bit=function(e){const t={.5:"1/2",.25:"1/4",.125:"1/8",.0625:"1/16",.03125:"1/32"},n=Math.PI/180;if(!e)return null;const{type:r,width:o,unit:s,tipAngle:i}=e;let l;l="in"===s?null!=t[o]?t[o]:o.toFixed(3):o.toFixed(1);const c=function(){if(null!=i)return`${i}\xb0`},p=function(){if(null!=l)return`${l} ${s}`},u=()=>r===a.v?c():p();return{angleAndDegree:c,inchWidth:e=>{const t=o*EASEL.units.inchesPerUnit(s);if(r===a.v&&null!=e&&e>0){const a=2*e*Math.tan(i*n/2);return Math.min(t,a)}return t},description:u,longDescription:()=>{if(null==r)return u();const e=r!==a.v?r.toLowerCase():r;return`${u()} ${e}`},shortDescription:()=>r===a.v?`${i}\xb0`:l,widthAndUnit:p,explode:()=>e,type:()=>r,radianTipAngle:()=>i*n,degreeTipAngle:()=>i}}},function(e,t){EASEL.tile=function(e){const{offset:t,rect:n,overlapDistance:a}=e;function r(){return{x:n[1].x-n[0].x,y:n[2].y-n[0].y}}return{getRect:function(){return n},getDimensions:r,getOffsetDistance:function(){return t},getOffsetDisplayString:function(){const e=EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState());return`${EASEL.units.convertFromIn(t,e)} ${e}`},formatDimensions:function(){const e=EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState());return`${EASEL.units.convertFromIn(t,e)} ${e} -> ${EASEL.units.convertFromIn(r().y+t,e)}  ${e}`},getPointArrays:function(){return EASEL.paths.fromPointArrays([n])},getOverlapDistance:function(){return a},explode:function(){return e}}}},function(e,t,n){const a=n(80);EASEL.volumeHelper=function(){const e=e=>e.reduce(((e,t)=>EASEL.pathUtils.unionBoundingBoxes(e,function(e){let t,n,a,r;switch(e.type){case"drill":return({x:a,y:r}=e.center),{minX:a,maxX:a,minY:r,maxY:r};case"line":{const{point1:{x:t,y:n},point2:{x:a,y:r}}=e;return{minX:Math.min(t,a),maxX:Math.max(t,a),minY:Math.min(n,r),maxY:Math.max(n,r)}}}({x:a,y:r}=e.center);const{width:o,height:s,rotation:i}=e;switch(i){case void 0:case 0:case Math.PI:n=o/2,t=s/2;break;case Math.PI/2:case 3*Math.PI/2:n=s/2,t=o/2;break;default:{const e=Math.abs(Math.sin(i)),a=Math.abs(Math.cos(i));n=(s*e+o*a)/2,t=(s*a+o*e)/2}}return{minX:a-n,maxX:a+n,minY:r-t,maxY:r+t}}(t.shape))),EASEL.pathUtils.infiniteBox()),t=function(t){const n=e(t);return(n.maxX+n.minX)/2},n=function(t){const n=e(t);return(n.maxY+n.minY)/2},r=function(e,a,r){const o=null!=e.shape.rotation?e.shape.rotation:0;if(0===o||360===o)return a;const s=null!=e.shape.center?e.shape.center:{x:t([e]),y:n([e])};return EASEL.matrix().translatedBy(-s.x,-s.y).rotatedBy(o*r).translatedBy(s.x,s.y).transformedPoint(a)},o=e=>e.filter((e=>"drill"!==e.shape.type));return{boundingBox:e,boundingBoxLeft:t=>e(t).minX,boundingBoxHorizontalCenter:t,boundingBoxRight:t=>e(t).maxX,boundingBoxBottom:t=>e(t).minY,boundingBoxVerticalCenter:n,boundingBoxTop:t=>e(t).maxY,boundingBoxWidth:function(t){if(1===t.length){const{shape:e}=t[0];return"line"===e.type?Math.abs(e.point1.x-e.point2.x):"drill"===e.type?0:e.width}{const n=e(t);return n.maxX-n.minX}},boundingBoxHeight:function(t){if(1===t.length){const{shape:e}=t[0];return"line"===e.type?Math.abs(e.point1.y-e.point2.y):"drill"===e.type?0:e.height}{const n=e(t);return n.maxY-n.minY}},rotatedPoint:(e,t)=>r(e,t,1),segmentsWithOffsets:function(e,t){return function(e,t,n){if("outline"===e.cut.type){const r=n.open();let o=n.closed();return o="text"===e.shape.type?o.simplify(EASEL.pathOffsetter.FILL_TYPE_NON_ZERO):o.simplify(EASEL.pathOffsetter.FILL_TYPE_EVEN_ODD),o=o.offset(a.outlineOffset(e.cut,t)),r.add(o)}return"drill"===e.cut.type?n:n.lighten().simplify()}(e,t,EASEL.polylineGenerator.process(e.shape))},unRotatedPoint:(e,t)=>r(e,t,-1),combinableVolumes:o,combinableVolumeIds:e=>o(e).map((e=>e.id)),isOneDrillHoleSelected:function(e){return 1===e.length&&"drill"===e[0].shape.type},areOnlyDrillHolesSelected:function(e){return e.length>0&&e.length===e.filter((e=>"drill"===e.shape.type)).length},allSelectedShapesMatchingCutDepth:function(e){return e.length>0&&0===e.filter((t=>t.cut.depth!==e[0].cut.depth)).length}}}()},function(e,t){e.exports={outlineOffset:function(e,t){let n;return"inside"===e.outlineStyle?n=-1:"on-path"===e.outlineStyle?n=0:"outside"===e.outlineStyle&&(n=1),n*t/2}}},function(e,t){const n=function(){let e={};return{submit:function(t){t=t||{};const n=EASEL.workpieceStore.getActiveID(),a=EASEL.jobSettingsStore.settings(n),r=EASEL.store.getState();EASEL.bitSelectors.useDetailBit(r)?a.passType=EASEL.walkthroughSelectors.getPassType(r):a.passType="all";const o=Date.now(),s={gcode:t.gcode,workpiece_id:n,workpiece_backend_id:EASEL.workpieceStore.getActiveWorkpiece().backendId,job_settings:JSON.stringify(a),machine_type:EASEL.machineSettingsSelectors.getMachineType(r),spindle_type:EASEL.machineSettingsSelectors.getSpindleType(r),bit_params:JSON.stringify(EASEL.bitSelectors.bitParams(r)),material:EASEL.materialStore.getActiveMaterial().name,material_dimensions:JSON.stringify(EASEL.materialStore.getActiveMaterial().dimensions),interrupted:!1,successful:null,easel_version:EASEL.VERSION,sender_version:EASEL.localSenderVersionStore.getRunningVersionNumber(),firmware_version:t.firmwareVersion,serial_number:t.serialNumber,project_id:EASEL.projectMetadataStore.getID(),includes_pro_features:EASEL.proSelectors.getInUseCarvingProFeatures(r).length>0,was_pro_subscription:EASEL.userSelectors.isProEnabled(o,r),start_time:t.startTime||o};return $.ajax({url:"/carves",method:"POST",data:{carve:s}}).fail((e=>EASEL.stats.trackEvent(EASEL.events.carveSubmitFailed,e.responseText))).done((t=>e=t))},update:function(t){if(e.id){const n=EASEL.store.getState();return t=EASEL.shallowMerge(t,{includes_pro_features:EASEL.proSelectors.getInUseCarvingProFeatures(n).length>0,was_pro_subscription:EASEL.userSelectors.isProEnabled(Date.now(),n)}),$.ajax({url:`/carves/${e.id}`,data:{carve:t},method:"patch",dataType:"json"}).done((()=>{const e=EASEL.carvingInfo.data();e.gcode=null,e.gcodeMetadata=null,EASEL.carvingInfo.data(e)}))}}}}();e.exports=n},function(e,t){const n={withHeaderAndFooter:function(e){const t=EASEL.gcodeGenerator();EASEL.postProcessor.addHeader(EASEL.machineTypeHelper.currentPostProcessor(),t),t.external(e);const n=EASEL.userSelectors.getRapidRetractsEnabled(EASEL.store.getState());return EASEL.postProcessor.addFooter(EASEL.machineTypeHelper.currentPostProcessor(),t,n),t.string()},getTime:function(e){const t=EASEL.gcodeGenerator();return t.external(e),t.time()}};e.exports=n},,,,,,,,,function(e,t,n){n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(67),n(147),n(148),n(149),n(68)},function(e,t){e.exports=function(e){const t=[];let n=[],a={x:0,y:0};const r={x:null,y:null},o={x:null,y:null};let s=null;const i=function(e,t,n,r,o,s){a.rh={x:e-a.x,y:t-a.y},c(o,s),a.lh={x:n-a.x,y:r-a.y},p(n,r)},l=function(e,t,n,r){a.rh={x:2/3*(e-a.x),y:2/3*(t-a.y)},c(n,r),a.lh={x:2/3*(e-a.x),y:2/3*(t-a.y)},u(e,t)};var c=function(e,t){const r={x:e,y:t};n.push(r),a=r,p(null,null),u(null,null)},p=function(e,t){o.x=e,o.y=t},u=function(e,t){r.x=e,r.y=t};const d={M:function(e,a){n.length>1&&t.push(n),n=[],c(e,a),s={x:e,y:a}},Z:function(){s&&c(s.x,s.y),n.length>2&&t.push(n),n=[],s&&c(s.x,s.y)},L:(e,t)=>c(e,t),V:e=>c(a.x,e),H:e=>c(e,a.y),C:i,S:function(e,t,n,r){const s=null!=o.x?2*a.x-o.x:a.x,l=null!=o.y?2*a.y-o.y:a.y;i(s,l,e,t,n,r)},Q:l,T:function(e,t){const n=null!=r.x?2*a.x-r.x:a.x,o=null!=r.y?2*a.y-r.y:a.y;l(n,o,e,t)},A:()=>console.error("Path command error: arc not implemented")};for(const h of EASEL.pathNormalizer.process(e))d[h[0]](...h.slice(1));return n.length>1&&t.push(n),t}},function(e,t){const n={getBraintreeKey:()=>$.ajax({url:"/payments/token"}),subscribeToEaselPro(e,t,n){return $.ajax({url:"/payments/subscribe",method:"POST",data:{payment_method_nonce:e,plan_id:t,address:this.addressToSnakeCase(n)}})},activateAndSubscribeToEaselPro(e,t,n,a){return $.ajax({url:"/payments/activate_and_subscribe",method:"POST",data:{payment_method_nonce:e,plan_id:t,address:this.addressToSnakeCase(n),product_key:a}})},getPaymentInfo:e=>$.ajax({url:`/payments/info.json?include_subscription=${!!e}`,method:"GET"}),updatePaymentInfo(e,t){return $.ajax({url:"/payments/update",method:"PUT",data:{payment_method_nonce:e,address:this.addressToSnakeCase(t)}})},getEaselProPlans:()=>$.ajax({url:"/payments/subscriptions",method:"GET"}),getEaselProPlansSalesTax:e=>$.ajax({url:"/payments/tax_subscriptions",method:"POST",data:{zipCode:e}}),consumeEaselProFreeDay:()=>$.ajax({method:"POST",url:"/payments/consumed_free_day"}),consumeEaselProPurchasedDay:()=>$.ajax({method:"POST",url:"/payments/consumed_purchased_day"}),cancelSubscription:()=>$.ajax({method:"PATCH",url:"/payments/pause_subscription"}),addressToSnakeCase(e){if(null!=e)return{street_address:e.line1,postal_code:e.postalCode,state:e.state,city:e.city,country_code:e.countryCode}},startEaselProTrial:()=>$.ajax({method:"POST",url:"/payments/start_trial"})};e.exports=n},function(e,t){EASEL.tileSelectors=function(){const e=function(e,t){return null==t&&(t=e.workpieces.activeWorkpieceId),e.workpieces.byId[t].tiles},t=function(t,n){const r=e(t,n);if(r.tileSizes&&r.tileSizes.length>0)return r.tileSizes;const o=a(t,n),s=EASEL.unitSelectors.getPreferredUnit(t),i=EASEL.machineSettingsSelectors.getWorkArea(t);return EASEL.tilingCalculator.defaultTileSizes(i,o,s,null)},n=function(e,n){const r=EASEL.machineSettingsSelectors.getWorkArea(e),o=EASEL.materialStore.getActiveMaterial();let s=a(e);const i=t(e,n);let l=0,c=[];return i.forEach((e=>{const t=Math.min(e,o.dimensions.y-l);c.push(EASEL.tile({offset:l,rect:[{x:0,y:l},{x:r.x,y:l},{x:r.x,y:l+t},{x:0,y:l+t}],overlapDistance:s})),l+=e-s})),c},a=function(t,n){return e(t,n).tileOverlap?"in"===t.unit.preferredUnit?1:EASEL.units.convertToUnit(20,"mm","in"):0};return{getAllTiles:n,getFirstTile:function(e){const t=n(e);return t.find((e=>0===e.getOffsetDistance()))||t[0]},getSelectedTile:function(t,n){const a=e(t,n);return a.selectedTile?EASEL.tile(a.selectedTile):null},getTileOverlapDistance:a,isTileSelected:t=>null!=e(t).selectedTile,getTileSizes:t,isFirstTileSelected:t=>{const n=e(t);return null!=n.selectedTile&&n.selectedTile===n[0]}}}(),e.exports=EASEL.tileSelectors},function(e,t){EASEL.createStore=function(){const e=EASEL.redux.bridgeFluxEvents(Redux.createStore(EASEL.redux.reducer,EASEL.defaultState,Redux.applyMiddleware(EASEL.projectUpdatesBroadcaster.reduxBroadcast)));return e.subscribeWithSelector=function(t,n){let a=t(e.getState());return e.subscribe((function(){let r=t(e.getState());EASEL.isEqual(r,a)||(a=r,EASEL.dispatcher.isCurrentlyDispatching()?EASEL.dispatcher.enqueueNotification((()=>n(r))):n(r))}))},e},EASEL.store=EASEL.createStore(),e.exports={store:EASEL.store,createStore:EASEL.createStore}},function(e,t){const n=(a=e=>({id:e.identifier,bitId:e.bit_id,materialId:e.material_id,feedRate:e.feed_rate,plungeRate:e.plunge_rate,depthPerPass:e.depth_per_pass,spindleSpeed:e.spindle_speed,updatedAt:e.updated_at,notes:e.notes,machineProfileId:e.machine_profile_id}),r=e=>({identifier:e.id,bit_id:e.bitId,material_id:e.materialId,feed_rate:e.feedRate,plunge_rate:e.plungeRate,depth_per_pass:e.depthPerPass,spindle_speed:e.spindleSpeed,notes:e.notes,machine_profile_id:e.machineProfileId}),{loadCutSettings:()=>$.ajax({url:"/cut_settings.json",type:"GET",dataType:"json"}).then((e=>e.map(a))),addCutSetting:function(e){const t=r(e);return $.ajax({url:"/cut_settings",type:"POST",dataType:"json",data:{cut_settings:t}}).then((e=>a(e)))},deleteCutSetting:e=>$.ajax({url:`/cut_settings/${e}`,type:"DELETE",dataType:"json"}),updateCutSetting:function(e){const t=r(e);return $.ajax({url:`/cut_settings/${t.identifier}`,method:"PUT",data:{cut_settings:t}}).then((e=>a(e)))}});var a,r;e.exports=n},function(e,t){const n={loadScripts(...e){const t=e.map((e=>{let t,n;return new Promise((function(a,r){"string"===typeof e?t=e:(t=e.src,n=e.id);const o=document.createElement("script");o.async=!1,o.onload=a,o.onerror=r,o.src=t,n&&(o.id=n),document.head.appendChild(o)}))}));return Promise.all(t)}};e.exports=n},function(e,t,n){(function(t){const a=n(46),r=function(){const e={},t=32768,n=32.768,r=e=>e.map((e=>({X:Math.round(e.x*t),Y:Math.round(e.y*t)}))),o=e=>e.map((e=>({x:e.X/t,y:e.Y/t}))),s=function(e){return ClipperLib.JS.Lighten(e,64)},i=function(e,n,a,r,o){const i=r?ClipperLib.EndType.etClosedPolygon:ClipperLib.EndType.etOpenRound;null==o?(o=new ClipperLib.ClipperOffset).MiterLimit=5:o.Clear();const l=new ClipperLib.Paths;return o.AddPaths(e,a,i,r),o.Execute(l,n*t),s(l).filter((e=>e.length>0)).map((e=>e.concat([e[0]])))},l=function(e,t){const n=[];for(const a of e){c(n,{points:a,offset:t,children:[]})}return n},c=function(e,t){for(let n=e.length-1;n>=0;n--)if(u(t,e[n]))t.children.push(e[n]),e.splice(n,1);else if(u(e[n],t))return p(e[n],t);return e.push(t),t},p=function(e,t){let n;for(;null!=(n=e.children.find((e=>u(e,t))));)e=n;for(let a=e.children.length-1;a>=0;a--){const n=e.children[a];u(t,n)&&(t.children.push(n),e.children.splice(a,1))}return e.children.push(t),e},u=function(e,t){switch(a.pointInPolygon([e],t.points[0])){case"ONPATH":return console.log("unexpected on path",t.points[0]),!0;case"INSIDE":return!0}return!1},d=function(e,t,a){const s=new ClipperLib.Clipper;t=t.map(r),t=ClipperLib.JS.Clean(t,n),s.AddPaths(t,ClipperLib.PolyType.ptSubject,!0),a=a.map(r),a=ClipperLib.JS.Clean(a,n),s.AddPaths(a,ClipperLib.PolyType.ptClip,!0);const i=ClipperLib.PolyFillType.pftNonZero,l=ClipperLib.PolyFillType.pftNonZero;return s.Execute(e,t,i,l),t.map(o)},h=function(e,t,a){const s=new ClipperLib.Clipper;t=function(e){if(!(e instanceof Array))return[];if(0===(e=ClipperLib.JS.Clone(e)).length||1===e.length&&0===e[0].length)return e;const t=e.length,n=[];for(let r=0;r<t;r++){var a;const t=e[r],o=t.length;if(0===o)continue;if(o<3){a=t,n.push(a);continue}a=t;let s=t[0],i=1;for(let e=1;e<o;e++)(t[e].X-s.X)*(t[e].X-s.X)+(t[e].Y-s.Y)*(t[e].Y-s.Y)<=1073.741824||(a[i]=t[e],s=t[e],i++);if(i<o&&a.splice(i,o-i),a.length>1){const e=a[a.length-1].Y;for(i=a.length-2;i>0&&e===a[i].Y;)i-=1;i!==a.length-2?(n.push(a.slice(0,i+2)),n.push(a.slice(i+1,a.length))):n.push(a)}}return n}(t=t.map(r)),s.AddPaths(t,ClipperLib.PolyType.ptSubject,!1),a=a.map(r),a=ClipperLib.JS.Clean(a,n),s.AddPaths(a,ClipperLib.PolyType.ptClip,!0);const i=ClipperLib.PolyFillType.pftNonZero,l=ClipperLib.PolyFillType.pftNonZero,c=new ClipperLib.PolyTree;s.Execute(e,c,i,l);return ClipperLib.Clipper.PolyTreeToPaths(c).map(o)};return e.area=e=>ClipperLib.JS.AreaOfPolygon(r(e),t),e.clean=function(e){return e=e.map(r),e=(e=ClipperLib.JS.Clean(e,n)).map(o)},e.lighten=function(e){return e=e.map(r),e=(e=s(e)).map(o)},e.simplify=function(e,t){return null==t&&(t=ClipperLib.PolyFillType.pftNonZero),e=e.map(r),e=(e=ClipperLib.Clipper.SimplifyPolygons(e,t)).map(o)},e.perimeter=e=>ClipperLib.JS.PerimeterOfPath(r(e),!1,t),e.offset=function(e,t,n,a){return e=e.map(r),a&&(e=s(e)),i(e,t,n,a).map(o)},e.offsetArray=function(e,t,n){const a=new ClipperLib.ClipperOffset;a.MiterLimit=5;const l=[];let c=s(e.map(r));for(;n-- >0;){const e=i(c,t,ClipperLib.JoinType.jtRound,!0,a);if(0===e.length)break;l.push(e.map(o)),c=e}return l},e.pathTree=l,e.offsetTree=function(e,t,n){const a=new ClipperLib.ClipperOffset;a.MiterLimit=5;let p=0;const u=l(e,p);let d=s(e.map(r));for(;d.length>0&&p++<n;){const e=i(d,t,ClipperLib.JoinType.jtRound,!0,a);for(const t of e){const e={points:o(t),offset:p,children:[]};c(u,e)===e&&console.error("Expected existing parent after offseting",e.points[0])}d=e}return u},e.add=(e,t)=>d(ClipperLib.ClipType.ctUnion,e,t),e.remove=function(e,t,n){return null==n&&(n=!0),n?d(ClipperLib.ClipType.ctDifference,e,t):h(ClipperLib.ClipType.ctDifference,e,t)},e.intersect=function(e,t,n){return null==n&&(n=!0),n?d(ClipperLib.ClipType.ctIntersection,e,t):h(ClipperLib.ClipType.ctIntersection,e,t)},e.JOIN_TYPE_SQUARE=0,e.JOIN_TYPE_ROUND=1,e.JOIN_TYPE_MITER=2,e.FILL_TYPE_EVEN_ODD=0,e.FILL_TYPE_NON_ZERO=1,e}();e.exports=r,t.EASEL&&(EASEL.pathOffsetter=r)}).call(this,n(12))},function(e,t,n){(function(t){const n=function(e,t,n,a,r,o){null==o&&(o=1e3);const s=e.all().map((e=>e.points)).filter((e=>e.length>0));if(0===s.length)return EASEL.paths();if(null==r){const e=s.map((e=>EASEL.path(e,{offsetDistance:0}))),n=EASEL.pathOffsetter.offsetArray(s,-a,o);for(let t=0;t<n.length;t++)for(const r of n[t])e.push(EASEL.path(r,{offsetDistance:(t+1)*a}));return e.reverse(),EASEL.pathUtils.nearestNeighborSort(e),EASEL.paths(e).withZ(t)}let i=EASEL.pathOffsetter.pathTree(s,0);const l=[];for(const p of i){let e=[p];for(;e.length>0;){const t=e.shift(),n=[t.points];for(const a of t.children)n.push(a.points),e=e.concat(a.children);l.push(n)}}const c=[];for(const p of l){let e=EASEL.pathOffsetter.offsetTree(p,-a,o);for(;e.length>0;){const n=e.shift();for(n.paths=[EASEL.path(n.points).withZ(t)],delete n.points;1===n.children.length;){const e=n.children[0];n.paths.unshift(EASEL.path(e.points).withZ(t)),delete e.points,n.children=e.children}let a=n.paths[0].points;for(let e=1;e<n.paths.length;e++){const t=a[a.length-1];n.paths[e]=n.paths[e].rebaseNear(t,0),a=n.paths[e].points}e=e.concat(n.children),c.unshift(n)}}return EASEL.paths(c.map((e=>{const o=e.offset>0?{offsetDistance:e.offset*a}:{},s=EASEL.ramping.loopIn(e.paths[0].points,t,n,r);return EASEL.path(s.concat(...e.paths.map((e=>e.points))).flat(),o)})))};e.exports=n,t.EASEL&&(EASEL.offsetFill=n)}).call(this,n(12))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){EASEL.constants=(()=>{const e=680/11.2;return{DEFAULT_EDITOR_FRACTION:.6,PRIMARY_NAV_HEIGHT:54,DOUBLE_NAV_FORCE_MAX_WIDTH:1149,DOUBLE_NAV_CONDITIONAL_MAX_WIDTH:1660,DEFAULT_WORKPIECES_HEIGHT:170,HIDDEN_WORKPIECES_HEIGHT:25,TOOLBAR_TOOLTIP_DELAY:500,PIXELS_PER_INCH:e,INCHES_PER_PIXEL:1/e,FOUR_MONTHS:10368e6,EASEL_LOADED_TIMESTAMP:new Date,ENDMILL_PLACED_SHAPE_DEPTH:.4,V_BIT_PLACED_SHAPE_DEPTH:.05,MATERIAL_TEXTURE_SIZE:512,BIT_RAISE_HEIGHT:.5,MIN_TAB_COUNT:1,MAX_TAB_COUNT:256,TAG_NAME_REGEX:/(^[^\s]+(\s+[^\s]+)*$){1,16}/g,TAG_NAME_LENGTH:16,PROJECT_NAME_MAX:150,PROJECT_NAME_ERRORS:{MAX:"Too many characters",MIN:"Must be at least 1 character"}}})()},function(e,t,n){n(91),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(69),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(55),n(70),n(44),n(71),n(45),n(170),n(171),n(172),n(173),n(72),n(74),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(187),n(188),n(189),n(75),n(76),n(190),n(191)},function(e,t){EASEL.events={canceledEaselPro:"Canceled Easel Pro",completedSuccessfully:"Successful Job",completedTutorial:"Completed Tutorial",completedUnsuccessfully:"Unsuccessful Job",machineRunTime:"Machine Run Time",startedJob:"Started Job",startedTrial:"Started Easel Pro Trial",addCutSetting:"Added Cut Setting",answerbotOpened:"AnswerBot Opened",answerbotClosed:"AnswerBot Closed",appliedTextTransformation:"Applied Text Effect Transformation",carveSubmitFailed:"Carve - Failed to Save",clickedMoreFeaturedProjects:"Clicked More in Featured Projects",closedJobStatusModalWithoutStatus:"Completed - Closed Modal",completedJob:"Completed Job",decreasedFeedRate:"Feed Rate Decrease",downloadGCode:"Downloaded G-code",downloadProjectZip:"Downloaded Project Zip",failedWithFeedback:"Failed Job - No Feedback",failedWithoutFeedback:"Failed Job - With Feedback",featuresModalFeatureViewed:"Features Modal - Viewed",featuresModalOpen:"Features Modal - Opened",featuresModalShared:"Features Modal - Shared",fontInstalled:"Font Installed",fontUninstalled:"Font Uninstalled",increasedFeedRate:"Feed Rate Increase",layeringTool:"Layering Tool",loggedIn:"Logged in",machineProfileCreated:"Created Machine Profile",machineProfileEdited:"Edited Machine Profile",machineProfileSelected:"Selected Machine Profile",machineProfileUninstalled:"Uninstalled Machine Profile",menuNavInventablesClicked:"Menu Nav Inventables Click",menuNavProjectsClicked:"Menu Nav Projects Click",menuNavStoreClicked:"Menu Nav Store Click",menuNavVideosClicked:"Menu Nav Videos Click",newUser:"New User",openUserModal:"Open Account Modal",openedFeaturedProject:"Opened Featured Project",probeCancelled:"Cancelled Probe Routine",probeFailed:"Failed Probe Routine",probeStarted:"Started Probe Routine",probeSuccessful:"Successful Probe Routine",projectLabelCreated:"Created Project Label",projectLabelAssigned:"Assigned Project Label to Project",projectLabelEdited:"Edited Project Label",projectLabelFiltered:"Filtered Projects by Project Label",projectLabelDeleted:"Deleted Project Label",redirectedToMachineSettings:"Clicked redirect from General Settings to Machine Settings",resetProjectDefaults:"Reset Project Defaults",saveVersionMismatchError:"Failed Save - Version mismatch",savedProjectDefaults:"Saved Project Defaults",settingsUpdateFailed:"Settings Update Failed",settingsUpdateSuccessful:"Settings Update Successful",showedAccountModal:"Viewed Easel Pro paywall",startedPlaning:"Started Planing",startedSubscription:"Subscribed to Easel Pro",startedTutorial:"Started Tutorial",usedAdditionalCutThroughDepth:"Cut Properties - set additional depth",usedProFeature:"Used Easel Pro Feature",workpieceSaveVersionMismatchError:"Failed Workpiece Save - Version Mismatch"}},function(e,t){EASEL.firmwareUtils={featuresForFirmware(e){for(const t of EASEL.controllers.features)if(t.readyResponse.test(e))return t;return{}}}},function(e,t){EASEL.hasAccessGrant=e=>EASEL.ACCESS_GRANTS.includes(e)},function(e,t){EASEL.info=EASEL.info||{},EASEL.info.isWindows=()=>null!=navigator.userAgent.match(/Windows/),EASEL.info.isMac=()=>null!=navigator.userAgent.match(/Mac/),EASEL.info.isLinux=()=>null!=navigator.userAgent.match(/Linux/),EASEL.info.shouldAutoDetectMachine=()=>null==EASEL.machineSettingsSelectors||!EASEL.machineSettingsSelectors.getManualConnectionPreference(EASEL.store.getState())},function(e,t){EASEL.interval=function(e){let t=null;const n=function(n){clearInterval(t),t=setInterval(e,n)};return{start:n,startNow:function(t){n(t),e()},stop:function(){clearInterval(t),t=null},isRunning:()=>null!=t}}},function(e,t){EASEL.keys={backspace:8,enter:13,esc:27,left:37,up:38,right:39,down:40,delete:46,plus:187,minus:189,zero:48,a:65,c:67,d:68,e:69,i:73,j:74,n:78,o:79,p:80,v:86,x:88,y:89,z:90,semicolon:186,leftSquareBracket:219,rightSquareBracket:221,quote:222}},function(e,t){EASEL.machineType={ALL:"all",SHAPEOKO:"shapeoko",XCARVE:"x-carve",XCARVE_PRO:"x-carve pro",CARVEY:"carvey (grbl)",OTHER_GRBL:"other (grbl)"}},function(e,t){EASEL.machineTypeHelper={description(e){switch(e){case EASEL.machineType.SHAPEOKO:return"Shapeoko (1 or 2)";case EASEL.machineType.XCARVE:return"X-Carve";case EASEL.machineType.XCARVE_PRO:return"X-Carve Pro";case EASEL.machineType.CARVEY:return"Carvey";case EASEL.machineType.OTHER_GRBL:return"Other (grbl)"}},defaultName(e){return e.thirdPartyModel?e.thirdPartyModel:this.description(e.machineType)},currentDescription(){return this.description(EASEL.machineSettingsSelectors.getMachineType(EASEL.store.getState()))},currentWalkthroughType(e){switch(e){case EASEL.machineType.SHAPEOKO:case EASEL.machineType.XCARVE:case EASEL.machineType.XCARVE_PRO:case EASEL.machineType.OTHER_GRBL:return"x-carve";case EASEL.machineType.CARVEY:return"carvey"}},currentPostProcessor(){switch(EASEL.machineSettingsSelectors.getMachineType(EASEL.store.getState())){case EASEL.machineType.SHAPEOKO:case EASEL.machineType.XCARVE:case EASEL.machineType.XCARVE_PRO:case EASEL.machineType.OTHER_GRBL:return"shapeoko";case EASEL.machineType.CARVEY:return"gCarvin"}},currentWasteboardType(){switch(EASEL.machineSettingsSelectors.getMachineType(EASEL.store.getState())){case EASEL.machineType.SHAPEOKO:case EASEL.machineType.XCARVE:case EASEL.machineType.XCARVE_PRO:case EASEL.machineType.OTHER_GRBL:return"shapeoko";case EASEL.machineType.CARVEY:return"carvey"}},currentControllers(){switch(EASEL.machineSettingsSelectors.getMachineType(EASEL.store.getState())){case EASEL.machineType.XCARVE_PRO:return EASEL.hasAccessGrant("xcp_baud_rate_testing")?[EASEL.controllers.grbl_xcp,EASEL.controllers.grbl_xcp_57600_baud]:[EASEL.controllers.grbl_xcp];case EASEL.machineType.SHAPEOKO:case EASEL.machineType.XCARVE:case EASEL.machineType.OTHER_GRBL:return[EASEL.controllers.grbl_09,EASEL.controllers.grbl_08];case EASEL.machineType.CARVEY:return[EASEL.controllers.gCarvin]}},currentIsInventablesMachine(){switch(EASEL.machineSettingsSelectors.getMachineType(EASEL.store.getState())){case EASEL.machineType.SHAPEOKO:case EASEL.machineType.XCARVE:case EASEL.machineType.CARVEY:case EASEL.machineType.XCARVE_PRO:return!0;case EASEL.machineType.OTHER_GRBL:return!1}},supportsSpindleSpeed:(e,t,n)=>e!==EASEL.machineType.CARVEY&&("24v"===t||"other"===t||"xcp-spindle"===t)&&n,supportsMotorLocking:e=>e!==EASEL.machineType.XCARVE_PRO,firmwareVersionForReadyResponse:e=>(()=>{switch(EASEL.machineSettingsSelectors.getMachineType(EASEL.store.getState())){case EASEL.machineType.SHAPEOKO:case EASEL.machineType.XCARVE:case EASEL.machineType.CARVEY:case EASEL.machineType.XCARVE_PRO:case EASEL.machineType.OTHER_GRBL:{let t=e.match(/(.+) \['\$' for help\]/);return t?t[1]:null}}})()||"unknown"}},function(e,t){EASEL.stateMachine=function(){const e={};return function(t){if(null!=e[t])return e[t];const n=e[t]={},a={},r={};n.register=(e,t)=>r[e]=t;const o=e=>console.log(`'${t}': ${e}`),s=function(e){const t={name:e,enter:function(){},exit:function(){}};let n=!1;return t.initial=function(e){return null!=e?n=e:n},t};return n.create=function(e){let n;const i={};let l=null;const c=[];i.addChangeListener=e=>c.push(e),i.getState=()=>l.name,i.triggerEvent=function(e,...t){const n=l[e];if(null!=n){const e=n(...t);if(e)return p(e)}};var p=function(e){if(!a.hasOwnProperty(e))throw new Error(`'${t}': State '${e}' does not exist`);l&&(o(`Exiting state '${l.name}'...`),l.exit()),l=a[e];for(const t of c)t();return o(`Entering state '${l.name}'...`),l.enter()};for(const t in r){const o=r[t],i=a[t]=s(t);o(i,e),i.initial()&&(n=t)}if(null==n)throw new Error(`'${t}': No initial state`);return p(n),i},n}}()},function(e,t){EASEL.string=function(){const e=/[\/\?<>\\:\*\|":]/g,t=/[\x00-\x1f\x80-\x9f]/g,n=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,r=/[\. ]+$/;return{snakeToCamel:function(e){if(null==e)return null;let t="";for(let n of e.toLowerCase().split("_"))t+=n.substring(0,1).toUpperCase()+n.substring(1);return t.substring(0,1).toLowerCase()+t.substring(1)},quote:e=>`\u201c${e}\u201d`,truncate:function(e,t){return e.length<=t?e:e.substring(0,t)+"\u2026"},quantify:function(e,t,n){return 1===e?t:n},reverse:e=>e.split("").reverse().join(""),sanitize:function(o,s){return null==s&&(s=""),o.replace(e,s).replace(t,s).replace(n,s).replace(a,s).replace(r,s).substring(0,255)},escapeAttribute:e=>e.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}()},function(e,t){EASEL.unitParser=function(){const e={},t=new RegExp(/\d*\.\d+|\d+\.?/),n=new RegExp(`([-+]?)*(?:(?:(${t.source})\\s*\\/\\s*(${t.source}))|(${t.source}))\\s*(in|inch|inches|"|mm)?`);return e.parseInputToInches=function(e){const t=e.match(n);if(null!=t){let e,[n,a,r,o,s,i]=t;if(null!=s?e=parseFloat(s):null!=r&&null!=o&&(r=parseFloat(r),o=parseFloat(o),o>0&&(e=r/o)),i=null!=i?EASEL.units.normalizeUnitName(i):EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState()),null!=e)return"-"===a&&(e=-e),e/EASEL.units.unitsPerInch(i)}},e.parseInput=function(e){const t=e.match(n);if(null!=t){const[e,n,a,r,o,s]=t;let i=null!=o?parseFloat(o):parseFloat(a)/parseFloat(r);return"-"===n&&(i=-i),{value:i,unit:s}}return{}},e}()},function(e,t){EASEL.apiHelper={getErrorMessage:function(e){return 0===e.readyState?"Check your network connection.":void 0!==e.responseJSON?e.responseJSON.error||e.responseJSON.errors.join(", "):void 0}}},function(e,t){Array.prototype.groupBy=function(e){const t={};for(let n of this){const a=e(n);t[a]||(t[a]=[]),t[a].push(n)}return t},Array.prototype.partition=function(e){const t=[],n=[];for(let a of this)e(a)?t.push(a):n.push(a);return[t,n]},Array.prototype.shuffle=function(){const e=[...this];for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}},function(e,t){EASEL.crossOriginResources={getUrlToRequestWithOriginHeader:function(e){return e.includes("?")?`${e}&easel-cors-2`:`${e}?easel-cors-2`}}},function(e,t){EASEL.debounce=function(e,t){let n=null;return function(...a){return null!=n&&clearTimeout(n),n=setTimeout((function(){return e(...a),n=null}),t)}}},function(e,t){EASEL.exportGCode=function(e,t=null,n=null){const a=function(e){return new Blob([e],{type:"text/plain;charset=utf-8"})},r=function(e){const t=null!=e?`_${e}`:"";let n=EASEL.workpieceStore.getActiveWorkpiece().name||EASEL.projectMetadataStore.getName();return n+=t,n.match(/\.nc$/)||(n+=".nc"),n},o=function(t){EASEL.stats.trackEvent(EASEL.events.downloadGCode,{"Easel Pro Content":Array.from(EASEL.proSelectors.getInUseProFeatures(EASEL.store.getState())).map((e=>e.label)),source:e||"unknown",requested:t})},s=function(e){if(e.length>1&&null===t){const t=function(){const t=a(e[0].gcode),n=a(e[1].gcode),s=new JSZip;s.file(r("roughing"),t),s.file(r("detail"),n),s.generateAsync({type:"blob"}).then((e=>{const t=EASEL.workpieceStore.getActiveWorkpiece().name||EASEL.projectMetadataStore.getName();saveAs(e,`${t}.zip`),o("ZIP")})).catch((function(){EASEL.oops("There was a problem downloading your g-code")}))};null!=window.JSZip?t():(n=t,$.ajax({url:EASEL.assets.javascripts.zip,dataType:"script",async:!0}).done((()=>{n()})).fail((()=>{EASEL.oops("There was a problem generating the .zip file")})))}else if(e.length>0){const n=e["detail"===t?1:0].gcode;null==n?EASEL.alert(EASEL.stringConstants.alerts.nothingCarvable.title,EASEL.stringConstants.alerts.nothingCarvable.message):(saveAs(a(n),r(t)),o(t||"g-code"))}var n},i=EASEL.store.getState();if(!EASEL.userSelectors.authorizedToCarve(Date.now(),i))EASEL.stats.trackEvent(EASEL.events.showedAccountModal,{proRequired:!0,source:"Download G-Code"}),EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalAccountTab());else{const e=EASEL.externalGcodeSelectors.getGcode(i),t=EASEL.internalGcodeSelectors.getGcodePasses(i),a=EASEL.threeDPrototypeSelectors.getMesh(i);null!=n?s([{gcode:n}]):null!=e?s([{gcode:e}]):null!=t&&t.length>0?s(t):null!=a?EASEL.flux.events.emit("generate-3d-toolpaths","all",((...e)=>{s(e)})):EASEL.gcodeForVolumes.process({style:"all",done:(...e)=>{s(e)}})}}},function(e,t){EASEL.externalFontLoader={loadFontsInSavedProjectData:e=>new Promise((function(t,n){try{let a;const r=function(){const e={},t=[];return{loadForVolume:function(n){const a=n.shape.font;if(e[a])e[a].push(n);else{let r,o;e[a]=[n],o=(r=EASEL.fonts[a])?EASEL.fontManager.load(a,r.opentypePath).then((function(){return r.loaded=!0,{name:a,font:r,success:!0}})).catch((()=>({name:a,success:!1}))):EASEL.googleFontManager.loadFont(a).then((e=>({name:a,font:e,success:!0}))).catch((()=>({name:a,success:!1}))),t.push(o)}},finish:()=>Promise.all(t).then((function(t){const n=t.filter((e=>e.success)),a=t.filter((e=>!e.success)).map((e=>e.name)),r=a.reduce(((t,n)=>t.concat(e[n])),[]);return{loadedFonts:n,failedFontNames:a,failedVolumes:r}}))}}();for(let t of e.workpieces){const e=t.saved_data;for(a of Array.from(e.volumes))"text"===a.shape.type&&r.loadForVolume(a)}return r.finish().then((function({loadedFonts:n,failedFontNames:r,failedVolumes:o}){EASEL.store.dispatch(EASEL.fontActionCreators.setFontData(n));const s=n.map((e=>e.name));EASEL.store.dispatch(EASEL.fontActionCreators.addFontsToToolbar(s));const i={};for(a of o){const e=EASEL.shapeUpdater.fallbackToPath(a.shape);null!=e?a.shape=e:(i[a.shape.font]=!0,a.shape=EASEL.shallowMerge(a.shape,{font:EASEL.fontConstants.defaultFontName}))}const l=r.filter((e=>!i[e])),c=Object.keys(i);return l.length>0&&EASEL.store.dispatch(EASEL.fontActionCreators.setFontErrors({errorType:"volume_fonts",fontNames:l})),c.length>0&&EASEL.store.dispatch(EASEL.fontActionCreators.setFontErrors({errorType:"volume_fonts_without_fallback",fontNames:c})),t(e)})).catch((e=>n(e)))}catch(a){return n(a)}}))}},function(e,t){EASEL.filepickerUtils=function(){const e=e=>new Promise((function(t,n){const a=$.get("/file_picker",{handle:e});return a.fail(n),a.done((function(e){const n={signature:e.signature,policy:e.policy},a=filestack.init(e.api_key,n);return t({filestackClient:a,security:n})}))})),t=t=>e().then((({filestackClient:e})=>{const n=function(e){const t=(e=e||{}).path||"temporary/",n=e.access||"private";return{accept:e.accept||"image/*",imageMax:[2048,1536],maxFiles:e.maxFiles||1,fromSources:["local_file_system","imagesearch","url","webcam"],disableTransformer:!0,storeTo:{location:"s3",path:t,access:n}}}(t);return e.pick(n)}));return{pick:n=>t(n).then((t=>function(t){const{handle:n}=t;return e(n).then((function({security:e}){return{url:`${t.url}?policy=${e.policy}&signature=${e.signature}`,mimetype:t.mimetype}}))}(t.filesUploaded[0]))),pickAndStore:e=>t(e).then((e=>e.filesUploaded.map((e=>({url:`https://s3.amazonaws.com/${e.container}/${encodeURIComponent(e.key)}`,mimetype:e.mimetype})))))}}()},function(e,t){EASEL.gcodeChecker=function(){const e={},t={G4:"G4",G04:"G04",G54:"G54",G0:"G0",G00:"G00",G1:"G1",G01:"G01",G94:"G94",G20:"G20",G21:"G21",G90:"G90",G17:"G17",G61:"G61",M0:"M0",M00:"M00",M1:"M1",M01:"M01",M2:"M2",M02:"M02",M30:"M30",M7:"M7",M07:"M07",M8:"M8",M08:"M08",M9:"M9",M09:"M09",M3:"M3",M03:"M03",M4:"M4",M04:"M04",M5:"M5",M05:"M05"},n={X:"X",Y:"Y",Z:"Z",F:"F",T:"T",S:"S",P:"P"};var a=function(e,t){const{x:n,y:a,z:r}=e,{minX:o,maxX:s,minY:i,maxY:l,minZ:c,maxZ:p,radius:u}=t;if(n<o||s<n||a<i||l<a||r<c||p<r)return!1;if(null==u)return!0;const d=(o+s)/2,h=(i+l)/2,E=(s-o)/2,m=(l-i)/2;return o+u<=n&&n<=s-u||i+u<=a&&a<=l-u||Math.hypot(Math.abs(n-d)-(E-u),Math.abs(a-h)-(m-u))<=u};return e.isSyntaxValid=function(e){let a;for(EASEL.gcodeExpressions.gcodeWord.lastIndex=0;a=EASEL.gcodeExpressions.gcodeWord.exec(e);){const e=a[0],r=a[1];if(!n[r]&&!t[e])return!1}return!0},e.isLineLengthValid=e=>e.length<=79,e.isPositionInside=a,e.isPositionOutside=(e,t)=>!a(e,t),e}()},function(e,t){EASEL.gcodeExpressions={gcodeWord:new RegExp(/([a-zA-Z])([+-]?(?:\d*\.\d+|\d+\.?))/g),xyz:new RegExp(/(?:G[0]?[01]|^)(?:X([+-]?(?:\d*\.\d+|\d+\.?)))?(?:Y([+-]?(?:\d*\.\d+|\d+\.?)))?(?:Z([+-]?(?:\d*\.\d+|\d+\.?)))?/),command:new RegExp(/(G)(?:0?)([0-9]+).*?/),lineEndingComment:new RegExp(/;.*/),parentheticalComment:new RegExp(/\([^\)]*\)/g)}},function(e,t){EASEL.gcodeParser=function(e){const t={};let n=1/25.4,a=null;null==e&&(e={}),e={x:null!=e.x?e.x:0,y:null!=e.y?e.y:0,z:null!=e.z?e.z:1};const r=[/M6(?:$|[^\d])/,/G40(?:$|[^\d])/];return t.format=function(e){e=e.replace(/G0[0-9]/gi,(e=>e.replace(/0/,"")));for(const t of r)e=e.replace(t,"");return(e=(e=e.replace(EASEL.gcodeExpressions.lineEndingComment,"")).replace(EASEL.gcodeExpressions.parentheticalComment,"")).replace(/\s+/g,"")},t.positionFromLine=function(t){t.match(/G21/)&&(n=1/25.4),t.match(/G20/)&&(n=1);const a=t.match(EASEL.gcodeExpressions.xyz);return a&&(null!=a[1]&&(e.x=n*parseFloat(a[1])),null!=a[2]&&(e.y=n*parseFloat(a[2])),null!=a[3]&&(e.z=n*parseFloat(a[3]))),{x:e.x,y:e.y,z:e.z}},t.commandFromLine=function(e){const t=e.match(EASEL.gcodeExpressions.command);return t&&null!=t[1]&&null!=t[2]&&(a=t[1]+t[2]),a},t}},function(e,t){EASEL.gcodeValidationLoader=function(){const e={},t="G-code validation failed";return e.validate=function(e){let{gcodeString:n,checkSyntax:a,done:r,update:o,initialPosition:s,keepInRects:i,keepOutRects:l}=e;if(null==n)return"function"===typeof r?r():void 0;i=i||[],l=l||[],s=s||{x:0,y:0,z:1},null==a&&(a=!0);const c=n.split("\n"),p=EASEL.loader(),u=EASEL.gcodeParser(s),d=[],h=Math.ceil(c.length/10);for(let E=0;E<c.length;E+=h)p.register(`Validating gcode (${E} / ${c.length})`,(function(e,n){const r=(e,t,a)=>n({lineNumber:e+1,gcodeLine:c[e],title:t,message:a}),o=Math.min(E+h,c.length);for(let s=E;s<o;s++){const e=u.format(c[s]);if(""===e)continue;if(!EASEL.gcodeChecker.isLineLengthValid(e))return r(s,t,"The file contains lines exceeding the maximum character count.");if(a&&!EASEL.hasAccessGrant("allow_all_gcode")&&!EASEL.gcodeChecker.isSyntaxValid(e))return r(s,t,"The file contains invalid G-code syntax.");const n=u.positionFromLine(e);for(const t of i)if(!EASEL.gcodeChecker.isPositionInside(n,t))return r(s,"Design too large","Your design exceeds the work area bounds. Make your design smaller and try again.");let o=!1;for(const t of l)if(!EASEL.gcodeChecker.isPositionOutside(n,t)){if(!(0===n.x&&0===n.y&&n.z>0))return r(s,"Design overlaps clamp","Part of your design is under the Smart Clamp and cannot be carved. Move your design away from the Smart Clamp and try again.");o=!0}o||d.push(e)}return e()}));return p.load({update:o,done:()=>"function"===typeof r&&r(d.join("\n")),serial:!0})},e}()},function(e,t){EASEL.grblStatusParser=function(){const e={};let t=null,n=null;const a=function(e){const n=e.match(/Pin:([01])([01])([01])\|([01])\|([01])([01])([01])([01])[,>]/);var a;null!=n&&(o("x","1"===(a=n)[3]),o("y","1"===a[2]),o("z","1"===a[1]),o("clamp","0"===a[4]),o("button","1"===a[5]),o("door","1"===a[6]));const r=e.match(/Pn:(\w*)/);if(null!=r)return function(e){const n=(null!=e?e[1]:void 0)||"";o("x",n.includes("X")),o("y",n.includes("Y")),o("z",n.includes("Z")),o("button",n.includes("S")),t===EASEL.machineType.CARVEY?(o("clamp",n.includes("P")),o("door",n.includes("D"))):t===EASEL.machineType.XCARVE?(o("probe",n.includes("P")),o("hold",n.includes("H")),o("soft_reset",n.includes("R"))):t===EASEL.machineType.XCARVE_PRO&&(o("door",n.includes("D")),o("probe",n.includes("P")),o("hold",n.includes("H")),o("soft_reset",n.includes("R")))}(r)};var r=function(e){t=e,n={x:!1,y:!1,z:!1,button:!1},t===EASEL.machineType.CARVEY?(n.clamp=!1,n.door=!1):t===EASEL.machineType.XCARVE?(n.probe=!1,n.hold=!1,n.soft_reset=!1):t===EASEL.machineType.XCARVE_PRO&&(n.door=!1,n.probe=!1,n.hold=!1,n.soft_reset=!1)},o=(e,t)=>n[e]=t;return e.isStatusMessage=e=>null!=e.match(/^<.*>$/),e.machineSwitchStates=function(e,t){return t?(r(t),a(e),n):null},e}()},function(e,t){EASEL.gridGenerator=function({unit:e,minLabelStepSize:t,minLineStepSize:n,boundingBox:{minX:a,maxX:r,minY:o,maxY:s},isProUser:i}){let l=null,c=null,p=null;const u=function(e,t){for(let n of e)if(n>=t)return n;return e[e.length-1]},d=e=>Math.abs(Math.round(e/c)-e/c)<.01;switch(e){case"in":l=1,c=u([1,2,6],t),p=u(i?[1/32,1/8,1]:[1],n);break;case"mm":l=25.4;var h=1/25.4;c=u([10*h,50*h,100*h],t),p=c>10*h?10*h:u(i?[1*h,5*h,10*h]:[10*h],n)}return{mapXLines:e=>(()=>{const t=[];for(let n=Math.ceil(a/p);n<=Math.floor(r/p);n++){const a=p*n;t.push(e(a,d(a)))}return t})(),mapYLines:e=>(()=>{const t=[];for(let n=Math.ceil(o/p);n<=Math.floor(s/p);n++){const a=p*n;t.push(e(a,d(a)))}return t})(),mapXLabels:e=>(()=>{const t=[];for(let n=Math.ceil(a/c);n<=Math.floor(r/c);n++){const a=c*n;t.push(e(a,a*l))}return t})(),mapYLabels:e=>(()=>{const t=[];for(let n=Math.ceil(o/c);n<=Math.floor(s/c);n++){const a=c*n;t.push(e(a,a*l))}return t})()}}},function(e,t){var n,a=(n="Function",function(e){return toString.call(e)==="[object "+n+"]"});function r(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function o(e,t,n,s){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;if("undefined"!==typeof e.explode&&"undefined"!==typeof t.explode)return o(e.explode(),t.explode());var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&function(e,t,n,s){var i=toString.call(e);if(i!==toString.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return SymbolProto.valueOf.call(e)===SymbolProto.valueOf.call(t)}var l="[object Array]"===i;if(!l){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,p=t.constructor;if(c!==p&&!(a(c)&&c instanceof c&&a(p)&&p instanceof p)&&"constructor"in e&&"constructor"in t)return!1}s=s||[];var u=(n=n||[]).length;for(;u--;)if(n[u]===e)return s[u]===t;if(n.push(e),s.push(t),l){if((u=e.length)!==t.length)return!1;for(;u--;)if(!o(e[u],t[u],n,s))return!1}else{var d,h=Object.keys(e);if(u=h.length,Object.keys(t).length!==u)return!1;for(;u--;)if(!r(t,d=h[u])||!o(e[d],t[d],n,s))return!1}return n.pop(),s.pop(),!0}(e,t,n,s)}EASEL.isEqual=function(e,t){return o(e,t)}},function(e,t){null==EASEL.utility&&(EASEL.utility={}),EASEL.utility.jobSettingsCalculator=function(e){const{bitKeys:t}=EASEL.jobSettingsConstants,n=EASEL.jobSettingsStore.settings(),a=EASEL.store.getState(),r=EASEL.materialStore.getActiveMaterial(),o=e===t.bit?EASEL.bitSelectors.bit(a):EASEL.bitSelectors.detailBit(a),s=e===t.bit?n.bit:n.detailBit;s.spindleSpeed=s.spindleSpeed||EASEL.machineSettingsSelectors.getSpindleRPM(a);const i=null!=s.depthPerPass||null!=s.feedRate||null!=s.plungeRate||null!=s.fillAngle||null!=s.spindleSpeed,l=EASEL.machineSettingsSelectors.getMachineProfileId(a),c=EASEL.service.cutSettingService.findSavedCustomSettings(r,o,l),p=EASEL.userSelectors.isProEnabled(Date.now(),EASEL.store.getState());return{deniedAccessToSavedSettings:()=>!s.useCustom&&null!=c&&!p,isUsingLoadedSavedSettings:()=>!s.useCustom&&null!=c&&p,savedSettings:()=>c,getSettings:function(){const e=EASEL.service.cutSettingService.recommend(EASEL.machineSettingsSelectors.getMachineSettingsState(a),r,o),t=p&&c||e,n={};if(s.useCustom){if(i){for(let e in s)n[e]=null!=s[e]?s[e]:t[e];return n}return t}return t||null}}}},function(e,t){EASEL.layerThickness=function(){const e=function(e,t){const n=t[0];return"top"===n.relativeTo?-1*n.bottomZ:"bottom"===n.relativeTo?e-n.bottomZ:void 0},t=function(t,n){const a=e(t,n);return 2===n.length?t-a:t-2*a};return{thicknessToDepths:function(e,t,n){const a=[];if("top"===t[0]?a[0]=-1*n:a[0]=e-n,2===t.length)"top"===t[1]?a[1]=-1*e:a[1]=0;else{const r=e-2*n;"top"===t[1]?a[1]=-1*(n+r):a[1]=n,"top"===t[2]?a[2]=-1*e:a[2]=0}return a},outerLayerThickness:e,innerLayerThickness:t,validate:(n,a)=>e(n,a)>=0&&t(n,a)>=0}}()},function(e,t){EASEL.legacyCutSettings={Acrylic:{depthPerPass:"0.02",cutFeed:"25"},Aluminum:{depthPerPass:"0.003",cutFeed:"5"},Bamboo:{depthPerPass:"0.028",cutFeed:"30"},Birch:{depthPerPass:"0.028",cutFeed:"30"},Bubinga:{depthPerPass:"0.045",cutFeed:"28"},Copper:{depthPerPass:"0.015",cutFeed:"10"},HDPE:{depthPerPass:"0.04",cutFeed:"15"},Linoleum:{depthPerPass:"0.05",cutFeed:"30"},Maple:{depthPerPass:"0.028",cutFeed:"28"},MDF:{depthPerPass:"0.0625",cutFeed:"40"},PVC:{depthPerPass:"0.05",cutFeed:"30"},Walnut:{depthPerPass:"0.04",cutFeed:"32"}}},function(e,t,n){const a=n(34),r=n(27);EASEL.legacyProjectUpdater=function(){const e=680/11.2;return{bringDesignUpToDate:function(t,n){if(null==t&&(t={}),null!=t.objects){const r=t.objects.map((t=>(null!=t.inchX&&null!=t.inchY||(t=a.fabricJsonToDataObject(t,{originY:11.2,pixelsPerInch:e})),t)));t=r.map((t=>a.dataObjectToVolume(t,{pixelsPerInch:e,materialThickness:n.dimensions.z}))).filter((e=>null!=e))}return t},bringMaterialUpToDate:function(e){let t;if(null==e)return{name:r.defaultMaterialName,dimensions:{x:12,y:12,z:.5},depthPerPass:"0.028",cutFeed:"30"};const n=EASEL.merge(e);return t={Birch:"Birch Plywood",Maple:"Hard Maple",PVC:"Expanded PVC",HDPE:"Two-Color HDPE",Acrylic:"Cast Acrylic"}[e.name],t&&(n.name=t),null!=e.cut_feed&&(n.cutFeed=e.cut_feed,delete n.cut_feed),null!=e.depth_per_pass&&(n.depthPerPass=e.depth_per_pass,delete n.depth_per_pass),n},bringBitParamsUpToDate:function(e){if(null!=e&&e.bit_size&&e.detail_bit_size){const t=EASEL.unitParser.parseInput(e.bit_size),n=EASEL.unitParser.parseInput(e.detail_bit_size);return{bit:{width:t.value,unit:t.unit},detailBit:{width:n.value,unit:n.unit},useDetailBit:e.use_detail_bit}}},bringBitIdUpToDate:function(e,t){if(null!=e.id)return e;let n="other-bit";if(t!==EASEL.machineType.CARVEY&&"in"===e.unit)switch(parseFloat(e.width)){case.25:n="bit-one-fourth-in";break;case.125:n="bit-one-eighth-in";break;case.0625:n="bit-one-sixteenth-in";break;case.03125:n="bit-one-thirty-second-in"}return EASEL.merge(EASEL.merge(e),{id:n})},bringJobSettingsUpToDate:function(e,t,n,a,r){const o=EASEL.userSelectors.isProSubscriber(Date.now(),EASEL.store.getState());return null==(e=e||function(e){const t=EASEL.legacyCutSettings[e.name];if((null!=t?t.cutFeed:void 0)!==e.cutFeed||(null!=t?t.depthPerPass:void 0)!==e.depthPerPass)return{feedRate:parseFloat(e.cutFeed),depthPerPass:parseFloat(e.depthPerPass),useCustom:!0}}(n)||EASEL.merge(EASEL.service.cutSettingService.recommend(t,n,a),{useCustom:null})).bit&&(e.bit={useCustom:e.useCustom,feedRate:e.feedRate,depthPerPass:e.depthPerPass,rampingAngle:o?20:null},null!=e.plungeRate&&(e.bit.plungeRate=e.plungeRate),(null!=a?a.useDetailBit:void 0)&&(e.detailBit=EASEL.merge(e.bit)),delete e.useCustom,delete e.plungeRate,delete e.feedRate,delete e.depthPerPass),null!=e.vBitFlatAreaStepOver&&(e.vBitDetailStepOver=e.vBitFlatAreaStepOver,delete e.vBitFlatAreaStepOver),EASEL.merge((e=>({stepOver:parseFloat(null!=e?e.stepover:void 0)||.4,safetyHeight:parseFloat(null!=e?e.safety_height:void 0)||.15}))(r),e)}}}()},function(e,t){EASEL.loader=function(){let e,t,n,a;const r={},o=[];let s=0;const i=()=>"function"===typeof e&&e(),l=e=>new Promise(e.callback.bind(r)).then((()=>u(e))).catch((function(t){return d(e,t),Promise.reject(t)}));var c=function(e){let t=Promise.resolve();for(let n of e)(e=>{t=t.then((()=>new Promise(setTimeout))).then((()=>l(e)))})(n);return t},p=e=>Promise.all(e.map((e=>l(e)))),u=function(e){e.status="loaded",s++,a&&a(e.description,s,o.length)},d=function(e,t){e.status="failed","function"===typeof n&&n(t)};return r.register=function(e,t){return o.push({callback:t,description:e,status:"pending"}),r},r.load=function(r){null==r&&(r={}),({update:a,done:t,error:n,always:e}=r),s=0;return(r.serial?c(o):p(o)).then((()=>"function"===typeof t&&t())).catch((function(e){return i(),Promise.reject(e)})).then(i)},r.pendingTasks=()=>o.filter((e=>"pending"===e.status)),r},EASEL.loader.group=function(){const e={};return t=>e[t]||(e[t]=EASEL.loader())}()},function(e,t){EASEL.machineStateUtils={isDoorDefinitelyOpen:function(){const e=EASEL.machineStateStore.getFeatures();if(e&&e.states&&e.states.doorOpen){let t=e.states.doorOpen;const n=EASEL.machineStateStore.getState(),a=EASEL.machineStateStore.getSubstate();return t.state.test(n)&&(null==t.substate||t.substate.test(a))}},isLocked:()=>"alarm"===EASEL.machineStateStore.getState()}},function(e,t){EASEL.permit=function(e,...t){const n={};for(let a in e){const r=e[a];t.includes(a)&&(n[a]=r)}return n}},function(e,t){EASEL.profiler=function(){const e={};let t=[],n=0;var a=function(){t=[]};return e.time=function(e,a){n+=1;const r={description:e,indentation:n};t.push(r);const o=new Date,s=a(),i=new Date;return r.duration=i-o,n-=1,{result:s,duration:r.duration}},e.report=function(){for(let e of t)console.log(`${Array(e.indentation).join("  ")}${e.duration} ms: ${e.description}`);a()},e.reset=a,e}()},function(e,t){EASEL.projectDataInitializer=(()=>{const e=["canvas","material","machine","work_area","bit_params","job_settings","selections"],t=e=>(void 0!==e&&""!==e||(e=null),JSON.parse(e)),n=e=>e.material=EASEL.legacyProjectUpdater.bringMaterialUpToDate(t(e.material)),a=e=>e.machine=t(e.machine),r=e=>{e.bitParams=t(e.bit_params)||EASEL.legacyProjectUpdater.bringBitParamsUpToDate(e.machine)||{bit:{id:"INVENTABLES_BLACK_BIT",type:"Straight cut",width:.125,unit:"in"},detailBit:{id:"INVENTABLES_BLUE_BIT",type:"Upcut",width:.0625,unit:"in"},useDetailBit:!1};const n=EASEL.machineSettingsSelectors.getMachineType(EASEL.store.getState());e.bitParams.bit=EASEL.legacyProjectUpdater.bringBitIdUpToDate(e.bitParams.bit,n),e.bitParams.detailBit&&(e.bitParams.detailBit=EASEL.legacyProjectUpdater.bringBitIdUpToDate(e.bitParams.detailBit,n))},o=e=>e.selections=t(e.selections),s=e=>{const n={machineType:EASEL.machineSettingsSelectors.getMachineType(EASEL.store.getState()),spindleType:EASEL.machineSettingsSelectors.getSpindleType(EASEL.store.getState()),spindleRPM:EASEL.machineSettingsSelectors.getSpindleRPM(EASEL.store.getState())};e.job_settings=EASEL.legacyProjectUpdater.bringJobSettingsUpToDate(t(e.job_settings),n,e.material,e.bitParams,e.machine)},i=e=>{e.volumes=EASEL.legacyProjectUpdater.bringDesignUpToDate(t(e.canvas),e.material),delete e.canvas};return{initialize:l=>{l.workpieces=l.workpieces.filter((e=>null!=e.saved_data));for(const p of l.workpieces){const l=p.saved_data=JSON.parse(p.saved_data);for(const t of e)l[t]=JSON.stringify(l[t]);(c=l).work_area=t(c.work_area),n(l),a(l),r(l),o(l),s(l),i(l)}var c}}})()},function(e,t){EASEL.shapeBuilder={pathPointsToShape(e){if(0===e.length)return null;const t=EASEL.pathUtils.pathBoundingBox(e),n={x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2};return{type:"path",center:{x:n.x,y:n.y},width:t.maxX-t.minX,height:t.maxY-t.minY,rotation:0,points:e,flipping:{horizontal:!1,vertical:!1}}}}},function(e,t){EASEL.sleep=function(){let e=null;const t=function(){e=$("<video/>").attr("width","10").attr("height","10").css({position:"absolute",top:"-10px",left:"-10px"}).appendTo($(document.body)),$("<source/>").attr("src",EASEL.assets.videos.sleep.mp4).attr("type","video/mp4").appendTo(e),$("<source/>").attr("src",EASEL.assets.videos.sleep.ogv).attr("type","video/ogg").appendTo(e)};return{prevent:function(){null==e&&t(),e.attr("loop","loop"),e.get(0).play().catch((e=>console.warn(e)))},allow:function(){null==e&&t(),e.removeAttr("loop"),e.get(0).pause()}}}()},function(e,t){EASEL.smartClampConstants=(()=>{const e=e=>e/25.4;return{KEEP_AWAY:.5,LENGTH:e(79),WIDTH:e(26),OFFSET:e(22.25),FILLET:e(4),HEIGHT:e(12)}})()},function(e,t){EASEL.snappingUtils={snapXY({point:e,testPoints:t,threshold:n}){const a={x:null,y:null},r={x:1/0,y:1/0},o=EASEL.merge({},e);for(const s of t)for(const t of["x","y"]){const i=Math.abs(s[t]-e[t]);i<n&&i<r[t]&&(r[t]=i,a[t]=s,o[t]=s[t])}return[o,a.x,a.y]}}},function(e,t){EASEL.stopwatch=function(e,t){null==t&&(t=Date);const n={},a=EASEL.storageMixin(`stopwatch:${e}`,{}),r=()=>{const e=a.get();return e?e.elapsed:0},o=()=>{const e=a.get();return e?e.startTime:null};return n.start=function(){let e;const n=r(),s=null!=(e=o())?e:t.now();return a.set({startTime:s,elapsed:n})},n.stop=function(){let e=r();const n=o();return null==n||(e+=t.now()-n,a.set({startTime:null,elapsed:e})),e},n.reset=()=>a.set({startTime:null,elapsed:0}),n}},function(e,t){EASEL.stringConstants={alerts:{invalidDepthError:{title:"An erroneous tool path was generated below the wasteboard.",message:"An error report has been sent to Inventables for investigation. You may try making small adjustments to the positioning or size of your design. If this issue persists, please contact the Inventables Customer Success team at 1-312-775-7009 or help@inventables.com."},noObjectsToCarve:{title:"There is nothing to carve",message:"There are no objects in your design, so there are no tool paths to show."},nothingCarvable:{title:"There is nothing to carve",message:"There are no objects in your design that can be carved with your current settings."},homingFailed:{title:"Homing Failed",message:e=>{let t="Make sure clamps and material are not blocking the path in any way.";return e===EASEL.machineType.CARVEY&&(t+=" Check to make sure none of the clamps are hanging off the back edge of the work area table, which moves during operation and can hit the back wall of the machine. Also, double check that no large debris is underneath the work area table that may prevent it from moving properly during operation."),t}}}}},function(e,t){EASEL.subscriber=function(){const e=[],t=function(t){e.push(t)},n=function(t){for(let n of e)n(t)};return{subscribe:t,notify:n,applyTo:function(e,a){e[`on${a[0].toUpperCase()}${a.slice(1)}`]=t,e[a]=n}}}},function(e,t){EASEL.svgClosestPointOnPath=(e,t)=>{let n,a=e.getTotalLength(),r=1/0,o=Math.max(6,Math.floor(a/10));for(let u=0;u<a;u+=o){const a=e.getPointAtLength(u);let o=Math.hypot(a.x-t.x,a.y-t.y);o<r&&(r=o,n=u)}let s,i,l=n-o,c=n+o;for(;Math.abs(l-c)>.75;){s=(l+n)/2,i=(c+n)/2;const a=e.getPointAtLength(s),o=Math.hypot(a.x-t.x,a.y-t.y);let p,u;o<r?(c=i,r=o,n=s):(p=e.getPointAtLength(i),(u=Math.hypot(p.x-t.x,p.y-t.y)<r)?(l=s,r=u,n=i):(l=s,c=i))}const p=e.getPointAtLength(n);return{x:p.x,y:p.y}}},function(e,t){EASEL.svgColorToFraction=function(e){const t={black:0,white:1};let n,a,r;if(null==e)return 0;if(t[e=e.toLowerCase()])return t[e];const o=e.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/),s=e.match(/^#([a-f\d])([a-f\d])([a-f\d])$/),i=e.match(/^rgb\(\s*([\d]+)%\s*,\s*([\d]+)%\s*,\s*([\d]+)%\s*\)$/),l=e.match(/^rgb\(\s*([\d]+)\s*,\s*([\d]+)\s*,\s*([\d]+)\s*\)$/);if(o)a=o,n=16,r=1/255;else if(s)a=s,n=16,r=17/255;else if(i)a=i,n=10,r=.01;else{if(!l)return 0;a=l,n=10,r=1/255}return parseInt(a[1],n)*r}},function(e,t){EASEL.svgPathBuilder=function(){const e={x:0,y:0},t=e=>["M",e.x,e.y],n=function(n){const a=[];for(let l of n){let n=null;for(let c of l)null!=n?a.push((r=n,o=n.rh,s=c.lh,i=c,null==o&&(o=e),null==s&&(s=e),["C",r.x+o.x,r.y+o.y,i.x+s.x,i.y+s.y,i.x,i.y])):a.push(t(c)),n=c}var r,o,s,i;return a};return{components:n,string:e=>n(e).map((e=>e.join(" "))).join(" ")}}()},function(e,t){EASEL.tabPointGenerator={process:e=>{const t=[],{cut:n}=e,a=EASEL.volumeHelper.segmentsWithOffsets(e,EASEL.bitHelper.strokeSizeInches(e.cut.depth));if(a.any())if(n.tabs&&n.tabs.length===n.tabCount)for(let r of n.tabs)t.push({center:EASEL.volumeHelper.unRotatedPoint(e,a.closestPointTo(EASEL.volumeHelper.rotatedPoint(e,r.center)))});else{const r=[];if(n.tabs&&n.tabs.length>0){const t=EASEL.tabPointGenerator.locateTabsOnPath(a,n.tabs.length).map((t=>({center:EASEL.volumeHelper.unRotatedPoint(e,t)})));n.tabs.forEach((e=>{0===t.filter((t=>EASEL.isEqual(e,t))).length&&r.push(e)}))}const o=EASEL.tabPointGenerator.locateTabsOnPath(a,n.tabCount).map((t=>({center:EASEL.volumeHelper.unRotatedPoint(e,t)})));o.sort(((e,t)=>{const n=Math.min(...r.map((t=>EASEL.math.distance(e.center,t.center))));return Math.min(...r.map((e=>EASEL.math.distance(t.center,e.center))))-n})),t.push(...[...r,...o].slice(0,n.tabCount))}return t},locateTabsOnPath:(e,t)=>{let n,a=0,r=0;const o=[];for(n of e.all())a+=n.perimeter();const s=a/t;for(n of e.all()){let e=0,a=n.points[e],i=n.points[e+1];for(;o.length<t&&e<n.points.length-1;){const t=0===o.length?s/Math.PI:s;let l=EASEL.math.distance(a,i);if(r+l>t){let e=EASEL.math.moveToward(a,i,t-r);o.push(e),r=0,a=e}else r+=l,e+=1,a=i,i=n.points[e+1]}}return o}}},function(e,t){EASEL.textEffects=function(){const e={p1:{x:0,y:1},c1:{x:1/3,y:1},c2:{x:2/3,y:1},p2:{x:1,y:1}},t={p1:{x:0,y:0},c1:{x:1/3,y:0},c2:{x:2/3,y:0},p2:{x:1,y:0}},n={p1:{x:0,y:1},c1:{x:1/3,y:3/4},c2:{x:2/3,y:3/4},p2:{x:1,y:1}},a={p1:{x:0,y:0},c1:{x:1/3,y:1/4},c2:{x:2/3,y:1/4},p2:{x:1,y:0}},r={p1:{x:0,y:3/4},c1:{x:1/4,y:1},c2:{x:3/4,y:1},p2:{x:1,y:3/4}},o={p1:{x:0,y:1/4},c1:{x:1/4,y:0},c2:{x:3/4,y:0},p2:{x:1,y:1/4}},s={none:{name:"None"},concave:{name:"Concave",bezier:{top:n,bottom:a}},concaveBot:{name:"Concave Bottom",bezier:{top:e,bottom:a}},concaveTop:{name:"Concave Top",bezier:{top:n,bottom:t}},convex:{name:"Convex",bezier:{top:r,bottom:o}},convexBot:{name:"Convex Bottom",bezier:{top:e,bottom:o}},convexTop:{name:"Convex Top",bezier:{top:r,bottom:t}},wavy:{name:"Wavy",bezier:{top:{p1:{x:0,y:2/3},c1:{x:1/3,y:2/3},c2:{x:2/3,y:1},p2:{x:1,y:1}},bottom:{p1:{x:0,y:0},c1:{x:1/3,y:0},c2:{x:2/3,y:1/3},p2:{x:1,y:1/3}}}},fish:{name:"Fish",bezier:{top:{p1:{x:0,y:.8},c1:{x:1/3,y:4/3},c2:{x:2/3,y:.5},p2:{x:1,y:.8}},bottom:{p1:{x:0,y:.2},c1:{x:1/3,y:-1/3},c2:{x:2/3,y:.5},p2:{x:1,y:.2}}}}};for(let i in s){s[i].key=i}return s}()},function(e,t,n){const a=n(186);EASEL.textHelper=function(){const e=function(e,t,n){const a=e.split(/\r?\n/),r=1.3*n*a.length,o=EASEL.fontManager.getFont(t);return{width:Math.max.apply(null,a.map((e=>o.getWidth(e,n)))),height:r,lines:a,font:o}},t=function(t,n){const{font:r,text:o,width:s,height:i,textEffect:l}=t;let{pathPoints:c,box:p,baselines:u}=function(t,n,r){const{width:o,height:s,lines:i,font:l}=e(n,r,1);if(0===o)return{};const{baselineOffsetFraction:c}=EASEL.fontSelectors.getFontData(EASEL.store.getState(),r);let p=[],u=[],d=-c;for(let e=i.length-1;e>=0;e--){const t=i[e];p=p.concat(l.getPathPoints(t,0,d)),u.push([{x:0,y:d},{x:o,y:d}]),d-=1.3}const h=EASEL.matrix().scaledBy(1,-1);if(p=EASEL.pathUtils.transformedPath(p,h),u=EASEL.pathUtils.transformedPath(u,h),null!=t&&t.bezier){const e=EASEL.pathUtils.pathBoundingBox(p),n=e.maxX-e.minX,r=e.maxY-e.minY,o=EASEL.matrix().translatedBy(-e.minX,-e.minY).scaledBy(1/n,1/r),s=EASEL.matrix().scaledBy(n,r).translatedBy(e.minX,e.minY),i=a(t.bezier);p=EASEL.pathUtils.transformedPath(p,o),p=EASEL.pathUtils.transformedPath(p,i),p=EASEL.pathUtils.transformedPath(p,s)}return{pathPoints:p,box:{width:o,height:s},baselines:u}}(l,o,r);if(null==c)return null;const d=EASEL.matrix().translatedBy(-p.width/2,-p.height/2).scaledBy(s/p.width,i/p.height).premultipliedBy(n);c=EASEL.pathUtils.transformedPath(c,d);const h=EASEL.shapeBuilder.pathPointsToShape(c);return null!=h&&(h.baselines=EASEL.pathUtils.transformedPath(u,d)),h};return{measure:function(...t){const n=t[0],{text:a}=n,r=n.font,o=n.fontSize||80;let{width:s,height:i,font:l}=e(a,r,o);return s=s||l.getWidth("i",o),{width:s,height:i}},textShapeToPathShape:e=>t(e,EASEL.shapeUtils.shapeMatrix(e)),textShapeToCanvasShape:function(e){const{x:n,y:a}=e.center;return t(e,EASEL.matrix().translatedBy(n,a))}}}()},function(e,t){e.exports=function({bottom:e,top:t}){null==e&&(e={p1:{x:0,y:0},c1:{x:1/3,y:0},c2:{x:2/3,y:0},p2:{x:1,y:0}}),null==t&&(t={p1:{x:0,y:1},c1:{x:1/3,y:1},c2:{x:2/3,y:1},p2:{x:1,y:1}});const n=function({p1:e,c1:t,p2:n,c2:a},r){const o=1-r,s=Math.pow(o,2),i=Math.pow(o,3),l=Math.pow(r,2),c=Math.pow(r,3);return{x:i*e.x+3*s*r*t.x+3*o*l*a.x+c*n.x,y:i*e.y+3*s*r*t.y+3*o*l*a.y+c*n.y}},a=function({x:a,y:r}){return((e,t,n)=>({x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}))(n(e,a),n(t,a),r)};return{transformedPoint:a,transformedPath:e=>e.map((e=>a(e)))}}},function(e,t){EASEL.utility=EASEL.utility||{},EASEL.utility.tickGenerator=function({materialThicknessInches:e,preferredUnitsPerInch:t,unit:n}){const a=1e-4;return{generate:function(){let r,o,s;"in"===n?(s=1,o=1,e<.2?o=32:e<.4?o=16:e<.77?o=8:e<1.1?o=4:e<3&&(o=2)):(s=10,o=1,e<.11811?(s=1,o=2):e<.393701?(s=1,o=1):e<.787402?(s=2,o=1):e<1.9685&&(s=5,o=1));const i=[];let l=r=0;for(;r<=e*t+a;){const a=l/o/t;i.push({html:(c=l,p=o,"in"===n?`${function(e,t){const n=function(e,t){return 0===e?[0]:t%e===0?[1,t/e]:t%2===0&&e%2===0?[e/2,t/2]:[e,t]}(e,t);return 1===n.length||1===n[1]?`${n[0]}`:`<sup>${n[0]}</sup>/<sub>${n[1]}</sub>`}(c,p)}&Prime;`:"mm"===n?`${function(e,t){return`${(e/t).toFixed(t>1?1:0)}`}(c,p)}&nbsp;mm`:void 0),value:a,percentage:a/e*100}),l+=s,r+=s/o}var c,p;const u=i[i.length-1];return Math.abs(u.value-e)<a&&(u.value=e,u.percentage=100),i}}}},function(e,t){EASEL.tilingCalculator={MIN_TILE_SIZE:2,maxTileSize:e=>e.reduce(((e,t)=>e+t),0)-(e.length-1)*EASEL.tilingCalculator.MIN_TILE_SIZE,rebalanceArray:(e,t,n)=>{const a=EASEL.tilingCalculator.MIN_TILE_SIZE,r=EASEL.tilingCalculator.maxTileSize(e);let o=e.slice(0);const s=o[t];o[t]=n;let i=s-n;const l=[],c={};for(l.push(t);0!==i&&l.length>0;){let n,s=l.shift();if(c[s]=!0,s!==t)if(i<0)n=Math.min(o[s]-a,Math.abs(i)),o[s]-=n,i+=n;else{if(!(i>0))break;n=Math.min(r-o[s],Math.abs(i)),o[s]+=n,i-=n}s<e.length-1&&!c[s+1]&&l.push(s+1),s>0&&!c[s-1]&&l.push(s-1)}return 0!==i&&console.error("tilingCalculator.rebalanceTileSizes could not consolidate delta"),o},roundedTileSizeY:(e,t)=>{let n;switch(e){case"in":n=Math.floor(t);break;case"mm":n=20*Math.floor(EASEL.units.convertFromIn(t,e)/20),n=EASEL.units.convertToUnit(n,e,"in");break;default:n=t}return n>0?n:t},defaultTileSizes:(e,t,n,a)=>{const r=EASEL.materialStore.getActiveMaterial();if(null==a){const n=EASEL.materialStore.getActiveMaterial(),r=Math.max(e.y-t,EASEL.tilingCalculator.MIN_TILE_SIZE);a=1+Math.ceil((n.dimensions.y-e.y)/r)}if(a<=1)return[];const o=r.dimensions.y+t*(a-1),s=EASEL.tilingCalculator.roundedTileSizeY(n,o/a),i=o-s*(a-1);return new Array(a-1).fill(s).concat(i)},numTileOptions:(e,t,n)=>{const a=Math.ceil(n/(6-e));let r=[];for(let o=Math.max(2,Math.ceil(n/(t.y-e)));o<=a;o++)r.push(o);return r}}},function(e,t){EASEL.utility=EASEL.utility||{},EASEL.utility.timeFormatter={durationFromMinutes:function(e){const t=Math.round(e);if(0===t)return"<1 min";const n=Math.floor(t/60),a=t%60,r=[];return 0!==n&&r.push(`${n.toFixed(0)}h`),0!==a&&r.push(`${a.toFixed(0)}min`),r.join(" ")},timeLeft:(e,t=null)=>{const n=t?moment(t):moment(),a=moment.duration(moment(e)-n);if(!(a.hours()<=0&&a.minutes()<=0&&a.seconds()<=0)){if(a.days()>=1){const e=Math.round(a.asDays());return 1===e?"1 day":`${e} days`}if(1===a.hours())return"1 hour";if(a.hours()<1&&1===a.minutes())return"1 minute";if(a.hours()<1&&a.minutes()<1&&a.seconds()>0)return"0 minutes";if(a.hours()<1)return`${a.minutes()} minutes`;{const e=a.minutes()>55?1:0;return`${a.hours()+e} hours`}}}}},function(e,t){EASEL.unicodeCharacters={macCommandKey:"\u2318",shiftKey:"\u21e7"}},function(e,t){EASEL.uniq=function(e){const t=[];for(let n=0;n<e.length;n++)t.includes(e[n])||t.push(e[n]);return t}},function(e,t){EASEL.operation=function(){const e=(e,t,n)=>({callback:e,weight:t,name:n,substeps:[],substepsWeight:0});let t;const n={};let a,r=e((function(){}),1,"TOTAL"),o=1,s=0;var i=function(e,a){var l;return null!=e.name&&(l=e.name,null!=n[l]?n[l].resume():n[l]=EASEL.timedEvent()),r=e,Promise.resolve(e.callback(a)).then((function(n){return r=void 0,delete e.callback,0===e.substeps.length&&(s+=o*e.weight),Promise.resolve(null!=t&&t(s)).then((()=>n))})).then((function(t){const a=o;o*=e.weight/e.substepsWeight;let r=Promise.resolve(t);for(let n of e.substeps)r=r.then((e=>i(n,e)));return delete e.substeps,r.then((function(t){return o=a,null!=e.name&&function(e){n[e].pause()}(e.name),t}))}))};return{addStep:function(t,n){let a,o=null;null!=n?({name:o,weight:a}=t):"function"===typeof t?(n=t,o=null,a=1):({name:o,weight:a,callback:n}=t),a||(a=1),o||(o=null),r.substeps.push(e(n,a,o)),r.substepsWeight+=a},run:function(e){return null==e&&(e={}),({update:t}=e),null!=a?a:a=i(r)},performance:function(){const e=[];for(let t in n)e.push(n[t].end().then((e=>({name:t,duration:e}))));return Promise.all(e).then((e=>{const t={};for(let{name:n,duration:a}of e)t[n]=a;return t}))}}}},function(e,t,n){EASEL.taskExecutor=function(e){const t={};return e.onmessage=function(e){let n,a;const{jobId:r,type:o,params:s,maxRunTime:i}=e.data;isFinite(i)&&(a=performance.now()+i,n=!1);const l=t[o]&&t[o](s);if(!l)throw new Error({"Unknown message type":+o});return l.run({update:e=>{if(null!=a&&performance.now()>a)return n=!0,Promise.reject();self.postMessage({type:"progress-updated",jobId:r,payload:{progress:e}})}}).then((e=>{self.postMessage({type:"done",jobId:r,payload:e})})).then((function(){l.performance().then((function(e){0})),EASEL.timeProfiling.performance().then((function(e){0}))})).catch((function(e){n?self.postMessage({type:"canceled",jobId:r}):self.postMessage({type:"error",jobId:r,payload:{message:e.message,stack:e.stack}})}))},{on:(e,n)=>{t[e]=n}}}},function(e,t,n){n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(77),n(210),n(211),n(212),n(214),n(215),n(216),n(217),n(218),n(78),n(219),n(79),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(94),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(95),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320)},function(e,t){EASEL.component={},EASEL.component.DOM={},EASEL.component.utils={},EASEL.propTypes={},null==EASEL.reducers&&(EASEL.reducers={})},function(e,t){EASEL.editorConstants={actionTypes:{SELECT:"SELECT",DESELECT:"DESELECT",START_EDITING:"START_EDITING",CANCEL_EDITING:"CANCEL_EDITING",SELECT_PATH_POINT:"SELECT_PATH_POINT",START_NEW_PATH_MODE:"START_NEW_PATH_MODE",CANCEL_NEW_PATH_MODE:"CANCEL_NEW_PATH_MODE",SET_NEW_PATH_POINTS:"SET_NEW_PATH_POINTS",SAVE_ANCHOR_POSITION:"SAVE_ANCHOR_POSITION",SET_LAST_OBJECT_PROPERTY_TAB:"SET_LAST_OBJECT_PROPERTY_TAB",SET_ANCHOR_SHAPES_ENABLED:"SET_ANCHOR_SHAPES_ENABLED"}}},function(e,t){EASEL.interactionConstants={DOUBLE_CLICK_TIME:300,SNAP_DISTANCE:.0625}},function(e,t){EASEL.jobSettingsConstants={bitKeys:{bit:"bit",detailBit:"detailBit"},actionTypes:{CLEAR_CUSTOM_CUT_SETTINGS:"CLEAR_CUSTOM_CUT_SETTINGS",SET_FILL_ANGLE:"SET_FILL_ANGLE",SET_RAMPING_ANGLE:"SET_RAMPING_ANGLE",SET_FEED_RATE:"SET_FEED_RATE",SET_PLUNGE_RATE:"SET_PLUNGE_RATE",SET_DEPTH_PER_PASS:"SET_DEPTH_PER_PASS",SET_SPINDLE_SPEED:"SET_SPINDLE_SPEED",SET_STEP_OVER:"SET_STEP_OVER",SET_PROFILE_STEP_OVER:"SET_PROFILE_STEP_OVER",SET_SAFETY_HEIGHT:"SET_SAFETY_HEIGHT",USE_CUSTOM:"USE_CUSTOM",SET_HAS_REPEATED_CARVE:"CAN_REPEAT_CARVE",SET_PASS_TYPE:"SET_PASS_TYPE",SET_USING_LAST_HOME:"SET_USING_LAST_HOME",SET_V_BIT_DETAIL_STEP_OVER:"SET_V_BIT_DETAIL_STEP_OVER"}}},function(e,t){EASEL.labelConstants={actionTypes:{ASSIGN_LABELS:"ASSIGN_LABELS",UNASSIGN_LABELS:"UNASSIGN_LABELS",SET_USER_LABELS:"SET_USER_LABELS",GET_LABELS:"GET_LABELS",CREATE_LABEL:"CREATE_LABEL",UPDATE_LABEL:"UPDATE_LABEL",DELETE_LABEL:"DELETE_LABEL"}}},function(e,t){EASEL.localSenderVersionConstants={actionTypes:{SUPPORTED_VERSIONS:"SUPPORTED_VERSIONS",RUNNING_VERSION_NUMBER:"RUNNING_VERSION_NUMBER",RUNNING_VERSION_ABILITIES:"RUNNING_VERSION_ABILITIES",DISCONNECTED:"DISCONNECTED"}}},function(e,t){EASEL.machineConfigurationConstants={actionTypes:{SET_ACCESSORIES_ENABLED:"SET_ACCESSORIES_ENABLED",SET_MACHINE_TYPE:"SET_MACHINE_TYPE",SET_THIRD_PARTY_MODEL:"SET_THIRD_PARTY_MODEL",SET_COM_PORT:"SET_COM_PORT",SET_AUTOMATIC_SPINDLE_CONTROL:"SET_AUTOMATIC_SPINDLE_CONTROL",SET_SPINDLE_RPM:"SET_SPINDLE_RPM",SET_MANUAL_CONNECTION_PREFERENCE:"SET_MANUAL_CONNECTION_PREFERENCE",SET_NEW_TOOLPATH_ARCH_ENABLED:"SET_NEW_TOOLPATH_ARCH_ENABLED",SET_PROBE_PREFERENCES:"SET_PROBE_PREFERENCES",SET_PROBE_ENABLED:"SET_PROBE_ENABLED",RESET_DEFAULT_PROBE_PREFERENCES:"RESET_DEFAULT_PROBE_PREFERENCES",SET_LOADED_MACHINE_CONFIGURATION:"SET_LOADED_MACHINE_CONFIGURATION",SAVE_MACHINE_CONFIGURATION:"SAVE_MACHINE_CONFIGURATION",SET_KEYBOARD_CONTROL_ENABLED:"SET_KEYBOARD_CONTROL_ENABLED",SET_REPEAT_CARVING_ENABLED:"SET_REPEAT_CARVING_ENABLED"},rpm:{CARVEY:12e3},recommendedSettings:{[EASEL.machineType.CARVEY]:{11:.01,122:30}},probeDefaults:{probeDistance:3.1,probeThickness:.59,probeRate:5,probeRetractDistance:.25,units:"in"},probeLimits:{probeDistance:4}}},function(e,t){EASEL.machineStateConstants={actionTypes:{REPORT_AVAILABLE_PORTS:"REPORT_AVAILABLE_PORTS",REPORT_CONNECTION_STATE:"REPORT_CONNECTION_STATE",REPORT_STATE:"REPORT_STATE",REPORT_POSITION:"REPORT_POSITION",REPORT_SETTING:"REPORT_SETTING",CLEAR_SETTINGS:"CLEAR_SETTINGS",CLEAR_EVENTS:"CLEAR_EVENTS",LOG_EVENT:"LOG_EVENT",OPEN_INSPECTOR:"OPEN_INSPECTOR",CLOSE_INSPECTOR:"CLOSE_INSPECTOR",REPORT_PROBE_STATUS:"REPORT_PROBE_STATUS",REPORT_PROBE_RESULT:"REPORT_PROBE_RESULT",REPORT_SPINDLE_CURRENT:"REPORT_SPINDLE_CURRENT",RESET_PROBE_RESULT:"RESET_PROBE_RESULT",RESET_SPINDLE_CURRENTS:"RESET_SPINDLE_CURRENTS",UPLOADING_FIRMWARE:"UPLOADING_FIRMWARE",DONE_UPLOADING_FIRMWARE:"DONE_UPLOADING_FIRMWARE",RECEIVE_FIRMWARE_PROGRESS:"RECEIVE_FIRMWARE_PROGRESS",RECEIVE_FIRMWARE_VERSION:"RECEIVE_FIRMWARE_VERSION",RECEIVE_BUILD_INFO_STRING:"RECEIVE_BUILD_INFO_STRING",RECEIVE_SERIAL_NUMBER:"RECEIVE_SERIAL_NUMBER",RECEIVE_Z_AXIS_OFFSET:"RECEIVE_Z_AXIS_OFFSET"}}},function(e,t){EASEL.materialConstants={actionTypes:{LOAD_MATERIAL:"LOAD_MATERIAL",SELECT_MATERIAL:"SELECT_MATERIAL",SET_COLOR_NAME:"SET_COLOR_NAME",SET_COLOR_CUSTOM:"SET_COLOR_CUSTOM",SET_LAYER_COLOR:"SET_LAYER_COLOR",SET_LAYER_DEPTHS:"SET_LAYER_DEPTHS",SET_MATERIAL_DIMENSIONS:"SET_MATERIAL_DIMENSIONS",SET_MATERIALS:"SET_MATERIALS",ADD_MATERIAL:"ADD_MATERIAL",DELETE_MATERIAL:"DELETE_MATERIAL",UPDATE_MATERIAL:"UPDATE_MATERIAL"}}},function(e,t){EASEL.pathConstants={constraints:{MIRRORED:"MIRRORED",ASYMMETRIC:"ASYMMETRIC"}}},function(e,t){EASEL.projectMetadataConstants={actionTypes:{SET_PROJECT_ID:"SET_PROJECT_ID",SET_PROJECT_LINK_TOKEN:"SET_PROJECT_LINK_TOKEN",SET_PROJECT_NAME:"SET_PROJECT_NAME",SET_PROJECT_INVENTABLES_URL:"SET_PROJECT_INVENTABLES_URL",SET_READ_ONLY:"SET_READ_ONLY",SET_PROJECT_SHARED:"SET_PROJECT_SHARED",SET_PROJECT_LIVE:"SET_PROJECT_LIVE",SET_PROJECT_CONTAINS_IMPORTED_SVG:"SET_PROJECT_CONTAINS_IMPORTED_SVG",SET_CARVE_COUNT:"SET_CARVE_COUNT",SET_PROJECT_STARRED:"SET_PROJECT_STARRED",SET_PROJECT_OWNER:"SET_PROJECT_OWNER",SET_ASSIGNED_LABELS:"SET_ASSIGNED_LABELS",SET_CREATED_AT:"SET_CREATED_AT",SET_UPDATED_AT:"SET_UPDATED_AT"}}},function(e,t){EASEL.undoConstants={actionTypes:{UNDO:"UNDO",REDO:"REDO",BEGIN_GROUP:"BEGIN_GROUP",END_GROUP:"END_GROUP",REOPEN_GROUP:"REOPEN_GROUP",CLEAR_UNDOS:"CLEAR_UNDOS"}}},function(e,t){EASEL.volumeConstants={actionTypes:{ADD:"ADD",REMOVE:"REMOVE",TRANSLATE:"TRANSLATE",TRANSLATE_TAB:"TRANSLATE_TAB",SCALE:"SCALE",FLIP:"FLIP",ROTATE:"ROTATE",IMPORT_VOLUMES:"IMPORT_VOLUMES",ALIGN:"ALIGN",MOVE_FORWARD:"MOVE_FORWARD",MOVE_BACKWARD:"MOVE_BACKWARD",BRING_TO_FRONT:"BRING_TO_FRONT",SEND_TO_BACK:"SEND_TO_BACK",SET_TEXT:"SET_TEXT",SET_FONT:"SET_FONT",SET_CUT_PARAMS:"SET_CUT_PARAMS",COMPLETE_DEPTH_CHANGE:"COMPLETE_DEPTH_CHANGE",SET_SHAPE_PARAMS:"SET_SHAPE_PARAMS",SET_PROPORTION_LOCK_ON_VOLUMES:"SET_PROPORTION_LOCK_ON_VOLUMES",SET_LOCKED:"SET_LOCKED",SET_TEXT_EFFECTS:"SET_TEXT_EFFECTS"}}},function(e,t){EASEL.websocketMessageConstants={actionTypes:{REPORT_WEBSOCKET_MESSAGE:"REPORT_WEBSOCKET_MESSAGE",CLEAR_WEBSOCKET_MESSAGES:"CLEAR_WEBSOCKET_MESSAGES"}}},function(e,t){EASEL.workpieceConstants={actionTypes:{ADD_WORKPIECE:"ADD_WORKPIECE",DUPLICATE_WORKPIECE:"DUPLICATE_WORKPIECE",SHOW_WORKPIECE:"SHOW_WORKPIECE",UPDATE_WORKPIECE:"UPDATE_WORKPIECE",DELETE_WORKPIECE:"DELETE_WORKPIECE",REORDER_WORKPIECES:"REORDER_WORKPIECES"}}},function(e,t,n){const a=n(16);EASEL.bitHelper=function(){const e=function(e){return null==e?null:EASEL.bit(e).inchWidth()};return{bitFacets:function(e,t){return t.find((t=>t.id===e.id))||e},bitSizeInches:()=>e(EASEL.bitSelectors.bit(EASEL.store.getState())),bitTipAngleDegrees:function(){const e=EASEL.bitSelectors.bit(EASEL.store.getState());return null==e?null:EASEL.bit(e).degreeTipAngle()},bitTipAngleRadians:function(){const e=EASEL.bitSelectors.bit(EASEL.store.getState());return null==e?null:EASEL.bit(e).radianTipAngle()},descriptionForBit:e=>EASEL.bit(e).description(),detailBitSizeInches:()=>e(EASEL.bitSelectors.detailBit(EASEL.store.getState())),inchWidth:e,shortDescriptionForBit:e=>EASEL.bit(e).shortDescription(),strokeSizeInches:e=>EASEL.bit(EASEL.bitSelectors.strokeBit(EASEL.store.getState())).inchWidth(e),bitTypeInfo:function(e){switch(e){case a.straight:return{supertype:"End Mills",type:e,image:EASEL.assets.images.straightFlute,title:"What is a straight cut bit?",tooltip:"Straight cut bits have vertical flutes that do not pull material up or down. They are ideal for materials that split easily like plywood and bamboo."};case a.upcut:return{supertype:"End Mills",type:e,image:EASEL.assets.images.spiralUpFlute,title:"What is an upcut bit?",tooltip:"Upcut bits pull chips up and away from the material. These bits leave a rougher finish at the top, but a smooth finish at the bottom of a pocket. They are ideal for plastics like HDPE and acrylic."};case a.downcut:return{supertype:"End Mills",type:e,image:EASEL.assets.images.downCutIcon,title:"What is a downcut bit?",tooltip:"The downcut tip design creates a cleaner edge on the topside of the sheet when cutting through materials. Downcut bits do particularly well on materials like wood and plywood that can splinter when pulled up."};case a.compression:return{supertype:"End Mills",type:e,image:EASEL.assets.images.compressionCutIcon,title:"What is a compression bit?",tooltip:"Compression bit is a combination of upcup and downcut bits. These bits create smooth surface on both the bottom and top of the material milled."};case a.v:return{supertype:"V Bits",type:e,image:EASEL.assets.images.vCutIcon,title:"What is a V bit?",tooltip:"V bits carve finer details than flat bits. They generate carves that are narrow at the deepest part of the carve (created by the tip of the bit) and wider at the top of the material."};default:return{supertype:"End Mills",type:e}}},supertypeInfo:function(e){switch(e){case"End Mills":return{otherBitType:"other-bit",pro:!1};case"V Bits":return{otherBitType:"other-v-bit",pro:!0}}}}}()},function(e,t){EASEL.carvingInfo=function(){const e={},t=function(e,t){let n=JSON.stringify(t);try{return localStorage.setItem(e,n)}catch(a){try{return n=JSON.stringify(`; ${t.length} bytes, too long to save`),localStorage.setItem(e,n)}catch(r){}}},n=function(e){try{return JSON.parse(localStorage.getItem(e))}catch(t){return}},a=function(e){if(null==e)return n("carvingProject");try{return localStorage.setItem("carvingProject",JSON.stringify(e))}catch(a){return null!=e.imported_gcode&&((e=EASEL.merge(e)).imported_gcode=`(${e.imported_gcode.length} bytes removed)`),t("carvingProject",e)}},r=function(e){return null!=e?t("carvingJobSettings",e):n("carvingJobSettings")},o=function(e){return null!=e?t("carvingTimeEstimate",e):n("carvingTimeEstimate")},s=function(e){return null!=e?t("carvingPercentComplete",e):n("carvingPercentComplete")},i=function(e){return null!=e?t("carvingIsUsingDustShoe",e):n("carvingIsUsingDustShoe")},l=function(e){return null!=e?t("carvingIsExternalGcode",e):n("carvingIsExternalGcode")},c=function(e){return null!=e?t("carvingMachineProfileId",e):n("carvingMachineProfileId")};return e.data=function(e){if(null==e)return{project:a(),jobSettings:r(),tile:n("carvingSelectedTile"),gcode:n("carvingGcode"),gcodeMetadata:n("carvingGcodeMetadata"),parentGcode:n("carvingParentGcode"),timeEstimate:o(),percentComplete:s(),isUsingDustShoe:i(),isExternalGcode:l(),machineProfileId:c(),postCarveModal:n("postCarveModal")};var p,u,d,h;a(e.project),r(e.jobSettings),h=e.tile,t("carvingSelectedTile",h),d=e.gcode,t("carvingGcode",d),(u=e.gcodeMetadata)&&(u={gcodeBodyStartLineIndex:u.gcodeBodyStartLineIndex,gcodeBodyEndLineIndex:u.gcodeBodyEndLineIndex,gcodeUnits:u.gcodeUnits}),t("carvingGcodeMetadata",u),(e=>{t("carvingParentGcode",e)})(e.parentGcode),o(e.timeEstimate),s(0),i(e.isUsingDustShoe),l(e.isExternalGcode),c(e.machineProfileId),p=e.postCarveModal,t("postCarveModal",p)},e.percentComplete=e=>s(e),e}()},function(e,t,n){const a=n(213),r=n(27),o=n(18);EASEL.projectAutosaver=function(){let e=null,t=!1;const n=function(){EASEL.store.dispatch(EASEL.saveStatusActionCreators.setSaved())},s=function(e){if(EASEL.store.dispatch(EASEL.saveStatusActionCreators.setUnsavedWithError(e)),e!==r.saveVersionMismatchError)return Promise.reject(`Save error ${e.responseText}`)},i=o((function(){return EASEL.projectSnapshotter((()=>EASEL.projectManager.getCurrentData()))})),l=function(){const e=e=>new Promise(((t,n)=>e.then(t,n)));return{createProject:t=>e(EASEL.projectAPI.create({project:t})),updateProject:(t,n)=>e(EASEL.projectAPI.update(t,{project:n})),createWorkpiece:(t,n)=>e(EASEL.projectAPI.createWorkpiece(t,{workpiece:n})),updateWorkpiece:(t,n,a,r)=>e(EASEL.projectAPI.updateWorkpiece(t,n,a,{workpiece:r}))}},c=o((function(){return EASEL.projectSaver(EASEL.projectMetadataStore.getLinkToken,i(),l(),u)})),p=o((function(){return a(EASEL.projectMetadataStore.getID,EASEL.projectManager.getCurrentData,l())})),u=function(){const e=p().createProjectCopy();return e.then(n,s),e},d=function(){const e=c();if(EASEL.projectMetadataStore.isReadOnly())throw new Error("Cannot save a read-only project");EASEL.projectMetadataStore.isLive()&&EASEL.stats.trackEvent("Live - Project Saved",{linkToken:EASEL.projectMetadataStore.getLinkToken()});return c().saveProject().then((function({saveVersion:a}){return a!==e.currentProjectVersion()||t||n(),Promise.resolve(a)}),s)},h=EASEL.debounce((()=>(t=!1,d().catch((function(){})))),2e3),E=function(){if(!EASEL.projectMetadataStore.isReadOnly())return t=!0,EASEL.store.dispatch(EASEL.saveStatusActionCreators.setUnsavedWithSaveInProgress()),e=h(),e;EASEL.store.dispatch(EASEL.saveStatusActionCreators.setUnsaved())},m=function(){c().reset(),clearTimeout(e),e=null,t=!1},S={saveNow:()=>(m(),d())};return S.copyProject=u,S.setupAutosave=()=>{i().takeSnapshotAndEnableSaving();for(let e of EASEL.projectManager.getCurrentDataStores())e.addChangeListener(E);for(let e of EASEL.projectManager.getCurrentDataSelectors())EASEL.store.subscribeWithSelector(e,E)},S.scheduleAutosave=E,S.cancelAutosave=m,S.isDirty=()=>EASEL.saveStatusSelectors.isUnsaved(EASEL.store.getState()),S.setProjectSaveParams=e=>c().setProjectSaveParams(e),S.getProjectSaveClient=()=>c().getProjectSaveClient(),S}()},function(e,t){e.exports=function(e,t,n){const a=function(e,t){return Promise.all(e.map((e=>n.createWorkpiece(t,e))))};return{createProjectCopy:function(){const r=function(){let n=EASEL.merge(t());console.log(n.workpieces);const a=n.workpieces.map((function(e){const t=EASEL.merge(e);return delete t.localId,delete t.backendId,t})),r=n.labels?n.labels.map((function(e){return EASEL.merge(e).id})):[];return delete n.labels,delete n.workpieces,n=EASEL.shallowMerge(n,{shared:!1,starred:!1,parent_id:e(),name:`Copy of ${n.name}`}),{workpieces:a,labelIds:r,project:n}}();return r.labelIds&&r.labelIds.length>0?n.createProject(r.project).then((e=>{return(t=r.labelIds,n=e.link_token,EASEL.labelsAPI.assignLabels({id:n,label_ids:t})).then((()=>a(r.workpieces,e.link_token).then((t=>({project:e,workpieces:t})))));var t,n})):n.createProject(r.project).then((e=>a(r.workpieces,e.link_token).then((t=>({project:e,workpieces:t})))))}}}},function(e,t,n){const a=n(35);EASEL.projectManager=function(){const e=function(e){return e.id=EASEL.workpieceStore.getNewID(),EASEL.workpieceActions.addWorkpiece(e),EASEL.workpieceActions.showWorkpiece(e.id),e.id};return{appropriatelyLoadProject:function(e){if(null!=e)if(null!=EASEL.projectLinkToken){const t=window.open();t.opener=null,t.document.location=`${document.location.origin}/projects/${e}`}else EASEL.flux.events.emit("project-token-set",e);else EASEL.oops("Something went wrong trying to open the project")},load:function(t){let n=null;for(let i of t.workpieces){const a=i.saved_data,r=e({position:i.position,backendId:i.id,thumbnailUrl:i.image_url||EASEL.assets.images.emptyThumbnail,thumbnailID:i.image_id,name:i.name,note:a&&a.note,isImportedMesh:a&&Boolean(a.three_d_prototype),version:i.version,experiments:a&&a.experiments||{}}),o=a.imported_gcode;o&&EASEL.store.dispatch(EASEL.externalGcodeActionCreators.formattedGcode(o));const s=a.imported_mesh;null!=s&&EASEL.store.dispatch(EASEL.threeDPrototypeActionCreators.setMesh(s));const l=a.three_d_prototype;l&&(EASEL.store.dispatch(EASEL.threeDPrototypeActionCreators.setMesh(l.mesh)),EASEL.store.dispatch(EASEL.threeDPrototypeActionCreators.setMaterial(l.material)),EASEL.store.dispatch(EASEL.threeDPrototypeActionCreators.setTransform(l.transform)),EASEL.store.dispatch(EASEL.threeDPrototypeActionCreators.setRoughing(l.roughing)),EASEL.store.dispatch(EASEL.threeDPrototypeActionCreators.setFinishing(l.finishing))),i.position===t.active_workpiece_position&&(n=r);const c=a.material;c&&EASEL.materialActions.loadMaterial(c,a.layerDepths),EASEL.store.dispatch(EASEL.bitActionCreators.setBitParams(a.bitParams));const p=a.job_settings,{bitKeys:u}=EASEL.jobSettingsConstants;EASEL.jobSettingsActions.setFillAngle(u.bit,p.bit.fillAngle),EASEL.jobSettingsActions.setRampingAngle(u.bit,p.bit.rampingAngle),EASEL.jobSettingsActions.setFeedRate(u.bit,p.bit.feedRate),EASEL.jobSettingsActions.setPlungeRate(u.bit,p.bit.plungeRate),EASEL.jobSettingsActions.setDepthPerPass(u.bit,p.bit.depthPerPass),EASEL.jobSettingsActions.setSpindleSpeed(u.bit,p.bit.spindleSpeed),EASEL.jobSettingsActions.setUseCustom(u.bit,p.bit.useCustom,p.bit),p.detailBit&&(EASEL.jobSettingsActions.setFillAngle(u.detailBit,p.detailBit.fillAngle),EASEL.jobSettingsActions.setRampingAngle(u.detailBit,p.detailBit.rampingAngle),EASEL.jobSettingsActions.setFeedRate(u.detailBit,p.detailBit.feedRate),EASEL.jobSettingsActions.setPlungeRate(u.detailBit,p.detailBit.plungeRate),EASEL.jobSettingsActions.setDepthPerPass(u.detailBit,p.detailBit.depthPerPass),EASEL.jobSettingsActions.setSpindleSpeed(u.detailBit,p.detailBit.spindleSpeed),EASEL.jobSettingsActions.setUseCustom(u.detailBit,p.detailBit.useCustom,p.detailBit)),EASEL.jobSettingsActions.setStepOver(p.stepOver),EASEL.jobSettingsActions.setVBitDetailStepOver(p.vBitDetailStepOver),EASEL.jobSettingsActions.setProfileStepOver(p.profileStepOver),EASEL.jobSettingsActions.setSafetyHeight(p.safetyHeight),EASEL.volumeActions.add.apply(null,a.volumes),a.tiling&&(EASEL.store.dispatch(EASEL.tileActionCreators.setTileOverlap(a.tiling.overlap)),EASEL.store.dispatch(EASEL.tileActionCreators.setSelectedTile(a.tiling.selectedTile)),EASEL.store.dispatch(EASEL.tileActionCreators.setTileSizes(a.tiling.tileSizes)))}let a=t.unit_preference;null==a&&null!=t.workpieces[0].saved_data.work_area&&(a=t.workpieces[0].saved_data.work_area.unitPreference),null!=a&&EASEL.unitActions.setUnit(a);const r=window.location.href,o=EASEL.projectMetadataStore.getName(),s=EASEL.projectMetadataStore.getLinkToken();window.history.replaceState({},o,`/projects/${s}`),document.title=`Easel - ${o}`,window.location.href!=r&&EASEL.stats.trackPage(),null!=n&&EASEL.workpieceActions.showWorkpiece(n),EASEL.viewportActions.homeViewport(),EASEL.undoActions.clearUndos(),EASEL.fontSelectors.hasFontErrors(EASEL.store.getState())&&EASEL.store.dispatch(EASEL.fontActionCreators.setFontErrorsVisible(!0))},getCurrentData:function(){const e=EASEL.store.getState(),t=EASEL.workpieceStore.getActiveID();let n=null;const r=EASEL.workpieceStore.getWorkpieces().map((function(r,o){const s=EASEL.merge(EASEL.volumeStore.getVolumesForWorkpiece(r.id));for(let e of s)delete e.id;const i=a.projectMaterialAttributes(EASEL.materialStore.getActiveMaterial(r.id));r.id===t&&(n=o);const l=EASEL.externalGcodeSelectors.getGcode(e,r.id),c=EASEL.workpieceSelectors.getThumbnail(e,r.id),p=null!=c?{image:c}:{original_thumbnail_id:r.thumbnailID},u={note:r.note,imported_gcode:l,canvas:s,material:i,layerDepths:EASEL.materialStore.getCustomLayerDepths(r.id),bit_params:EASEL.bitSelectors.bitParams(e,r.id),job_settings:EASEL.jobSettingsStore.settings(r.id),experiments:r.experiments},d=EASEL.threeDPrototypeSelectors.getMesh(e,r.id);null!=d&&(u.three_d_prototype={mesh:EASEL.threeDPrototypeSelectors.getMesh(e,r.id),material:EASEL.threeDPrototypeSelectors.getMaterial(e,r.id),transform:EASEL.threeDPrototypeSelectors.getTransform(e,r.id),roughing:EASEL.threeDPrototypeSelectors.getRoughing(e,r.id),finishing:EASEL.threeDPrototypeSelectors.getFinishing(e,r.id)});const h=EASEL.tileSelectors.getSelectedTile(e,r.id);return u.tiling={overlap:EASEL.tileSelectors.getTileOverlapDistance(e,r.id)>0,tiles:EASEL.tileSelectors.getAllTiles(e).map((e=>e.explode())),selectedTile:h?h.explode():null,tileSizes:EASEL.tileSelectors.getTileSizes(e,r.id)},r.version=4,{localId:r.id,backendId:r.backendId,position:o,is_imported_gcode:null!==l,is_imported_mesh:null!==d,project_thumbnail_attributes:p,saved_data:JSON.stringify(u),name:r.name,version:r.version}}));return{live:EASEL.projectMetadataStore.isLive(),shared:EASEL.projectMetadataStore.isShared(),starred:EASEL.projectMetadataStore.isStarred(),active_workpiece_position:n,name:EASEL.projectMetadataStore.getName(),contains_imported_svg:EASEL.projectMetadataStore.containsImportedSVG(),carve_count:EASEL.projectMetadataStore.getCarveCount(),unit_preference:EASEL.unitSelectors.getPreferredUnit(e),workpieces:r,labels:EASEL.projectMetadataStore.assignedLabels()}},getCurrentDataSelectors:function(){return[EASEL.unitSelectors.getPreferredUnit,EASEL.bitSelectors.bitParams,EASEL.externalGcodeSelectors.getGcode,EASEL.threeDPrototypeSelectors.getMesh,EASEL.tileSelectors.getSelectedTile,EASEL.tileSelectors.getTileOverlapDistance,EASEL.tileSelectors.getTileSizes,EASEL.threeDPrototypeSelectors.getMesh,EASEL.threeDPrototypeSelectors.getTransform,EASEL.threeDPrototypeSelectors.getRoughing,EASEL.threeDPrototypeSelectors.getFinishing,EASEL.threeDPrototypeSelectors.getMaterial]},getCurrentDataStores:function(){return[EASEL.projectMetadataStore,EASEL.volumeStore,EASEL.materialStore,EASEL.jobSettingsStore,EASEL.workpieceStore]}}}()},function(e,t){EASEL.projectSaver=function(e,t,n){const a={},r=Math.random().toString(36).substr(2);let o=null,s=null,i=Promise.resolve();return a.saveProject=function(){const a=o+=1;return i=(l=i,l.catch((function(){}))).then((function(){const i=t.snap();if(!i.hasChanged())return Promise.resolve({saveVersion:o});const l=n.updateProject(e(),EASEL.shallowMerge(i.project(),{save_client:r,save_key:s,save_version:a}));return Promise.all([a,l]).then((function(...e){const[t,a]=e[0];return a.error?Promise.reject(a.error):(i.markProjectSaved(),function(e,t,a){const r=e.changedWorkpieces().map((function(r){return n.updateWorkpiece(t,r.id,a,r).then((()=>e.markWorkpieceSaved(r.id)))}));return Promise.all(r)}(i,a.link_token,t).then((e=>({project:a,workpieces:e,saveVersion:t,changed:!0}))))}))}));var l},a.reset=()=>i=Promise.resolve(),a.setProjectSaveParams=function({save_version:e,save_key:t}){o=e,s=t},a.getProjectSaveClient=()=>r,a.currentProjectVersion=()=>o,a}},function(e,t){EASEL.projectSnapshotter=function(e){let t=null;const n={},a=function(){const a=EASEL.merge(e()),{workpieces:r}=a;delete a.workpieces;const o=[],s=[],i=new Set;for(let e of r)i.add(e.localId),l=e,EASEL.isEqual(n[l.localId],l)&&null!=l.backendId||o.push(e);var l;for(let e in n){const t=n[e];i.has(t.localId)||s.push(t.localId)}const c=o.length>0||s.length>0||(p=a,null==t||!EASEL.isEqual(t,p));var p;const u={};for(let e of o)u[e.backendId]=e;const d=o.map((function(e){e=EASEL.merge(e);const{backendId:t}=e;return delete e.localId,delete e.backendId,e.id=t,e}));return{changedWorkpieces:()=>d,hasChanged:()=>c,project:()=>a,markProjectSaved:function(){for(let e of s)delete n[e];t=a},markWorkpieceSaved:function(e){const t=u[e];n[t.localId]=t}}};return{snap:a,takeSnapshotAndEnableSaving:function(){const e=a();e.markProjectSaved();for(let t of e.changedWorkpieces())e.markWorkpieceSaved(t.id)}}}},function(e,t){EASEL.projectStatus={flash:e=>EASEL.flux.events.emit("flash-project-status",e),status:e=>EASEL.flux.events.emit("set-project-status",e)}},function(e,t){EASEL.svgGenerator={svgForVolumes:e=>{const t=React.createElement(EASEL.component.appPreview.volumes,{volumes:e}),n=document.createElement("div");n.style.display="none",ReactDOM.render(t,n);for(let i of n.getElementsByClassName("outline"))i.setAttribute("stroke-width","0.01");const a=n.innerHTML,r={top:EASEL.volumeHelper.boundingBoxTop(e),right:EASEL.volumeHelper.boundingBoxRight(e)},o=r.right,s=r.top;return`<svg width="${o}in" height="${s}in" viewBox="${`0 0 ${o} ${s}`}" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink">\n        <g transform="${`translate(0 ${s})`}">\n          ${a}\n        </g>\n      </svg>`}}},function(e,t){EASEL.viewportHelper=function(){const e=.0625,t=e=>{const{x:t,y:n,zoomLevel:a}=e;return EASEL.matrix().scaledBy(a,a).translatedBy(t,n)},n=(e,n)=>t(e).inverse().transformedPoint(n),a=(e,n)=>t(e).transformedPoint(n),r=(e,t)=>1/e.zoomLevel*(t/EASEL.constants.PIXELS_PER_INCH),o=function(t){return t<e?t=e:t>8&&(t=8),t},s=function(e,t,r){const o=n(e,r);e=EASEL.shallowMerge(e,{zoomLevel:t});const s=a(e,o),i=e.x+r.x-s.x,l=e.y+r.y-s.y;return EASEL.shallowMerge(e,{x:i,y:l})};return{zoomStateToLevelAtPoint:s,zoomStateToRect:function(e,t,n,a,r){if(null==r&&(r={x:60,y:60}),0===t.width||0===t.height)return e;const i=EASEL.constants.PIXELS_PER_INCH,l=n.y*i,c=i*Math.max(a.right-a.left,1),p=i*Math.max(a.top-a.bottom,1),u=i*(a.left+a.right)/2-c/2,d=i*(a.top+a.bottom)/2+p/2;e=EASEL.shallowMerge(e,{zoomLevel:1,x:(t.width-c)/2-u,y:(t.height-p)/2-(l-d)});const h=(t.width-2*r.x)/c,E=(t.height-2*r.y)/p,m=o(Math.min(h,E));return s(e,m,{x:t.width/2,y:t.height/2})},viewToFabricCoordinates:n,fabricToViewCoordinates:a,pointIsNotInView:function(e,t){const n=EASEL.machineSettingsSelectors.getWorkArea(e).y,a=e.workpieces.byId[e.workpieces.activeWorkpieceId].viewport,o=-r(a,a.x),s=n+r(a,a.y),i=r(a,e.viewport.editorSize.width),l=r(a,e.viewport.editorSize.height);return t.x<o||t.x>o+i||t.y<s-l||t.y>s},getOffsetToCenter:function(e,t){const n=EASEL.machineSettingsSelectors.getWorkArea(e).y,a=e.workpieces.byId[e.workpieces.activeWorkpieceId].viewport,o=-r(a,a.x),s=n+r(a,a.y),i=r(a,e.viewport.editorSize.width),l=r(a,e.viewport.editorSize.height);return{x:o+i/2-t.x,y:s-l/2-t.y}},calculateConstrainedZoomLevel:o,getViewportMatrix:t,getCenter:(e,t)=>n(t,{x:e.width/2,y:e.height/2})}}()},function(e,t){EASEL.workpieceHelper={svgString:function(e){const t=EASEL.volumeStore.getVolumesForWorkpiece(e);return EASEL.svgGenerator.svgForVolumes(t)},settingsString:function(e){let t;const n=EASEL.materialStore.getActiveMaterial(e);let a=`Material type: ${n.name}\n`;const r=EASEL.store.getState(),o=EASEL.unitSelectors.getPreferredUnit(r);return a+=`Material dimensions: ${n.dimensions.x*EASEL.units.preferredUnitsPerInch()} ${o}`,a+=` x ${n.dimensions.y*EASEL.units.preferredUnitsPerInch()} ${o}`,a+=` x ${n.dimensions.z*EASEL.units.preferredUnitsPerInch()} ${o}\n`,EASEL.bitSelectors.useDetailBit(r,e)?(t=EASEL.bitSelectors.bit(r,e),a+=`Roughing bit: ${t.width} ${t.unit}, ${t.type}\n`,t=EASEL.bitSelectors.detailBit(r,e),a+=`Detail bit: ${t.width} ${t.unit}, ${t.type}\n`):(t=EASEL.bitSelectors.bit(r,e),a+=`Bit: ${t.width} ${t.unit}, ${t.type}\n`),a}}},function(e,t){EASEL.dispatcher=function(){let e={},t={};const n={};let a=0,r=!1,o=0,s=null,i=[];var l=function(a){t[a]=!0,n[a](s),e[a]=!0};return{dispatch:function(o){if(r)throw new Error("Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.");if(null==o.actionType)throw new Error("Dispatcher received message with no action type! (Did you forget to declare a constant?)");!function(n){t={},e={},s=n,r=!0,a++}(o);try{for(let e in n)t[e]||l(e)}finally{!function(){r=!1;for(let t of i)try{t()}catch(e){window.onerror(e.toString(),"dispatcher listener",0,0,e)}i=[],s=null}()}},getActionToken:()=>a,register:function(e){const t="ID_"+ ++o;return n[t]=e,t},waitFor:function(a){for(let r of a)if(t[r]){if(!e[r])throw new Error(`Dispatcher.waitFor(...): Circular dependency detected while waiting for ${r}`)}else{if(!n[r])throw new Error(`Dispatcher.waitFor(...): ${r} does not map to a registered callback.`);l(r)}},enqueueNotification:function(e){if(!r)throw new Error("Can only enqueue notifications in the middle of a dispatch.");i.push(e)},isCurrentlyDispatching:()=>r}}()},function(e,t){EASEL.listenerMixin=function(e){let t=[];var n=function(e){t=t.filter((t=>t!==e))};return e.addChangeListener=function(e){return t.push(e),()=>n(e)},e.removeChangeListener=n,e.notifyListeners=function(){for(const e of t)EASEL.dispatcher.enqueueNotification(e)},e.notifyListenersOutsideOfDispatch=function(){for(let e of t)e()},e}},function(e,t){EASEL.pointDraggingMixin={componentWillMount(){this.dragAnchor=null,this.lastMouse={x:null,y:null},this.dragHandlers=[],this.dragStartHandlers=[],this.dragEndHandlers=[]},addDragHandler(e){this.dragHandlers.push(e)},addDragStartHandler(e){this.dragStartHandlers.push(e)},addDragEndHandler(e){this.dragEndHandlers.push(e)},handleMouseDown(e){this.dragAnchor=e.target,this.handleDragStart(e)},handleDragStart(e){return e.stopPropagation(),this.lastMouse={x:e.clientX,y:e.clientY},window.addEventListener("mousemove",this.handleDrag,!0),window.addEventListener("mouseup",this.handleDragEnd,!0),this.dragStartHandlers.map((e=>e(this.dragAnchor)))},handleDrag(e){const t=e.clientX-this.lastMouse.x,n=e.clientY-this.lastMouse.y;return this.lastMouse={x:e.clientX,y:e.clientY},this.dragHandlers.map((a=>a(t,n,this.dragAnchor,e)))},handleDragEnd(){return window.removeEventListener("mousemove",this.handleDrag,!0),window.removeEventListener("mouseup",this.handleDragEnd,!0),this.dragEndHandlers.map((e=>e(this.dragAnchor)))}}},function(e,t){EASEL.storageMixin=function(e,t){const n="easel:"+e;return t.get=function(){try{return JSON.parse(localStorage.getItem(n))}catch(e){}},t.set=function(e){try{return localStorage.setItem(n,JSON.stringify(e))}catch(t){}},t}},function(e,t){EASEL.undoMixin=function(e){let t={},n=null;const{actionTypes:a}=EASEL.undoConstants;return EASEL.dispatcher.register((function(r){switch(r.actionType){case a.UNDO:case a.REDO:!function(a){a=a||[];let r=!1;for(const e of a){n=e;const a=t[e];null!=a&&(a(),r=!0),n=null}r&&"function"===typeof e.notifyListeners&&e.notifyListeners()}(r.tokens);break;case a.CLEAR_UNDOS:t={}}})),e.registerUndo=function(e){const a=n||EASEL.dispatcher.getActionToken();if(null!=a)return t[a]=e},e}},function(e,t){EASEL.workpieceMixin=function(e,t,n){const a={};let r=1;const o=function(t,n){null==a[n]&&(a[n]=e.duplicate(a[t]))},s=function(e){n&&a[r]?o(r,e):null==a[e]&&(a[e]=EASEL.merge(t))};s(r);const{actionTypes:i}=EASEL.workpieceConstants;return{getCurrentWorkpieceId:()=>r,getWorkpieces:()=>a,getWorkpiece:function(e){return void 0!==e?a[e]:a[r]},dispatchID:EASEL.dispatcher.register((function(t){switch(t.actionType){case i.ADD_WORKPIECE:EASEL.dispatcher.waitFor([EASEL.workpieceStore.dispatchID]),s(t.workpiece.id);break;case i.DUPLICATE_WORKPIECE:EASEL.dispatcher.waitFor([EASEL.workpieceStore.dispatchID]),o(t.originalId,t.newId);break;case i.DELETE_WORKPIECE:EASEL.dispatcher.waitFor([EASEL.workpieceStore.dispatchID]),n=t.id,delete a[n];break;case i.SHOW_WORKPIECE:EASEL.dispatcher.waitFor([EASEL.workpieceStore.dispatchID]);break;default:return}var n;r!==EASEL.workpieceStore.getActiveID()&&(!function(e){r=e}(EASEL.workpieceStore.getActiveID()),e.notifyListeners())}))}}},function(e,t,n){const a=n(93);EASEL.easelProActions=function(){const e=function(e,a,s){return s=s||{},t(e,!0),a().fail((function(n){return t(e,!1),o(e,n)})).done((function(...a){r(e),t(e,!1);const o=a[0];e(EASEL.userActionCreators.setProInfo(o)),o.subscription_failed_message&&n(e,{message:o.subscription_failed_message}),function(e){const t=function(e){return null==e?null:new Date(e).toISOString()},n={easel_pro_expires_at:t(e.easel_pro_expiration_date)};null!=e.subscription&&(n.easel_pro_subscription_type=e.subscription.plan_id,n.easel_pro_auto_renews_at=t(e.subscription.next_billing_date)),EASEL.stats.setProperties(n)}(o),s.done&&s.done(e,...a)})).promise()};var t=(e,t)=>e(EASEL.easelProActionCreators.setLoading(t)),n=(e,t)=>e(EASEL.easelProActionCreators.setError(t));var r=e=>n(e,null),o=function(e,t){let a;return null!=t&&(400===t.status?a=t.responseJSON&&t.responseJSON.message||"We couldn't process your payment at this time, please try again later.":500===t.status&&(a=t.responseJSON&&t.responseJSON.message||"Unknown error in API response")),n(e,a)};const s=function(){const e=EASEL.store.getState(),t=EASEL.machineStateStore.getConnectionState();EASEL.proSelectors.isCarvePending(e)&&["alarm_lock","ready_idle"].includes(t)&&EASEL.walkthroughManager.openWalkthrough()};return{getEaselProInfoWithoutSubscription:function(t,n){return e(t,(()=>a.getPaymentInfo(!1)),n)},getEaselProInfoWithSubscription:function(t,n){t(EASEL.userActionCreators.setSubscriptionInfoLoadingState(EASEL.userConstants.loadingState.LOADING));return e(t,(()=>a.getPaymentInfo(!0)),n).then((()=>t(EASEL.userActionCreators.setSubscriptionInfoLoadingState(EASEL.userConstants.loadingState.LOADED))))},setEaselProPlans:e=>a.getEaselProPlans().done((t=>{e(EASEL.easelProActionCreators.setPlans(t))})).fail((function(t){throw((e,t)=>{n(e,{message:t})})(e,"Could not get Easel Pro plans"),t})),updateBilling:(t,n,r)=>e(t,(()=>a.updatePaymentInfo(n,r))),subscribeToPlan:function(t,n,r,o,s){let i;return i=s?()=>a.activateAndSubscribeToEaselPro(n,r,o,s):()=>a.subscribeToEaselPro(n,r,o),e(t,i,{done(){EASEL.stats.trackEvent(EASEL.events.startedSubscription,{plan:r,withActivation:null!=s})}})},setSelectedPlanID:(e,t)=>e(EASEL.easelProActionCreators.setSelectedPlanID(t)),clearError:r,cancelSubscription:t=>e(t,a.cancelSubscription),startEaselProFreeDay:t=>e(t,(()=>a.consumeEaselProFreeDay()),{done(){EASEL.stats.trackEvent("Started Easel Pro Free Carve Day"),EASEL.projectStatus.status("Easel Pro free carve day successfully started!"),s()}}),startEaselProPurchasedDay:t=>e(t,(()=>a.consumeEaselProPurchasedDay()),{done(){EASEL.stats.trackEvent("Started Easel Pro Day Pass"),EASEL.projectStatus.status("Easel Pro day pass successfully started!"),s()}}),startEaselProTrial:t=>e(t,(()=>a.startEaselProTrial()),{done(){EASEL.stats.trackEvent(EASEL.events.startedTrial,{type:"manual"}),EASEL.projectStatus.status("Easel Pro Trial was successfully started!"),s()}})}}()},function(e,t){EASEL.projectActions=function(){const e=()=>EASEL.oops("Something went wrong trying to save a copy of this project."),t=function(e){return EASEL.stats.trackEvent(e,{Name:EASEL.projectMetadataStore.getName(),"Link Token":EASEL.projectMetadataStore.getLinkToken()}),EASEL.stats.trackEventOnServer(e,{"Link Token":EASEL.projectMetadataStore.getLinkToken()})},n=function(n){const a=window.open("about:blank","_blank");return Promise.all([EASEL.projectAutosaver.copyProject(),t(n)]).then((function([e]){null!=e&&null!=e.project&&null!=e.project.link_token&&(a.location.href=`${window.location.protocol}//${window.location.host}/projects/${e.project.link_token}`,a.focus())})).catch(e)};return{copyShared:()=>n("Copied Shared Project"),duplicate:()=>n("Duplicated Project")}}()},function(e,t){const{Provider:n}=ReactRedux;EASEL.redux=function(){const e=function(e,t){if("function"!==typeof e)return e;const n={};return function(...a){try{return e(...a||[])}catch(r){return n[r.toString()]||(n[r.toString()]=!0,null!=window.onerror?window.onerror(r.toString(),t,0,0,r):console.log(r.toString(),t,0,0,r)),{}}}};var t=function(e,n){const a=[EASEL.reducers.sliceReducer("workpieces",EASEL.reducers.workpieceReducer),EASEL.reducers.undoReducer,EASEL.reducers.sliceReducer("userModal",EASEL.reducers.userModalReducer),EASEL.reducers.sliceReducer("features",EASEL.reducers.featuresReducer),EASEL.reducers.sliceReducer("toolbox",EASEL.reducers.toolboxReducer),EASEL.reducers.sliceReducer("app",EASEL.reducers.appReducer),EASEL.reducers.sliceReducer("cutSettings",EASEL.reducers.cutSettingsReducer),EASEL.reducers.sliceReducer("user",EASEL.reducers.userReducer),EASEL.reducers.sliceReducer("unit",EASEL.reducers.unitReducer),EASEL.reducers.sliceReducer("firmwareVersions",EASEL.reducers.firmwareVersionReducer),EASEL.reducers.sliceReducer("jobStatus",EASEL.reducers.jobStatusReducer),EASEL.reducers.sliceReducer("page",EASEL.reducers.pageReducer),EASEL.reducers.sliceReducer("projects",EASEL.reducers.projectListReducer),EASEL.reducers.sliceReducer("troubleshooting",EASEL.reducers.troubleshootingReducer),EASEL.reducers.sliceReducer("font",EASEL.reducers.fontReducer),EASEL.reducers.sliceReducer("easelPro",EASEL.reducers.easelProReducer),EASEL.reducers.sliceReducer("designElements",EASEL.reducers.designElementsReducer),EASEL.reducers.sliceReducer("preview",EASEL.reducers.previewReducer),EASEL.reducers.sliceReducer("saveStatus",EASEL.reducers.saveStatusReducer),EASEL.reducers.sliceReducer("userNotification",EASEL.reducers.userNotificationReducer),EASEL.reducers.sliceReducer("material",EASEL.reducers.materialReducer),EASEL.reducers.sliceReducer("machineSettings",EASEL.reducers.machineSettingsReducer),EASEL.reducers.sliceReducer("walkthrough",EASEL.reducers.walkthroughReducer),EASEL.reducers.workpieceSliceReducer("tiles",EASEL.reducers.tileReducer),EASEL.reducers.workpieceSliceReducer("bits",EASEL.reducers.bitReducer),EASEL.reducers.workpieceSliceReducer("internalGcode",EASEL.reducers.internalGcodeReducer),EASEL.reducers.workpieceSliceReducer("externalGcode",EASEL.reducers.externalGcodeReducer),EASEL.reducers.workpieceSliceReducer("threeDPrototype",EASEL.reducers.threeDPrototypeReducer),EASEL.reducers.workpieceSliceReducer("viewport",EASEL.reducers.viewportReducer),EASEL.reducers.workpieceSliceReducer("jobSettings",EASEL.reducers.jobSettingsReducer),EASEL.reducers.setViewportForNewWorkpieceReducer];!function(e){if(!EASEL.dispatcher.isCurrentlyDispatching()&&null!=(null!=e.payload?e.payload.undoDescription:void 0))EASEL.dispatcher.dispatch({actionType:"SYNC_UNDO_STATE",undoDescription:e.payload.undoDescription})}(n);let r=e;for(t of a)r=t(r,n);return r===e?e:r};return{generateActionCreators:function(e){const t={};for(let n of Object.keys(e||{}))(e=>{t[EASEL.string.snakeToCamel(e)]=t=>({type:e,payload:t})})(n);return t},wrapWithStore:function(e,t){return createReactClass({render(){return React.createElement(n,{store:this.props.store||e},React.createElement(t,this.props))}})},generateDispatchShims:function(e){const t={};for(let n of Object.keys(e||{})){((e,n)=>{t[e]=function(...e){const{type:t,payload:a}=n(...e||[])||{};if(null!=t){const e=EASEL.merge(a,{actionType:t});return EASEL.dispatcher.dispatch(e)}}})(n,e[n])}return t},mapToReducer:e=>function(t,n){const a=e[n.type];return a?a(t,n):t},composeSelectors:function(e){let t={};return function(n){let a;const r={};for(a in e){const t=e[a];r[a]=t(n)}for(a in r){if(r[a]!==t[a])return t=r,r}return t}},actionTypesFromActions:function(e){const t={};for(let n of Object.keys(e||{}))t[n]=n;return t},bridgeFluxEvents:function(e){return EASEL.listenerMixin(e),e.dispatchId=EASEL.dispatcher.register((function(t){if("SYNC_UNDO_STATE"!==t.actionType)return e.dispatch({type:t.actionType,payload:t})})),e.subscribe((function(){return EASEL.dispatcher.isCurrentlyDispatching()?e.notifyListeners():e.notifyListenersOutsideOfDispatch()})),e},dispatchActions:(e,t)=>function(n){const a={};for(let r of t){if(!e[r])throw new Error(`${r} missing dispatch object`);a[r]=e[r].bind(null,n)}return a},connect:function({store:t,component:n,mapStateToProps:a,mapDispatchToProps:r}){const o=e(a,"component mapStateToProps"),s=e(r,"component mapDispatchToProps"),i=EASEL.redux.wrapWithStore(t||EASEL.store,ReactRedux.connect(o,s)(n));return i.unconnected=n,i},reducer:t}}()},function(e,t){!function(){const e=EASEL.shallowMerge,t=function(e,t){for(let n of Array.from(e.apps))if(n.id===t)return n},n={OPEN_APP_LIST:t=>e(t,{appListOpen:!0}),CLOSE_APP_LIST:t=>e(t,{appListOpen:!1}),LOADED_APPS:(t,n)=>e(t,{errorMessage:null,apps:n.payload}),FAILED_LOADING_APPS:(t,n)=>e(t,{errorMessage:n.payload}),ACTIVATE_APP_BY_ID:(e,n)=>EASEL.merge(e,{appProperties:null,activeApp:t(e,n.payload.id),appOutput:"",appVolumes:[]}),DEACTIVATE_APP:e=>EASEL.merge(e,{activeApp:null,appProperties:null,appStatus:EASEL.appConstants.states.IDLE,appOutput:"",appVolumes:[]}),APP_PROPERTIES:(t,n)=>e(t,{appProperties:n.payload}),APP_RUNNING:t=>e(t,{appStatus:EASEL.appConstants.states.RUNNING}),APP_OUTPUT:(t,n)=>e(t,{appStatus:EASEL.appConstants.states.IDLE,appOutput:n.payload}),APP_VOLUMES:(t,n)=>function(t,n){let a;for(let r of n)if(null!=r.shape||null!=r.cut){const n=EASEL.volumeValidator.validate(r);if(!n.valid){a=EASEL.appConstants.states.FAILED;const r=n.errors.join(" ");return e(t,{appStatus:a,errorMessage:r})}}return e(t,{appStatus:EASEL.appConstants.states.IDLE,appVolumes:n})}(t,n.payload),APP_FAILED:(t,n)=>e(t,{appStatus:EASEL.appConstants.states.FAILED,appOutput:n.payload}),APP_ERROR:(t,n)=>e(t,{appStatus:EASEL.appConstants.states.ERROR,appOutput:n.payload}),UPDATE_APP_PROPERTY(t,n){const{id:a,value:r}=n.payload,o=t.appProperties.map((t=>t.id===a?e(t,{value:r}):t));return e(t,{appProperties:o})}};EASEL.appConstants={actionTypes:EASEL.redux.actionTypesFromActions(n),states:{IDLE:"IDLE",FAILED:"FAILED",ERROR:"ERROR",RUNNING:"RUNNING"}},EASEL.appActionCreators=EASEL.redux.generateActionCreators(n),EASEL.appActions={requestAppProperties:()=>EASEL.webAPIUtils.getAppProperties(),activateAppById:(e,t)=>(EASEL.stats.trackEvent("Activate App",{id:t.name}),e(EASEL.appActionCreators.activateAppById(t))),requestAppOutput:()=>EASEL.webAPIUtils.executeApp(),openAppList:e=>(EASEL.stats.trackEventOnce("Open App List"),EASEL.webAPIUtils.loadApps(),e({type:EASEL.appConstants.actionTypes.OPEN_APP_LIST}))},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.appReducer=EASEL.redux.mapToReducer(n)}()},function(e,t){!function(){const e=e=>(null!=e?e.width:void 0)>0,t=function(t,n,a,r){return a?e(t)&&e(n)&&function(e,t,n){const a=EASEL.bitHelper.bitFacets(t,n),r=EASEL.bitHelper.bitFacets(e,n),o=EASEL.bitHelper.inchWidth(e)>=EASEL.bitHelper.inchWidth(t),s="V"===(null!=a?a.type:void 0);return o||s||EASEL.alert("Detail bit needs to be smaller than roughing bit."),"V"!==(null!=r?r.type:void 0)&&(s||o)}(t,n,r):null!=n?e(t)&&e(n):e(t)},n=function(e,t){if(t){for(let n of e)if(n.id===t.id)return;return t.id="V"===t.type?"other-v-bit":"other-bit"}},a=function(e,a){const r=e.global;n(r,a.bit),n(r,a.detailBit);const{bitParams:o}=e.workpiece,s=EASEL.merge(o,a);let i=t(s.bit,s.detailBit,s.useDetailBit,r);const l=s.useDetailBit&&!o.useDetailBit;return!i&&l&&(s.detailBit=EASEL.merge(o.bit),i=t(s.bit,s.detailBit,s.useDetailBit,r)),i?EASEL.setIn(e,["workpiece","bitParams"],s):e},r={ADD_BIT:(e,t)=>EASEL.shallowMerge(e,{global:[...e.global,t.payload]}),UPDATE_BIT(e,t){const n=t.payload,a=e.global.map((e=>e.id===n.id?n:e));return EASEL.shallowMerge(e,{global:a})},DELETE_BIT(e,t){const a=t.payload,r=EASEL.shallowMerge(e,{global:e.global.filter((e=>e.id!==a))});return n(r.global,r.workpiece.bitParams.bit),n(r.global,r.workpiece.bitParams.detailBit),r},SET_BITS:(e,t)=>EASEL.shallowMerge(e,{global:t.payload.bits}),SET_BIT_PARAMS:(e,t)=>a(e,t.payload.params),DEACTIVATE_DETAIL_BIT:function(e){return e.workpiece.bitParams.useDetailBit?a(e,{useDetailBit:!1}):e}};EASEL.bitConstants={actionTypes:EASEL.redux.actionTypesFromActions(r)},EASEL.bitActionCreators={addBit:e=>({type:EASEL.bitConstants.actionTypes.ADD_BIT,payload:e}),updateBit:e=>({type:EASEL.bitConstants.actionTypes.UPDATE_BIT,payload:e}),deleteBit:e=>({type:EASEL.bitConstants.actionTypes.DELETE_BIT,payload:e}),setBits:e=>({type:EASEL.bitConstants.actionTypes.SET_BITS,payload:{bits:e}}),setBitParams:e=>({type:EASEL.bitConstants.actionTypes.SET_BIT_PARAMS,payload:{params:e,undoDescription:"Change Bit"}}),deactivateDetailBit:()=>({type:EASEL.bitConstants.actionTypes.DEACTIVATE_DETAIL_BIT,payload:{undoDescription:"Do Not Use Detail Bit"}})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.bitReducer=EASEL.redux.mapToReducer(r)}()},function(e,t){!function(){const e={SET_CUT_SETTINGS:(e,t)=>t.payload,ADD_CUT_SETTING(e,t){const n=e.slice();return n.push(t.payload),n},DELETE_CUT_SETTING(e,t){const n=t.payload.identifier;return e.filter((e=>e.id!==n))},UPDATE_CUT_SETTING(e,t){const n=t.payload;return e.map((e=>e.id===n.id?n:e))}};EASEL.cutSettingsConstants={actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.cutSettingsActionCreators={setCutSettings:e=>({type:EASEL.cutSettingsConstants.actionTypes.SET_CUT_SETTINGS,payload:e}),addCutSetting:e=>({type:EASEL.cutSettingsConstants.actionTypes.ADD_CUT_SETTING,payload:e}),deleteCutSetting:e=>({type:EASEL.cutSettingsConstants.actionTypes.DELETE_CUT_SETTING,payload:e}),updateCutSetting:e=>({type:EASEL.cutSettingsConstants.actionTypes.UPDATE_CUT_SETTING,payload:e})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.cutSettingsReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const e=EASEL.shallowMerge,t={LOADED_ELEMENTS:(t,n)=>e(t,{errorMessage:null,loadStatus:EASEL.designElementsConstants.statuses.LOADED,elements:n.payload.elements}),FAILED_LOADING_ELEMENTS:(t,n)=>e(t,{errorMessage:n.payload.error,loadStatus:EASEL.designElementsConstants.statuses.ERROR}),OPEN_DESIGN_PANEL:t=>e(t,{open:!0}),CLOSE_DESIGN_PANEL:t=>e(t,{open:!1}),SET_LOAD_STATUS:(t,n)=>e(t,{loadStatus:n.payload.status})};EASEL.designElementsConstants={statuses:{UNLOADED:"UNLOADED",LOADING:"LOADING",ERROR:"ERROR",LOADED:"LOADED"},actionTypes:EASEL.shallowMerge(EASEL.redux.actionTypesFromActions(t))},EASEL.designElementsActionCreators={loadedElements:e=>({type:EASEL.designElementsConstants.actionTypes.LOADED_ELEMENTS,payload:{elements:e}}),failedLoadingElements:e=>({type:EASEL.designElementsConstants.actionTypes.FAILED_LOADING_ELEMENTS,payload:{error:e}}),openElementsPanel:()=>({type:EASEL.designElementsConstants.actionTypes.OPEN_DESIGN_PANEL}),closeElementsPanel:()=>({type:EASEL.designElementsConstants.actionTypes.CLOSE_DESIGN_PANEL}),setLoadStatus:e=>({type:EASEL.designElementsConstants.actionTypes.SET_LOAD_STATUS,payload:{status:e}})},EASEL.designElementsActions=EASEL.redux.generateDispatchShims(EASEL.designElementsActionCreators),EASEL.reducers=EASEL.reducers||{},EASEL.reducers.designElementsReducer=EASEL.redux.mapToReducer(t)}()},function(e,t){!function(){const e={SET_PLANS:(e,t)=>EASEL.shallowMerge(e,{plans:t.payload.plans}),SET_SELECTED_PLAN_ID:(e,t)=>EASEL.shallowMerge(e,{selectedPlanID:t.payload.selectedPlanID}),SET_EASEL_PRO_ERROR:(e,t)=>EASEL.shallowMerge(e,{error:t.payload}),SET_CARVE_ON_MODAL_EXIT:e=>EASEL.shallowMerge(e,{carveOnModalExit:!0}),SET_EASEL_PRO_LOADING:(e,t)=>EASEL.shallowMerge(e,{loading:t.payload.loading})};EASEL.easelProConstants={actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.easelProActionCreators={setPlans:e=>({type:EASEL.easelProConstants.actionTypes.SET_PLANS,payload:{plans:e}}),setSelectedPlanID:e=>({type:EASEL.easelProConstants.actionTypes.SET_SELECTED_PLAN_ID,payload:{selectedPlanID:e}}),setError:e=>({type:EASEL.easelProConstants.actionTypes.SET_EASEL_PRO_ERROR,payload:e}),setCarveOnModalExit:()=>({type:EASEL.easelProConstants.actionTypes.SET_CARVE_ON_MODAL_EXIT}),setLoading:e=>({type:EASEL.easelProConstants.actionTypes.SET_EASEL_PRO_LOADING,payload:{loading:e}})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.easelProReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const e={FORMATTED_GCODE:(e,t)=>((e,t)=>EASEL.setIn(e,["workpiece","gcode"],t))(e,t.payload.gcode)};EASEL.externalGcodeConstants={actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.externalGcodeActionCreators={formattedGcode:e=>(EASEL.stats.trackEvent("Imported G-code"),{type:EASEL.externalGcodeConstants.actionTypes.FORMATTED_GCODE,payload:{gcode:e}})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.externalGcodeReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const{merge:e}=EASEL,t={LOADED_FEATURES:(t,n)=>e(t,{errorMessage:null,features:n.payload}),FAILED_LOADING_FEATURES:(t,n)=>e(t,{errorMessage:n.payload})};EASEL.featuresActionCreators=EASEL.redux.generateActionCreators(t),EASEL.reducers=EASEL.reducers||{},EASEL.reducers.featuresReducer=EASEL.redux.mapToReducer(t)}()},function(e,t){!function(){const e={SET_SUPPORTED_VERSIONS(e,t){const{payload:n}=t;return EASEL.shallowMerge(e,{supportedVersions:n.versions,currentVersionHexFileURL:n.currentVersionHexFileURL,currentVersionNumber:n.currentVersionNumber})}};EASEL.firmwareVersionConstants={actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.firmwareVersionActionCreators={setSupportedVersions:(e,t,n)=>({type:EASEL.firmwareVersionConstants.actionTypes.SET_SUPPORTED_VERSIONS,payload:{versions:e,currentVersionHexFileURL:t,currentVersionNumber:n}})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.firmwareVersionReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const e=function(e,t){const n=e.data,a={};e.toolbar.forEach((({name:e})=>a[e]=!0));const r=t.filter((e=>!a[e])).map((e=>({name:e,displayName:n[e].displayName})));return EASEL.shallowMerge(e,{toolbar:e.toolbar.concat(r)})},t={SET_GROUP_TOTAL:(e,t)=>EASEL.setIn(e,["group",t.payload.group,"total"],t.payload.total),INCREMENT_GROUP_LOADED:(e,t)=>(e.lastFontLoadedTimestamp=Date.now(),EASEL.setIn(e,["group",t.payload.group,"loaded"],e.group[t.payload.group].loaded+1)),SET_FONT_DATA:(e,t)=>function(e,t){const n=EASEL.shallowMerge(e.data);return t.forEach((({font:e,name:t})=>n[t]=e)),EASEL.shallowMerge(e,{data:n})}(e,t.payload),SET_FONT_ERRORS:(e,t)=>function(e,t,n){const a=EASEL.shallowMerge(e.errors);return null==a[t]&&(a[t]=[]),n.forEach((e=>a[t].push(e))),EASEL.shallowMerge(e,{errors:a})}(e,t.payload.errorType,t.payload.fontNames),ADD_FONT_TO_TOOLBAR:(t,n)=>e(t,[n.payload]),ADD_FONTS_TO_TOOLBAR:(t,n)=>e(t,n.payload),REMOVE_FONT_FROM_LIBRARY:(e,t)=>function(e,{name:t,category:n}){const a=EASEL.shallowMerge(e.fontLibrary[n]);return delete a[t],EASEL.setIn(e,["fontLibrary",n],a)}(e,t.payload),REMOVE_FONT_FROM_TOOLBAR:(e,t)=>((e,t)=>EASEL.shallowMerge(e,{toolbar:e.toolbar.filter((e=>e.name!==t))}))(e,t.payload),SET_FONT_LIST_VISIBLE:(e,t)=>EASEL.setIn(e,["fontList"],{visible:t.payload}),SET_FONT_ERRORS_VISIBLE:(e,t)=>EASEL.shallowMerge(e,{errorModalVisible:t.payload}),ADD_FONTS_TO_LIBRARY:(e,t)=>function(e,t){const n=EASEL.shallowMerge(e.fontLibrary);return t.forEach((({name:e,category:t,createdAt:a})=>{null==n[t]&&(n[t]={}),n[t][e]={createdAt:a}})),EASEL.shallowMerge(e,{fontLibrary:n})}(e,t.payload)};EASEL.fontActionCreators=EASEL.redux.generateActionCreators(t),EASEL.reducers.fontReducer=EASEL.redux.mapToReducer(t)}()},function(e,t){!function(){const e={CLEAR_GCODE_PASSES:e=>EASEL.setIn(e,["workpiece","gcodePasses"],[]),SET_GCODE_PASSES:(e,t)=>EASEL.setIn(e,["workpiece","gcodePasses"],t.payload)};EASEL.internalGcodeConstants={actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.internalGcodeActionCreators={setGcodePasses:e=>({type:EASEL.internalGcodeConstants.actionTypes.SET_GCODE_PASSES,payload:e}),clearGcodePasses:()=>({type:EASEL.internalGcodeConstants.actionTypes.CLEAR_GCODE_PASSES})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.internalGcodeReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const e={SET_FILL_ANGLE:(e,t)=>EASEL.setIn(e,["workpiece",t.payload.bitKey,"fillAngle"],t.payload.fillAngle),SET_RAMPING_ANGLE:(e,t)=>EASEL.setIn(e,["workpiece",t.payload.bitKey,"rampingAngle"],t.payload.rampingAngle)};EASEL.reducers=EASEL.reducers||{},EASEL.reducers.jobSettingsReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const{shallowMerge:e}=EASEL,t={SET_CARVING_PROJECT_NAME:(t,n)=>e(t,{projectName:n.payload.projectName}),SET_PERCENT_COMPLETE:(t,n)=>e(t,{percentComplete:n.payload.percentComplete}),SET_OVERRIDES(t,n){const a=null!=n.payload.overrides?n.payload.overrides.feedRate:void 0,r=null!=n.payload.overrides?n.payload.overrides.spindleSpeed:void 0;let o=e(t);return null!=a&&(o=e(o,{currentFeedRate:a})),null!=r&&(o=e(o,{currentSpindleSpeed:r})),o},SET_TIME_ESTIMATE:(t,n)=>e(t,{timeEstimate:n.payload.timeEstimate})};EASEL.jobStatusConstants={actionTypes:EASEL.redux.actionTypesFromActions(t)},EASEL.jobStatusActionCreators={setProjectName:e=>({type:EASEL.jobStatusConstants.actionTypes.SET_CARVING_PROJECT_NAME,payload:{projectName:e}}),setPercentComplete:e=>({type:EASEL.jobStatusConstants.actionTypes.SET_PERCENT_COMPLETE,payload:{percentComplete:e}}),setTimeEstimate:e=>({type:EASEL.jobStatusConstants.actionTypes.SET_TIME_ESTIMATE,payload:{timeEstimate:e}}),setOverrides:e=>({type:EASEL.jobStatusConstants.actionTypes.SET_OVERRIDES,payload:{overrides:e}})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.jobStatusReducer=EASEL.redux.mapToReducer(t)}()},function(e,t){!function(){const e=function(e,t){const n=e;let a={};for(let r in t){const e=t[r];null!=e&&(a[r]=e)}return a.machineType===EASEL.machineType.CARVEY&&(a=EASEL.shallowMerge(a,{spindleRPM:EASEL.machineConfigurationConstants.rpm.CARVEY,workArea:{x:11.6,y:8}})),a.machineType!==EASEL.machineType.OTHER_GRBL&&(a.thirdPartyModel=null),a.machineType===EASEL.machineType.XCARVE_PRO&&(a.spindleType="xcp-spindle",a.automaticSpindleControl=!0),EASEL.merge(n,a)},t={SET_ACCESSORIES_ENABLED(e,t){const n=EASEL.shallowMerge(e,{accessoriesEnabled:t.payload.accessoriesEnabled});return EASEL.webAPIUtils.saveMachine(n),n},SET_MACHINE_TYPE(t,n){const a=e(t,{machineType:n.payload.machineType});return EASEL.webAPIUtils.saveMachine(a),a},SET_THIRD_PARTY_MODEL(e,t){const n=EASEL.shallowMerge(e,{thirdPartyModel:t.payload.thirdPartyModel});return EASEL.webAPIUtils.saveMachine(n),n},SET_COM_PORT(e,t){const n=EASEL.shallowMerge(e,{comPort:t.payload.comPort});return EASEL.webAPIUtils.saveMachine(n),n},SET_AUTOMATIC_SPINDLE_CONTROL(e,t){const n=EASEL.shallowMerge(e,{automaticSpindleControl:t.payload.automaticSpindleControl});return EASEL.webAPIUtils.saveMachine(n),n},SET_SPINDLE_RPM(e,t){const n=EASEL.shallowMerge(e,{spindleRPM:t.payload.spindleRPM});return EASEL.webAPIUtils.saveMachine(n),n},SET_MANUAL_CONNECTION_PREFERENCE(e,t){const n=EASEL.shallowMerge(e,{manualConnectionPreference:t.payload.preference});return EASEL.webAPIUtils.saveMachine(n),n},SET_NEW_TOOLPATH_ARCH_ENABLED(e,t){const n=EASEL.shallowMerge(e,{newToolpathArchEnabled:t.payload.newToolpathArchEnabled});return EASEL.webAPIUtils.saveMachine(n),n},SET_PROBE_PREFERENCES(e,t){const n=EASEL.mergeInObj(e,["probePreferences"],t.payload.probePreferences||{});return EASEL.webAPIUtils.saveMachine(n),n},SET_PROBE_ENABLED(e,t){const n=EASEL.shallowMerge(e,{probeEnabled:t.payload.probeEnabled});return EASEL.webAPIUtils.saveMachine(n),n},RESET_DEFAULT_PROBE_PREFERENCES(e){const t=EASEL.shallowMerge(e,{probePreferences:EASEL.machineConfigurationConstants.probeDefaults});return EASEL.webAPIUtils.saveMachine(t),t},SET_LOADED_MACHINE_CONFIGURATION(t,n){let a=n.payload.configuration;return null==a.isDefault&&(a=EASEL.shallowMerge(a,{isDefault:!1})),e(t,a)},SAVE_MACHINE_CONFIGURATION(t,n){const a=EASEL.shallowMerge(n.payload.configuration,{isDefault:!1}),r=e(t,a);return EASEL.webAPIUtils.saveMachine(r),r},UPDATE_WORK_AREA(e,t){const n=EASEL.shallowMerge(e,{workArea:t.payload.workArea||{}});return EASEL.webAPIUtils.saveMachine(n),n},SET_PROFILE_ID(e,t){const n=EASEL.shallowMerge(e,{profileId:t.payload.profileId});return EASEL.webAPIUtils.saveMachine(n),n}};EASEL.machineSettingsConstants={actionTypes:EASEL.redux.actionTypesFromActions(t)},EASEL.machineSettingsActionCreators={setLoadedMachineConfiguration:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_LOADED_MACHINE_CONFIGURATION,payload:{configuration:e}}),saveConfiguration:e=>({type:EASEL.machineSettingsConstants.actionTypes.SAVE_MACHINE_CONFIGURATION,payload:{configuration:e}}),setAccessoriesEnabled:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_ACCESSORIES_ENABLED,payload:{accessoriesEnabled:e}}),setMachineType:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_MACHINE_TYPE,payload:{machineType:e}}),setThirdPartyModel:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_THIRD_PARTY_MODEL,payload:{thirdPartyModel:e}}),setComPort:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_COM_PORT,payload:{comPort:e}}),setAutomaticSpindleControl:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_AUTOMATIC_SPINDLE_CONTROL,payload:{automaticSpindleControl:e}}),setSpindleRPM:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_SPINDLE_RPM,payload:{spindleRPM:e}}),setManualConnectionPreference:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_MANUAL_CONNECTION_PREFERENCE,payload:{preference:e}}),setProbePreferences:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_PROBE_PREFERENCES,payload:{probePreferences:e}}),setProbeEnabled:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_PROBE_ENABLED,payload:{probeEnabled:e}}),useDefaultProbePreferences:()=>({type:EASEL.machineSettingsConstants.actionTypes.RESET_DEFAULT_PROBE_PREFERENCES}),updateWorkArea:e=>({type:EASEL.machineSettingsConstants.actionTypes.UPDATE_WORK_AREA,payload:{workArea:e}}),setProfileId:e=>({type:EASEL.machineSettingsConstants.actionTypes.SET_PROFILE_ID,payload:{profileId:e}})},null==EASEL.reducers&&(EASEL.reducers={}),EASEL.reducers.machineSettingsReducer=EASEL.redux.mapToReducer(t)}()},function(e,t){!function(){const e={SET_MATERIAL_DIMENSIONS:(e,t)=>EASEL.merge(e,{dimensions:t.payload.dimensions})};EASEL.reducers=EASEL.reducers||{},EASEL.reducers.materialReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const e={SHOW_PAGE:(e,t)=>EASEL.merge(e,{visible:!0,pageName:t.payload.pageName}),HIDE_PAGE:e=>EASEL.merge(e,{visible:!1})};EASEL.pageActionCreators=EASEL.redux.generateActionCreators(e),EASEL.reducers=EASEL.reducers||{},EASEL.reducers.pageReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const e={SET_DESIGN_VISIBLE:(e,t)=>EASEL.setIn(e,["design","visible"],t.payload.visible),SET_DESIGN_STATUS:(e,t)=>EASEL.setIn(e,["design","status"],t.payload.status),SET_MATERIAL_VISIBLE:(e,t)=>EASEL.setIn(e,["material","visible"],t.payload.visible),SET_TOOLPATHS_GENERATED:(e,t)=>EASEL.setIn(e,["toolpaths","generated"],t.payload.generated),SET_UNCUT_AREAS_GENERATED:(e,t)=>EASEL.setIn(e,["uncutAreas","visible"],t.payload.visible),SET_WASTEBOARD_VISIBLE:(e,t)=>EASEL.setIn(e,["wasteboard","visible"],t.payload.visible),INVALIDATE_PREVIEW:(e,t)=>(e=EASEL.setIn(e,["design","visible"],!0),e=EASEL.setIn(e,["design","status"],t.payload.status),e=EASEL.setIn(e,["material","visible"],!0),e=EASEL.setIn(e,["wasteboard","visible"],!0),EASEL.setIn(e,["toolpaths","generated"],!1))};EASEL.previewConstants={statuses:{DISABLED:"DISABLED",WORKING:"WORKING",READY:"READY"},actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.previewActionCreators={setDesignVisible:e=>({type:EASEL.previewConstants.actionTypes.SET_DESIGN_VISIBLE,payload:{visible:e}}),setDesignStatus:e=>({type:EASEL.previewConstants.actionTypes.SET_DESIGN_STATUS,payload:{status:e}}),setMaterialVisible:e=>({type:EASEL.previewConstants.actionTypes.SET_MATERIAL_VISIBLE,payload:{visible:e}}),setToolpathsGenerated:e=>({type:EASEL.previewConstants.actionTypes.SET_TOOLPATHS_GENERATED,payload:{generated:e}}),setUncutAreasVisible:e=>({type:EASEL.previewConstants.actionTypes.SET_UNCUT_AREAS_GENERATED,payload:{visible:e}}),setWasteboardVisible:e=>({type:EASEL.previewConstants.actionTypes.SET_WASTEBOARD_VISIBLE,payload:{visible:e}}),invalidatePreview:e=>({type:EASEL.previewConstants.actionTypes.INVALIDATE_PREVIEW,payload:{status:e}})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.previewReducer=EASEL.redux.mapToReducer(e)}()},function(e,t,n){!function(){const{shallowMerge:e}=EASEL,t={SET_PROJECT_LIST_VIEW:(t,n)=>e(t,{view:n.payload.view}),CLEAR_PROJECTS:t=>e(t,{count:null,projects:[],requesting:!1}),SET_REQUESTING:(t,n)=>e(t,{requesting:n.payload.requesting}),SET_SEARCH:(t,n)=>e(t,{search:n.payload.search}),ADD_PROJECTS(t,n){const a=n.payload.clear?[]:t.projects||[];return e(t,{projects:a.concat(n.payload.projects),count:n.payload.count})},REMOVE_PROJECT_FROM_LIST(t,n){const a=t.projects.map((t=>t.linkToken===n.payload.linkToken?e(t,{removing:!0}):t));return e(t,{projects:a})},FINISH_REMOVE_PROJECT_TRANSITION(t,n){const a=t.projects.filter((e=>e.linkToken!==n.payload.linkToken));return e(t,{projects:a})},SET_STAR_FILTER:(t,n)=>e(t,{starred:n.payload.value}),SET_TAGS_FILTER:(t,n)=>e(t,{filterLabels:n.payload.value}),SET_SORT_DIRECTION:(t,n)=>e(t,{isAscendingSort:n.payload.value}),SET_SORT_VALUE:(t,n)=>e(t,{sortValue:n.payload.value}),SET_STARRED_PROJECT(t,n){const a=t.projects.slice();for(let r=0;r<a.length;r++){const t=a[r];if(t.linkToken===n.payload.linkToken){a.splice(r,1,e(t,{starred:n.payload.value}));break}}return e(t,{projects:a})},SET_ERROR:(t,n)=>e(t,{error:n.payload.error})};EASEL.projectListConstants={actionTypes:EASEL.redux.actionTypesFromActions(t)},EASEL.projectListActionCreators=function(){let e=0;const t=e=>({type:EASEL.projectListConstants.actionTypes.SET_REQUESTING,payload:{requesting:e}}),n=(e,t,n)=>({type:EASEL.projectListConstants.actionTypes.ADD_PROJECTS,payload:{projects:e,count:t,clear:n}}),a=e=>({type:EASEL.projectListConstants.actionTypes.SET_ERROR,payload:{error:e}}),r=function({offset:r,query:o,clear:s,filters:i},l){return l(t(!0)),e+=1,c=e,EASEL.projectsAPI.getProjects(r,o,i).done((function({projects:r,count:o}){c===e&&(r=r.map((e=>({linkToken:e.link_token,name:e.name,date:e.time_ago_updated_at,sortDate:e.updated_at,labels:e.labels,image:e.image,starred:e.starred,inventablesUrl:e.inventables_url}))),l(n(r,o,s)),l(t(!1)),l(a(null)))})).fail((function(e){const n=`Error loading projects: ${EASEL.apiHelper.getErrorMessage(e)}`;l(t(!1)),l(a(n))}));var c},o=function({query:e,filters:t},n){return n({type:EASEL.projectListConstants.actionTypes.CLEAR_PROJECTS}),r({offset:0,query:e,clear:!0,filters:t},n)};var s=function(e,t){t({type:EASEL.projectListConstants.actionTypes.REMOVE_PROJECT_FROM_LIST,payload:{linkToken:e}}),setTimeout((()=>t({type:EASEL.projectListConstants.actionTypes.FINISH_REMOVE_PROJECT_TRANSITION,payload:{linkToken:e}})),500)};return{addProjects:n,deleteProject:({query:e,filters:t},n,a,r)=>EASEL.confirm(`Delete \u201c${a}\u201d?`,"This will permanently delete the project.",(function(){return s(n,r),EASEL.projectAPI.delete(n).fail((function(){o({query:e,filters:t},r),EASEL.oops(`\u201c${a}\u201d could not be deleted.`)}))})),removeProjectFromList:s,loadPage:r,reloadProjects:o,setProjectListView:e=>({type:EASEL.projectListConstants.actionTypes.SET_PROJECT_LIST_VIEW,payload:{view:e}}),setRequesting:t,setSearchQuery:e=>({type:EASEL.projectListConstants.actionTypes.SET_SEARCH,payload:{search:e}}),setStarFilter:e=>({type:EASEL.projectListConstants.actionTypes.SET_STAR_FILTER,payload:{value:e}}),setLabelsFilter:e=>({type:EASEL.projectListConstants.actionTypes.SET_TAGS_FILTER,payload:{value:e}}),setStarredProject:(e,t)=>({type:EASEL.projectListConstants.actionTypes.SET_STARRED_PROJECT,payload:{linkToken:e,value:t}}),setSortDirection:e=>({type:EASEL.projectListConstants.actionTypes.SET_SORT_DIRECTION,payload:{value:e}}),setSortValue:e=>({type:EASEL.projectListConstants.actionTypes.SET_SORT_VALUE,payload:{value:e}})}}(),EASEL.reducers=EASEL.reducers||{},EASEL.reducers.projectListReducer=EASEL.redux.mapToReducer(t)}()},function(e,t){!function(){const{shallowMerge:e}=EASEL,t={SET_SAVE_STATUS:(t,n)=>e(t,n.payload)};EASEL.saveStatusConstants={actionTypes:EASEL.redux.actionTypesFromActions(t)},EASEL.saveStatusActionCreators={setSaved:()=>({type:EASEL.saveStatusConstants.actionTypes.SET_SAVE_STATUS,payload:{isSaved:!0,isUnsaved:!1,isSaving:!1,error:null}}),setUnsaved:()=>({type:EASEL.saveStatusConstants.actionTypes.SET_SAVE_STATUS,payload:{isUnsaved:!0,isSaving:!1,isSaved:!1,error:null}}),setUnsavedWithSaveInProgress:()=>({type:EASEL.saveStatusConstants.actionTypes.SET_SAVE_STATUS,payload:{isUnsaved:!0,isSaving:!0,isSaved:!1}}),setUnsavedWithError:e=>({type:EASEL.saveStatusConstants.actionTypes.SET_SAVE_STATUS,payload:{isUnsaved:!0,isSaved:!1,isSaving:!1,error:e}})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.saveStatusReducer=EASEL.redux.mapToReducer(t)}()},function(e,t){EASEL.reducers=EASEL.reducers||{},EASEL.reducers.sliceReducer=function(e,t){if(null==t)throw new Error(`baseReducer must not be null for ${e}`);return function(n,a){const r=n[e],o=t(r,a);if(o===r){if(null!=n)return n;throw new Error(`${e} returned an undefined state`)}{const t=EASEL.shallowMerge(n);return t[e]=o,t}}}},function(e,t){!function(){const e={SET_MESH:(e,t)=>EASEL.setIn(e,["workpiece","mesh"],t.payload),SET_MATERIAL:(e,t)=>EASEL.setIn(e,["workpiece","material"],t.payload),SET_TRANSFORM:(e,t)=>EASEL.setIn(e,["workpiece","transform"],t.payload),SET_ROUGHING:(e,t)=>EASEL.setIn(e,["workpiece","roughing"],t.payload),SET_FINISHING:(e,t)=>EASEL.setIn(e,["workpiece","finishing"],t.payload)};EASEL.threeDPrototypeConstants={actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.threeDPrototypeActionCreators={setMesh:e=>({type:EASEL.threeDPrototypeConstants.actionTypes.SET_MESH,payload:e}),setMaterial:e=>({type:EASEL.threeDPrototypeConstants.actionTypes.SET_MATERIAL,payload:e}),setTransform:e=>({type:EASEL.threeDPrototypeConstants.actionTypes.SET_TRANSFORM,payload:e}),setRoughing:e=>({type:EASEL.threeDPrototypeConstants.actionTypes.SET_ROUGHING,payload:e}),setFinishing:e=>({type:EASEL.threeDPrototypeConstants.actionTypes.SET_FINISHING,payload:e})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.threeDPrototypeReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const e={SET_SELECTED_TILE:(e,t)=>EASEL.setIn(e,["workpiece","selectedTile"],t.payload),SET_TILE_OVERLAP:(e,t)=>EASEL.setIn(e,["workpiece","tileOverlap"],t.payload),SET_TILE_SIZES:(e,t)=>EASEL.setIn(e,["workpiece","tileSizes"],t.payload)};EASEL.tileConstants={actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.tileActionCreators={setSelectedTile:e=>({type:EASEL.tileConstants.actionTypes.SET_SELECTED_TILE,payload:e}),setTileOverlap:e=>({type:EASEL.tileConstants.actionTypes.SET_TILE_OVERLAP,payload:e}),setTileSizes:e=>({type:EASEL.tileConstants.actionTypes.SET_TILE_SIZES,payload:e})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.tileReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const{shallowMerge:e}=EASEL,t={SHOW_BITS_TOOLBOX_SUB_TAB:t=>e(t,{activeSubTab:"bits"}),SHOW_MATERIALS_TOOLBOX_SUB_TAB:t=>e(t,{activeSubTab:"materials"}),SHOW_CUT_SETTINGS_TOOLBOX_SUB_TAB:t=>e(t,{activeSubTab:"cutSettings"})};EASEL.toolboxActionCreators=EASEL.redux.generateActionCreators(t),EASEL.reducers=EASEL.reducers||{},EASEL.reducers.toolboxReducer=EASEL.redux.mapToReducer(t)}()},function(e,t){!function(){const e={LOADED_PROBLEM_SYMPTOMS:(e,t)=>EASEL.shallowMerge(e,{problemSymptoms:t.payload,errorMessage:null}),FAILED_LOADING_PROBLEM_SYMPTOMS:(e,t)=>EASEL.shallowMerge(e,{errorMessage:t.payload}),LOADED_USER_FEEDBACK:(e,t)=>EASEL.shallowMerge(e,{errorMessage:null,troubleshootingFeedback:t.payload}),FAILED_LOADING_USER_FEEDBACK:(e,t)=>EASEL.shallowMerge(e,{errorMessage:t.payload}),ADD_USER_FEEDBACK(e,t){const n=e.troubleshootingFeedback.slice();return n.push(t.payload),EASEL.shallowMerge(e,{troubleshootingFeedback:n})},SET_SELECTED_PROBLEM_SYMPTOM_ID:(e,t)=>EASEL.shallowMerge(e,{selectedProblemSymptomID:t.payload}),SET_SELECTED_PROBLEM_SYMPTOM_LINK_IDENTIFIER(e,t){let n=null;for(const a of e.problemSymptoms)a.link_identifier===t.payload&&(n=a.id);return EASEL.shallowMerge(e,{selectedProblemSymptomID:n})}};EASEL.troubleshootingConstants={actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.troubleshootingActionCreators=function(){const{actionTypes:e}=EASEL.troubleshootingConstants;return{loadedProblemSymptoms:t=>({type:e.LOADED_PROBLEM_SYMPTOMS,payload:t}),failedLoadingProblemSymptoms:t=>({type:e.FAILED_LOADING_PROBLEM_SYMPTOMS,payload:t}),loadedUserFeedback:t=>({type:e.LOADED_USER_FEEDBACK,payload:t}),failedLoadingUserFeedback:t=>({type:e.FAILED_LOADING_USER_FEEDBACK,payload:t}),addTroubleshootingFeedback:t=>({type:e.ADD_USER_FEEDBACK,payload:t}),setSelectedProblemSymptomID:t=>({type:e.SET_SELECTED_PROBLEM_SYMPTOM_ID,payload:t}),setSelectedProblemSymptomLinkIdentifier:t=>({type:e.SET_SELECTED_PROBLEM_SYMPTOM_LINK_IDENTIFIER,payload:t})}}(),EASEL.reducers=EASEL.reducers||{},EASEL.reducers.troubleshootingReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const e=function(e,t){const n=t.map((function(t){const n=null!=e?e[t]:void 0;if(n)return{snapshot:n,token:t}})).filter((e=>null!=e));return n[n.length-1]},t=function(e){const t=EASEL.shallowMerge(e);return delete t.workpieces,delete t.undoByToken,t},n=function(e){const{activeWorkpieceId:t}=e.workpieces,n=EASEL.shallowMerge(e.workpieces.byId[t]);return delete n.undoByToken,n};EASEL.reducers=EASEL.reducers||{},EASEL.reducers.undoReducer=function(a,r){const{activeWorkpieceId:o}=a.workpieces;if(a=(()=>{if(null!=r.payload?r.payload.undoDescription:void 0){const e=EASEL.dispatcher.getActionToken(),r=n(a);a=EASEL.setIn(a,["workpieces","byId",o,"undoByToken",e],r);const s=t(a);return EASEL.setIn(a,["undoByToken",e],s)}return a})(),["UNDO","REDO"].includes(r.type)){const{tokens:s}=r.payload,i=n(a),l=a.workpieces.byId[o];let c=e(l.undoByToken,s),p=EASEL.shallowMerge((null!=c?c.snapshot:void 0)||l,{undoByToken:l.undoByToken});c&&c.token&&(p=EASEL.setIn(p,["undoByToken",c.token],i)),a=EASEL.setIn(a,["workpieces","byId",o],p),c=e(a.undoByToken,s);const u=t(a),d=a.viewport;return a=EASEL.shallowMerge((null!=c?c.snapshot:void 0)||a,{undoByToken:a.undoByToken,workpieces:a.workpieces}),a=EASEL.setIn(a,["viewport"],d),null!=c&&c.token?EASEL.setIn(a,["undoByToken",c.token],u):a}return a}}()},function(e,t){!function(){const e={SET_UNIT:(e,t)=>EASEL.shallowMerge(e,{preferredUnit:t.payload.unit})};EASEL.unitConstants={actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.unitActionCreators={setUnit:e=>({type:EASEL.unitConstants.actionTypes.SET_UNIT,payload:{unit:e}})},EASEL.unitActions=EASEL.redux.generateDispatchShims(EASEL.unitActionCreators),EASEL.reducers=EASEL.reducers||{},EASEL.reducers.unitReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const{shallowMerge:e}=EASEL,t={HIDE_USER_MODAL:t=>e(t,{visible:!1}),SHOW_USER_MODAL_PROJECTS_TAB:t=>e(t,{visible:!0,activeTab:"projects"}),SHOW_USER_MODAL_ACCOUNT_TAB:t=>e(t,{visible:!0,activeTab:"account"}),SHOW_USER_MODAL_TOOLBOX_TAB:t=>e(t,{visible:!0,activeTab:"toolbox"}),SHOW_USER_MODAL_OPTIONS_TAB:t=>e(t,{visible:!0,activeTab:"options"}),SHOW_USER_MODAL_LEARN_TAB:t=>e(t,{visible:!0,activeTab:"learn"}),SHOW_USER_MODAL_PROFILE_TAB:t=>e(t,{visible:!0,activeTab:"profile"}),SHOW_USER_MODAL_CARVES_TAB:t=>e(t,{visible:!0,activeTab:"carves"}),SHOW_USER_MODAL_TEMPLATES_TAB:t=>e(t,{visible:!0,activeTab:"templates"})};EASEL.userModalActionCreators=EASEL.redux.generateActionCreators(t),EASEL.reducers=EASEL.reducers||{},EASEL.reducers.userModalReducer=EASEL.redux.mapToReducer(t)}()},function(e,t){!function(){const e=EASEL.shallowMerge,t={SET_USER_NOTIFICATION:(t,n)=>e(t,{id:n.payload.id,message:n.payload.message,acknowledgeable:n.payload.acknowledgeable,type:n.payload.type}),CLEAR_USER_NOTIFICATION(t,n){if(t.id===n.payload.id)return e(t,{message:null,id:null})}};EASEL.userNotificationConstants={actionTypes:EASEL.shallowMerge(EASEL.redux.actionTypesFromActions(t))},EASEL.userNotificationActionCreators={setUserNotification:(e,t,n,a)=>({type:EASEL.userNotificationConstants.actionTypes.SET_USER_NOTIFICATION,payload:{id:e,message:t,acknowledgeable:n,type:a}}),clearUserNotification:e=>({type:EASEL.userNotificationConstants.actionTypes.CLEAR_USER_NOTIFICATION,payload:{id:e}})},EASEL.userNotificationActions=EASEL.redux.generateDispatchShims(EASEL.userNotificationActionCreators),EASEL.reducers.userNotificationReducer=EASEL.redux.mapToReducer(t)}()},function(e,t){!function(){const e={SET_SUBSCRIPTION_INFO_LOADING_STATE:(e,t)=>EASEL.shallowMerge(e,{braintreeSubscriptionLoadingState:t.payload.state}),SET_BRAINTREE_TOKEN:(e,t)=>EASEL.shallowMerge(e,{braintreeToken:t.payload}),SET_PRO_INFO(e,t){const{info:n}=t.payload;return n.subscription&&0!==Object.keys(n.subscription).length||(n.subscription=e.easelPro.subscription||{}),EASEL.shallowMerge(e,{easelPro:n})},SET_USER_ID:(e,t)=>EASEL.shallowMerge(e,{userId:t.payload}),SET_IS_LOGGED_IN_USER:(e,t)=>EASEL.shallowMerge(e,{isLoggedInUser:t.payload}),CAN_EDIT_PROJECT:(e,t)=>EASEL.shallowMerge(e,{canEditProject:t.payload}),SET_IS_ADMIN:(e,t)=>EASEL.shallowMerge(e,{isAdmin:t.payload}),CONFIRM_PRO_FREE_DAY_USE:e=>EASEL.shallowMerge(e,{confirmedFreeProDayUse:!0}),SET_IS_BETA_TESTER:(e,t)=>EASEL.shallowMerge(e,{isBetaTester:t.payload}),LOAD_USER_NAME:(e,t)=>EASEL.shallowMerge(e,{userName:t.payload}),NOTE_LOADED_MACHINE_SETTINGS:e=>EASEL.shallowMerge(e,{loadedMachineSettings:!0}),SET_ACTIVATED_EASEL_PRO_PRODUCT_KEY:(e,t)=>EASEL.shallowMerge(e,{activatedEaselProProductKey:t.payload}),SET_UNACTIVATED_EASEL_PRO_PRODUCT_KEYS:(e,t)=>EASEL.shallowMerge(e,{unactivatedEaselProProductKeys:t.payload}),SET_KEYBOARD_CONTROL_ENABLED:(e,t)=>EASEL.shallowMerge(e,{keyboardControlEnabled:t.payload.keyboardControlEnabled}),SET_PROJECT_TEMPLATES_DISMISSED:(e,t)=>EASEL.shallowMerge(e,{projectTemplatesDismissed:t.payload.projectTemplatesDismissed}),SET_PROJECT_TEMPLATES_DISMISSED_FIRST_TIME:(e,t)=>EASEL.shallowMerge(e,{projectTemplatesDismissedFirstTime:t.payload.projectTemplatesDismissedFirstTime,projectTemplatesDismissed:!0}),SET_REPEAT_CARVING_ENABLED:(e,t)=>EASEL.shallowMerge(e,{repeatCarvingEnabled:t.payload.repeatCarvingEnabled}),SET_START_STOP_SAFETY_HEIGHT:(e,t)=>EASEL.shallowMerge(e,{startStopSafetyHeight:t.payload.startStopSafetyHeight}),SET_MACHINE_PROFILES:(e,t)=>EASEL.shallowMerge(e,{machineProfiles:t.payload.machineProfiles}),ADD_MACHINE_PROFILE:(e,t)=>EASEL.shallowMerge(e,{machineProfiles:[...e.machineProfiles,t.payload]}),UPDATE_MACHINE_PROFILE(e,t){const n=t.payload,a=e.machineProfiles.map((e=>e.id===n.id?n:e));return EASEL.shallowMerge(e,{machineProfiles:a})},DELETE_MACHINE_PROFILE:(e,t)=>EASEL.shallowMerge(e,{machineProfiles:e.machineProfiles.filter((e=>e.id!==t.payload.id))}),SET_DEFAULTS:(e,t)=>EASEL.shallowMerge(e,{defaults:t.payload}),SET_DEFAULTS_FALLBACK:(e,t)=>EASEL.shallowMerge(e,{defaultsFallback:t.payload}),SET_PROFILE_DATA:(e,t)=>EASEL.merge(e,{profile:t.payload})};EASEL.userConstants={loadingState:{UNLOADED:"UNLOADED",LOADING:"LOADING",LOADED:"LOADED",ERROR:"ERROR"},actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.userActions={noteLoadedMachineSettings:e=>e(EASEL.userActionCreators.noteLoadedMachineSettings())},EASEL.userActionCreators={setBraintreeToken:e=>({type:EASEL.userConstants.actionTypes.SET_BRAINTREE_TOKEN,payload:e}),setSubscriptionInfoLoadingState:e=>({type:EASEL.userConstants.actionTypes.SET_SUBSCRIPTION_INFO_LOADING_STATE,payload:{state:e}}),setProInfo:e=>({type:EASEL.userConstants.actionTypes.SET_PRO_INFO,payload:{info:e}}),setUserId:e=>({type:EASEL.userConstants.actionTypes.SET_USER_ID,payload:e}),setIsLoggedInUser:e=>({type:EASEL.userConstants.actionTypes.SET_IS_LOGGED_IN_USER,payload:e}),setCanEditProject:e=>({type:EASEL.userConstants.actionTypes.CAN_EDIT_PROJECT,payload:e}),setIsAdmin:e=>({type:EASEL.userConstants.actionTypes.SET_IS_ADMIN,payload:e}),confirmFreeProDayUse:()=>({type:EASEL.userConstants.actionTypes.CONFIRM_PRO_FREE_DAY_USE}),setIsBetaTester:e=>({type:EASEL.userConstants.actionTypes.SET_IS_BETA_TESTER,payload:e}),loadUserName:e=>({type:EASEL.userConstants.actionTypes.LOAD_USER_NAME,payload:e}),noteLoadedMachineSettings:()=>({type:EASEL.userConstants.actionTypes.NOTE_LOADED_MACHINE_SETTINGS}),setBackedUpMachineSettings:e=>({type:EASEL.userConstants.actionTypes.SET_BACKED_UP_MACHINE_SETTINGS,payload:e}),setActivatedEaselProProductKey:e=>({type:EASEL.userConstants.actionTypes.SET_ACTIVATED_EASEL_PRO_PRODUCT_KEY,payload:e}),setUnactivatedEaselProProductKeys:e=>({type:EASEL.userConstants.actionTypes.SET_UNACTIVATED_EASEL_PRO_PRODUCT_KEYS,payload:e}),setKeyboardControlEnabled:e=>({type:EASEL.userConstants.actionTypes.SET_KEYBOARD_CONTROL_ENABLED,payload:{keyboardControlEnabled:e}}),setRepeatCarvingEnabled:e=>({type:EASEL.userConstants.actionTypes.SET_REPEAT_CARVING_ENABLED,payload:{repeatCarvingEnabled:e}}),setProjectTemplatesDismissed:e=>({type:EASEL.userConstants.actionTypes.SET_PROJECT_TEMPLATES_DISMISSED,payload:{projectTemplatesDismissed:e}}),setProjectTemplatesDismissedFirstTime:()=>({type:EASEL.userConstants.actionTypes.SET_PROJECT_TEMPLATES_DISMISSED_FIRST_TIME,payload:{projectTemplatesDismissedFirstTime:!0}}),setStartStopSafetyHeight:e=>({type:EASEL.userConstants.actionTypes.SET_START_STOP_SAFETY_HEIGHT,payload:{startStopSafetyHeight:e}}),setMachineProfiles:e=>({type:EASEL.userConstants.actionTypes.SET_MACHINE_PROFILES,payload:{machineProfiles:e}}),addMachineProfile:e=>({type:EASEL.userConstants.actionTypes.ADD_MACHINE_PROFILE,payload:e}),updateMachineProfile:e=>({type:EASEL.userConstants.actionTypes.UPDATE_MACHINE_PROFILE,payload:e}),deleteMachineProfile:e=>({type:EASEL.userConstants.actionTypes.DELETE_MACHINE_PROFILE,payload:e}),setDefaults:e=>({type:EASEL.userConstants.actionTypes.SET_DEFAULTS,payload:e}),setDefaultsFallback:e=>({type:EASEL.userConstants.actionTypes.SET_DEFAULTS_FALLBACK,payload:e}),setProfileData:e=>({type:EASEL.userConstants.actionTypes.SET_PROFILE_DATA,payload:e})},EASEL.reducers=EASEL.reducers||{},EASEL.reducers.userReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const e=e=>{let t,n=EASEL.constants.PRIMARY_NAV_HEIGHT;(e.windowSize.width<=EASEL.constants.DOUBLE_NAV_FORCE_MAX_WIDTH||EASEL.machineStateStore.isMachineCarving()&&e.windowSize.width<=EASEL.constants.DOUBLE_NAV_CONDITIONAL_MAX_WIDTH)&&(n*=2),t=e.workpiecesVisible?EASEL.constants.DEFAULT_WORKPIECES_HEIGHT:EASEL.constants.HIDDEN_WORKPIECES_HEIGHT;const a=e.windowSize.width*e.editorFraction,r=e.windowSize.height-(n+t);return e.editorSize.width!==a||e.editorSize.height!==r?EASEL.shallowMerge(e,{editorSize:{width:a,height:r}}):e},t=function(e,t,n){const{width:a,height:r}=e.global.editorSize,o=EASEL.shallowMerge(e.workpiece),{zoomLevel:s}=o,i=EASEL.constants.PIXELS_PER_INCH*s,l=EASEL.materialStore.getActiveMaterial().dimensions,c=EASEL.machineSettingsSelectors.getWorkArea(EASEL.store.getState()),p=Math.max(l.x,c.x),u=Math.max(l.y,c.y);return o.x=EASEL.math.clamp(t,a/2-p*i,a/2),o.y=EASEL.math.clamp(n,r/2-c.y*i,r/2+(u-c.y)*i),EASEL.shallowMerge(e,{workpiece:o})},n=function(e,t,n){const{zoomLevel:a}=e.workpiece,r=EASEL.viewportHelper.calculateConstrainedZoomLevel(a*t);return EASEL.shallowMerge(e,{workpiece:EASEL.viewportHelper.zoomStateToLevelAtPoint(e.workpiece,r,n)})},a=function(e,t){const{width:a,height:r}=e.global.editorSize;return n(e,t,{x:a/2,y:r/2})},r=function(e,t,n){const a=EASEL.machineSettingsSelectors.getWorkArea(EASEL.store.getState());return EASEL.viewportHelper.zoomStateToRect(t,e,a,n)},o={ZOOM_TO_RECT:(e,t)=>EASEL.shallowMerge(e,{workpiece:r(e.global.editorSize,e.workpiece,t.payload)}),ZOOM_AT_POINT:(e,t)=>n(e,t.payload.zoomMultiplier,t.payload.point),ZOOM_IN:e=>a(e,1.25),ZOOM_OUT:e=>a(e,.8),PAN:(e,n)=>function(e,n,a){const{x:r,y:o}=EASEL.shallowMerge(e.workpiece);return t(e,r-n,o-a)}(e,n.payload.deltaX,n.payload.deltaY),PAN_TO:(e,n)=>function(e,n,a){const{width:r,height:o}=e.global.editorSize,{zoomLevel:s}=EASEL.shallowMerge(e.workpiece);return t(e,r/2-s*n,o/2-s*a)}(e,n.payload.x,n.payload.y),SET_WINDOW_SIZE:(t,n)=>function(t,n){const a=EASEL.shallowMerge(t.global,{windowSize:n});return EASEL.shallowMerge(t,{global:e(a)})}(t,n.payload),SET_EDITOR_FRACTION:(t,n)=>function(t,n){const a=EASEL.shallowMerge(t.global,{editorFraction:n});return EASEL.shallowMerge(t,{global:e(a)})}(t,n.payload),SET_WORKPIECES_SHOWING:(t,n)=>function(t,n){const a=EASEL.shallowMerge(t.global,{workpiecesVisible:n});return EASEL.shallowMerge(t,{global:e(a)})}(t,n.payload),REPORT_CONNECTION_STATE:t=>(EASEL.dispatcher.waitFor([EASEL.machineStateStore.dispatchID]),EASEL.shallowMerge(t,{global:e(t.global)}))};EASEL.viewportConstants={actionTypes:EASEL.redux.actionTypesFromActions(o)},EASEL.viewportActionCreators={setWindowSize:({width:e,height:t})=>({type:EASEL.viewportConstants.actionTypes.SET_WINDOW_SIZE,payload:{width:e,height:t}}),setEditorFraction:e=>({type:EASEL.viewportConstants.actionTypes.SET_EDITOR_FRACTION,payload:e}),setWorkpiecesVisible:e=>({type:EASEL.viewportConstants.actionTypes.SET_WORKPIECES_SHOWING,payload:e}),zoomToRect:({left:e,bottom:t,right:n,top:a})=>({type:EASEL.viewportConstants.actionTypes.ZOOM_TO_RECT,payload:{left:e,bottom:t,right:n,top:a}}),zoomAtPoint:e=>({type:EASEL.viewportConstants.actionTypes.ZOOM_AT_POINT,payload:{zoomMultiplier:e.zoomMultiplier,point:e.point}}),zoomIn:()=>({type:EASEL.viewportConstants.actionTypes.ZOOM_IN}),zoomOut:()=>({type:EASEL.viewportConstants.actionTypes.ZOOM_OUT}),pan:e=>({type:EASEL.viewportConstants.actionTypes.PAN,payload:{deltaX:e.deltaX,deltaY:e.deltaY}}),panTo:e=>({type:EASEL.viewportConstants.actionTypes.PAN_TO,payload:{x:e.x,y:e.y}}),homeViewport(){const e=EASEL.materialStore.getActiveMaterial();if(null!=e)return{type:EASEL.viewportConstants.actionTypes.ZOOM_TO_RECT,payload:{left:0,bottom:0,right:e.dimensions.x,top:e.dimensions.y}}}};EASEL.viewportActions=EASEL.redux.generateDispatchShims(EASEL.viewportActionCreators),EASEL.reducers=EASEL.reducers||{},EASEL.reducers.viewportReducer=EASEL.redux.mapToReducer(o),EASEL.reducers.setViewportForNewWorkpieceReducer=function(e,t){const n=null!=EASEL.materialStore?EASEL.materialStore.getActiveMaterial():void 0;if("ADD_WORKPIECE"===t.type&&n){const a=t.payload.workpiece.id,o=e.workpieces.byId[a],s=e.viewport.editorSize,i=r(s,o.viewport,{left:0,bottom:0,right:n.dimensions.x,top:n.dimensions.y});return EASEL.setIn(e,["workpieces","byId",a,"viewport"],i)}return e}}()},function(e,t){!function(){const e={SET_PASS_TYPE:(e,t)=>EASEL.shallowMerge(e,{passType:t.payload}),SET_USING_LAST_HOME:(e,t)=>EASEL.shallowMerge(e,{usingLastHome:t.payload}),SET_HAS_REPEATED_CARVE:(e,t)=>EASEL.shallowMerge(e,{hasCompletedCarve:t.payload})};EASEL.walkthroughConstants={actionTypes:EASEL.redux.actionTypesFromActions(e)},EASEL.walkthroughActionCreators={setPassType:e=>({type:EASEL.walkthroughConstants.actionTypes.SET_PASS_TYPE,payload:e}),setUsingLastHome:e=>({type:EASEL.walkthroughConstants.actionTypes.SET_USING_LAST_HOME,payload:e}),setHasCompletedCarve:e=>({type:EASEL.walkthroughConstants.actionTypes.SET_HAS_REPEATED_CARVE,payload:e})},EASEL.walkthroughActions=EASEL.redux.generateDispatchShims(EASEL.walkthroughActionCreators),EASEL.reducers=EASEL.reducers||{},EASEL.reducers.walkthroughReducer=EASEL.redux.mapToReducer(e)}()},function(e,t){!function(){const e=function(e,t,n){const a=e.workpieceConfiguration,r={};for(let o of Object.keys(a||{})){const{newAction:e,defaultData:n}=a[o];r[o]="duplicate"===e&&(null!=t?t[o]:void 0)||n}return EASEL.setIn(e,["byId",n],r)},t=(e,t)=>EASEL.setIn(e,["activeWorkpieceId"],t),n={ADD_WORKPIECE(t,n){const a=null!=t?t.byId[t.activeWorkpieceId]:void 0;return e(t,a,n.payload.workpiece.id)},DUPLICATE_WORKPIECE:(e,t)=>((e,t,n)=>EASEL.setIn(e,["byId",n],e.byId[t]))(e,t.payload.originalId,t.payload.newId),SHOW_WORKPIECE:(e,n)=>t(e,n.payload.id),DELETE_WORKPIECE:(e,t)=>function(e,t){const n=EASEL.setIn(e,["byId",t],null);if(t===e.activeWorkpieceId){const e=EASEL.workpieceStore.nextActiveIdAfterDeletingId(t);return EASEL.setIn(n,["activeWorkpieceId"],e)}return n}(e,t.payload.id),SET_WORKPIECE_THUMBNAIL:(e,t)=>((e,t,n)=>EASEL.setIn(e,["byId",t,"imageData"],n))(e,t.payload.id,t.payload.imageData)};EASEL.workpieceActionCreators={addWorkpiece:e=>({type:"ADD_WORKPIECE",payload:{workpiece:e}}),duplicateWorkpiece:({originalId:e,newId:t})=>({type:"DUPLICATE_WORKPIECE",payload:{originalId:e,newId:t}}),showWorkpiece:e=>({type:"SHOW_WORKPIECE",payload:{id:e}}),deleteWorkpiece:e=>({type:"DELETE_WORKPIECE",payload:{id:e}}),setWorkpieceThumbnail:(e,t)=>({type:"SET_WORKPIECE_THUMBNAIL",payload:{id:e,imageData:t}})};const a=EASEL.redux.mapToReducer(n);EASEL.reducers=EASEL.reducers||{},EASEL.reducers.workpieceReducer=function(n,r){return n=null!=n.activeWorkpieceId?n:t(e(n,null,1),1),a(n,r)}}()},function(e,t){EASEL.reducers.workpieceSliceReducer=(e,t)=>function(n,a){const r=n[e],o=n.workpieces.activeWorkpieceId,s={workpiece:n.workpieces.byId[o][e],global:r},i=t(s,a);if(i===s)return n;{const t=EASEL.setIn(n,["workpieces","byId",o,e],i.workpiece);return EASEL.setIn(t,[e],i.global)}}},function(e,t){EASEL.appSelectors=function(){const e=e=>e.app;return{getAppState:e,getActiveAppProperties:t=>e(t).appProperties,getActiveApp:t=>e(t).activeApp}}()},function(e,t){EASEL.bitSelectors=function(){const e=function(e,t){return null==t&&(t=e.workpieces.activeWorkpieceId),e.workpieces.byId[t].bits},t=(t,n)=>e(t,n).bitParams,n=function(e,n){const a=t(e,n).bit;for(let t of e.bits)if(t.id===a.id)return t;return a},a=function(e,n){const a=t(e,n).detailBit;if(null!=a)for(let t of e.bits)if(t.id===a.id)return t;return a},r=(e,n)=>t(e,n).useDetailBit;return{bitParams:t,bits:e=>e.bits,bit:n,detailBit:a,useDetailBit:r,strokeBit:function(e,t){return r(e,t)?a(e,t):n(e,t)},getBitWorkpieceState:e,isVCarvingBitInUse:function(e){const n=t(e);if(null==n)return!1;const a=n.bit?n.bit.id:null,r=n.useDetailBit&&n.detailBit?n.detailBit.id:null;if("other-v-bit"===a||"other-v-bit"===r)return!0;for(let t of e.bits)if(null!=t.id&&"V"===t.type&&(t.id===a||t.id===r))return!0;return!1},bitsForDetailing:function(e,t,n){const a={title:"This bit is too large",description:"The detail bit cannot be larger than the main bit. Please select a smaller bit."};return n.map((function(n){const r="V"===n.type,o=null!=t&&EASEL.bit(n).inchWidth()<=EASEL.bit(t).inchWidth();return EASEL.shallowMerge(n,!e||r||o?void 0:{error:a})}))},bitsForRoughing:function(e,t,n){const a={title:"This bit is too small",description:"The main bit cannot be smaller than the detailing bit. Please select a larger bit."},r={title:"V Bit Roughing",description:"V Bits can only be used as a detail bit. Please remove your detail bit if you would like to use a V Bit as the main bit, or select a end mill bit for roughing."};return n.map((function(n){const o="V"===n.type,s=null!=t&&"V"===t.type,i=null!=t&&EASEL.bit(n).inchWidth()>=EASEL.bit(t).inchWidth();let l;return e&&(o?l=r:i||s||(l=a)),EASEL.shallowMerge(n,{error:l})}))}}}()},function(e,t){EASEL.cutSettingsSelectors={getCutSettings:e=>e.cutSettings}},function(e,t){EASEL.externalGcodeSelectors={getGcode(e,t){null==t&&(t=e.workpieces.activeWorkpieceId);const n=e.workpieces.byId[t];return n.externalGcode?n.externalGcode.gcode:null}}},function(e,t){EASEL.firmwareVersionSelectors=function(){const e=e=>e.firmwareVersions;return{getSupportedVersionsForMachine:t=>n=>e(t).supportedVersions[n]||[],getCurrentVersionHexFileUrlForMachine:t=>n=>e(t).currentVersionHexFileURL[n],getCurrentVersionNumberForMachine:t=>n=>e(t).currentVersionNumber[n]}}()},function(e,t){EASEL.fontConstants={defaultFontName:"Bemio"},EASEL.fontSelectors=function(){const e=e=>e.font,t=t=>e(t).errors;return{getToolbarFonts:t=>e(t).toolbar,getFontState:e,getFontData:function(t,n){const{data:a}=e(t),r=a[n];return r||a[EASEL.fontConstants.defaultFontName]},getFontErrors:t,getFontErrorsModalVisible:t=>e(t).errorModalVisible,hasFontErrors:function(e){const n=t(e);return Object.keys(n).filter((e=>null!=n[e]&&n[e].length>0)).length>0},isLoaded:(t,n)=>e(t).group[n].loaded===e(t).group[n].total,getLastLoadedFontTimestamp:t=>e(t).lastFontLoadedTimestamp,getGroupLoadedInfo:(t,n)=>e(t).group[n]}}()},function(e,t){EASEL.internalGcodeSelectors={getGcodePasses(e,t){null==t&&(t=e.workpieces.activeWorkpieceId);const n=e.workpieces.byId[t];return n.internalGcode?n.internalGcode.gcodePasses:[]}}},function(e,t){EASEL.jobSettingsSelectors=function(){const{bitKeys:e}=EASEL.jobSettingsConstants,t=function(e,t){return null==t&&(t=e.workpieces.activeWorkpieceId),e.workpieces.byId[t].jobSettings},n=function(e,n,a){const r=t(e,a)[n];return r?r.fillAngle:null},a=function(e,n,a){const r=t(e,a)[n];return r?r.rampingAngle:null};return{getFillAngle:n,getRampingAngle:a,isRampingInUse:function(t,n){const r=EASEL.bitSelectors.useDetailBit(t,n),o=null!=a(t,e.bit,n),s=null!=a(t,e.detailBit,n);return o||s&&r},isRasterFillingInUse:function(t,a){const r=EASEL.bitSelectors.useDetailBit(t,a),o=null!=n(t,e.bit,a),s=null!=n(t,e.detailBit,a);return o||s&&r}}}()},function(e,t){EASEL.jobStatusSelectors=function(){const e=e=>e.jobStatus,t=t=>e(t).currentFeedRate.percentage,n=t=>e(t).currentSpindleSpeed.percentage;return{getProjectName:t=>e(t).projectName,getPercentComplete:t=>e(t).percentComplete,getCurrentFeedRatePercentage:t,getCurrentFeedRate:function(t){const n=e(t).currentFeedRate;if(null!=n.value&&null!=n.unit)return`${n.value.toFixed()} ${n.unit}`},getCurrentSpindleSpeedPercentage:n,getCurrentSpindleSpeed:t=>e(t).currentSpindleSpeed,getOverridePercentages:e=>({feedRate:t(e),spindleSpeed:n(e)}),getTimeEstimate:t=>e(t).timeEstimate}}()},function(e,t){EASEL.machineSettingsSelectors=function(){const e=e=>e.machineSettings;var t=t=>e(t).workArea;return{getMachineSettingsState:e,getMachineType:t=>e(t).machineType,isCarvey:t=>e(t).machineType===EASEL.machineType.CARVEY,getThirdPartyModel:t=>e(t).thirdPartyModel,getElectronicsType:t=>e(t).electronicsType,getRecommendedSettings:function(t){return EASEL.machineConfigurationConstants.recommendedSettings[e(t).machineType]||{}},getBelts:t=>e(t).belts,getComPort:t=>e(t).comPort,getRailSize:t=>e(t).railSize,getLeadScrewType:t=>e(t).leadScrewType,getSpindleType:t=>e(t).spindleType,getAutomaticSpindleControl:t=>e(t).automaticSpindleControl,getSpindleRPM:t=>e(t).spindleRPM,getGantryType:t=>e(t).gantryType,getKeepInRects:function(n){return e(n).machineType===EASEL.machineType.CARVEY?[{minX:0,maxX:t(n).x,minY:0,maxY:t(n).y,minZ:-4,maxZ:4}]:[]},getKeepOutRects:function(t){if(e(t).machineType===EASEL.machineType.CARVEY){const{WIDTH:e,LENGTH:t,OFFSET:n,FILLET:a,KEEP_AWAY:r}=EASEL.smartClampConstants;return[{minX:-n-r,maxX:t-n+r,minY:-n-r,maxY:e-n+r,radius:a+r,minZ:-1/0,maxZ:1/0},{minX:-n-r,maxX:e-n+r,minY:-n-r,maxY:t-n+r,radius:a+r,minZ:-1/0,maxZ:1/0}]}return[]},getManualConnectionPreference:t=>e(t).manualConnectionPreference,getProbeEnabled:t=>e(t).probeEnabled,getProbePreferences:t=>e(t).probePreferences,getAccessoriesEnabled:t=>e(t).accessoriesEnabled,getHasDustShoe:t=>e(t).hasDustShoe,getWorkArea:t,getMachineProfileId:t=>e(t).profileId,isMachineSetupComplete:t=>e(t).machineType===EASEL.machineType.CARVEY||!e(t).isDefault,isDefault:t=>e(t).isDefault}}()},function(e,t){EASEL.materialSelectors={getMaterialDimensions(e){if(e.material)return e.material.dimensions}}},function(e,t){EASEL.pageSelectors=function(){const e=e=>e.page;return{isPageVisible:(t,n)=>e(t).visible&&e(t).pageName===n,isAnyPageVisible:t=>e(t).visible}}()},function(e,t){EASEL.previewSelectors=function(){const e=e=>e.preview;return{designVisible:t=>e(t).design.visible,designStatus:t=>e(t).design.status,materialVisible:t=>e(t).material.visible,uncutAreasVisible:t=>e(t).uncutAreas.visible,wasteboardVisible:t=>e(t).wasteboard.visible,toolpathsGenerated:t=>e(t).toolpaths.generated}}()},function(e,t,n){const a=n(28);EASEL.proSelectors=function(){const e=function(e){const t=[],n=[],a=[];for(const{shape:r}of EASEL.volumeStore.getVolumesForWorkpiece(EASEL.workpieceSelectors.getActiveId(e)))if("text"===r.type&&(EASEL.fonts[r.font]||t.push(r.font),r.textEffect&&"None"!==r.textEffect.name&&n.push(r.textEffect.name)),r.icon&&r.icon.pro&&a.push(r.icon.name),r.combinedProFeatures)for(const{type:e,name:o}of r.combinedProFeatures)switch(e){case"font":t.push(o);break;case"textEffect":n.push(o);break;case"icon":a.push(o)}return{fonts:EASEL.uniq(t),effects:EASEL.uniq(n),icons:EASEL.uniq(a)}},t={ADDITIONAL_CUT_THROUGH:{label:"Additional Depth",selector:()=>EASEL.volumeStore.getVolumes().filter((e=>e.cut.additionalDepthAmount>0)).length>0,featureType:"carving"},RASTER_FILL:{label:"Raster Filling",selector:EASEL.jobSettingsSelectors.isRasterFillingInUse,featureType:"carving"},VCARVING:{label:"V Carving",selector:EASEL.bitSelectors.isVCarvingBitInUse,featureType:"carving"},FONT_LIBRARY:{label:"Font Library",selector:t=>e(t).fonts.length>0,featureType:"carving"},CUSTOM_MATERIAL:{label:"Custom Material",selector:()=>EASEL.materialStore.getActiveMaterial().source===a.USER_ADDED_CUSTOM,featureType:"carving"},CUSTOM_BIT:{label:"Custom Bit",selector(e){const t=EASEL.bitSelectors.bit(e);return null!=t&&t.source===a.USER_ADDED_CUSTOM},featureType:"carving"},CUSTOM_DETAIL_BIT:{label:"Custom Detail Bit",selector(e){const t=EASEL.bitSelectors.detailBit(e);return null!=t&&t.source===a.USER_ADDED_CUSTOM},featureType:"carving"},CUT_SETTINGS:{label:"Saved Cut Settings",selector(e){const t="detail"===EASEL.walkthroughSelectors.getPassType(e)?EASEL.jobSettingsConstants.bitKeys.detailBit:EASEL.jobSettingsConstants.bitKeys.bit;return EASEL.utility.jobSettingsCalculator(t).isUsingLoadedSavedSettings()},featureType:"carving"},PROJECT_LABELS:{label:"Project Labels",selector:e=>(EASEL.projectMetadataStore.assignedLabels(e)||[]).length>0,featureType:"project-organization"},TEXT_EFFECTS:{label:"Text Effects",selector:t=>e(t).effects.length>0,featureType:"carving"},TILING:{label:"Tiling",selector:e=>EASEL.tileSelectors.isTileSelected(e),featureType:"carving"},PRO_ICON:{label:"Pro Icon",selector:t=>e(t).icons.length>0,featureType:"carving"},RAMPING:{label:"Ramping toolpaths",selector:EASEL.jobSettingsSelectors.isRampingInUse,featureType:"carving"}},n=function(e){if(null==EASEL.projectMetadataStore.getID())return[];const n=EASEL.externalGcodeSelectors.getGcode(e);if(null!=n&&n.length>0)return[];const a=[];for(let r of Object.keys(t||{})){const{selector:n,label:o,featureType:s}=t[r];n(e)&&a.push({key:r,label:o,type:s})}return a};return{getInUseProFeatures:n,getInUseCarvingProFeatures:function(e){return n(e).filter((e=>"carving"===e.type))},getPlans:e=>e.easelPro.plans,getSelectedPlanID:e=>e.easelPro.selectedPlanID,isModalVisible:e=>e.easelPro.modalVisible,isCarvePending:e=>e.easelPro.carveOnModalExit,isLoading:e=>e.easelPro.loading,getError:e=>e.easelPro.error,getCurrentlySelectedPlanName:e=>{const t=(e=>{if(0===e.easelPro.plans.length)return null;const t=EASEL.userSelectors.getEaselProInfo(e);return t?e.easelPro.plans.find((e=>e.id===t.subscription.plan_id)):null})(e);return t?t.name:null}}}()},function(e,t){EASEL.saveStatusSelectors=function(){const e=e=>e.saveStatus;return{isSaved:t=>e(t).isSaved,isUnsaved:t=>e(t).isUnsaved,isSaving:t=>e(t).isSaving,getError:t=>e(t).error}}()},function(e,t){EASEL.threeDPrototypeSelectors=function(){const e=(e,t)=>{null==t&&(t=e.workpieces.activeWorkpieceId);return e.workpieces.byId[t].threeDPrototype};return{getMesh:(t,n)=>e(t,n).mesh,getMaterial:(t,n)=>e(t,n).material,getRoughing:(t,n)=>e(t,n).roughing,getFinishing:(t,n)=>e(t,n).finishing,getTransform:(t,n)=>e(t,n).transform}}()},function(e,t){EASEL.toolboxSelectors={getActiveTab:e=>e.toolbox.activeSubTab,getVisible:e=>e.toolbox.visible}},function(e,t){EASEL.troubleshootingSelectors=function(){const e=e=>e.troubleshooting,t=t=>e(t).problemSymptoms.filter((e=>e.machine_type===EASEL.machineSettingsSelectors.getMachineType(t)||e.machine_type===EASEL.machineType.ALL));return{getProblemSymptoms:t,getTroubleshootingFeedback:t=>e(t).troubleshootingFeedback,getErrorMessage:t=>e(t).errorMessage,getSelectedProblemSymptom:n=>{const a=e(n).selectedProblemSymptomID;return t(n).find((e=>e.id===a))}}}()},function(e,t){EASEL.unitSelectors=function(){const e=e=>e.unit;return{getUnitState:e,getPreferredUnit:t=>e(t).preferredUnit}}()},function(e,t){EASEL.userSelectors=function(){const e=e=>e.user,t=t=>e(t).easelPro,n=t=>"trial"===e(t).easelPro.status,a=t=>"subscribed_promo"===e(t).easelPro.status,r=function(e,n){const a=t(n).easel_pro_expiration_date;return null!=a?a<e:null},o=function(e,n){const a=t(n).current_pro_carving_day_start;return a&&moment(a).add(24,"h")>e},s=(t,o)=>(!n(o)&&!a(o)||!r(t,o))&&e(o).easelPro.enabled,i=function(e,t){return o(e,t)||s(e,t)};return{getBraintreeSubscriptionLoadingState:t=>e(t).braintreeSubscriptionLoadingState,getFreeProCarvingDaysRemaining:e=>t(e).free_pro_carving_days_remaining,getDayPassesRemaining:e=>t(e).day_passes_remaining,getEaselProDayTimeLeftDisplay(e,n){const a=t(n).current_pro_carving_day_start;if(a)return EASEL.utility.timeFormatter.timeLeft(moment(a).add(24,"h").valueOf(),e)},confirmedFreeDayUse(n){const a=t(n).current_pro_carving_day_start,r=e(n).confirmedFreeProDayUse;return a&&r},getTrialExpirationDate:t=>e(t).easelPro.trial_expiration_date,getUserState:e,isProEnabled:i,isProSubscriber:s,authorizedToCarve:(e,t)=>0===EASEL.proSelectors.getInUseCarvingProFeatures(t).length||i(e,t),activatedEaselProProductKey:t=>e(t).activatedEaselProProductKey,unactivatedEaselProProductKeys:t=>e(t).unactivatedEaselProProductKeys,getSubscriptionStatus:t=>e(t).easelPro.status,easelProAccessType:(e,n)=>i(e,n)?o(e,n)?t(n).current_pro_carving_day_used_day_pass?"Day Pass":"Free Day":"Subscribed":"None",getBraintreeToken:t=>e(t).braintreeToken,isProExpired:r,isTrialUser:n,isPromoUser:a,getEaselProInfo:t,hasPaymentTokenOnFile:t=>e(t).easelPro.payment_method_token_set,isLoggedInUser:t=>e(t).isLoggedInUser,canEditProject:t=>e(t).canEditProject,getUserId:t=>e(t).userId,isAdmin:t=>e(t).isAdmin,isBetaTester:t=>e(t).isBetaTester,getLoadedMachineSettings:t=>e(t).loadedMachineSettings,getBackedUpMachineSettings:t=>e(t).backedUpMachineSettings,getKeyboardControlEnabled:t=>e(t).keyboardControlEnabled,getStartStopSafetyHeight:t=>e(t).startStopSafetyHeight,getOriginSafetyHeight(t,n){const a=e(n).startStopSafetyHeight,r=t.safetyHeight;return Math.max(null!=r?r:.15,null!=a?a:.15)},getMachineProfiles:t=>e(t).machineProfiles,getCurrentMachineProfile(e){const t=EASEL.machineSettingsSelectors.getMachineProfileId(e);return this.getMachineProfiles(e).find((e=>e.id===t))},getRapidRetractsEnabled:e=>EASEL.userSelectors.isProEnabled(Date.now(),e),getProjectDefaults:t=>e(t).defaults&&e(t).defaults.project||{},getProjectDefaultsFallback:t=>e(t).defaultsFallback.project,isRepeatCarvingEnabled:t=>e(t).repeatCarvingEnabled,areProjectTemplatesDismissed:t=>e(t).projectTemplatesDismissed,areProjectTemplatesDismissedFirstTime:t=>e(t).projectTemplatesDismissedFirstTime,getProfileImageUrl:t=>e(t).profile.profileImageUrl,getProfileData:t=>e(t).profile}}()},function(e,t){EASEL.viewportSelectors=function(){const e=e=>e.viewport;return{getEditorSize:t=>e(t).editorSize,getWindowSize:t=>e(t).windowSize,getWorkpiecesVisible:t=>e(t).workpiecesVisible,getWorkpieceViewport:function(e,t){return null==t&&(t=e.workpieces.activeWorkpieceId),e.workpieces.byId[t].viewport}}}()},function(e,t){EASEL.walkthroughSelectors={getPassType:e=>e.walkthrough.passType,getUsingLastHome:e=>e.walkthrough.usingLastHome,getHasCompletedCarve:e=>e.walkthrough.hasCompletedCarve}},function(e,t){EASEL.workpieceSelectors=function(){const e=e=>e.workpieces.activeWorkpieceId;return{getActiveId:e,getThumbnail:function(t,n){null==n&&(n=e(t));const a=t.workpieces.byId[n];return a?a.imageData:null}}}()},function(e,t){EASEL.defaultState={undoByToken:{},userModal:{visible:!1,activeTab:"projects"},features:{features:[],errorMessage:null},bits:[],cutSettings:[],page:{visible:!1,pageName:null},toolbox:{activeSubTab:"bits"},workpieces:{byId:{},activeWorkpieceId:null,workpieceConfiguration:{imageData:{newAction:"default",defaultData:null},viewport:{newAction:"default",defaultData:{x:0,y:0,zoomLevel:null}},internalGcode:{newAction:"default",defaultData:{gcodePasses:[]}},externalGcode:{newAction:"default",defaultData:{gcode:null}},jobSettings:{newAction:"duplicate",defaultData:{fillAngle:null}},bits:{newAction:"duplicate",defaultData:{bitParams:{bit:{id:"INVENTABLES_BLACK_BIT",unit:"in",width:.125,type:"Straight cut",tipAngle:0}}}},threeDPrototype:{newAction:"duplicate",defaultData:{transform:{orientation:"Top",translation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{z:0}},material:{x:29,y:12,z:2,safez:.2},roughing:{dpp:.3,stepOver:.4,bitWidth:.25,feed:100,plunge:50},finishing:{stepOver:.1,bitWidth:.125,rasterAngle:0,feed:50,plunge:25},version:1}},tiles:{newAction:"duplicate",defaultData:{tileOverlap:1}}}},viewport:{editorFraction:EASEL.constants.DEFAULT_EDITOR_FRACTION,editorSize:{height:680,width:680},windowSize:{height:680,width:680},workpiecesVisible:!0},preview:{design:{visible:!0,status:"WORKING"},material:{visible:!0},toolpaths:{visible:!1,status:"DISABLED",generated:!1},uncutAreas:{visible:!1},wasteboard:{visible:!0}},machineSettings:{accessoriesEnabled:!1,machineType:"x-carve",thirdPartyModel:null,electronicsType:"arduino-gshield",manualConnectionPreference:!1,comPort:null,workArea:{x:11.2,y:11.2},railSize:{x:500,y:500},leadScrewType:"m8",spindleType:"24v",automaticSpindleControl:!1,spindleRPM:14e3,probeEnabled:!1,probePreferences:{probeDistance:3.1,probeThickness:.59,probeRate:5,probeRetractDistance:.25,units:"in"},hasDustShoe:!1,isDefault:!0},firmwareVersions:{supportedVersions:{},currentVersionHexFileURL:{},currentVersionNumber:{}},app:{apps:[],activeApp:null,appProperties:null,appOutput:"",appVolumes:[],appStatus:"IDLE",errorMessage:null,appListOpen:!1},unit:{preferredUnit:"in"},projects:{requesting:!1,projects:null,count:null,view:"thumbnail",starred:!1,filterLabels:[],isAscendingSort:!1,sortValue:"sortDate",error:null},user:{braintreeToken:null,easelPro:{},isAdmin:!1,isLoggedInUser:!1,canEditProject:!1,braintreeSubscriptionLoadingState:"UNLOADED",loadedMachineSettings:!1,keyboardControlEnabled:!1,repeatCarvingEnabled:!1,profile:{},projectTemplatesDismissed:!1,projectTemplatesDismissedFirstTime:!1},font:{group:{toolbar:{total:0,loaded:0},pro:{total:0,loaded:0}},lastFontLoadedTimestamp:null,data:{},errors:{},errorModalVisible:!1,toolbar:[],fontList:{visible:!1},fontLibrary:{}},easelPro:{plans:[],selectedPlanID:null,error:null},designElements:{elements:[],loadStatus:"UNLOADED",errorMessage:null,open:!1},jobStatus:{projectName:null,percentComplete:0,timeEstimate:0,currentFeedRate:{},currentSpindleSpeed:{}},saveStatus:{isSaved:!1,isUnsaved:!1,isSaving:!1,error:null},userNotification:{message:null},troubleshooting:{problemSymptoms:[],troubleshootingFeedback:[],errorMessage:null,selectedProblemSymptomID:null},walkthrough:{passType:"roughing",usingLastHome:!1,hasCompletedCarve:!1}}},function(e,t){EASEL.projectUpdatesBroadcaster=(()=>{this.subscription=null,this.lastMousePositionEvent=null,this.counter=0,this.lastReceivedStateCounter,this.receivedStateQueue={};const e=(e,t)=>{null!=this.subscription&&(null!=e.mousePosition?Date.now()-this.lastMousePositionEvent>100&&(this.lastMousePositionEvent=Date.now(),this.subscription.send({payload:e,type:t})):(this.counter+=1,this.subscription.send({payload:e,type:t,counter:this.counter})))};return{setSubscription:e=>{this.subscription=e},broadcastUpdate:e,reduxBroadcast:()=>t=>n=>(e(n,"redux"),t(n)),queuedUpdate:e=>{if(null!=e.counter){if(this.lastReceivedStateCounter=this.lastReceivedStateCounter||e.counter,e.counter===this.lastReceivedStateCounter+1)return this.lastReceivedStateCounter+=1,delete this.receivedStateQueue[e.counter],!1;if(e.counter>this.lastReceivedStateCounter+1)return this.receivedStateQueue[e.counter]=e,!0}return!1},getNextUpdateInQueue:()=>this.receivedStateQueue[this.lastReceivedStateCounter+1]}})()},function(e,t){EASEL.editorActions=function(){const{actionTypes:e}=EASEL.editorConstants,{dispatcher:t}=EASEL,n=()=>t.dispatch({actionType:e.CANCEL_NEW_PATH_MODE}),a=n=>t.dispatch({undoDescription:"Add point",actionType:e.SET_NEW_PATH_POINTS,points:n});return{select:(...n)=>t.dispatch({actionType:e.SELECT,ids:n}),deselect:()=>t.dispatch({actionType:e.DESELECT}),startEditing:function(n){const a=EASEL.volumeStore.getVolumes([n])[0].shape;EASEL.shapeUtils.pathifyShape(a)&&(EASEL.stats.trackEventOnce("Activate Point Editing Mode"),t.dispatch({actionType:e.START_EDITING,id:n}))},cancelEditing:()=>t.dispatch({actionType:e.CANCEL_EDITING}),selectPathPoint:(n,a)=>t.dispatch({actionType:e.SELECT_PATH_POINT,pointIndex:a,subpathIndex:n}),startNewPathMode:function(){EASEL.stats.trackEventOnce("Activate Line Tool Mode"),t.dispatch({undoDescription:"New path",actionType:e.START_NEW_PATH_MODE})},cancelNewPathMode:n,setNewPathPoints:a,submitNewPathPoints:function(e){if(EASEL.undoActions.beginGroup(e.length>1?"Add path":"Cancel path"),a(e),e.length>1){const t={shape:EASEL.shapeBuilder.pathPointsToShape([e]),cut:{type:"outline",depth:EASEL.materialStore.getShapePlacementDepth()}};EASEL.volumeActions.add(t);const n=EASEL.volumeStore.getVolumes();EASEL.editorActions.select(n[n.length-1].id)}else n();EASEL.undoActions.endGroup()},saveAnchorPosition:(n,a)=>t.dispatch({actionType:e.SAVE_ANCHOR_POSITION,savedAnchorPosition:{anchorX:n,anchorY:a}}),setLastObjectPropertyTab:n=>t.dispatch({actionType:e.SET_LAST_OBJECT_PROPERTY_TAB,tab:n})}}()},function(e,t){EASEL.fabricVolumeActions=function(){const e=EASEL.constants.PIXELS_PER_INCH,t=t=>t/e,n=t=>-t/e,a=e=>EASEL.machineSettingsSelectors.getWorkArea(EASEL.store.getState()).y+n(e),r=()=>EASEL.editorStore.getSelectedVolumeIds(),o=function(){const e=EASEL.volumeStore.getVolumes().filter((e=>"text"===e.shape.type&&""===e.shape.text)).map((e=>e.id));e.length>0&&(EASEL.undoActions.reopenGroup(),EASEL.volumeActions.remove(e),EASEL.undoActions.endGroup())};return{edit:e=>EASEL.editorActions.startEditing(e),select:function(...e){o(),EASEL.editorActions.select(...e)},deselect:function(){o(),EASEL.editorActions.deselect()},translate:(e,a)=>EASEL.volumeActions.translate(r(),t(e),n(a)),scale:(e,n,o,s)=>EASEL.volumeActions.scale(r(),e,n,t(o),a(s)),rotate:(e,n,o)=>EASEL.volumeActions.rotate(r(),(e=>-e)(e),t(n),a(o)),beginDrag:()=>EASEL.undoActions.beginGroup(),endDrag:()=>EASEL.undoActions.endGroup(),setText:function(e,n){let o,s,i,l,c,p,u,d,h=e.getActiveObject();const E=h&&("i-text"===h.type||"e-text"===h.type);E&&(({width:d,height:o,isEditing:s,selectionStart:p,selectionEnd:c}=h),i=t(h.left),u=a(h.top),l=EASEL.textHelper.measure({text:n,font:h.fontFamily}));const m=r();EASEL.undoActions.beginGroup(),EASEL.volumeActions.setText(m,n),null!=i&&null!=u&&null!=d&&null!=o&&null!=l&&EASEL.volumeActions.scale(m,l.width/d,l.height/o,i,u),EASEL.undoActions.endGroup(),h=e.getActiveObject(),E&&s&&(h.enterEditing(),h.selectionStart=p,h.selectionEnd=c)},getTabIndexAtPoint:function(e,n,r){const o=(s=r,EASEL.volumeStore.getVolumes([s])[0]);var s;return function(e,t){let n=null,a=1/0;for(let r=0;r<t.length;r++){const o=t[r],s=EASEL.math.distance(e,o);s<a&&(a=s,n=r)}return n}(EASEL.volumeHelper.unRotatedPoint(o,{x:t(e),y:a(n)}),o.cut.tabs.map((e=>e.center)))},translateTab:(e,a,r,o)=>EASEL.volumeActions.translateTab(e,a,t(r),n(o))}}()},function(e,t){EASEL.jobSettingsActions=function(){const{actionTypes:e}=EASEL.jobSettingsConstants;return{clearCustomCutSettings:()=>EASEL.dispatcher.dispatch({actionType:e.CLEAR_CUSTOM_CUT_SETTINGS,values:{bit:{feedRate:null,plungeRate:null,depthPerPass:null,fillAngle:null,rampingAngle:null,useCustom:null},detailBit:{feedRate:null,plungeRate:null,depthPerPass:null,fillAngle:null,rampingAngle:null,useCustom:null}},undoDescription:"Load saved cut settings"}),setFillAngle:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_FILL_ANGLE,bitKey:t,fillAngle:n,undoDescription:"Set Fill Method"}),setRampingAngle:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_RAMPING_ANGLE,bitKey:t,rampingAngle:n,undoDescription:"Set Ramping Angle"}),setFeedRate:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_FEED_RATE,bitKey:t,feedRate:n,undoDescription:"Set Feed Rate"}),setPlungeRate:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_PLUNGE_RATE,bitKey:t,plungeRate:n,undoDescription:"Set Plunge Rate"}),setDepthPerPass:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_DEPTH_PER_PASS,bitKey:t,depthPerPass:n,undoDescription:"Set Depth Per Pass"}),setSpindleSpeed:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_SPINDLE_SPEED,bitKey:t,spindleSpeed:n,undoDescription:"Set Spindle Speed"}),setStepOver:t=>EASEL.dispatcher.dispatch({actionType:e.SET_STEP_OVER,stepOver:t,undoDescription:"Set Step Over"}),setProfileStepOver:t=>EASEL.dispatcher.dispatch({actionType:e.SET_PROFILE_STEP_OVER,profileStepOver:t,undoDescription:"Set Profile Step Over"}),setSafetyHeight:t=>EASEL.dispatcher.dispatch({actionType:e.SET_SAFETY_HEIGHT,safetyHeight:t,undoDescription:"Set Safety Height"}),setUseCustom:function(t,n){const a=n?"Use Manual Cut Settings":"Use Automatic Cut Settings";EASEL.dispatcher.dispatch({actionType:e.USE_CUSTOM,bitKey:t,value:n,undoDescription:a})},setVBitDetailStepOver:t=>EASEL.dispatcher.dispatch({actionType:e.SET_V_BIT_DETAIL_STEP_OVER,vBitDetailStepOver:t})}}()},function(e,t){EASEL.labelActions=function(){const{actionTypes:e}=EASEL.labelConstants,{dispatcher:t}=EASEL;return{createLabel:function(n){return new Promise(((a,r)=>{EASEL.labelsAPI.create(n).then((n=>{t.dispatch({actionType:e.CREATE_LABEL,response:n}),a(n)})).catch((e=>{EASEL.alert("Label creation error",e.responseJSON.errorMessage),r(e)}))}))},updateLabel:function(n,a){const r=EASEL.labelsAPI.update(n,{new_label_name:a}).then((a=>t.dispatch({actionType:e.UPDATE_LABEL,id:n,response:a}))).catch((e=>{EASEL.alert("Label update error",e.responseJSON.errorMessage)}));return new Promise(((e,t)=>r.then(e,t)))},deleteLabel:function(n,a){const r=EASEL.labelsAPI.delete(n,{force_delete:a}).then((n=>t.dispatch({actionType:e.DELETE_LABEL,response:n}))).catch((e=>{EASEL.alert("Label deletion error",e.responseJSON.errorMessage)}));return new Promise(((e,t)=>r.then(e,t)))},assignLabels:function(e){const t=EASEL.projectMetadataStore.getLinkToken(),n=EASEL.labelsAPI.assignLabels({id:t,label_ids:e}).catch((e=>{EASEL.alert("Label assigning error",e.responseJSON.errorMessage)}));return EASEL.projectAPI.get(t).then((e=>{EASEL.projectMetadataActions.setAssignedLabels(e.project.labels)})),new Promise(((e,t)=>n.then(e,t)))},unassignLabels:function(e){const t=EASEL.projectMetadataStore.getLinkToken(),n=EASEL.labelsAPI.unassignLabels({id:t,label_ids:e}).catch((e=>{EASEL.alert("Label assigning error",e.responseJSON.errorMessage)}));return EASEL.projectAPI.get(t).then((e=>{EASEL.projectMetadataActions.setAssignedLabels(e.project.labels)})),new Promise(((e,t)=>n.then(e,t)))},setUserLabels:t=>EASEL.dispatcher.dispatch({actionType:e.SET_USER_LABELS,userLabels:t})}}()},function(e,t){EASEL.localSenderVersionActions={setSupportedVersions:e=>EASEL.dispatcher.dispatch({actionType:EASEL.localSenderVersionConstants.actionTypes.SUPPORTED_VERSIONS,versions:e}),setRunningVersionNumber:function(e){EASEL.dispatcher.dispatch({actionType:EASEL.localSenderVersionConstants.actionTypes.RUNNING_VERSION_NUMBER,runningVersionNumber:e}),EASEL.stats&&EASEL.stats.setProperties({"Local Sender Version":e})},setRunningVersionAbilities:e=>EASEL.dispatcher.dispatch({actionType:EASEL.localSenderVersionConstants.actionTypes.RUNNING_VERSION_ABILITIES,abilities:e}),disconnected:()=>EASEL.dispatcher.dispatch({actionType:EASEL.localSenderVersionConstants.actionTypes.DISCONNECTED})}},function(e,t){EASEL.machineStateActions={reportAvailablePorts:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.REPORT_AVAILABLE_PORTS,ports:e}),reportConnectionState:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.REPORT_CONNECTION_STATE,state:e}),reportState:(e,t)=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.REPORT_STATE,state:e,substate:t}),reportPosition:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.REPORT_POSITION,position:e}),reportSetting:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.REPORT_SETTING,setting:e}),refreshSettings:function(){EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.CLEAR_SETTINGS})},clearEvents:()=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.CLEAR_EVENTS}),logEvent:(e,t)=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.LOG_EVENT,event:{type:e,message:t}}),openInspector:()=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.OPEN_INSPECTOR}),closeInspector:()=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.CLOSE_INSPECTOR}),reportProbeStatus:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.REPORT_PROBE_STATUS,probeStatus:e}),reportProbeResult:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.REPORT_PROBE_RESULT,probeResult:e}),reportSpindleCurrent:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.REPORT_SPINDLE_CURRENT,spindleCurrent:e}),resetProbeResult:()=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.RESET_PROBE_RESULT}),resetSpindleCurrents:()=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.RESET_SPINDLE_CURRENTS}),startUploadingFirmware:()=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.UPLOADING_FIRMWARE}),stopUploadingFirmware:()=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.DONE_UPLOADING_FIRMWARE}),receiveFirmwareProgress:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.RECEIVE_FIRMWARE_PROGRESS,progress:e}),receiveFirmwareVersion:function(e){EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.RECEIVE_FIRMWARE_VERSION,firmwareVersion:e}),EASEL.stats&&EASEL.stats.setProperties({Firmware:e})},receiveBuildInfoString:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.RECEIVE_BUILD_INFO_STRING,buildInfoString:e}),receiveSerialNumber:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.RECEIVE_SERIAL_NUMBER,serialNumber:e}),receiveZAxisOffset:e=>EASEL.dispatcher.dispatch({actionType:EASEL.machineStateConstants.actionTypes.RECEIVE_Z_AXIS_OFFSET,zAxisOffset:e})}},function(e,t){EASEL.materialActions=function(){const{actionTypes:e}=EASEL.materialConstants;return{loadMaterial:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.LOAD_MATERIAL,material:t,layerDepths:n}),select:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SELECT_MATERIAL,undoDescription:"Set Material",id:t,name:n}),setColorName:t=>EASEL.dispatcher.dispatch({actionType:e.SET_COLOR_NAME,undoDescription:"Set Color",name:t}),setColorToCustom:()=>EASEL.dispatcher.dispatch({actionType:e.SET_COLOR_CUSTOM,undoDescription:"Set Color"}),setLayerColor:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_LAYER_COLOR,undoDescription:"Set Color",layerIndex:t,color:n}),setLayerDepths:t=>EASEL.dispatcher.dispatch({actionType:e.SET_LAYER_DEPTHS,undoDescription:"Set Layer Depth",layerDepths:t}),setDimensions:t=>EASEL.dispatcher.dispatch({actionType:e.SET_MATERIAL_DIMENSIONS,undoDescription:"Set Material Dimensions",dimensions:t}),setMaterials:t=>EASEL.dispatcher.dispatch({actionType:e.SET_MATERIALS,materials:t})}}()},function(e,t){EASEL.projectMetadataActions={setID:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_ID,id:e}),setLinkToken:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_LINK_TOKEN,linkToken:e}),setName:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_NAME,name:e}),setInventablesURL:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_INVENTABLES_URL,inventablesURL:e}),setLive:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_LIVE,live:e}),setReadOnly:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_READ_ONLY,readOnly:e}),setShared:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_SHARED,shared:e}),setStarred:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_STARRED,starred:e}),setContainsImportedSVG:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_CONTAINS_IMPORTED_SVG,containsImportedSVG:e}),setCarveCount:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_CARVE_COUNT,carveCount:e}),setProjectOwner:(e,t,n)=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_OWNER,ownerName:e,ownerProfilePermalink:t,ownerId:n}),setAssignedLabels:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_ASSIGNED_LABELS,assignedLabels:e}),setCreatedAt:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_CREATED_AT,createdAt:e}),setUpdatedAt:e=>EASEL.dispatcher.dispatch({actionType:EASEL.projectMetadataConstants.actionTypes.SET_UPDATED_AT,updatedAt:e})}},function(e,t){EASEL.undoActions=function(){const{actionTypes:e}=EASEL.undoConstants;return{undo:()=>EASEL.dispatcher.dispatch({actionType:e.UNDO,tokens:EASEL.undoStore.getUndoTokens()}),redo:()=>EASEL.dispatcher.dispatch({actionType:e.REDO,tokens:EASEL.undoStore.getRedoTokens()}),beginGroup:t=>EASEL.dispatcher.dispatch({actionType:e.BEGIN_GROUP,undoDescription:t}),endGroup:()=>EASEL.dispatcher.dispatch({actionType:e.END_GROUP}),reopenGroup:()=>EASEL.dispatcher.dispatch({actionType:e.REOPEN_GROUP}),clearUndos:()=>EASEL.dispatcher.dispatch({actionType:e.CLEAR_UNDOS})}}()},function(e,t){EASEL.volumeActions=function(){const{actionTypes:e}=EASEL.volumeConstants,t=t=>EASEL.dispatcher.dispatch({actionType:e.REMOVE,undoDescription:"Remove",ids:t});return{add:(...t)=>EASEL.dispatcher.dispatch({actionType:e.ADD,undoDescription:"Add",volumes:t}),remove:t,removeAll:()=>t(EASEL.volumeStore.getVolumes().map((e=>e.id))),translate:(t,n,a)=>{EASEL.dispatcher.dispatch({actionType:EASEL.editorConstants.actionTypes.SET_LAST_OBJECT_PROPERTY_TAB,tab:"shape"}),EASEL.dispatcher.dispatch({actionType:e.TRANSLATE,undoDescription:"Move",ids:t,dx:n,dy:a})},translateTab:(t,n,a,r)=>EASEL.dispatcher.dispatch({actionType:e.TRANSLATE_TAB,undoDescription:"Move Tab",id:t,index:n,dx:a,dy:r}),scale:function(t,n,a,r,o,s){EASEL.dispatcher.dispatch({actionType:EASEL.editorConstants.actionTypes.SET_LAST_OBJECT_PROPERTY_TAB,tab:"shape"}),EASEL.dispatcher.dispatch({actionType:e.SCALE,undoDescription:s||"Resize",ids:t,fractionX:n,fractionY:a,anchorX:r,anchorY:o})},flip:function(t,n,a,r,o,s){EASEL.dispatcher.dispatch({actionType:e.FLIP,undoDescription:s||"Flip",ids:t,flipX:n,flipY:a,anchorX:r,anchorY:o})},rotate:(t,n,a,r)=>EASEL.dispatcher.dispatch({actionType:e.ROTATE,undoDescription:"Rotate",ids:t,angle:n,anchorX:a,anchorY:r}),align:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.ALIGN,undoDescription:"Align",ids:t,alignment:n}),moveForward:t=>EASEL.dispatcher.dispatch({actionType:e.MOVE_FORWARD,undoDescription:"Bring Forward",ids:t}),moveBackward:t=>EASEL.dispatcher.dispatch({actionType:e.MOVE_BACKWARD,undoDescription:"Send Backward",ids:t}),bringToFront:t=>EASEL.dispatcher.dispatch({actionType:e.BRING_TO_FRONT,undoDescription:"Bring to Front",ids:t}),sendToBack:t=>EASEL.dispatcher.dispatch({actionType:e.SEND_TO_BACK,undoDescription:"Send to Back",ids:t}),setText:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_TEXT,undoDescription:"Edit Text",ids:t,texts:Array(t.length).fill(n.replace(/\u0000/g,""))}),setFont:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_FONT,undoDescription:"Set Font",ids:t,fonts:Array(t.length).fill(n)}),setCutParams:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_CUT_PARAMS,undoDescription:"Modify Cut",ids:t,cutParams:Array(t.length).fill(n)}),completeDepthChange:t=>EASEL.dispatcher.dispatch({actionType:e.COMPLETE_DEPTH_CHANGE,ids:t}),setShapeParams:function(t,n,a){return null==a&&(a="Modify Shape"),EASEL.dispatcher.dispatch({actionType:e.SET_SHAPE_PARAMS,undoDescription:a,ids:t,shapeParams:n})},setProportionLock:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_PROPORTION_LOCK_ON_VOLUMES,isLocked:t,ids:n}),setLocked:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_LOCKED,undoDescription:"Lock",ids:t,locked:n}),setTextEffect:(t,n)=>EASEL.dispatcher.dispatch({actionType:e.SET_TEXT_EFFECTS,ids:t,textEffects:Array(t.length).fill(n),undoDescription:"Set Text Effect"})}}()},function(e,t){EASEL.websocketMessageActions={reportWebsocketMessage(e){EASEL.dispatcher.dispatch({actionType:EASEL.websocketMessageConstants.actionTypes.REPORT_WEBSOCKET_MESSAGE,message:e})},clearWebsocketMessages(){EASEL.dispatcher.dispatch({actionType:EASEL.websocketMessageConstants.actionTypes.CLEAR_WEBSOCKET_MESSAGES})}}},function(e,t){EASEL.workpieceActions=function(){const{actionTypes:e}=EASEL.workpieceConstants,{dispatcher:t}=EASEL;return{addWorkpiece:n=>t.dispatch({actionType:e.ADD_WORKPIECE,workpiece:n}),showWorkpiece:n=>t.dispatch({actionType:e.SHOW_WORKPIECE,id:n}),updateWorkpiece:(n,a)=>t.dispatch({actionType:e.UPDATE_WORKPIECE,id:n,workpiece:a}),deleteWorkpiece:function(n){const a=EASEL.projectMetadataStore.getLinkToken(),r=EASEL.workpieceStore.getWorkpiece(n);r.backendId&&!EASEL.projectMetadataStore.isReadOnly()&&EASEL.projectAPI.deleteWorkpiece(a,r.backendId),t.dispatch({actionType:e.DELETE_WORKPIECE,id:n})},duplicateWorkpiece:function({originalId:n,newId:a}){const r=EASEL.projectMetadataStore.getLinkToken();return(EASEL.projectMetadataStore.isReadOnly()?$.when({workpiece_id:null}):EASEL.projectAPI.createWorkpiece(r,{workpiece:{project_id:r}})).done((r=>t.dispatch({actionType:e.DUPLICATE_WORKPIECE,originalId:n,newId:a,backendId:r.workpiece_id})))},createWorkpiece:function(n){const a=EASEL.projectMetadataStore.getLinkToken();return(EASEL.projectMetadataStore.isReadOnly()?$.when({workpiece_id:null}):EASEL.projectAPI.createWorkpiece(a,{workpiece:{project_id:a}})).done((a=>t.dispatch({actionType:e.ADD_WORKPIECE,workpiece:EASEL.shallowMerge(n,{backendId:a.workpiece_id})})))},reorderWorkpieces:n=>t.dispatch({actionType:e.REORDER_WORKPIECES,workpieces:n})}}()},function(e,t){EASEL.xcpTestingActions={openInspectorTest:e=>EASEL.dispatcher.dispatch({actionType:EASEL.xcpTestingConstants.actionTypes.OPEN_INSPECTOR_TEST,test:e}),closeInspectorTest:e=>EASEL.dispatcher.dispatch({actionType:EASEL.xcpTestingConstants.actionTypes.CLOSE_INSPECTOR_TEST,test:e})}},function(e,t){EASEL.editorStore=function(){const e={};EASEL.listenerMixin(e),EASEL.undoMixin(e);const t={volumeSelected:{},newPathPoints:null,editingVolumeID:null,selectedPointIndex:null,selectedSubpathIndex:null},n=EASEL.workpieceMixin(e,t);let a={anchorX:"left",anchorY:"bottom"},r="shape";const o=function(e){if(null!=e)return!0===n.getWorkpiece().volumeSelected[e];for(e in n.getWorkpiece().volumeSelected)return!0;return!1},s=function(){i(),n.getWorkpiece().volumeSelected={}};var i=function(){n.getWorkpiece().editingVolumeID=null,n.getWorkpiece().selectedPointIndex=null,n.getWorkpiece().selectedSubpathIndex=null};var l=function(){n.getWorkpiece().newPathPoints=null},c=function(t){const a=null!=n.getWorkpiece().newPathPoints?n.getWorkpiece().newPathPoints.slice(0):null;return e.registerUndo((()=>c(a))),n.getWorkpiece().newPathPoints=t};const{actionTypes:p}=EASEL.editorConstants;return EASEL.dispatcher.register((function(t){switch(t.actionType){case p.SELECT:h=t.ids,i(),l(),n.getWorkpiece().volumeSelected=function(e){const t={};for(let n of e)t[n]=!0;return t}(h),n.getWorkpiece().groupRotation=0;break;case p.DESELECT:if(!o())return;s();break;case EASEL.volumeConstants.actionTypes.REMOVE:(e=>{for(let t of e)delete n.getWorkpiece().volumeSelected[t],t===n.getWorkpiece().editingVolumeID&&i()})(t.ids);break;case p.START_EDITING:d=t.id,l(),n.getWorkpiece().editingVolumeID=d;break;case p.CANCEL_EDITING:i();break;case p.START_NEW_PATH_MODE:s(),c([]);break;case p.CANCEL_NEW_PATH_MODE:l();break;case p.SET_NEW_PATH_POINTS:c(t.points);break;case p.SELECT_PATH_POINT:n.getWorkpiece().selectedSubpathIndex=t.subpathIndex,n.getWorkpiece().selectedPointIndex=t.pointIndex;break;case EASEL.volumeConstants.actionTypes.ROTATE:var u=n.getWorkpiece().groupRotation;e.registerUndo((()=>n.getWorkpiece().groupRotation=u)),n.getWorkpiece().groupRotation+=t.angle;break;case p.SAVE_ANCHOR_POSITION:({savedAnchorPosition:a}=t);break;case p.SET_LAST_OBJECT_PROPERTY_TAB:r=t.tab;break;default:return}var d,h;e.notifyListeners()})),e.isVolumeSelected=o,e.getGroupRotation=()=>n.getWorkpiece().groupRotation,e.getSelectedVolumeIds=function(){return Object.keys(n.getWorkpiece().volumeSelected)},e.getEditingVolumeId=()=>n.getWorkpiece().editingVolumeID,e.getSelectedPointIndex=()=>n.getWorkpiece().selectedPointIndex,e.getSelectedSubpathIndex=()=>n.getWorkpiece().selectedSubpathIndex,e.getNewPathPoints=()=>n.getWorkpiece().newPathPoints,e.getSavedAnchorPosition=()=>a,e.getLastObjectPropertyTab=()=>r,e.duplicate=()=>t,e}()},function(e,t){EASEL.jobSettingsStore=function(){const e={};EASEL.listenerMixin(e),EASEL.undoMixin(e);const{bitKeys:t}=EASEL.jobSettingsConstants,n=EASEL.workpieceMixin(e,{settings:{stepOver:.4,vBitDetailStepOver:.01,profileStepOver:.2,safetyHeight:.15,bit:{feedRate:null,plungeRate:null,depthPerPass:null,useCustom:null,fillAngle:null,rampingAngle:null,spindleSpeed:null},detailBit:{feedRate:null,plungeRate:null,depthPerPass:null,useCustom:null,fillAngle:null,rampingAngle:null,spindleSpeed:null}}},!0),a=function(e){const t=n.getWorkpiece().settings[e];if(null==t)throw new Error(`Unrecognized bit key ${e}`);return t};var r=function(n){const o=a(t.bit),s=a(t.detailBit),i={bit:{feedRate:o.feedRate,plungeRate:o.plungeRate,depthPerPass:o.depthPerPass,fillAngle:o.fillAngle,rampingAngle:o.rampingAngle,useCustom:o.useCustom,spindleSpeed:o.spindleSpeed},detailBit:{feedRate:s.feedRate,plungeRate:s.plungeRate,depthPerPass:s.depthPerPass,fillAngle:s.fillAngle,rampingAngle:s.rampingAngle,useCustom:s.useCustom,spindleSpeed:o.spindleSpeed}};e.registerUndo((()=>r(i))),o.feedRate=n.bit.feedRate,o.plungeRate=n.bit.plungeRate,o.depthPerPass=n.bit.depthPerPass,o.fillAngle=n.bit.fillAngle,o.rampingAngle=n.bit.rampingAngle,o.useCustom=n.bit.useCustom,o.spindleSpeed=n.bit.spindleSpeed,s.feedRate=n.detailBit.feedRate,s.plungeRate=n.detailBit.plungeRate,s.depthPerPass=n.detailBit.depthPerPass,s.fillAngle=n.detailBit.fillAngle,s.rampingAngle=n.detailBit.rampingAngle,s.useCustom=n.detailBit.useCustom,s.spindleSpeed=n.detailBit.spindleSpeed},o=function(t,n){if(t.fillAngle!==n){const a=t.fillAngle;e.registerUndo((()=>o(t,a))),t.fillAngle=n}},s=function(t,n){if(t.rampingAngle!==n){const a=t.rampingAngle;e.registerUndo((()=>s(t,a))),t.rampingAngle=n}},i=function(t,n){if(null!=n&&n<=0)return;const a=t.feedRate;e.registerUndo((()=>i(t,a))),t.feedRate=n},l=function(t,n){if(null!=n&&n<=0)return;const a=t.plungeRate;e.registerUndo((()=>l(t,a))),t.plungeRate=n},c=function(t,n){if(null!=n&&n<=0)return;const a=t.depthPerPass;e.registerUndo((()=>c(t,a))),t.depthPerPass=n},p=function(t,n){if(null!=n&&n<=0)return;const a=t.spindleSpeed;e.registerUndo((()=>p(t,a))),t.spindleSpeed=n},u=function(t){if(!(0<t&&t<=1))return;const a=n.getWorkpiece().settings.stepOver;e.registerUndo((()=>u(a))),n.getWorkpiece().settings.stepOver=t},d=function(t){if(!(0<t&&t<=1))return;const a=n.getWorkpiece().settings.profileStepOver;e.registerUndo((()=>d(a))),n.getWorkpiece().settings.profileStepOver=t},h=function(t){if(!(0<t))return;const a=n.getWorkpiece().settings.safetyHeight;e.registerUndo((()=>h(a))),n.getWorkpiece().settings.safetyHeight=t},E=function(t,n){if(n!==t.useCustom){if(n){const a={};null!=t.feedRate&&null!=t.depthPerPass&&null!=t.plungeRate||(a.feedRate=null,a.depthPerPass=null,a.plungeRate=null),e.registerUndo((function(){for(let e in a)n=a[e],t[e]=n;E(t,!1)}))}else e.registerUndo((()=>E(t,!0)));t.useCustom=n}};const{actionTypes:m}=EASEL.jobSettingsConstants;return EASEL.dispatcher.register((function(t){switch(t.actionType){case m.SET_FILL_ANGLE:o(a(t.bitKey),t.fillAngle);break;case m.SET_RAMPING_ANGLE:s(a(t.bitKey),t.rampingAngle);break;case m.SET_FEED_RATE:i(a(t.bitKey),t.feedRate);break;case m.SET_PLUNGE_RATE:l(a(t.bitKey),t.plungeRate);break;case m.SET_DEPTH_PER_PASS:c(a(t.bitKey),t.depthPerPass);break;case m.SET_SPINDLE_SPEED:p(a(t.bitKey),t.spindleSpeed);break;case m.USE_CUSTOM:E(a(t.bitKey),t.value);break;case m.SET_STEP_OVER:u(t.stepOver);break;case m.SET_PROFILE_STEP_OVER:d(t.profileStepOver);break;case m.SET_SAFETY_HEIGHT:h(t.safetyHeight);break;case m.SET_V_BIT_DETAIL_STEP_OVER:!function(t){if(!(0<t&&t<=1))return;const a=n.getWorkpiece().settings.vBitDetailStepOver;e.registerUndo((()=>d(a))),n.getWorkpiece().settings.vBitDetailStepOver=t}(t.vBitDetailStepOver);break;case m.CLEAR_CUSTOM_CUT_SETTINGS:r(t.values);break;default:return}e.notifyListeners()})),e.settings=e=>EASEL.merge(n.getWorkpiece(e).settings),e.duplicate=EASEL.merge,e}()},function(e,t){EASEL.labelStore=function(){const e={};EASEL.listenerMixin(e);let t=[];const{actionTypes:n}=EASEL.labelConstants,a=EASEL.dispatcher.register((function(a){switch(a.actionType){case n.CREATE_LABEL:r=a.response.created_label,t.push(EASEL.shallowMerge(r,{projects:[]}));break;case n.UPDATE_LABEL:!function(e,n){for(let a=0;a<t.length;a++)t[a].id==e&&(t[a]=n)}(a.id,a.response.updated_label);break;case n.DELETE_LABEL:!function(e){t=t.filter((t=>t.id!=e.id))}(a.response.deleted_label);break;case n.SET_USER_LABELS:t=a.userLabels;break;default:return}var r;e.notifyListeners()}));return e.dispatchID=a,e.getLabels=()=>t,e}()},function(e,t){EASEL.localSenderVersionStore=function(){const e={};EASEL.listenerMixin(e);let t={},n=null,a={};const{actionTypes:r}=EASEL.localSenderVersionConstants;return EASEL.dispatcher.register((function(o){switch(o.actionType){case r.SUPPORTED_VERSIONS:t=o.versions;break;case r.RUNNING_VERSION_NUMBER:n=o.runningVersionNumber;break;case r.RUNNING_VERSION_ABILITIES:a=o.abilities;break;case r.DISCONNECTED:n=null,a={};break;default:return}e.notifyListeners()})),e.getVersionInfo=e=>t[e],e.getCurrentVersionInfo=function(){for(let e in t){const n=t[e];if(n.current)return n}},e.isDriverFirmwareMismatch=()=>!1,e.getRunningVersionNumber=()=>n,e.getRunningVersionAbilities=()=>a,e}()},function(e,t){EASEL.machineStateStore=function(){const e={};EASEL.listenerMixin(e);let t=[],n=null,a=null,r=null,o=null,s={},i="",l=null,c=null,p=!1,u={machine:{x:0,y:0,z:0},work:{x:0,y:0,z:0}},d=!1,h=0,E=null,m=[],S=[],g=[],f=!1,A=!1,b=0;const L=(e,t)=>e.x===t.x&&e.y===t.y&&e.z===t.z,{actionTypes:y}=EASEL.machineStateConstants,R=EASEL.dispatcher.register((function(R){switch(R.actionType){case y.REPORT_AVAILABLE_PORTS:t=R.ports;break;case y.REPORT_CONNECTION_STATE:"connecting_to_machine"===R.state&&(p=!1),r=R.state;break;case y.REPORT_STATE:if(R.state===n&&R.substate===a)return;"home"===R.state&&(p=!0),({state:n,substate:a}=R);break;case y.REPORT_POSITION:if(L(R.position.machine,u.machine)&&L(R.position.work,u.work))return;({position:u}=R);break;case y.REPORT_SETTING:S.push(R.setting);break;case y.CLEAR_SETTINGS:S=[];break;case y.CLEAR_EVENTS:g=[];break;case y.LOG_EVENT:R.event&&"alarm"===R.event.type&&(p=!1),g.push(R.event);break;case y.OPEN_INSPECTOR:f=!0;break;case y.CLOSE_INSPECTOR:f=!1;break;case y.REPORT_PROBE_STATUS:({probeStatus:h}=R);break;case y.REPORT_PROBE_RESULT:d=!1,E=parseInt(R.probeResult);break;case y.REPORT_SPINDLE_CURRENT:m.push(R.spindleCurrent);break;case y.RESET_PROBE_RESULT:d=!0,E=null;break;case y.RESET_SPINDLE_CURRENTS:m=[];break;case y.UPLOADING_FIRMWARE:A=!0,b=0;break;case y.DONE_UPLOADING_FIRMWARE:A=!1;break;case y.RECEIVE_FIRMWARE_PROGRESS:b=R.progress;break;case y.RECEIVE_FIRMWARE_VERSION:({firmwareVersion:o}=R),s=EASEL.firmwareUtils.featuresForFirmware(o);break;case y.RECEIVE_BUILD_INFO_STRING:({buildInfoString:i}=R);break;case y.RECEIVE_SERIAL_NUMBER:({serialNumber:l}=R);break;case y.RECEIVE_Z_AXIS_OFFSET:({zAxisOffset:c}=R);break;default:return}e.notifyListeners()}));return e.dispatchID=R,e.getAvailablePorts=()=>t,e.getState=()=>n,e.getSubstate=()=>a,e.getPosition=()=>u,e.getSettings=()=>S,e.getEvents=()=>g,e.getInspectorOpen=()=>f,e.getConnectionState=()=>r,e.getProbeConnectionStatus=()=>h,e.getProbeResult=()=>E,e.isProbing=()=>d,e.isFirmwareUploading=()=>A,e.getFirmwareProgress=()=>b,e.getFirmwareVersion=()=>o,e.getFeatures=()=>s,e.getBuildInfoString=()=>i,e.getSerialNumber=()=>l,e.getZAxisOffset=()=>null!=c?c:0,e.getMaxSpindleCurrent=()=>m.length?Math.max(...m):null,e.isMachineKnownToBeHomed=()=>p,e.isMachineReadyOrLocked=()=>["alarm_lock","ready_idle"].includes(r),e.isMachineCarving=()=>["paused","running"].includes(r),e.getHomingEnabledRegister=()=>null!=s&&null!=s.registers&&s.registers.homingEnable,e}()},function(e,t,n){const a=n(27);EASEL.materialStore=function(){const e="utm_source=easel&utm_campaign=easelmaterials&utm_medium=inapp&utm_content=materialthumbnail",t=function(e,t){return e.name>t.name?1:e.name<t.name?-1:0},n={};EASEL.listenerMixin(n),EASEL.undoMixin(n);const{actionTypes:r}=EASEL.materialConstants;let o=null,s={},i=null;const l=EASEL.workpieceMixin(n,{activeMaterial:{},activeMaterialVariationName:null,customLayerColors:null,customLayerDepths:{},dimensions:{x:12,y:8,z:.5}},!0),c=[{name:"Wood",imageSrc:EASEL.assets.textures.birch},{name:"Metal",imageSrc:EASEL.assets.textures.aluminum},{name:"Plastic",imageSrc:EASEL.assets.textures.pvc}],p=c.map((e=>e.name)),u=function(e){const t=function(e){let t,n;if(null!=e.activeMaterialVariationName)for(t of e.activeMaterial.variations||[])if(t.name===e.activeMaterialVariationName)return t;for(t of e.activeMaterial.variations||[])t.default&&(n=t);if(null!=e.customLayerColors){const t=EASEL.merge(n.layers);for(let n=0;n<e.customLayerColors.length;n++){const a=e.customLayerColors[n];t[n].rgb=a}n=EASEL.shallowMerge(n,{name:"Custom",textureUrl:null,layers:t})}return n}(e),n=e.customLayerDepths[e.activeMaterial.name];return n?EASEL.shallowMerge(t,{layers:t.layers.map(((e,t)=>EASEL.shallowMerge(e,{bottomZ:n[t]})))}):t},d=function(e){const t=l.getWorkpiece(e);return t.activeMaterial?EASEL.merge(t.activeMaterial,{dimensions:t.dimensions,color:u(t)}):null},h=()=>Object.values(s),E=function(e,t){let n=s[e];if(null!=n)return n;for(let a of Object.keys(s||{}))if(n=s[a],n.name===t)return n;return null};var m=function({material:e,variationName:t,layerColors:a}){const r=l.getWorkpiece().activeMaterial,o=l.getWorkpiece().activeMaterialVariationName,s=l.getWorkpiece().customLayerColors;return n.registerUndo((()=>m({material:r,variationName:o,layerColors:s}))),null!=e&&(l.getWorkpiece().activeMaterial=EASEL.merge(e)),l.getWorkpiece().activeMaterialVariationName=t,l.getWorkpiece().customLayerColors=a};var S=function(e){if(e!==l.getWorkpiece().activeMaterialVariationName)return m({variationName:e,layerColors:null})},g=function(){if(null!=l.getWorkpiece().customLayerColors)return;let e=[];for(var t of l.getWorkpiece().activeMaterial.variations||[])t.default&&(e=t.layers.map((e=>e.rgb)));return m({variationName:null,layerColors:e})},f=function(e,t){const n=l.getWorkpiece(),a=n.customLayerColors?n.customLayerColors.slice():[],r=n.activeMaterial.layerNames?n.activeMaterial.layerNames.length:1;for(;e<a.length;)a[e]=t,e+=r;return m({variationName:null,layerColors:a})};const A=e=>{const t=l.getWorkpiece(e);return t.dimensions?t.dimensions.z:0};var b=function(e){const t=l.getWorkpiece().dimensions;n.registerUndo((()=>b(t))),l.getWorkpiece().dimensions=EASEL.merge(l.getWorkpiece().dimensions,e)};return o=EASEL.dispatcher.register((function(o){switch(o.actionType){case r.LOAD_MATERIAL:!function(e,t){let n=E(e.id,e.name);if(n||(n=EASEL.merge(e,{displayName:e.name})),m({material:n,variationName:null,layerColors:null}),b(e.dimensions),null!=e.color)if(d().variations.map((e=>e.name)).includes(e.color.name))S(e.color.name);else{g();for(let t=0;t<e.color.layers.length;t++){const{rgb:n}=e.color.layers[t];f(t,n)}}if(null!=t)l.getWorkpiece().customLayerDepths=EASEL.shallowMerge(t)}(o.material,o.layerDepths);break;case r.SELECT_MATERIAL:!function(e,t){const{activeMaterial:n}=l.getWorkpiece();if(null!=e&&e===n.id)return;if(null==e&&t===n.name)return;const a=E(e,t);m({material:null!=a?a:i,variationName:null,layerColors:null})}(o.id,o.name);break;case r.SET_COLOR_NAME:S(o.name);break;case r.SET_COLOR_CUSTOM:g();break;case r.SET_LAYER_DEPTHS:!function(e){const t=l.getWorkpiece().activeMaterial.name,a=l.getWorkpiece().customLayerDepths,r=a[t];n.registerUndo((()=>a[t]=r)),a[t]=e.slice()}(o.layerDepths);break;case r.SET_LAYER_COLOR:f(o.layerIndex,o.color);break;case r.SET_MATERIAL_DIMENSIONS:b(o.dimensions);break;case r.SET_MATERIALS:!function(n){s={},i=null;for(let r of n){const n=null!=r.variations?r.variations.map((t=>EASEL.merge(t,{storeUrl:t.storeUrl?`${t.storeUrl}?${e}`:null}))):void 0;s[r.id]=EASEL.merge(r,{storeUrl:r.storeUrl?`${r.storeUrl}?${e}`:null,variations:null!=n?n.sort(t):void 0}),null==i&&r.name===a.defaultMaterialName&&(i=s[r.id])}}(o.materials);break;case r.ADD_MATERIAL:u=o.material,s[u.id]=u;break;case r.DELETE_MATERIAL:p=o.material,delete s[p.id];break;case r.UPDATE_MATERIAL:c=o.material,s[c.id]=c;break;default:return}var c,p,u;n.notifyListeners()})),n.getActiveMaterial=d,n.getMaterials=h,n.getCustomLayerDepths=function(e){return l.getWorkpiece(e).customLayerDepths},n.getCurrentDepth=A,n.dispatchId=o,n.duplicate=EASEL.merge,n.materialCollection=()=>h().filter((e=>!e.global)),n.materialCategoryNames=p,n.imageForMaterialCategory=function(e){for(let t of c)if(t.name===e)return t.imageSrc},n.getShapePlacementDepth=()=>A()*EASEL.constants.ENDMILL_PLACED_SHAPE_DEPTH,n}()},function(e,t){EASEL.projectMetadataStore=function(){const e={};EASEL.listenerMixin(e);let t=null,n=null,a=null,r=!1,o=null,s=!1,i=!1,l=null,c=0,p=!1,u=null,d=null,h=null,E=[],m=null,S=null;return EASEL.dispatcher.register((function(g){switch(g.actionType){case EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_ID:t=g.id;break;case EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_LINK_TOKEN:a=g.linkToken;break;case EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_NAME:n=g.name;break;case EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_INVENTABLES_URL:o=g.inventablesURL;break;case EASEL.projectMetadataConstants.actionTypes.SET_READ_ONLY:s=g.readOnly;break;case EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_SHARED:i=g.shared;break;case EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_LIVE:r=g.live;break;case EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_STARRED:p=g.starred||!1;break;case EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_CONTAINS_IMPORTED_SVG:l=g.containsImportedSVG;break;case EASEL.projectMetadataConstants.actionTypes.SET_CARVE_COUNT:c=g.carveCount;break;case EASEL.projectMetadataConstants.actionTypes.SET_PROJECT_OWNER:({ownerName:u,ownerProfilePermalink:h,ownerId:d}=g);break;case EASEL.projectMetadataConstants.actionTypes.SET_CREATED_AT:m=g.createdAt;break;case EASEL.projectMetadataConstants.actionTypes.SET_ASSIGNED_LABELS:E=g.assignedLabels;break;case EASEL.projectMetadataConstants.actionTypes.SET_UPDATED_AT:S=g.updatedAt;break;default:return}e.notifyListeners()})),e.getID=()=>t,e.getLinkToken=()=>a,e.getName=()=>n,e.getInventablesURL=()=>o,e.getCarveCount=()=>c,e.isReadOnly=()=>s,e.isShared=()=>i,e.containsImportedSVG=()=>l,e.isStarred=()=>p,e.ownerName=()=>u,e.ownerId=()=>d,e.ownerProfilePermalink=()=>h,e.assignedLabels=()=>E,e.createdAt=()=>m,e.updatedAt=()=>S,e.isLive=()=>r,e}()},function(e,t){EASEL.undoStore=function(){const e={};EASEL.listenerMixin(e);const t={isGrouping:!1,actionGroups:[],index:-1},n=EASEL.workpieceMixin(e,t),a=function(e){n.getWorkpiece().index++;const t={tokens:[],description:e};n.getWorkpiece().actionGroups.splice(n.getWorkpiece().index,Number.MAX_VALUE,t)},{actionTypes:r}=EASEL.undoConstants;EASEL.dispatcher.register((function(t){switch(t.actionType){case r.UNDO:n.getWorkpiece().index>=0&&n.getWorkpiece().index--;break;case r.REDO:n.getWorkpiece().index+1<n.getWorkpiece().actionGroups.length&&n.getWorkpiece().index++;break;case r.BEGIN_GROUP:n.getWorkpiece().isGrouping=!0,a(t.undoDescription);break;case r.END_GROUP:n.getWorkpiece().isGrouping&&0===n.getWorkpiece().actionGroups[n.getWorkpiece().index].tokens.length&&(delete n.getWorkpiece().actionGroups[n.getWorkpiece().index],n.getWorkpiece().index--),n.getWorkpiece().isGrouping=!1;break;case r.REOPEN_GROUP:{const e=n.getWorkpiece(),t=e.actionGroups[e.index];e.isGrouping=t&&t.tokens&&t.tokens.length>0}break;case r.CLEAR_UNDOS:n.getWorkpiece().isGrouping=!1,n.getWorkpiece().actionGroups=[],n.getWorkpiece().index=-1;break;default:if(null==t.undoDescription&&!t.undoable)return;n.getWorkpiece().isGrouping||a(),function(e,t){const a=n.getWorkpiece().actionGroups[n.getWorkpiece().index];a.tokens.push(e),null==a.description&&(a.description=t)}(EASEL.dispatcher.getActionToken(),t.undoDescription)}e.notifyListeners()}));return e.getUndoTokens=function(){const e=n.getWorkpiece(),t=e.actionGroups[e.index];if(null==t)return;const a=[];for(let n=t.tokens.length-1;n>=0;n--)a.push(t.tokens[n]);return a},e.getRedoTokens=function(){if(null!=n.getWorkpiece().actionGroups[n.getWorkpiece().index+1])return n.getWorkpiece().actionGroups[n.getWorkpiece().index+1].tokens},e.getUndoDescription=()=>{const e=n.getWorkpiece(),t=e.actionGroups[e.index];return null!=t?t.description:null},e.getRedoDescription=()=>{const e=n.getWorkpiece(),t=e.actionGroups[e.index+1];return null!=t?t.description:null},e.duplicate=()=>t,e}()},function(e,t){EASEL.volumeStore=function(){const e={};EASEL.listenerMixin(e),EASEL.undoMixin(e);const{dispatcher:t}=EASEL,{actionTypes:n}=EASEL.volumeConstants,a=EASEL.materialConstants.actionTypes,r={volumes:[],cutThroughDepth:void 0,statusMap:{},map:{},lastAdded:null},o=EASEL.workpieceMixin(e,r),s="AVAILABLE",i="USED",l={x:2,y:2},c=function(){let e=0;return{newId:function(){const t=e.toString();return o.getWorkpiece().statusMap[t]=s,e+=1,t},put:function(e){if(null==e.id)throw new Error("volume id can't be blank");if(null==o.getWorkpiece().statusMap[e.id])throw new Error(`volume id (${e.id}) must be one we gave out`);if(o.getWorkpiece().statusMap[e.id]===i)throw new Error(`volume id (${e.id}) must be unique`);return o.getWorkpiece().statusMap[e.id]=i,o.getWorkpiece().map[e.id]=e,o.getWorkpiece().lastAdded=e},get:e=>o.getWorkpiece().map[e],remove:function(e){if(o.getWorkpiece().statusMap[e]!==i)throw new Error(`id (${e}) must be an existing volume`);return o.getWorkpiece().statusMap[e]=s,delete o.getWorkpiece().map[e]}}}(),p=e=>o.getWorkpiece(e).volumes,u=function(e){if(null!=e){const t=y(e);return o.getWorkpiece().volumes.filter((e=>t[e.id]))}return o.getWorkpiece().volumes};var d=function(){const t=u();for(let e of t)E(e);e.registerUndo((()=>d))};const h=function(e){e.cut.tabs=null,E(e)};var E=function(e){const{cut:n}=e;n.tabPreference&&"outline"===n.type&&n.depth===EASEL.materialStore.getCurrentDepth()&&(t.waitFor([EASEL.store.dispatchId]),null!=n.tabHeight&&n.tabHeight>0||(n.tabHeight=.08),null!=n.tabLength&&n.tabLength>0||(n.tabLength=.25),null==n.tabCount&&(n.tabCount=(null!=n.tabs?n.tabs.length:void 0)||4),n.tabs=EASEL.tabPointGenerator.process(e))};const m=function(e,t){let n;return 1===t.length&&EASEL.isEqual(t[0].shape.center,l)&&EASEL.viewportHelper.pointIsNotInView(e,t[0].shape.center)&&(n=EASEL.viewportHelper.getOffsetToCenter(e,l)),n},S=function(t,n){let a;if(!n){const e=o.getWorkpiece().volumes.length;n=T(e,t.length)}t.forEach((e=>null!=e.id?e.id:e.id=c.newId()));const r=t.map((e=>e.id));e.registerUndo((()=>R(r)));const s=EASEL.store.getState(),i=m(s,t);for(let e=0;e<t.length;e++){a=t[e],a=EASEL.merge(a),null==a.cut.outlineStyle&&(a.cut.outlineStyle="on-path"),null==a.cut.tabPreference&&(a.cut.tabPreference=!0),null==a.shape.isProportionLocked&&(a.shape.isProportionLocked=!1),null==a.cut.useProfile&&(a.cut.useProfile=!1),null==a.cut.profileSettings&&(a.cut.profileSettings={width:.2,path:[{x:0,y:1,rh:{x:.25,y:-.25}},{x:1,y:0,lh:{x:-.25,y:.25}}],startDepth:0,endDepth:1,upsideDown:!1,pathProcessed:[],pathToolOffset:[]}),a.shape.anchored||(a.shape.anchored=!1),E(a),null!=a&&null!=a.shape&&null!=a.shape.center&&null!=a.shape.center.x&&null!=a.shape.center.y&&null!=i?a.shape=EASEL.shapeUpdater.shiftShape(a.shape,i):a.shape=EASEL.shapeUpdater.ensurePath(a.shape),c.put(a);const r=n[e];o.getWorkpiece().volumes.splice(r,0,a)}_()};var g=function(t,n,a){const r=n.map((e=>-e)),o=a.map((e=>-e));e.registerUndo((()=>g(t,r,o)));for(let e=0;e<t.length;e++){const r=t[e],o=c.get(r),s=n[e],i=a[e];if(null!=o){for(let e of o.cut.tabs||[])e.center.x+=s,e.center.y+=i;o.shape=EASEL.shapeUpdater.translate(o.shape,s,i)}}};var f=function(t,n,a,r){const o=c.get(t);if(null==o||null==o.cut.tabs)return;const s=o.cut.tabs[n];if(null==s)return;e.registerUndo((()=>f(t,n,-a,-r)));const i=s.center,l=EASEL.volumeHelper.rotatedPoint(o,i),p={x:l.x+a,y:l.y+r};let u=EASEL.volumeHelper.segmentsWithOffsets(o,EASEL.bitHelper.strokeSizeInches(o.cut.depth)).closestPointTo(p);return null!=u?(u=EASEL.volumeHelper.unRotatedPoint(o,u),i.x=u.x,i.y=u.y):void 0},A=function(t,n,a,r,o){if(0===n||0===a)return;const s=v(t);if(s.length>0){e.registerUndo((()=>A(s,1/n,1/a,r,o)));for(const e of u(s)){const{shape:t,cut:s}=e,i=EASEL.matrix().translatedBy(-r,-o).rotatedBy(-(t.rotation||0)).scaledBy(n,a).rotatedBy(t.rotation||0).translatedBy(r,o);for(let e of s.tabs||[])e.center=i.transformedPoint(e.center);e.shape=EASEL.shapeUpdater.scale(t,i,n,a),E(e)}}},b=function(t,n,a,r){const o=v(t);if(o.length>0){e.registerUndo((()=>b(o,-n,a,r)));for(let e of u(o)){const{shape:t,cut:o}=e,s=EASEL.shapeUpdater.rotate(t,n,a,r);if(null!=o.tabs)for(let i of o.tabs)if("line"===t.type||!EASEL.math.closeTo(t.center.x,a)||!EASEL.math.closeTo(t.center.y,r)){const t=EASEL.volumeHelper.rotatedPoint(e,i.center),o=Math.atan2(t.y-r,t.x-a),l=Math.hypot(t.y-r,t.x-a);t.x=a+l*Math.cos(o+n),t.y=r+l*Math.sin(o+n),i.center=EASEL.volumeHelper.unRotatedPoint({shape:s},t)}e.shape=s,E(e)}}},L=function(t,n,a,r,o){const s=v(t);if(s.length>0){e.registerUndo((()=>L(s,n,a,r,o)));for(let e of u(s)){const{shape:t,cut:s}=e;for(let e of s.tabs||[]){const t=e.center;n&&(t.x+=2*(r-t.x)),a&&(t.y+=2*(o-t.y))}e.shape=EASEL.shapeUpdater.flip(t,n,a,r,o),E(e)}}},y=function(e){const t={};for(let n of e)t[n]=!0;return t},R=function(t){const n=y(v(t)),a=v(t);if(0==a.length)return;const r=[],s=[],i=o.getWorkpiece();for(let e=0;e<i.volumes.length;e++){const t=i.volumes[e];n[t.id]&&(r.push(t),s.push(e))}e.registerUndo((()=>S(r,s)));for(const{id:e}of u(a))c.remove(e);i.volumes=i.volumes.filter((e=>null!=c.get(e.id)))};var v=function(e){return u(e).filter((e=>!e.shape.anchored)).map((e=>e.id))},P=function(e){return u(e).filter((e=>e.shape.anchored)).map((e=>e.id))},C=function(t,n){let a;const r=y(t),s=[],i=[],l=o.getWorkpiece().volumes;for(let e=0;e<l.length;e++)a=l[e],r[a.id]&&(s.push(a.id),i.push(e));e.registerUndo((()=>C(s,i))),o.getWorkpiece().volumes=o.getWorkpiece().volumes.filter((e=>!r[e.id]));for(let e=0;e<n.length;e++){const r=n[e],s=t[e];a=c.get(s),o.getWorkpiece().volumes.splice(r,0,a)}_()};const T=function(e,t){return new Array(t).fill(e).map(((e,t)=>e+t))};var _=function(){const{volumes:e}=o.getWorkpiece(),t=[],n=[];e.forEach((function(e){"drill"===e.cut.type?n.push(e):t.push(e)})),o.getWorkpiece().volumes=t.concat(n)},w=function(t,n){let a,r,o;const s=[],i=[];for(r=0;r<t.length;r++)a=t[r],o=c.get(a),null!=o&&"text"===o.shape.type&&(s.push(a),i.push(o.shape.text));for(e.registerUndo((()=>w(s,i))),r=0;r<t.length;r++)a=t[r],o=c.get(a),null!=o&&"text"===o.shape.type&&(o.shape=EASEL.shapeUpdater.setText(o.shape,n[r]),h(o))},x=function(t,n){let a,r,o;const s=[],i=[];for(r=0;r<t.length;r++)a=t[r],o=c.get(a),null!=o&&"text"===o.shape.type&&(s.push(a),i.push(o.shape.font));for(e.registerUndo((()=>x(s,i))),r=0;r<t.length;r++)a=t[r],o=c.get(a),null!=o&&"text"===o.shape.type&&(o.shape=EASEL.shapeUpdater.setFont(o.shape,n[r]),h(o))},k=function(t,n){let a,r,o,s;const i=[],l=[];for(r=0;r<t.length;r++)if(a=t[r],s=c.get(a),null!=s){({shape:o}=s),i.push(a);const e={};for(let t in n[r])e[t]=o[t];l.push(e)}for(e.registerUndo((()=>k(i,l))),r=0;r<t.length;r++)a=t[r],s=c.get(a),null!=s&&(s.shape=EASEL.shapeUpdater.setParams(s.shape,n[r]),E(s))},M=function(t,n){let a,r,o,s,i,l,p;const u=[],d=[];for(o=0;o<t.length;o++)if(r=t[o],p=c.get(r),null!=p){({cut:a}=p),u.push(r);const e={};for(s in n[o])if("profileSettings"===s){const t=e[s]={};for(i in n[o][s])t[i]=a.profileSettings[i]}else e[s]=a[s];d.push(e),l=!1}for(o=0;o<t.length;o++)if(r=t[o],p=c.get(r),null!=p)for(s in({cut:a}=p),n[o]){const e=n[o][s];if("profileSettings"===s)for(i in e){const t=e[i];a.profileSettings[i]="width"===i?Number(t):t}else a[s]=e;E(p),l=!0}l&&e.registerUndo((()=>M(u,d)))},N=function(t,n){const a=[],r=[];for(let e=0;e<t.length;e++){const o=t[e],s=c.get(o);null!=s&&(a.push(o),r.push(s.shape.textEffect),s.shape.textEffect=n[e],s.shape=EASEL.shapeUpdater.ensurePath(s.shape))}e.registerUndo((()=>N(a,r)))},I=function(t,n){e.registerUndo((()=>I(t)));for(let e=0;e<t.length;e++){const a=t[e],r=c.get(a);null!=r&&(r.shape=EASEL.shapeUpdater.setLocked(r.shape,n))}},D=function(t,n){let a;for(a of(e.registerUndo((()=>D(n,t))),u()))if(a.cut.depth===t){const{cut:e}=a;e.depth=n,e.tabPreference&&e.tabHeight>n&&(e.tabHeight=n,h(a))}for(a of u())E(a);o.getWorkpiece().cutThroughDepth=n};return EASEL.store.subscribeWithSelector(EASEL.bitSelectors.bitParams,d),t.register((function(r){switch(r.actionType){case n.ADD:S(r.volumes,r.indices);break;case n.TRANSLATE:!function(e,t,n){const a=v(e);a.length>0&&g(a,new Array(e.length).fill(t),new Array(e.length).fill(n))}(r.ids,r.dx,r.dy);break;case n.TRANSLATE_TAB:f(r.id,r.index,r.dx,r.dy);break;case n.SCALE:A(r.ids,r.fractionX,r.fractionY,r.anchorX,r.anchorY);break;case n.FLIP:L(r.ids,r.flipX,r.flipY,r.anchorX,r.anchorY);break;case n.ROTATE:b(r.ids,r.angle,r.anchorX,r.anchorY);break;case n.REMOVE:R(r.ids);break;case n.ALIGN:!function(e,t){let n,a;const r=v(e),o=P(e),s=o.length>0?o:r;switch(t){case"left":{const e=EASEL.volumeHelper.boundingBoxLeft(u(s));n=r.map((t=>e-EASEL.volumeHelper.boundingBoxLeft(u([t])))),a=new Array(r.length).fill(0)}break;case"horizontal":{const e=EASEL.volumeHelper.boundingBoxHorizontalCenter(u(s));n=r.map((t=>e-EASEL.volumeHelper.boundingBoxHorizontalCenter(u([t])))),a=new Array(r.length).fill(0)}break;case"right":{const e=EASEL.volumeHelper.boundingBoxRight(u(s));n=r.map((t=>e-EASEL.volumeHelper.boundingBoxRight(u([t])))),a=new Array(r.length).fill(0)}break;case"bottom":{const e=EASEL.volumeHelper.boundingBoxBottom(u(s));n=new Array(r.length).fill(0),a=r.map((t=>e-EASEL.volumeHelper.boundingBoxBottom(u([t]))))}break;case"vertical":{const e=EASEL.volumeHelper.boundingBoxVerticalCenter(u(s));n=new Array(r.length).fill(0),a=r.map((t=>e-EASEL.volumeHelper.boundingBoxVerticalCenter(u([t]))))}break;case"top":{const e=EASEL.volumeHelper.boundingBoxTop(u(s));n=new Array(r.length).fill(0),a=r.map((t=>e-EASEL.volumeHelper.boundingBoxTop(u([t]))))}}g(r,n,a)}(r.ids,r.alignment);break;case n.MOVE_FORWARD:!function(e){const t=y(e),n=[];e=[];const a=o.getWorkpiece().volumes;for(let o=0;o<a.length;o++){const r=a[o];t[r.id]&&(e.push(r.id),n.push(o))}const r=Math.max.apply(null,n),s=Math.min(r+1,o.getWorkpiece().volumes.length-1)-(n.length-1);C(e,T(s,n.length))}(r.ids);break;case n.MOVE_BACKWARD:!function(e){const t=y(e),n=[];e=[];const a=o.getWorkpiece().volumes;for(let o=0;o<a.length;o++){const r=a[o];t[r.id]&&(e.push(r.id),n.push(o))}const r=Math.min.apply(null,n),s=Math.max(r-1,0);C(e,T(s,n.length))}(r.ids);break;case n.BRING_TO_FRONT:!function(e){const t=y(e),n=o.getWorkpiece().volumes;e=n.filter((e=>t[e.id])).map((e=>e.id)),C(e,T(n.length-e.length,e.length))}(r.ids);break;case n.SEND_TO_BACK:!function(e){const t=y(e);e=o.getWorkpiece().volumes.filter((e=>t[e.id])).map((e=>e.id)),C(e,T(0,e.length))}(r.ids);break;case n.SET_TEXT:w(r.ids,r.texts);break;case n.SET_FONT:x(r.ids,r.fonts);break;case n.SET_TEXT_EFFECTS:N(r.ids,r.textEffects);break;case n.SET_CUT_PARAMS:M(r.ids,r.cutParams);break;case n.SET_LOCKED:I(r.ids,r.locked);break;case n.SET_SHAPE_PARAMS:k(r.ids,new Array(r.ids.lenght).fill(r.shapeParams));break;case n.SET_PROPORTION_LOCK_ON_VOLUMES:s=r.isLocked,i=r.ids,u(i).forEach((e=>e.shape=EASEL.shapeUpdater.setProportionLock(e.shape,s)));break;case a.SET_MATERIAL_DIMENSIONS:!function(){t.waitFor([EASEL.materialStore.dispatchId]);const e=EASEL.materialStore.getCurrentDepth();D(o.getWorkpiece().cutThroughDepth,e)}();break;case a.LOAD_MATERIAL:o.getWorkpiece().cutThroughDepth=null!=r.material.dimensions?r.material.dimensions.z:void 0;break;default:return}var s,i;return e.notifyListeners()})),e.duplicate=function(e){const t=EASEL.merge(r,{cutThroughDepth:e.cutThroughDepth});for(let n of p(e.id))n=EASEL.merge(n,{id:c.newId()}),t.statusMap[n.id]=i,t.map[n.id]=n,t.volumes.push(n);return t},e.newId=c.newId,e.getVolumes=u,e.getVolumesForWorkpiece=p,e.getMovableIds=v,e.getLastAddedVolume=()=>o.getWorkpiece().lastAdded,e.getShift=m,e}()},function(e,t){EASEL.websocketMessageStore=function(){const e={};EASEL.listenerMixin(e);let t=[],n=null,a=!1;const{actionTypes:r}=EASEL.websocketMessageConstants;return EASEL.dispatcher.register((function(o){switch(o.actionType){case r.REPORT_WEBSOCKET_MESSAGE:s=o.message,t.push(s),t.length>5e3&&t.shift(),"receive"===s.direction&&"echo"===s.event&&"read"===s.data[0].action&&(EASEL.grblStatusParser.isStatusMessage(s.data[0].data)&&(n=s.data[0].data),a=a||!EASEL.messageChecker.isValid(s.data[0].data));break;case r.CLEAR_WEBSOCKET_MESSAGES:t=[],n=null,a=!1;break;default:return}var s;e.notifyListeners()})),e.getWebsocketMessages=()=>t.slice(0),e.getLastStatusMessage=()=>n,e.hasDetectedGarbledMessage=()=>a,e}()},function(e,t){EASEL.workpieceStore=function(){const e={};EASEL.listenerMixin(e);let t=[],n=1,a=2;var r=function(e){if(e.id!==a)throw new Error(`Created workspace with id ${e.id}, but expected ${a}`);e.position=Math.max(0,...t.map((e=>e.position)))+1,t.push(e),a++};const o=function(e){const n=t.find((t=>t.id===e)).position;let a=null,r=null;for(const o of t){const e=Math.abs(o.position-n);0!==e&&(null===r||e<r)&&(a=o,r=e)}return null!=a?a.id:void 0},s=function(e){for(let t=0;t<e.length;t++){e[t].position=t+1}t=e},{actionTypes:i}=EASEL.workpieceConstants,l=EASEL.dispatcher.register((function(a){switch(a.actionType){case i.ADD_WORKPIECE:r(a.workpiece);break;case i.DUPLICATE_WORKPIECE:!function(e,n,a){for(let o of t)if(o.id===e)return void r(EASEL.merge(o,{id:n,backendId:a}))}(a.originalId,a.newId,a.backendId);break;case i.SHOW_WORKPIECE:l=a.id,n=l;break;case i.UPDATE_WORKPIECE:!function(e,n){for(let a=0;a<t.length;a++){const r=t[a];r.id===e&&(t[a]=EASEL.merge(r,n))}}(a.id,a.workpiece);break;case i.DELETE_WORKPIECE:!function(e){const a=o(e);t=t.filter((t=>t.id!==e)),n===e&&(n=a)}(a.id);break;case i.REORDER_WORKPIECES:s(a.workpieces);break;default:return}var l;e.notifyListeners()})),c=function(e){for(let n of t)if(n.id===e)return n};return e.dispatchID=l,e.nextActiveIdAfterDeletingId=o,e.getWorkpieces=()=>t,e.getWorkpiece=c,e.getActiveWorkpiece=()=>c(n),e.getActiveID=()=>n,e.getNewID=()=>a,e.reorderWorkpieces=s,e}()},function(e,t){EASEL.xcpTestingConstants={actionTypes:{OPEN_INSPECTOR_TEST:"OPEN_INSPECTOR_TEST",CLOSE_INSPECTOR_TEST:"CLOSE_INSPECTOR_TEST"}},EASEL.xcpTestingStore=function(){const e={};EASEL.listenerMixin(e);let t={isOpen:!1,test:null};const{actionTypes:n}=EASEL.xcpTestingConstants;return EASEL.dispatcher.register((function(a){switch(a.actionType){case n.OPEN_INSPECTOR_TEST:t.isOpen=!0,t.test=a.test;break;case n.CLOSE_INSPECTOR_TEST:t.isOpen=!1,t.test=null;break;default:return}e.notifyListeners()})),e.getInspectorTest=()=>t,e}()},function(e,t){EASEL.flux=EASEL.flux||{},EASEL.flux.events=function(){const e={};return{addListener:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},emit:function(t,...n){const a=e[t]||[];for(let e of a.slice())e(...n)},removeListener:function(t,n){for(let a=e[t].length-1;a>=0;a--){e[t][a]===n&&e[t].splice(a,1)}}}}()},function(e,t){EASEL.propTypes.bit=PropTypes.shape({id:PropTypes.string.isRequired,type:PropTypes.string.isRequired,width:PropTypes.number.isRequired,unit:PropTypes.string.isRequired,tipAngle:PropTypes.number,imageURL:PropTypes.string,verImageURL:PropTypes.string,nominalWidth:PropTypes.oneOfType([PropTypes.number,PropTypes.string])})},function(e,t){EASEL.carveyClampRenderer=function(){const e=function(e,t,n,a,r,o){e.beginPath(),e.arc(t+a-o,n+r-o,o,0,Math.PI/2),e.arc(t+o,n+r-o,o,Math.PI/2,Math.PI),e.arc(t+o,n+o,o,Math.PI,-Math.PI/2),e.arc(t+a-o,n+o,o,-Math.PI/2,0),e.closePath(),e.fill()};return{render:function({drawingContext:t,pixelsPerInch:n,size:a}){const{WIDTH:r,LENGTH:o,OFFSET:s,FILLET:i,KEEP_AWAY:l}=EASEL.smartClampConstants,c=l+o+l,p=l+r+l;t.save(),t.scale(n,n),t.translate(0,a.height),t.scale(1,-1),t.rect(0,0,a.width,a.height),t.clip(),t.translate(-s,-s),t.fillStyle="#E4AFB0",e(t,-l,-l,c,p,i+l),e(t,-l,-l,p,c,i+l),t.fillStyle="#9C9C9C",e(t,0,0,o,r,i),e(t,0,0,r,o,i),t.restore()}}}()},function(e,t){EASEL.fabricRenderer=function(){let e=null,t={},n=null,a=null,r=null,o=null;const s=function(r=null){const o=EASEL.materialStore.getActiveMaterial();t=EASEL.store.getState();const s=EASEL.machineSettingsSelectors.getWorkArea(t),i={width:s.x,height:s.y},l={volumes:r||EASEL.volumeStore.getVolumes(),dimensions:o.dimensions,strokeBit:EASEL.bit(EASEL.bitSelectors.strokeBit(t)),originY:i.height},c=EASEL.viewportSelectors.getWorkpieceViewport(t),p=EASEL.viewportHelper.getViewportMatrix(c).toArray();return{canvas:e,drawingContext:null!=e?e.getContext():void 0,ignoreSelection:!1,pixelsPerInch:EASEL.constants.PIXELS_PER_INCH,units:EASEL.unitSelectors.getPreferredUnit(t),workArea:i,material:{width:null!=o?o.dimensions.x:void 0,height:null!=o?o.dimensions.y:void 0},viewportTransform:p,viewWidth:n,viewHeight:a,wasteboardType:EASEL.machineTypeHelper.currentWasteboardType(),volumeJson:EASEL.volumeRenderer.getJSON(l,EASEL.volumeRenderer.renderType.TEXT_AS_TEXT_VOLUME)}};const i=function(e){u(e.canvas,e.viewWidth,e.viewHeight),e.canvas===EASEL.canvas&&fabric.IText.flushInstances(),e.canvas.loadFromJSON(e.volumeJson,(function(){const t=[];if(!e.ignoreSelection){for(let n of e.canvas.getObjects())null!=n.easel&&EASEL.editorStore.isVolumeSelected(n.easel.id)&&EASEL.editorStore.getEditingVolumeId()!==n.easel.id&&n.easel.selectable&&t.push(n);return l(e.canvas,t)}})),e.canvas.setViewportTransform(e.viewportTransform),e.canvas.doRenderAll()};var l=function(e,t){if(null!=e.getActiveGroup()&&e._discardActiveGroup(),null!=e.getActiveObject()&&e._discardActiveObject(),0!==t.length)if(1===t.length)e.setActiveObject(t[0]),c(t[0]);else{for(let e of t)e.set("active",!0);const n=new fabric.Group(t,{originX:"center",originY:"center",canvas:e});n.addWithUpdate(),n.setCoords(),e._activeObject=null,e.setActiveGroup(n),c(n)}},c=function(e){null!=e&&e.set({hasRotatingPoint:!0,transparentCorners:!1,cornerColor:"rgba(47, 68, 88, 0.5)",cornerSize:8})};const p=function(e){const{pan:t,zoomAtPoint:n}=EASEL.viewportActions;let{offsetX:a,offsetY:r,deltaX:o,deltaY:s,deltaMode:i}=e;if(1!==i&&2!==i||(o*=10,s*=10),e.metaKey||e.ctrlKey){const e=500;n({zoomMultiplier:Math.pow(2,-s/e),point:{x:a,y:r}})}else t({deltaX:o,deltaY:s});e.preventDefault()};var u=function(e,t,n){if((t!==r||n!==o)&&(e.setDimensions({width:t,height:n}),EASEL.PIXEL_RATIO>1)){const a=e.getElement();a.width=t*EASEL.PIXEL_RATIO,a.height=n*EASEL.PIXEL_RATIO,a.getContext("2d").scale(EASEL.PIXEL_RATIO,EASEL.PIXEL_RATIO),a.style.width=`${t}px`,a.style.height=`${n}px`}o=n,r=t};return{init:function(t,r,o){e=t,n=r,a=o,e.getElement().parentNode.addEventListener("wheel",p);const l=()=>i(s());EASEL.editorStore.addChangeListener(l),EASEL.volumeStore.addChangeListener(l),EASEL.materialStore.addChangeListener(l),EASEL.store.subscribeWithSelector(EASEL.machineSettingsSelectors.getMachineType,l),EASEL.store.subscribeWithSelector(EASEL.machineSettingsSelectors.getWorkArea,l),EASEL.store.subscribeWithSelector(EASEL.viewportSelectors.getWorkpieceViewport,l),EASEL.store.subscribeWithSelector(EASEL.unitSelectors.getUnitState,l),EASEL.store.subscribeWithSelector(EASEL.bitSelectors.bitParams,l),l()},setViewSize:(e,t)=>{n=e,a=t,i(s())},render:i,renderEditorToCanvas:function(e){e.drawingContext.fillStyle="#cce6fd",e.drawingContext.fillRect(0,0,e.drawingContext.canvas.width,e.drawingContext.canvas.height),e.drawingContext.save(),e.drawingContext.transform(...e.viewportTransform);const{drawingContext:t,material:n,pixelsPerInch:a,units:r,workArea:o}=e;e.drawingContext.translate(0,(o.height-n.height)*a),EASEL.gridRenderer.render({drawingContext:t,pixelsPerInch:a,units:r,size:n}),e.drawingContext.restore()},getStateFromStores:s,onWheel:p}}()},function(e,t){EASEL.gridRenderer={render({drawingContext:e,pixelsPerInch:t,units:n,size:a}){const r={in:1,mm:10},o={in:1,mm:25.4},s={width:a.width*t,height:a.height*t},i=a.width*o[n],l=a.height*o[n],c=.25*t,p={in:.2,mm:.15}[n]*t;e.save(),e.fillStyle="rgba(255, 255, 255, 0.75)",e.fillRect(0,0,s.width,s.height),e.lineWidth=1/32*t,e.strokeStyle="rgba(72, 140, 197, 0.3)",e.fillStyle="#415e79",e.font=`${p}px/${c}px Helvetica`;for(let u=0;u<=i;u+=r[n]){const a=u*t/o[n];e.save(),e.textAlign="center",e.moveTo(a,0),e.lineTo(a,s.height),e.fillText(u,a,s.height+c),e.restore()}for(let u=0;u<=l;u+=r[n]){const a=u*t/o[n];e.save(),e.textAlign="right",e.textBaseline="middle",e.moveTo(0,s.height-a),e.lineTo(s.width,s.height-a),e.fillText(u,-c/2,s.height-a),e.restore()}e.stroke(),e.restore(),e.save(),e.lineWidth=1/32*t,e.strokeStyle="#415e79",e.strokeRect(0,0,s.width,s.height),e.restore()}}},function(e,t){EASEL.thumbnailRenderer=function({width:e,height:t,passedVolumes:n,material:a}){let r=null,o=null;const s=new fabric.Canvas("thumbnail-renderer-canvas",{width:e,height:t}),i=function(){const n={left:EASEL.volumeHelper.boundingBoxLeft(o),right:EASEL.volumeHelper.boundingBoxRight(o),top:EASEL.volumeHelper.boundingBoxTop(o),bottom:EASEL.volumeHelper.boundingBoxBottom(o)},a={width:e,height:t},r=EASEL.machineSettingsSelectors.getWorkArea(EASEL.store.getState()),s={x:e/8,y:e/8},i=EASEL.viewportHelper.zoomStateToRect({},a,r,n,s);return EASEL.viewportHelper.getViewportMatrix(i).toArray()},l=function(){const n=EASEL.fabricRenderer.getStateFromStores(o);return EASEL.shallowMerge(n,{gcode:EASEL.externalGcodeSelectors.getGcode(EASEL.store.getState()),canvas:s,ignoreSelection:!0,drawingContext:null!=s?s.getContext():void 0,viewportTransform:i(),viewWidth:e,viewHeight:t})};var c=e=>EASEL.fabricRenderer.render(e),p=function(e){EASEL.gcode2dRenderer.renderGcodeToContext({pixelRatio:1,size:{width:e.viewWidth,height:e.viewHeight},isCarvey:"carvey"===e.wasteboardType,gcode:e.gcode,ctx:s.getContext("2d"),workArea:EASEL.machineSettingsSelectors.getWorkArea(EASEL.store.getState()),unit:EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState())})};return s.on("before:render",(function(){if(null==EASEL.externalGcodeSelectors.getGcode(EASEL.store.getState())){const e=l();a&&(e.material=a),EASEL.fabricRenderer.renderEditorToCanvas(e)}})),{render:function(){o=n||EASEL.volumeStore.getVolumes();const e=l();return EASEL.isEqual(r,e)?null:(r=e,null!=e.gcode?p(e):c(e),s)}}}},function(e,t,n){const a=n(34);EASEL.volumeRenderer=function(){const e={TEXT_AS_PATH_SHAPE:"TEXT_AS_PATH_SHAPE",TEXT_AS_TEXT_VOLUME:"TEXT_AS_TEXT_VOLUME"};let t={};return{renderType:e,getJSON:function(n,r){return t=function(t,n){let a=[],r=[];for(let e of t){var o;const t=n(e);if("text"===e.shape.type){const a=EASEL.textHelper.textShapeToPathShape(e.shape);o=a?n(EASEL.shallowMerge(e,{shape:a})):t}else o=t;a=a.concat(o),r=r.concat(t)}const s={};return s[e.TEXT_AS_PATH_SHAPE]=a,s[e.TEXT_AS_TEXT_VOLUME]=r,s}(n.volumes,(e=>a.volumeToFabricJson(e,{originY:n.originY,pixelsPerInch:EASEL.constants.PIXELS_PER_INCH,strokeSize:n.strokeBit.inchWidth(e.cut.depth),materialThickness:n.dimensions.z||1}))),{objects:t[r]}}}}()},function(e,t){EASEL.wasteboardRenderer={render(e){const{drawingContext:t,workAreaPadding:n,pixelsPerInch:a}=e;t.fillStyle="rgba(255, 255, 255, 0)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.translate(n*a,n*a),EASEL.gridRenderer.render(e)}}},function(e,t){EASEL.volumeValidator=function(){const e=["rectangle","ellipse","polygon","path","polyline","line","text","drill"],t=["outline","fill","drill"],n=["on-path","outside","inside"];return{validate:function(a){const r=[];return function(t,n){null!=t?(e.includes(t.type)||n.push(`Shape 'type' ${t.type} is invalid. Must be one of ${e.join(", ")}.`),"line"===t.type||"drill"===t.type?null!=t.rotation&&n.push("Line shapes or drill holes cannot have rotations."):null!=t.rotation?("number"!==typeof t.rotation||isNaN(t.rotation))&&n.push("Shape 'rotation' must be a number."):n.push("Shape must specify a 'rotation'."),null==t.flipping&&n.push("Shape must include a 'flipping' object.")):n.push("Volume must include a 'shape' object.")}(a.shape,r),function(e,a){null!=e?(null!=e.depth?"number"!==typeof e.depth||isNaN(e.depth)?a.push("Cut depth must be a number."):(e.depth>=0||a.push("Cut depth must be greater than or equal to 0."),e.depth<=EASEL.materialStore.getCurrentDepth()||a.push("Cut depth must be less than or equal to material thickness.")):a.push("Volume must include a cut depth."),t.includes(e.type)?"outline"!==e.type||n.includes(e.outlineStyle)||a.push(`Cut 'outlineStyle' ${e.outlineStyle} is invalid. Must be one of ${n.join(", ")}.`):a.push(`Cut 'type' ${e.type} is invalid. Must be one of ${t.join(", ")}.`)):a.push("Volume must include a 'cut' object.")}(a.cut,r),{valid:0===r.length,errors:r}}}}()},function(e,t){EASEL.machineAPI=function(){const e=EASEL.storageMixin("machine-settings",{});return{get:function(){const t=EASEL.workAreaAPI.get()||{x:11.2,y:11.2},n=EASEL.userSelectors.getMachineProfiles(EASEL.store.getState());let a=e.get();const r=!a&&n&&n.length>0&&n[n.length-1];return a=r?EASEL.machineProfilesAPI.toSettings(r):a||{machineType:EASEL.machineType.XCARVE,electronicsType:"arduino-gshield",railSize:{x:500,y:500},leadScrewType:"m8",spindleType:"24v",automaticSpindleControl:!1,spindleRPM:14e3,manualConnectionPreference:!1,probePreferences:EASEL.machineConfigurationConstants.probeDefaults,probeEnabled:!1,accessoriesEnabled:!1,hasDustShoe:!1,isDefault:!0},a=EASEL.shallowMerge({workArea:t},a),a},save:function(t){null!=t&&(null!=t.workArea&&EASEL.workAreaAPI.save(t.workArea),e.set({profileId:t.profileId,machineType:t.machineType,thirdPartyMake:t.thirdPartyMake,thirdPartyModel:t.thirdPartyModel,electronicsType:t.electronicsType,comPort:t.comPort,railSize:t.railSize,leadScrewType:t.leadScrewType,spindleType:t.spindleType,automaticSpindleControl:t.automaticSpindleControl,spindleRPM:t.spindleRPM,manualConnectionPreference:t.manualConnectionPreference,probePreferences:t.probePreferences,probeEnabled:t.probeEnabled,accessoriesEnabled:t.accessoriesEnabled,hasDustShoe:t.hasDustShoe,isDefault:t.isDefault,belts:t.belts}))},areSettingsSaved:()=>null!=e.get(),createProfile:function(e){const t=EASEL.store.getState().machineSettings;null==e&&(e=EASEL.machineTypeHelper.defaultName(t)),EASEL.stats.trackEvent(EASEL.events.machineProfileCreated,{name:e});const n=EASEL.machineProfilesAPI.fromSettings(t);return EASEL.machineProfilesAPI.create(e,n)},updateProfile:function(e,t){const n=EASEL.machineProfilesAPI.fromSettings(EASEL.store.getState().machineSettings);return EASEL.machineProfilesAPI.update(e,{name:t,settings:n})}}}()},function(e,t){EASEL.machineProfilesAPI=function(){const e=function(e){switch(null!=e.settings.product?e.settings.product.model:void 0){case"X-Carve Pro":return EASEL.machineType.XCARVE_PRO;case"X-Carve":return EASEL.machineType.XCARVE;case"Carvey":return EASEL.machineType.CARVEY;case"Shapeoko":return EASEL.machineType.SHAPEOKO;default:return EASEL.machineType.OTHER_GRBL}};return{get:function(){const e=$.ajax({url:"/machine_profiles",method:"GET"});return new Promise(((t,n)=>e.then(t,n)))},create:function(e,t){const n=$.ajax({url:"/machine_profiles",method:"POST",data:{name:e,settings_json:JSON.stringify(t)}});return new Promise(((e,t)=>n.then(e,t)))},update:function(e,t){const n={settings_json:JSON.stringify(t.settings),name:t.name,pro_required:t.proRequired};Object.keys(n).forEach((e=>void 0===n[e]&&delete n[e]));const a=$.ajax({url:`/machine_profiles/${e}`,method:"PUT",data:n});return new Promise(((e,t)=>a.then(e,t)))},destroy:function(e){const t=$.ajax({url:`/machine_profiles/${e}`,method:"DELETE"});return new Promise(((e,n)=>t.then(e,n)))},fromSettings:function(e){const t={version:3,geometry:{work_area:{x:(null!=e.workArea?e.workArea.x:void 0)||11.2,y:(null!=e.workArea?e.workArea.y:void 0)||11.2}},router:{model:e.spindleType,automatic_spindle:e.automaticSpindleControl||!1},accessories:{dust_shoe:e.hasDustShoe||!1,coolant:e.accessoriesEnabled||!1}};if(e.leadScrewType&&(t.geometry.leadscrews={z:e.leadScrewType}),e.belts&&(t.belts=e.belts),null!=e.spindleRPM&&(t.router.spindle_rpm=e.spindleRPM),e.probeEnabled){const n=e.probePreferences||EASEL.machineConfigurationConstants.probeDefaults;let a=25.4;"mm"===n.units&&(a=1),t.accessories.z_probe={max_travel:n.probeDistance*a,thickness:n.probeThickness*a,rate:n.probeRate*a,retract:n.probeRetractDistance*a}}switch(e.manualConnectionPreference&&null!=e.comPort&&(t.connection={com_port:e.comPort}),e.machineType){case EASEL.machineType.XCARVE_PRO:t.product={make:"Inventables",model:"X-Carve Pro"};break;case EASEL.machineType.XCARVE:t.product={make:"Inventables",model:"X-Carve"};break;case EASEL.machineType.CARVEY:t.product={make:"Inventables",model:"Carvey"};break;case EASEL.machineType.SHAPEOKO:t.product={make:"Carbide3D",model:"Shapeoko"};break;case EASEL.machineType.OTHER_GRBL:t.product={make:e.thirdPartyMake||"other",model:e.thirdPartyModel||"unspecified"}}return t},toSettings:function(t){const n=t.settings;if(null==n)return;let a,r,o=e(t);o===EASEL.machineType.OTHER_GRBL&&(a=null!=n.product&&n.product.make,r=null!=n.product&&n.product.model);const s={profileId:t.id,machineType:o,thirdPartyMake:a,thirdPartyModel:r,workArea:{x:n.geometry.work_area.x,y:n.geometry.work_area.y},leadScrewType:n.geometry.leadscrews&&n.geometry.leadscrews.z,manualConnectionPreference:null!=n.connection,isDefault:!1};return null!=n.router&&(s.spindleType=n.router.model,s.automaticSpindleControl=n.router.automatic_spindle,s.spindleRPM=n.router.spindle_rpm),null!=n.accessories&&(s.probeEnabled=null!=n.accessories.z_probe,s.accessoriesEnabled=n.accessories.coolant,s.hasDustShoe=n.accessories.dust_shoe),null!=n.belts&&(s.belts=n.belts),s.probeEnabled&&(s.probePreferences={units:"mm",probeDistance:n.accessories.z_probe.max_travel,probeThickness:n.accessories.z_probe.thickness,probeRate:n.accessories.z_probe.rate,probeRetractDistance:n.accessories.z_probe.retract}),s.manualConnectionPreference&&(s.comPort=null!=n.connection?n.connection.com_port:void 0),s},machineTypeFromProfile:e}}()},function(e,t,n){const a=n(35),r=n(324),o=n(325),s=n(326),i=n(327);EASEL.webAPIUtils={loadMachine(e){const t=e||EASEL.machineAPI.get();"x-crave v24"!==t.machineType&&"x-crave v48"!==t.machineType||(t.machineType=EASEL.machineType.XCARVE_PRO,EASEL.machineAPI.save(t)),"x-carve 2016"===t.machineType&&(t.machineType=EASEL.machineType.XCARVE,EASEL.machineAPI.save(t)),EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setLoadedMachineConfiguration({id:t.id,machineType:t.machineType,thirdPartyMake:t.thirdPartyMake,thirdPartyModel:t.thirdPartyModel,comPort:t.comPort,workArea:null!=t.workArea?t.workArea:EASEL.workAreaAPI.get(),railSize:null!=t.railSize?{x:t.railSize.x,y:t.railSize.y}:void 0,leadScrewType:t.leadScrewType,spindleType:t.spindleType,automaticSpindleControl:t.automaticSpindleControl,spindleRPM:t.spindleRPM,manualConnectionPreference:t.manualConnectionPreference,probePreferences:t.probePreferences,probeEnabled:Boolean(t.probeEnabled),accessoriesEnabled:Boolean(t.accessoriesEnabled),electronicsType:t.electronicsType,hasDustShoe:t.hasDustShoe,isDefault:t.isDefault,profileId:t.profileId,belts:t.belts}))},loadUserNotifications:()=>$.ajax({url:"/notifications/system_notification",method:"get"}).done((function(e,t,n){200===n.status&&EASEL.store.dispatch(EASEL.userNotificationActionCreators.setUserNotification(e.id,e.message,e.acknowledgeable,e.type))})),acknowledgeUserNotification:e=>$.ajax({url:"/notifications/acknowledged_notification",method:"post",data:{notification_id:e}}).then((function(t,n,a){201===a.status&&EASEL.store.dispatch(EASEL.userNotificationActionCreators.clearUserNotification(e))})),loadDesignElements:()=>(EASEL.store.dispatch(EASEL.designElementsActionCreators.setLoadStatus(EASEL.designElementsConstants.statuses.LOADING)),EASEL.designElementsAPI.get({done(e){EASEL.store.dispatch(EASEL.designElementsActionCreators.loadedElements(e))},fail(e){EASEL.store.dispatch(EASEL.designElementsActionCreators.failedLoadingElements(e))}})),loadFeatureDemos:()=>$.ajax({url:"/feature_demos",method:"get"}).done((e=>EASEL.projectMetadataActions.loadFeatureDemos(e))).fail((e=>console.warn(e))),completeFeatureDemo:e=>$.ajax({url:"/feature_demos",method:"post",data:{feature_demo:{name:e,completed:!0}}}).done((()=>EASEL.webAPIUtils.loadFeatureDemos())).fail((()=>EASEL.oops("Oops, we couldn't contact the Easel servers, are you connected to the internet?"))),loadMaterials:()=>$.ajax({url:"/toolbox/materials.json",dataType:"json",cache:!1}).then((e=>e.map(a.toCamelCase))).done((e=>EASEL.materialActions.setMaterials(e))),loadFeatures:()=>new Promise(((e,t)=>{$.ajax({url:"/features.json",dataType:"json",cache:!0,success:function(t){t=t.map(r.toFeaturesModel),e(t)},error:function(e){t(e)}})})),loadApps:()=>i.get({done:e=>EASEL.store.dispatch(EASEL.appActionCreators.loadedApps(e)),fail:e=>EASEL.store.dispatch(EASEL.appActionCreators.failedLoadingApps(e))}),loadUserFonts:()=>o.get().then((function(e){EASEL.store.dispatch(EASEL.fontActionCreators.setGroupTotal({group:"pro",total:e.length}));const t=e.map((({family:e})=>EASEL.googleFontManager.loadFont(e).then((t=>(EASEL.store.dispatch(EASEL.fontActionCreators.incrementGroupLoaded({group:"pro"})),{name:e,success:!0,font:t}))).catch((()=>({name:e,success:!1,font:null})))));return Promise.all(t).then((function(e){const t=e.filter((e=>e.success)),n=t.map((e=>e.name));return EASEL.store.dispatch(EASEL.fontActionCreators.setFontData(t)),EASEL.store.dispatch(EASEL.fontActionCreators.addFontsToToolbar(n)),e}))})),saveUserFont:e=>o.create(e),deleteUserFont:e=>o.destroy(e),nukeUserFonts:()=>o.nuke(),loadFontLibrary:()=>s.get().then((e=>{const t=e.map((({family:e,category:t,created_at:n})=>({name:e,category:t,createdAt:new Date(n)})));EASEL.store.dispatch(EASEL.fontActionCreators.addFontsToLibrary(t))})),loadProblemSymptoms:()=>new Promise(((e,t)=>EASEL.troubleshootingAPI.get({done(t){EASEL.store.dispatch(EASEL.troubleshootingActionCreators.loadedProblemSymptoms(t)),e(t)},fail(e,n,a){EASEL.store.dispatch(EASEL.troubleshootingActionCreators.failedLoadingProblemSymptoms(a)),t(a)}}))),loadUserFeedback:()=>new Promise(((e,t)=>EASEL.troubleshootingAPI.getFeedback({done(t){EASEL.store.dispatch(EASEL.troubleshootingActionCreators.loadedUserFeedback(t)),e()},fail(e,n,a){EASEL.store.dispatch(EASEL.troubleshootingActionCreators.failedLoadingUserFeedback(a)),t(a)}}))),loadSupportedSenderVersions:()=>$.ajax({url:"/sender_versions/supported.json",dataType:"json",cache:!1}).done((function(e){const t={};e.forEach((e=>{t[e.version_number]={current:e.current,deprecated:e.deprecated,macInstallerURL:e.mac_link,windowsInstallerURL:e.windows_link,linuxInstallerURL:e.linux_link}})),EASEL.localSenderVersionActions.setSupportedVersions(t)})),loadZAxisOffset:e=>$.ajax({url:`/carvey_factory_configurations/machines/${e}`,dataType:"json",cache:!1}).done((e=>{const t=e.z_axis_offset;EASEL.machineStateActions.receiveZAxisOffset(t)})).fail((()=>EASEL.machineStateActions.receiveZAxisOffset(null))),verifyEaselProPromoCode:e=>$.ajax({url:"/payments/activate_promo_code",method:"POST",data:{product_key:e}}),saveMachine(e){EASEL.machineAPI.save(e)},getAppProperties(){const e=EASEL.store.getState();return EASEL.appAPI.properties({url:EASEL.appSelectors.getActiveApp(e).workerUrl,done:e=>EASEL.store.dispatch(EASEL.appActionCreators.appProperties(e)),fail:e=>EASEL.store.dispatch(EASEL.appActionCreators.appFailed(e)),error:e=>EASEL.store.dispatch(EASEL.appActionCreators.appError(e))})},executeApp(){EASEL.store.dispatch(EASEL.appActionCreators.appRunning());const e=EASEL.store.getState(),t=EASEL.appSelectors.getActiveApp(e),n=EASEL.appSelectors.getActiveAppProperties(e);EASEL.appAPI.execute({url:t.workerUrl,requiresSelectedVolume:t.requiresSelectedVolume,properties:n,done:function(e){"1.0.0"===t.apiVersion?EASEL.store.dispatch(EASEL.appActionCreators.appOutput(e)):EASEL.store.dispatch(EASEL.appActionCreators.appVolumes(e))},fail:e=>EASEL.store.dispatch(EASEL.appActionCreators.appFailed(e)),error:e=>EASEL.store.dispatch(EASEL.appActionCreators.appError(e)),apiVersion:t.apiVersion})}}},function(e,t){const n={toFeaturesModel:e=>({isNew:new Date(EASEL.USER.lastSeen).getTime()<new Date(e.created_at).getTime(),title:e.name,description:e.formatted_description,isCollectingFeedback:e.collect_feedback,link:e.name_token,released:e.release_date})};e.exports=n},function(e,t){const n=function(){const e=function(e){return`/fonts${e?`/${e}`:""}.json`};return{get:()=>Promise.resolve($.ajax({url:e()})),create:t=>Promise.resolve($.ajax({url:e(),method:"post",data:{family:t}})),destroy:t=>Promise.resolve($.ajax({url:e(t),method:"delete"})),nuke:()=>Promise.resolve($.ajax({url:"/fonts/nuke",method:"delete"}))}}();e.exports=n},function(e,t){const n={get:()=>Promise.resolve($.ajax({url:"/library_fonts.json"}))};e.exports=n},function(e,t){const n={get:({done:e,fail:t})=>$.ajax({url:"/apps.json"}).done(e).fail(t)};e.exports=n},function(e,t){EASEL.workAreaAPI=function(){const e=EASEL.storageMixin("work-area-x",{}),t=EASEL.storageMixin("work-area-y",{});return{get:function(){const n={x:e.get(),y:t.get()};return null==n.x||null==n.y?null:n},save:function(n){e.set(n.x),t.set(n.y)}}}()},function(e,t){EASEL.component.utils.dimensionalInput=createReactClass({propTypes:{value:PropTypes.number.isRequired,unit:PropTypes.string.isRequired,onChange:PropTypes.func,precision:PropTypes.number,displayUnit:PropTypes.string,showUnit:PropTypes.bool,readonly:PropTypes.bool,increment:PropTypes.number,id:PropTypes.string},format:(e,t,n,a)=>(e&&(null!=n&&(e=e.toFixed(n)),e=parseFloat(e).toString(),a&&(e+=` ${t}`)),null!=e?e.toString():void 0),stepValue(e,t,n,a,r){let o,s,i;if(({value:t,unit:i}=EASEL.unitParser.parseInput(t)),!(null==t||t<=0)){if(i=i?EASEL.units.normalizeUnitName(i):n,null!=r)s=t+r*e;else if("mm"===i)s=t+1*e;else for(let n=5;n>=2;n--){const a=1/Math.pow(2,n),r=1/Math.pow(2,n-1),l=1/Math.pow(2,n);if(o=t*EASEL.units.inchesPerUnit(i),a<=o&&o<r&&e>0||a<o&&o<=r&&e<0){s=o+=l*e;break}}o=s*EASEL.units.inchesPerUnit(i),null!=s&&s>0&&a(s,i,o)}},onSubmit(e){let t;if(({value:e,unit:t}=EASEL.unitParser.parseInput(e)),null!=e){t=null!=t?EASEL.units.normalizeUnitName(t):this.props.displayUnit||this.props.unit;const n=e*EASEL.units.inchesPerUnit(t);this.props.onChange(e,t,n)}else this.forceUpdate()},onKeyDown(e,t){switch(e.which){case EASEL.keys.up:return this.stepValue(1,t,this.props.unit,this.props.onChange,this.props.increment);case EASEL.keys.down:return this.stepValue(-1,t,this.props.unit,this.props.onChange,this.props.increment)}},render(){let{id:e,className:t,readonly:n,value:a,unit:r,displayUnit:o,showUnit:s,precision:i}=this.props;o&&(a=EASEL.units.convertToUnit(a,r,o),r=o);const l=this.format(a,r,null!=i?i:{mm:1,in:5}[r],s);return l?React.createElement(EASEL.component.textInput,{id:e,className:t,initialValue:l,readonly:n,submit:this.onSubmit,onKeyDown:this.onKeyDown}):null}})},function(e,t){EASEL.component.textInput=createReactClass({propTypes:{id:PropTypes.string,initialValue:PropTypes.oneOfType([PropTypes.string,PropTypes.number]).isRequired,submit:PropTypes.func.isRequired,className:PropTypes.string,readonly:PropTypes.bool,placeholder:PropTypes.string,onChange:PropTypes.func,onKeyDown:PropTypes.func},getInitialState(){return{value:this.props.initialValue}},componentWillReceiveProps(e){this.props.initialValue!==e.initialValue&&this.setState({value:e.initialValue})},onChange(e){this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e.target.value)},onKeyDown(e){13===e.keyCode?(e.preventDefault(),this.onBlur()):this.props.onKeyDown&&this.props.onKeyDown(e,this.state.value)},onBlur(){this.state.value!==this.props.initialValue&&this.props.submit(this.state.value)},render(){return React.createElement("input",{"data-dont-close-from-inside":"true",className:null!=this.props.className?this.props.className:"form-control",size:this.props.size,id:this.props.id,onKeyDown:this.onKeyDown,onChange:this.onChange,onBlur:this.onBlur,placeholder:this.props.placeholder,readOnly:null!=this.props.readonly&&this.props.readonly,value:this.state.value})}})},function(e,t){EASEL.component.toggleSwitch=createReactClass({propTypes:{disabled:PropTypes.bool,enabled:PropTypes.bool.isRequired,label:PropTypes.string,offLabel:PropTypes.string,onLabel:PropTypes.string,onToggle:PropTypes.func.isRequired},onChange(e){this.props.onToggle(e.target.checked)},render(){return React.createElement("span",{className:"toggle-switch"},null!=this.props.label&&React.createElement("label",{className:"toggle-switch__label",onClick:()=>this.props.onToggle(!this.props.enabled)},this.props.label),null!=this.props.offLabel&&React.createElement("label",{className:"toggle-switch__off",onClick:()=>this.props.onToggle(!1)},this.props.offLabel),React.createElement("label",{id:this.props.id,className:`toggle-switch__switch ${this.props.disabled&&"disabled"}`},React.createElement("input",{type:"checkbox",checked:this.props.enabled,onChange:this.onChange,disabled:this.props.disabled}),React.createElement("span",{className:"toggle-switch__slider"})),null!=this.props.onLabel&&React.createElement("label",{className:"toggle-switch__on",onClick:()=>this.props.onToggle(!0)},this.props.onLabel))}})},function(e,t){const n=function(){const e=e=>({project:e.project,jobSettings:e.jobSettings,tile:e.tile,gcode:e.gcode,gcodeMetadata:e.gcodeMetadata,parentGcode:e.parentGcode,timeEstimate:e.timeEstimate,percentComplete:e.percentComplete,isUsingDustShoe:e.isUsingDustShoe,isExternalGcode:e.isExternalGcode,savedData:e.savedData});return{getDataForCurrentProject:()=>e(function(){const e=EASEL.projectManager.getCurrentData(),t={isUsingDustShoe:!1,project:e,jobSettings:EASEL.jobSettingsStore.settings(),percentComplete:0,tile:null,timeEstimate:null},n=EASEL.externalGcodeSelectors.getGcode(EASEL.store.getState());n&&(t.gcode=n,t.isExternalGcode=!0);const a=e.workpieces.find((e=>e.localId===EASEL.workpieceStore.getActiveID()));return t.savedData=JSON.parse(a.saved_data||"{}"),t}()),getDataForLastCarve:function(){const t=EASEL.carvingInfo.data();let n={};return null!=t.project&&null!=t.project.workpieces&&null!=t.project.active_workpiece_position&&(n=JSON.parse(t.project.workpieces[t.project.active_workpiece_position].saved_data)),e(EASEL.merge(EASEL.carvingInfo.data(),{savedData:n}))}}}();e.exports=n},function(e,t){EASEL.component.localSenderDownloadButton=createReactClass({getState:()=>({currentVersion:EASEL.localSenderVersionStore.getCurrentVersionInfo()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.localSenderVersionStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.localSenderVersionStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},downloadOptions(){return[{operatingSystem:"Windows",url:null!=this.state.currentVersion&&this.state.currentVersion.windowsInstallerURL,primary:EASEL.info.isWindows()},{operatingSystem:"Mac",url:null!=this.state.currentVersion&&this.state.currentVersion.macInstallerURL,primary:EASEL.info.isMac()},{operatingSystem:"Linux",url:null!=this.state.currentVersion&&this.state.currentVersion.linuxInstallerURL,primary:EASEL.info.isLinux()}]},render(){return null!==this.state.currentVersion?React.createElement("div",{className:"local-senders"},this.downloadOptions().sort(((e,t)=>t.primary-e.primary)).map((e=>React.createElement("a",{key:`download-option-${e.operatingSystem}`,href:e.url,className:"btn "+(e.primary?"btn-lg btn-success":"")},"Download for ",e.operatingSystem)))):React.createElement("p",{className:"text-center"},"Finding download links\u2026")}})},function(e,t){EASEL.component.firmwareMismatchModal=createReactClass({getInitialState:()=>({show:!1}),componentWillMount(){EASEL.flux.events.addListener("show-firmware-mismatch-modal",this.show)},componentWillUnmount(){EASEL.flux.events.removeListener("show-firmware-mismatch-modal",this.show)},show(){this.setState({show:!0})},hide(){this.setState({show:!1})},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,onHide:this.hide},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,{className:"text-center"},"The Easel Driver doesn\u2019t support your machine")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("p",null,"The version of the Easel Driver that\u2019s installed doesn\u2019t support your machine."),React.createElement("p",null,"Please update to the most recent version.")),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement(EASEL.component.localSenderDownloadButton,null)))}})},function(e,t){EASEL.probePreferencesForm=createReactClass({props:{probePreferences:PropTypes.object.isRequired},getInitialState:()=>({retractWarning:!1,probingDistanceWarning:!1}),shouldComponentUpdate(e){for(const t in e.probePreferences)if(this.props.probePreferences[t]!==e.probePreferences[t])return!0;return!1},componentWillReceiveProps(e){const{probePreferences:{probeRetractDistance:t,probeDistance:n,units:a}}=e,r=this.isSafeDistance(t,a),o=this.isSafeDistance(n,a);this.setState({retractWarning:!r,probingDistanceWarning:!o})},isSafeDistance:(e,t)=>e<=EASEL.machineConfigurationConstants.probeLimits.probeDistance*EASEL.units.unitsPerInch(t),updateProbeThickness(e){EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setProbePreferences({probeThickness:e}))},updateProbeRate(e){EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setProbePreferences({probeRate:e}))},updateProbeRetract(e){EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setProbePreferences({probeRetractDistance:e}))},updateProbeDistance(e){EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setProbePreferences({probeDistance:e}))},updateUnits(e){const{probeThickness:t,probeRate:n,probeRetractDistance:a,probeDistance:r}=this.props.probePreferences,o=EASEL.units.unitConversionMultiplyValue(e);e!==this.props.probePreferences.units&&EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setProbePreferences({probeThickness:t*o,probeRate:n*o,probeRetractDistance:a*o,probeDistance:r*o,units:e}))},useDefaults(){EASEL.store.dispatch(EASEL.machineSettingsActionCreators.useDefaultProbePreferences())},testProbe:()=>(EASEL.localSender.unlock(),setTimeout(EASEL.localSender.sendProbeRoutine,100)),render(){let e,t;const{units:n}=this.props.probePreferences,a="in"===n?"primary":"default",r="mm"===n?"primary":"default",o="in"===n?3:2,s=React.createElement(ReactBootstrap.Tooltip,{id:"warning-text"},"These settings exceed the maximum Z Axis travel of the X-Carve!"),i=React.createElement(ReactBootstrap.OverlayTrigger,{placement:"right",overlay:s},React.createElement("i",{style:{color:"red",paddingLeft:"5px",paddingRight:"5px",top:"35px"},className:"pull-right fa fa-exclamation-circle"}));return this.state.retractWarning&&(t=i),this.state.probingDistanceWarning&&(e=i),React.createElement("div",null,React.createElement("span",null,"Select Units "),React.createElement(ReactBootstrap.ButtonGroup,null,React.createElement(ReactBootstrap.Button,{onClick:this.updateUnits.bind(this,"in"),bsStyle:a,active:"in"==n},"in"),React.createElement(ReactBootstrap.Button,{onClick:this.updateUnits.bind(this,"mm"),bsStyle:r,active:"mm"==n},"mm")),React.createElement("hr",null),React.createElement("div",null,React.createElement("label",{htmlFor:"probe-block-thickness"},"Touch plate thickness"),React.createElement(EASEL.component.utils.dimensionalInput,{id:"probe-block-thickness",value:this.props.probePreferences.probeThickness,unit:this.props.probePreferences.units,onChange:this.updateProbeThickness,showUnit:!0,precision:o})),React.createElement("div",null,React.createElement("label",{htmlFor:"probe-rate"},"Probe rate"),React.createElement(EASEL.component.utils.dimensionalInput,{id:"probe-rate",value:this.props.probePreferences.probeRate,unit:this.props.probePreferences.units,displayUnit:n+" / min",onChange:this.updateProbeRate,showUnit:!0,precision:o})),React.createElement("div",null,React.createElement("label",{htmlFor:"probe-retract"},"Retract height"),t,React.createElement(EASEL.component.utils.dimensionalInput,{id:"probe-retract",value:this.props.probePreferences.probeRetractDistance,unit:this.props.probePreferences.units,onChange:this.updateProbeRetract,showUnit:!0,precision:o})),React.createElement("div",null,React.createElement("label",{htmlFor:"probe-distance"},"Maximum probing distance"),e,React.createElement(EASEL.component.utils.dimensionalInput,{id:"probe-distance",value:this.props.probePreferences.probeDistance,unit:this.props.probePreferences.units,onChange:this.updateProbeDistance,showUnit:!0,precision:o})),React.createElement("hr",null),React.createElement(ReactBootstrap.Button,{className:"pull-right",onClick:this.useDefaults},"Use Defaults"),React.createElement(ReactBootstrap.Button,{bsStyle:"primary",className:"pull-left",onClick:this.testProbe},"Test probe sequence"))}})},function(e,t){EASEL.component.probeStatus=createReactClass({props:{probeStatus:PropTypes.bool,disabled:PropTypes.bool},componentDidMount(){EASEL.machineRegisters.startMonitorProbe(EASEL.machineStateStore.getSettings()),setTimeout((()=>{EASEL.machineStateActions.refreshSettings(),EASEL.localSender.getMachineSettings()}),100)},render(){let e,t="fa fa-2x";return this.props.disabled?(t+=" fa-circle-thin fa-grey",e="Not available"):this.props.probeStatus?(t+=" fa-circle fa-green",e="Contact"):(t+=" fa-circle-thin fa-grey",e="No contact"),React.createElement("div",{className:"pin-state-container"},React.createElement("div",{className:"pin-state"},React.createElement("i",{className:t}),React.createElement("p",null,e)))}})},function(e,t){const n=function(){const e=e=>({id:e.id,name:e.name,color:e.color,storeId:e.store_id,groupName:e.group_name,type:e.group_name,imageURL:e.image_url,width:e.diameter,diameter:e.diameter,flutes:e.flutes,nominalWidth:e.nominal_width,tipAngle:e.tip_angle,unit:e.units,storeURL:e.store_url,global:e.global,source:e.source,technologyId:e.technology_id}),t=e=>({id:e.id,name:e.name,color:e.color,store_id:e.storeId,diameter:e.diameter,width:e.width,tip_angle:e.tipAngle,group_name:e.groupName,flutes:e.flutes,units:e.unit,store_url:e.storeURL,image_url:e.imageURL,global:e.global,source:e.source,technology_id:e.technologyId});return{loadBits:()=>$.ajax({url:"/toolbox/bits.json",dataType:"json",cache:!1}).then((t=>t.map(e))).done((e=>EASEL.store.dispatch(EASEL.bitActionCreators.setBits(e)))),loadInventablesBits:()=>$.ajax({url:"/inventables/bits",dataType:"json",cache:!1}).then((t=>t.map(e))),addBit:function(n){const a=t(n);return $.ajax({url:"/toolbox/bits",type:"POST",dataType:"json",data:{bit:a}}).then((t=>e(t.bit)))},deleteBit:e=>$.ajax({url:`/toolbox/bits/${e}`,type:"DELETE",dataType:"json"}),updateBit:function(n,a){const r=t(a);return $.ajax({url:`/toolbox/bits/${n}`,type:"PUT",dataType:"json",data:{bit:r}}).then((t=>e(t.bit)))}}}();e.exports=n},function(e,t){EASEL.component.walkthroughStep=createReactClass({propTypes:{title:PropTypes.string.isRequired,nextCallback:PropTypes.func,nextText:PropTypes.string,altText:PropTypes.string,altAction:PropTypes.func,disableNext:PropTypes.bool,notice:PropTypes.func},render(){let{title:e,nextCallback:t,nextText:n,altText:a,altAction:r,disableNext:o,notice:s}=this.props;const i=null!=t&&null!=n&&React.createElement(ReactBootstrap.Button,{bsStyle:"primary",bsSize:"large",className:"confirm",onClick:t,disabled:o},n),l=null!=r&&null!=a&&React.createElement(ReactBootstrap.Button,{bsStyle:"default",bsSize:"large",className:"confirm secondary",onClick:r},a);s=null!=s&&s();let c="step walkthrough-step";return this.props.className&&(c+=" "+this.props.className),React.createElement("div",{className:c},React.createElement("div",null),s,React.createElement("h1",{className:"walkthrough-step-header"},e),this.props.children,React.createElement("div",{className:"button-container"},i,l))}})},function(e,t){EASEL.googleAnalytics={init:()=>{if(e=window,t=document,n="script",a="ga",e.GoogleAnalyticsObject=a,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,r=t.createElement(n),o=t.getElementsByTagName(n)[0],r.async=1,r.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(r,o),ga("create","UA-1939094-2","auto",{name:"fboltTracker"}),null!=EASEL.projectLinkToken){const e=`/platform/easel-project/${EASEL.projectLinkToken}`;ga("fboltTracker.send","pageview",e)}var e,t,n,a,r,o}}},function(e,t,n){EASEL.socket=function(e){const t={},n=window.io(e,{reconnection:!0}),a=function(e,t,n){null!=EASEL.websocketMessageActions&&EASEL.websocketMessageActions.reportWebsocketMessage({direction:e,event:t,data:n,timestamp:(new Date).toISOString()}),null!=EASEL.websocketMessageStore&&EASEL.websocketMessageStore.hasDetectedGarbledMessage()&&EASEL.stats.trackEventOnce("Garbled message")};return t.emit=function(e,t){a("emit",e,t),n.emit(e,t)},t.log=e=>n.on(e,((...t)=>a("receive",e,t))),t.on=(e,t)=>n.on(e,t),t.disconnect=()=>n.disconnect(),t}},function(e,t){EASEL.statsAdapter=function(e){let t=!1,n=null,a=[],r=[];null==e.load&&(t=!0);const o=function(a){t?"function"===typeof e.setProperties&&e.setProperties(a):n=EASEL.merge(n,a)},s=function(n,a,o){t?"function"===typeof e.trackEvent&&e.trackEvent(n,a,o):r.push({event:n,data:a,context:o})};return{trackPage:n=>{t?"function"===typeof e.trackPage&&e.trackPage(n):a.push(n)},trackEvent:s,setProperties:o,load:function(){t||(t=!0,"function"===typeof e.load&&e.load(),function(){null!=n&&o(n);for(let{event:e,data:t,context:n}of r)s(e,t,n);n=null,a=[],r=[]}())}}}},function(e,t,n){const a=n(36);EASEL.stats=function(){const e={};let t=!1;const n={};let r=[],o=null;const s=function(){let e,t,n,a,r;const o=EASEL.store.getState(),s={};if(null!=(e=null!=EASEL.machineSettingsSelectors?EASEL.machineSettingsSelectors.getMachineType(o):void 0)&&(s.Machine=e),null!=(a=null!=EASEL.machineSettingsSelectors?EASEL.machineSettingsSelectors.getThirdPartyModel(o):void 0)&&(s["Third Party Model"]=a),null!=(t=null!=EASEL.machineStateStore?EASEL.machineStateStore.getSerialNumber():void 0)&&(s["Serial number"]=t),null!=(n=null!=EASEL.machineSettingsSelectors?EASEL.machineSettingsSelectors.getSpindleType(o):void 0)&&(s["Spindle type"]=n),null!=(r=navigator.userAgent)&&(s.UserAgent=r),void 0!==EASEL.VERSION&&(s["Easel Version"]=EASEL.VERSION),null!=EASEL.userSelectors){const e=EASEL.userSelectors.unactivatedEaselProProductKeys(o),t=EASEL.userSelectors.activatedEaselProProductKey(o);null==t&&null==e||(s["Has Associated Easel Pro Key"]=null!=t?"activated":"unactivated")}return s},i=function(){let e={};const t=[],n=[],a=EASEL.statsAdapter({setProperties:t=>e=EASEL.merge(t,e),trackEvent(e,t){n.push({name:e,data:t})},trackPage(e){t.push(e)}});return EASEL.shallowMerge(a,{events:()=>n,pages:()=>t,properties:()=>e})}(),l=EASEL.statsAdapter({trackEvent(e){"function"===typeof gtag&&(e===EASEL.events.newUser?gtag("event","conversion",{send_to:"AW-952042577/VhLiCNGnnaUBENGI_MUD"}):e===EASEL.events.startedSubscription&&gtag("event","easel_pro_purchase",{send_to:"AW-952042577/3iumCKLDiocCENGI_MUD"}))}}),c=(()=>{let e={};return EASEL.statsAdapter({load(){EASEL.USER.loggedIn&&analytics.track(EASEL.events.loggedIn,s())},setProperties(t){e=EASEL.merge(e,t)},trackPage(e){analytics.page(e)},trackEvent(t,n,r){if("undefined"!==typeof analytics&&null!==analytics){if(null==r)switch(t){case EASEL.events.newUser:r={"New Easel User":a.currentMidnightUTC()};break;case EASEL.events.startedTrial:r={"Started Easel Pro Trial Date":a.currentMidnightUTC()}}null!=r&&null!=EASEL.USER&&(analytics.reset(),analytics.identify(EASEL.USER.email,EASEL.merge({email:EASEL.USER.email},r))),analytics.track(t,EASEL.merge(e,n))}}})})(),p=EASEL.statsAdapter({setProperties(e){console.log("Registering properties on the user");for(let t in e){const n=e[t];console.log(`\t ${t}: ${n}`)}},trackEvent(e,t){console.log(`Tracking event: '${e}'`,t)},trackPage(e){console.log("Tracking page",e)}}),u={production:[l,c],staging:[c],development:[p],test:[i,p]},d=e=>EASEL.merge(e,s()),h=function(e,n,a){if(t)if(EASEL.userSelectors.isAdmin(EASEL.store.getState())&&"development"!==o)console.log(`Not tracking "${e}", admin on non-development environment detected.`);else{n=d(n);for(let t of r)t.trackEvent(e,n,a)}},E=function(e,a,r){t&&(n[e]||h(e,a,r),n[e]=!0)},m=function(e,n){return t?new Promise((function(t){return n=d(n),$.ajax({url:"/events",type:"POST",data:{name:e,event_data:n}}).then(t,(function(e,n,a){return console.warn(n,a),t()}))})):Promise.resolve()};return e.enable=function(e){t=!0,o=e,r=u[e]},e.load=function(){for(let e of r)e.load()},e.trackPage=()=>{if(!t)return;if(EASEL.userSelectors.isAdmin(EASEL.store.getState())&&"development"!==o)return void console.log("Not tracking page, admin on non-development environment detected.");const e=window.location.href,n=window.location.pathname,a=document.title;for(let t of r)t.trackPage({url:e,path:n,title:a})},e.trackEvent=h,e.trackEventOnce=E,e.trackEventOnceSometimes=function(e,a,r){t&&(Math.random()<=.1&&E(e,a,r),n[e]=!0)},e.trackEventSometimes=function(e,n){if(t)return Math.random()<=.1?h(e,n):void 0},e.trackEventOnServer=m,e.trackEventEverywhere=function(e,n,a){t&&(h(e,n,a),m(e,n))},e.setProperties=function(e){for(let t of r)t.setProperties(e)},e.adapters=()=>r,e}()},function(e,t){EASEL.stubSocket=()=>{const e={},t={},n={},a=[];return e.on=function(e,n){null==t[e]&&(t[e]=[]),t[e].push(n)},e.emit=function(e,t){a.push({index:a.length,name:e,data:t}),n[e]&&n[e](t)},e.fire=function(e,...n){t[e]&&t[e].forEach((e=>{e(...n)}))},e.sentMessages=()=>a,e.disconnect=()=>{},e}},function(e,t){const n=function(){const e={};let t=0,n=0,a=!1;const r=function(e){t=e,o(),i(100*t/n)};var o=function(){a?$("#progress-status").text(t+"/"+n):$("#progress-status").text("")};var s=function(e,t){n=e,a=t,o()};var i=e=>$("#bar").css("width",Math.min(100,e)+"%");return e.initialize=function(e,t){s(e,t),0===$("#overlay-container").length&&$("body").append("<div id='overlay-container'><div id='bg-overlay'></div></div>"),0===$("#progress-bar-container").length&&$("#overlay-container").append("<div id='modal'><div id='progress-bar-container'><div id='bar'></div></div><p id='progress-text'></p><p id='progress-status'></p></div>"),i(0)},e.setText=e=>$("#progress-text").text(e),e.setTotal=s,e.setValue=r,e.increment=()=>r(t+1),e.close=function(){$("#overlay-container").remove(),n=null,t=0},e}();e.exports=n},function(e,t){EASEL.ramping={profile(e,t,n,a){return EASEL.path(e).isClosed()?this.loopIn(e,t,n,a):this.zigZagIn(e,t,n,a)},loopIn(e,t,n,a){const r=Math.tan(a),o=[];let s={x:e[0].x,y:e[0].y,z:t};for(let i=e.length-2;s.z<n;i--){0==i&&(i=e.length-1);let t={x:e[i].x,y:e[i].y};t.z=s.z+r*Math.hypot(t.x-s.x,t.y-s.y),t.z>n&&(t=this.lerp(s,t,(n-s.z)/(t.z-s.z)),t.z=n),o.unshift(t),s=t}return o},zigZagIn(e,t,n,a){const r=n-t,o=Math.tan(a);let s=e[0];const i=[{x:s.x,y:s.y,z:n}],l=[{x:s.x,y:s.y,z:t}];let c=0,p=0;for(let{x:u,y:d}of e.slice(1)){const e=Math.hypot(u-s.x,d-s.y),a=o*e;if(c+a>r/2){const e=this.lerp(s,{x:u,y:d},(r/2-c)/a);i.push({x:e.x,y:e.y,z:t+r/2}),c=r/2;break}c+=a,p+=e,i.push({x:u,y:d,z:n-c}),l.unshift({x:u,y:d,z:t+c}),s={x:u,y:d}}if(c<r/2){i.pop(),l[0].z=t+r/2;let{x:e,y:n}=l[0],a=0;for(let o=1;o<l.length;o++)a+=Math.hypot(l[o].x-e,l[o].y-n)/p*(r/2),i[i.length-o].z=t+r/2+a,l[o].z=t+r/2-a,e=l[o].x,n=l[o].y}return i.concat(l)},lerp:(e,t,n)=>({x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n})}},function(e,t){null==EASEL.controllers&&(EASEL.controllers={}),EASEL.controllers.features=[{readyResponse:/Grbl 0\.8[a-z]/,directionPortMasks:{x:32,y:64,z:128},settingsVersion:5,registers:{stepsPerMillimeterX:0,stepsPerMillimeterY:1,stepsPerMillimeterZ:2,maxSpeedX:4,maxSpeedY:4,maxSpeedZ:4,directionPortInvert:6,probePinInvert:6,maxAccelerationX:8,maxAccelerationY:8,maxAccelerationZ:8,junctionDeviation:9,homingEnable:17,homingDirInvertMask:18},errorResponses:{homingFailed:/^ALARM: ?Homing fail$/,probeFailed:/^ALARM: ?Probe fail$/}},{readyResponse:/Grbl 0\.9[a-z]/,directionPortMasks:{x:1,y:2,z:4},settingsVersion:9,registers:{directionPortInvert:3,junctionDeviation:11,homingEnable:22,homingDirInvertMask:23,stepsPerMillimeterX:100,stepsPerMillimeterY:101,stepsPerMillimeterZ:102,maxSpeedX:110,maxSpeedY:111,maxSpeedZ:112,maxAccelerationX:120,maxAccelerationY:121,maxAccelerationZ:122,maxTravelX:130,maxTravelY:131},errorResponses:{homingFailed:/^ALARM: ?Homing fail$/,probeFailed:/^ALARM: ?Probe fail$/}},{readyResponse:/Grbl 1\.0[a-z]/,directionPortMasks:{x:1,y:2,z:4},zProbeEnabled:!0,settingsVersion:10,registers:{directionPortInvert:3,junctionDeviation:11,homingEnable:22,homingDirInvertMask:23,maxSpindleSpeed:30,minSpindleSpeed:31,stepsPerMillimeterX:100,stepsPerMillimeterY:101,stepsPerMillimeterZ:102,maxSpeedX:110,maxSpeedY:111,maxSpeedZ:112,maxAccelerationX:120,maxAccelerationY:121,maxAccelerationZ:122,maxTravelX:130,maxTravelY:131},errorResponses:{homingFailed:/^ALARM: ?Homing fail$/,probeFailed:/^ALARM: ?Probe fail$/}},{readyResponse:/Grbl 1\.1[a-z]/,directionPortMasks:{x:1,y:2,z:4},zProbeEnabled:!0,feedRateOverrideEnabled:!0,spindleSpeedOverrideEnabled:!0,settingsVersion:10,registers:{directionPortInvert:3,junctionDeviation:11,homingEnable:22,homingDirInvertMask:23,maxSpindleSpeed:30,minSpindleSpeed:31,stepsPerMillimeterX:100,stepsPerMillimeterY:101,stepsPerMillimeterZ:102,maxSpeedX:110,maxSpeedY:111,maxSpeedZ:112,maxAccelerationX:120,maxAccelerationY:121,maxAccelerationZ:122,maxTravelX:130,maxTravelY:131},errorResponses:{homingFailed:/^ALARM:[6789]$/,probeFailed:/^ALARM:[45]$/,checkDoor:/^error:13$/}},{readyResponse:/gCarvin 1\.\d/,states:{doorOpen:{state:/^door$/}},errorResponses:{homingFailed:/^ALARM: ?Homing fail$/,probeFailed:/^ALARM: ?Probe fail$/,checkDoor:/^error: ?Check Door$/},settingsVersion:!0},{readyResponse:/gCarvin 2\.\d/,feedRateOverrideEnabled:!0,states:{doorOpen:{state:/^door$/,substate:/^[12]$/}},errorResponses:{homingFailed:/^ALARM:[6789]$/,probeFailed:/^ALARM:[45]$/,checkDoor:/^error:13$/},settingsVersion:!0}]},function(e,t){null==EASEL.controllers&&(EASEL.controllers={}),EASEL.controllers.gCarvin={name:"gCarvin Configs",baud:115200,separator:"\r\n",readyResponses:["gCarvin"],successResponse:"ok",realTimeCommands:["pause","resume","flush","status","resetFeedRate","increaseFeedRate","decreaseFeedRate"],gcode:{flush:"\x18",home:"$H",resetFeedRate:"\x90",increaseFeedRate:"\x91",decreaseFeedRate:"\x92",liftToSafeHeight:"$H",lockMotors:"$1=255\nG91 X0 Y0",park:"G30",pause:"!",recallCoordinateSystem:"G54",readSerialNumber:"$I",resume:"~",saveOrigin:"G10 L20 P0 X0 Y0 Z0",settings:"$$",spindleOff:"M5",spindleOn:"M3",status:"?",unlock:"$X",unlockMotors:"$1=0\nG91 X0 Y0",zProbe:"G21 G38.2 Z-100 F80"},firmwareUpload:{avrDevice:"atmega2560",programmer:"stk500v2",baudRate:115200,preReset:!0,resetDelay:3e3,resetKeepAliveInterval:100},overrides:{feedRate:{minimumOverride:10,maximumOverride:200,overrideIncrement:10}}}},function(e,t){null==EASEL.controllers&&(EASEL.controllers={}),EASEL.controllers.grbl_08={name:"GRBL 0.8 Default Configs",baud:9600,separator:"\r\n",readyResponses:["Grbl 0.8c"],successResponse:"ok",realTimeCommands:["pause","resume","flush","status"],gcode:{flush:"\x18",home:"$H",liftToSafeHeight:"G20 G90 Z0.25",lockMotors:"$7=255\nG91 X0 Y0",park:"G20 G90 G0 X0 Y0",pause:"!",recallCoordinateSystem:"G54",resume:"~",saveOrigin:"G10 L20 P0 X0 Y0 Z0",settings:"$$",spindleOff:"M5",spindleOn:"M3",status:"?",unlock:"$X",unlockMotors:"$7=0\nG91 X0 Y0",zProbe:"G21 G38.2 Z-100 F80"},firmwareUpload:{avrDevice:"m328p",programmer:"arduino",baudRate:115200,preReset:!1}}},function(e,t){null==EASEL.controllers&&(EASEL.controllers={}),EASEL.controllers.grbl_09={name:"GRBL 0.9 Default Configs",baud:115200,separator:"\r\n",readyResponses:["Grbl 0.9g","Grbl 0.9i","Grbl 0.9j","Grbl 1.0b","Grbl 1.0c","Grbl 1.1e","Grbl 1.1f","Grbl 1.1g","Grbl 1.1h"],successResponse:"ok",realTimeCommands:["pause","resume","flush","status","resetFeedRate","increaseFeedRate","decreaseFeedRate"],gcode:{flush:"\x18",home:"$H",resetFeedRate:"\x90",increaseFeedRate:"\x91",decreaseFeedRate:"\x92",liftToSafeHeight:"G20 G90 Z0.25",lockMotors:"$1=255\nG91 X0 Y0",park:"G20 G90 G0 X0 Y0",pause:"!",recallCoordinateSystem:"G54",readSerialNumber:"$I",resume:"~",saveOrigin:"G10 L20 P0 X0 Y0 Z0",saveXYorigin:"G10 L20 P0 X0 Y0",saveZorigin:"G10 L20 P0 Z0",settings:"$$",spindleOff:"M5",spindleOn:"M3",status:"?",unlock:"$X",unlockMotors:"$1=0\nG91 X0 Y0",zProbe:"G21 G38.2 Z-100 F80"},firmwareUpload:{avrDevice:"m328p",programmer:"arduino",baudRate:115200,preReset:!1},overrides:{feedRate:{minimumOverride:10,maximumOverride:200,overrideIncrement:10}}}},function(e,t){null==EASEL.controllers&&(EASEL.controllers={}),EASEL.controllers.grbl_xcp={name:"GRBL 1.1h (XCP) Config",baud:115200,separator:"\r\n",readyResponses:["Grbl 1.1h","Grbl 1.1h-XCP","Grbl 1.1h - XCP Proto 1.0.0","Grbl 1.1h-Prototype Firmware"],successResponse:"ok",realTimeCommands:["pause","resume","flush","status","resetFeedRate","increaseFeedRate","decreaseFeedRate","resetSpindleSpeed","increaseSpindleSpeed","decreaseSpindleSpeed"],gcode:{flush:"\x18",home:"$H",resetFeedRate:"\x90",increaseFeedRate:"\x91",decreaseFeedRate:"\x92",resetSpindleSpeed:"\x99",increaseSpindleSpeed:"\x9a",decreaseSpindleSpeed:"\x9b",liftToSafeHeight:"G20 G90 Z0.25",lockMotors:"$1=255\nG91 X0 Y0",park:"G20 G90 G0 X0 Y0",pause:"!",recallCoordinateSystem:"G54",readSerialNumber:"$I",resume:"~",saveOrigin:"G10 L20 P0 X0 Y0 Z0",saveXYorigin:"G10 L20 P0 X0 Y0",saveZorigin:"G10 L20 P0 Z0",settings:"$$",spindleOff:"M5",spindleOn:"M3",status:"?",unlock:"$X",unlockMotors:"$1=0\nG91 X0 Y0",zProbe:"G21 G38.2 Z-100 F80"},firmwareUpload:{avrDevice:"atmega2560",programmer:"wiring",baudRate:115200,preReset:!1},overrides:{feedRate:{minimumOverride:10,maximumOverride:200,overrideIncrement:10}}}},function(e,t){EASEL.connectionModalManager={showMachineNotFoundModal(){EASEL.flux.events.emit("show-machine-not-found-modal")},hideMachineNotFoundModal(){EASEL.flux.events.emit("hide-machine-not-found-modal")},showDriverDeprecatedModal(){EASEL.flux.events.emit("show-driver-deprecated-modal")},hideDriverDeprecatedModal(){EASEL.flux.events.emit("hide-driver-deprecated-modal")},showDriverUnsupportedModal(){EASEL.flux.events.emit("show-driver-unsupported-modal")},hideDriverUnsupportedModal(){EASEL.flux.events.emit("hide-driver-unsupported-modal")},showFirmwareMismatchModal(){EASEL.flux.events.emit("show-firmware-mismatch-modal")},showDriverNotInstalledModal(){EASEL.flux.events.emit("show-driver-not-installed-modal")},hideDriverNotInstalledModal(){EASEL.flux.events.emit("hide-driver-not-installed-modal")},showMachineSetupAlert(){EASEL.alert("Missing Machine Settings","Before you can carve, you need to set up or select a machine profile.",[{text:"Set Up Your Machine Profile",action(){document.location="/setup"}}])}}},function(e,t,n){const a=n(81);EASEL.localSender=(()=>{const e={};let t=null,n=null,r=null;const o=[],s=function(e,...t){for(let n of o)n(e,...t)},i=(e,t={})=>{const n=EASEL.merge({description:e.description,message:e.message,name:e.name,type:e.type},t);null!=EASEL.stats&&EASEL.stats.trackEventOnceSometimes("Socket Connection Error",n)},l=e=>{e.log("connect"),e.log("connect_error"),e.log("error"),e.log("echo");const t={abilities(e){s("receivedLocalSenderAbilities",e)},connection_status(e){s("receivedConnectionStatus",e)},disconnect(){s("localSenderDisconnected")},done(){},"firmware-upload-start"(){s("startingFirmwareUpload")},"firmware-upload-done"(e){s("stoppingFirmwareUpload",e)},"firmware-upload-progress"(e){s("receiveFirmwareProgress",e)},"grbl-alarm"(e){s("grblAlarm",e)},"grbl-error"(e){s("grblError",e)},"grbl-over-current"(e){s("grblOverCurrent",e)},"machine-build-info"(e){s("receivedMachineBuildInfo",e)},"machine-settings"(e){s("machineSettings",e)},overrides(e){s("receivedOverrides",e)},paused(e,t){s("machinePaused",e,t)},port_lost(e){s("machineDisconnected",e)},ports(e){s("portsListed",e)},position(e){s("grblPosition",e)},"probe-status"(e){s("receivedProbeStatus",e)},"probe-result"(e){s("receivedProbeResult",e)},"spindle-current"(e){s("receivedSpindleCurrent",e)},ready(){s("machineReady")},release(e){s("releaseWalkthrough",e)},running(e,t){s("machineRunning",e,t)},sent_feedback(){s("sentFeedback")},"run-time"(e){s("receivedRunTime",e)},state(e,t){s("grblState",e,t)},stopping(){s("machineStopping")},version(e){s("localSenderConnected",e)}};for(const n in t)e.log(n),e.on(n,(function(...e){try{(0,t[n])(...e||[])}catch(a){window.onerror(a.toString(),`socket '${n}' handler`,0,0,a)}}))},c=e=>t.emit("console",e),p=(...e)=>t.emit("execute",e);return e.getSocket=()=>t,e.getConnectionStatus=()=>t.emit("get_connection"),e.getJobStatus=()=>t.emit("get_job_status"),e.initSocket=()=>{let e="https://inventableslocalhost.com:1438",a="http://127.0.0.1:1338";null==t&&(n=EASEL.socket(e),r=EASEL.socket(a),l(n),l(r),n.on("connect",(()=>{t=n,r&&(r.disconnect(),r=null)})),n.on("connect_error",(t=>{i(t,{connectionString:e})})),r.on("connect",(()=>{t=r,n&&(n.disconnect(),n=null)})),r.on("connect_error",(e=>{i(e,{connectionString:a})})))},e.listPorts=()=>t.emit("get_ports"),e.initPort=e=>t.emit("init_port",e),e.acquireWalkthrough=e=>t.emit("acquire",e),e.getMachineSettings=()=>t.emit("machine-settings"),e.getMachineBuildInfo=()=>t.emit("get_machine_build_info"),e.pause=()=>t.emit("pause"),e.resume=()=>t.emit("resume"),e.stop=function(){a.update({interrupted:!0}),t.emit("stop")},e.sentFeedback=()=>t.emit("sent_feedback"),e.execute=p,e.startSpindle=e=>c(`M3 S${e}`),e.stopSpindle=()=>c("M5"),e.accessoriesOn=function(){c("M7"),c("M8")},e.accessoriesOff=()=>c("M9"),e.serialEcho=e=>{t.emit("echo",e)},e.updateFirmware=e=>t.emit("update-firmware",e),e.setConfig=e=>t.emit("set_config",e),e.startJob=function(e){let n,a,r,o,s,i;const l=EASEL.merge(e.jobSettings);if(null!=l&&(l.material=EASEL.materialStore.getActiveMaterial(),({bit:a,detailBit:r,material:o,passType:s,safetyHeight:i}=l)),EASEL.carvingInfo.data({project:EASEL.projectManager.getCurrentData(),isExternalGcode:Boolean(e.isExternalGcode),jobSettings:l,tile:e.tile,gcode:e.gcode,gcodeMetadata:e.gcodeMetadata,parentGcode:e.parentGcode,timeEstimate:e.timeEstimate,isUsingDustShoe:e.isUsingDustShoe,machineProfileId:e.machineProfileId,postCarveModal:e.postCarveModal}),EASEL.store.dispatch(EASEL.jobStatusActionCreators.setTimeEstimate(e.timeEstimate)),null!=(n=e.gcode)){EASEL.machineStateActions.resetSpindleCurrents(),EASEL.machineStateStore.getFeatures()&&(EASEL.machineStateStore.getFeatures().feedRateOverrideEnabled&&p("resetFeedRate"),EASEL.machineStateStore.getFeatures().spindleSpeedOverrideEnabled&&p("resetSpindleSpeed")),EASEL.flux.events.emit("started-job"),EASEL.jobTracker.start({projectName:null!=EASEL.projectMetadataStore?EASEL.projectMetadataStore.getName():void 0,gcode:n,volumes:EASEL.volumeStore.getVolumes(),material:o,settings:EASEL.machineStateStore.getSettings(),bitData:"detail"===s?r:a,rampingAngle:e.rampingAngle,passType:s}),EASEL.projectMetadataActions.setCarveCount(EASEL.projectMetadataStore.getCarveCount()+1);const l={liftToCustomSafetyHeight:null},c=EASEL.store.getState();if(!EASEL.machineSettingsSelectors.isCarvey(c)){const e=EASEL.userSelectors.getOriginSafetyHeight({safetyHeight:i},c);l.liftToCustomSafetyHeight=`G20 G90 Z${e.toFixed(4)}`}t.emit("gcode",{gcode:n,name:EASEL.projectMetadataStore.getName(),customConfig:l})}else{const e=EASEL.stringConstants.alerts.nothingCarvable;EASEL.localSender.stopSpindle(),EASEL.alert(e.title,e.message)}},e.reset=()=>p("flush"),e.increaseFeedRate=function(){null!=EASEL.stats&&EASEL.stats.trackEvent(null!=EASEL.events&&EASEL.events.increasedFeedRate,{"Starting percentage":EASEL.jobStatusSelectors.getCurrentFeedRatePercentage(EASEL.store.getState())}),p("increaseFeedRate")},e.decreaseFeedRate=function(){null!=EASEL.stats&&EASEL.stats.trackEvent(null!=EASEL.events&&EASEL.events.decreasedFeedRate,{"Starting percentage":EASEL.jobStatusSelectors.getCurrentFeedRatePercentage(EASEL.store.getState())}),p("decreaseFeedRate")},e.increaseSpindleSpeed=()=>p("increaseSpindleSpeed"),e.decreaseSpindleSpeed=()=>p("decreaseSpindleSpeed"),e.raiseToSafety=function(){const e=EASEL.userSelectors.getOriginSafetyHeight(EASEL.jobSettingsStore.settings(),EASEL.store.getState());c(`G90 G21 G1 Z${(25.4*e).toFixed(4)} F200`)},e.jogTo=(e,t)=>c(`G90 G21 G0 ${e.toUpperCase()}${(25.4*t).toFixed(4)}`),e.setOrigin=()=>p("saveOrigin"),e.setZorigin=()=>p("saveZorigin"),e.setXYorigin=()=>p("saveXYorigin"),e.jog=(e,t)=>c(`G91 G21 G0 ${e.toUpperCase()}${(25.4*t).toFixed(4)}`),e.moveToWorkZeroXY=()=>c("G90 G0 X0 Y0"),e.presentMaterial=()=>p("park"),e.lockMotors=()=>p("lockMotors"),e.unlockMotors=()=>p("unlockMotors"),e.home=()=>p("home"),e.unlock=()=>p("unlock"),e.generateProbeRoutine=function(){const{probeThickness:e,probeDistance:t,probeRate:n,units:a,probeRetractDistance:r}=EASEL.machineSettingsSelectors.getProbePreferences(EASEL.store.getState()),o="in"===a?"G20":"G21",s="in"===a?3:2;return`      ${o}\n      G91\n      G38.2 Z-${t.toFixed(s)} F${n.toFixed(s)}\n      G10 L20 P0 Z${e.toFixed(s)}\n      G91 ${o} G0 Z${r.toFixed(s)}      `},e.sendProbeRoutine=()=>c(e.generateProbeRoutine()),e.onEvent=e=>o.push(e),e.sendLine=c,e.sockets=()=>[n,r],e})()},function(e,t){EASEL.machineRegisters=function(){const e=[],t=()=>e.length>0;var n=EASEL.interval((function(){EASEL.localSender.sendLine(e.shift()),t()||n.stop()}));const a=function(t,a){e.push(`$${t}=${a}`),n.isRunning()||n.start(100)};return{writesPending:t,setValue:a,getValue:function(e,t){const n=new RegExp(`^\\$${t}=([^\\s]+)`);for(let r of e){var a;if(null!=(a=r.match(n)))return a[1]}},hasSettings:function(e,t){for(let n in e){const a=e[n];let r=EASEL.machineRegisters.getValue(t,n);if("number"===typeof a&&(r=parseFloat(r)),r!==a)return!1}return!0},startMonitorProbe:function(e){"115"!==EASEL.machineRegisters.getValue(e,10)&&EASEL.machineRegisters.setValue(10,115)},xorBits:function(e,t,n){return a(e,t^=n),t}}}()},function(e,t){EASEL.messageChecker=function(){const e=/^<[^<>]+>$/,t=/^\$[^()]+(?:\([^$()]+\))?$/;return{isValid:function(n){const a=n[0],r=n[n.length-1];return"<"===a||">"===r?null!=n.match(e):"$"!==a||null!=n.match(t)}}}()},function(e,t){const n=function(){const e=["Arduino","FTDI"],t=["VID_2341","VID_0403","Arduino"],n=["VID_1A86"],a=e=>null!=e.manufacturer&&e.manufacturer.match("Inventables"),r=function(a){let r;for(r of e)if(null!=a.manufacturer&&a.manufacturer.match(r))return!0;for(r of t)if(null!=a.pnpId&&a.pnpId.match(r))return!0;const o=EASEL.store.getState(),s=EASEL.machineSettingsSelectors.getMachineType(o);if(s&&s===EASEL.machineType.OTHER_GRBL)for(r of n)if(null!=a.pnpId&&a.pnpId.match(r))return!0;return!1},o=e=>e.comName&&(e.comName.match("usbmodem")||e.comName.match("usbserial"));return{findMachinePort:function(e){for(const t of e)if(a(t))return t;for(const t of e)if(r(t))return t;for(const t of e)if(o(t))return t;return null}}}();e.exports=n},function(e,t){EASEL.linearizer=function(){const e=(e,t)=>e.transformedPoint({x:Math.cos(t),y:Math.sin(t)}),t=function(n,a,r,o){const s=(r+o)/2,i=e(a,r),l=e(a,o),c=e(a,s);return EASEL.math.distToSegment(c,i,l).distance<n?[i,l]:t(n,a,r,s).concat(t(n,a,s,o).slice(1))};return{ellipseArc:t,ellipse:function(n,a){const r=t(n,a,0,2*Math.PI);return r[r.length-1]=e(a,0),r}}}()},function(e,t){EASEL.pathPolylineGenerator=function(e,t){const n={},a={x:0,y:0},r=e=>[t.transformedPoint(e)],o=function(n){let o=[],s=null;for(let u of n)o=null==s||null==s.rh&&null==u.lh?o.concat(r(u)):o.concat((i=s,l=s.rh,c=u.lh,p=u,null==l&&(l=a),null==c&&(c=a),l={x:i.x+l.x,y:i.y+l.y},c={x:p.x+c.x,y:p.y+c.y},EASEL.subdivider.subdivideCubicBezier(t.transformedPoint(i),t.transformedPoint(l),t.transformedPoint(c),t.transformedPoint(p),e))),s=u;var i,l,c,p;return o};return n.toPolyline=o,n.toPolylines=e=>e.map((e=>o(e))),n}},function(e,t){EASEL.polylineGenerator=function(){const e={},t=.001,n=function(e){return e.length>0&&e.push(e[0]),e},a=function(e,t){const n=t.maxX-t.minX,a=t.maxY-t.minY,r=0===n?0:e.width/n,o=0===a?0:e.height/a;return EASEL.matrix().translatedBy(-(t.minX+t.maxX)/2,-(t.minY+t.maxY)/2).scaledBy(r,o)},r=function(e){if(0===e.points.length)return[];const n=EASEL.pathUtils.pathBoundingBox(e.points),r=EASEL.matrix().premultipliedBy(a(e,n)).premultipliedBy(EASEL.shapeUtils.shapeMatrix(e));return EASEL.pathPolylineGenerator(t,r).toPolylines(e.points)};var o=function(e){const a=EASEL.matrix().premultipliedBy(EASEL.shapeUtils.shapeMatrix(e)),r=Math.min(e.cornerRadius.x,e.width/2),o=Math.min(e.cornerRadius.y,e.height/2),s=e.width/2-r,i=e.height/2-o,l=EASEL.matrix().scaledBy(r,o),c=l.translatedBy(s,i),p=l.translatedBy(-s,i),u=l.translatedBy(-s,-i),d=l.translatedBy(s,-i);let h=[];return h=h.concat(EASEL.linearizer.ellipseArc(t,c,0,.5*Math.PI)),h=h.concat(EASEL.linearizer.ellipseArc(t,p,.5*Math.PI,Math.PI)),h=h.concat(EASEL.linearizer.ellipseArc(t,u,Math.PI,1.5*Math.PI)),h=h.concat(EASEL.linearizer.ellipseArc(t,d,1.5*Math.PI,2*Math.PI)),[n(h.map((e=>a.transformedPoint(e))))]};return e.MAX_ERROR=t,e.process=function(e){let s=[];switch(e.type){case"path":s=r(e);break;case"polygon":s=function(e){if(0===e.points.length)return[];const t=EASEL.pathUtils.pointsBoundingBox(e.points),r=EASEL.matrix().premultipliedBy(a(e,t)).premultipliedBy(EASEL.shapeUtils.shapeMatrix(e));return[n(Array.from(e.points).map((e=>r.transformedPoint(e))))]}(e);break;case"polyline":s=function(e){if(0===e.points.length)return[];const t=EASEL.pathUtils.pointsBoundingBox(e.points),n=EASEL.matrix().premultipliedBy(a(e,t)).premultipliedBy(EASEL.shapeUtils.shapeMatrix(e));return[Array.from(e.points).map((e=>n.transformedPoint(e)))]}(e);break;case"ellipse":s=function(e){const n=EASEL.matrix().scaledBy(e.width/2,e.height/2).premultipliedBy(EASEL.shapeUtils.shapeMatrix(e));return[EASEL.linearizer.ellipse(t,n)]}(e);break;case"line":s=(e=>[[e.point1,e.point2]])(e);break;case"rectangle":s=function(e){if(null!=e.cornerRadius&&(0!==e.cornerRadius.x||0!==e.cornerRadius.y))return o(e);const t=EASEL.matrix().premultipliedBy(EASEL.shapeUtils.shapeMatrix(e)),a=[{x:-e.width/2,y:-e.height/2},{x:-e.width/2,y:e.height/2},{x:e.width/2,y:e.height/2},{x:e.width/2,y:-e.height/2}];return[n(Array.from(a).map((e=>t.transformedPoint(e))))]}(e);break;case"text":s=function(e){if(!isFinite(e.width)||!isFinite(e.height))return[];const t=null!=EASEL.textHelper?EASEL.textHelper.textShapeToPathShape(e):e.fontPath;return null==t?[]:r(t)}(e);break;case"drill":s=function(e){return[[{x:e.center.x,y:e.center.y}]]}(e)}return EASEL.paths.fromPointArrays(s)},e}()},function(e,t){EASEL.subdivider=function(){const e={},t={};var n=function(e,t,a){if(function(e){const t=e[0],n=e[e.length-1],a=EASEL.math.distToSegment(e[1],t,n).distance,r=EASEL.math.distToSegment(e[2],t,n).distance;return.75*Math.max(a,r)}(e)<a)return[e[e.length-1]];{const{l:r,r:o}=t(e);return n(r,t,a).concat(n(o,t,a))}};const a=function(e,t,n){let a;const r=1-e;return a={x:t.x*r+n.x*e,y:t.y*r+n.y*e},a};var r=function(e){let t;const[n,r,o,s]=e,i=a(.5,n,r),l=a(.5,r,o),c=a(.5,o,s),p=a(.5,i,l),u=a(.5,l,c),d=a(.5,p,u);return t={l:[n,i,p,d],r:[d,u,c,s]},t};return e.subdivideCubicBezier=function(e,a,o,s,i){let l;const c=[e,a,o,s];return null!=t[l=function(e,t){return`${e.map((e=>`${e.x}_${e.y}`)).join("-")}-${t}`}(c,i)]?t[l]:t[l]=n(c,r,i)},e}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){EASEL.component.readOnlyOverlay=createReactClass({render(){const{enabledControl:e}=this.props;return React.createElement("div",{className:"read-only-overlay "+(e?"read-only-overlay--driving":"read-only-overlay--viewing")},React.createElement("div",{className:"read-only-overlay__header "+(e?"read-only-overlay__header--driving":"read-only-overlay__header--viewing")},e?"You are sharing a live session":"You are viewing a live session"))}})},function(e,t,n){const a=n(34),r=function(){const e=function(e){e.width=2*e.radius,e.height=2*e.radius,e.setCoords()},t=function(e){e.left=e.x,e.top=e.y},n=e=>{const t=a.fabricJsonToVolume(e.toJSON(),{originY:0,pixelsPerInch:1,materialThickness:EASEL.materialStore.getCurrentDepth()});return EASEL.pathUtils.pathBoundingBox(t.shape.points)},o=function(e){l(e.path)&&(e.path=c(e));const t=n(e);e.width=t.maxX-t.minX,e.height=t.maxY-t.minY,e.left=t.minX,e.top=t.minY,e.pathOffset={x:t.minX,y:t.minY},e.setCoords()},s=function(e){const t=EASEL.pathUtils.pointsBoundingBox(e.points),n=e.getBoundingRect(),a=t.minX-n.left,r=t.minY-n.top;return e._calcDimensions(),e.top+=r,e.left+=a,!0},i=function(e){if(e.transformMatrix){const[t,n,a,r,o,s]=Array.from(e.transformMatrix),i=Math.atan2(n,t),l=Math.sqrt(t*t+n*n),c=Math.sqrt(a*a+r*r),p=Math.abs(t*r)>Math.abs(n*a)?t*r<0:n*a>0,u=l*e.left,d=c*(p?e.top+e.height:e.top),h=Math.sqrt(d*d+u*u),E=Math.atan2(d,u)+i*(p?-1:1);e.transformMatrix=null,e.flipY=p,e.left=h*Math.cos(E)+o,e.top=h*Math.sin(E)*(p?-1:1)+s,e.angle=180*i/Math.PI,e.scaleX=l,e.scaleY=c}},l=e=>e.filter((e=>e[0].match(/[aA]/))).length>0,c=e=>Raphael.path2curve(e.d),p=function(e){const t=r.boundingBox(e);return{boundingBox:t,inchWidth:t.maxX-t.minX,inchHeight:t.maxY-t.minY}};return{boundingBox:e=>({minX:Math.min.apply(Math,e.map((e=>e.getBoundingRect().left))),minY:Math.min.apply(Math,e.map((e=>e.getBoundingRect().top))),maxX:Math.max.apply(Math,e.map((e=>e.getBoundingRect().left+e.getBoundingRectWidth()))),maxY:Math.max.apply(Math,e.map((e=>e.getBoundingRect().top+e.getBoundingRectHeight())))}),translateObjects:(e,t,n)=>{e.forEach((function(e){e.top+=n,e.left+=t,e.setCoords()}))},scaleObjects:(e,t)=>{e.forEach((function(e){e.top*=t,e.left*=t,e.scaleX*=t,e.scaleY*=t,e.setCoords()}))},fixProperties:function(e){return e.strokeWidth=0,e.strokeLineCap="round",e.strokeLineJoin="round",e.strokeDashArray=null,e.perPixelTargetFind=!0,e},validateObject:e=>{if(e.visible&&0!==e.opacity){if("path"===e.type){const t=fabric.util.object.clone(e);l(t.path)&&(t.path=c(t));const a=n(t);return a.minX<=a.maxX&&a.minY<=a.maxY}if(["polygon","polyline"].includes(e.type)){if(!e.points||0===e.points.length)return!1}else if("text"===e.type)return!1;return!0}return!1},normalizeObject:function(n){switch(n.type){case"path":o(n);break;case"circle":e(n);break;case"rect":t(n);break;case"polygon":case"polyline":s(n);break;case"line":n.fill="none"}return i(n),n.opacity=1,n},scaleToMinimumSize:function(e){const{inchWidth:t,inchHeight:n}=p(e);return t<2&&n<2&&r.scaleObjects(e,2/Math.max(t,n)),e},moveToOffset:function(e,t){const n=r.boundingBox(e);r.translateObjects(e,-n.minX+t.x,-n.maxY-t.y)},getSizeProperties:p}}();e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(e){e.EASEL.PIXEL_RATIO="undefined"!==typeof window&&window.devicePixelRatio||1,n(137),n(138),n(656),n(194),n(658),n(669),n(1066),n(1067),n(1068),n(1081),n(1082),n(340),n(341),n(342),n(343),n(1083),n(1118),n(1139),n(1144),n(1178),n(1196),n(1207),n(1211),n(1220),n(1221),n(1222),n(1223),n(1224)}).call(this,n(12))},function(e,t,n){n(192),n(657),n(193)},function(e,t){EASEL.taskRunner=function(e){let t=0;const n={},a={},r={},o=new Worker(e);return o.onmessage=function(e){const{payload:t,type:o,jobId:s}=e.data;let i,l,c,p;switch(o){case"done":"function"===typeof n[s]&&n[s](t),delete n[s],delete r[s],delete a[s];break;case"progress-updated":({progress:i}=t),"function"===typeof r[s]&&r[s](i);break;case"canceled":if(l=new Error("canceled"),null==a[s])throw l;"function"===typeof a[s]&&a[s](l);break;case"error":if(({message:c,stack:p}=t),l=new Error(c),l.stack=p,null==a[s])throw l;"function"===typeof a[s]&&a[s](l);break;default:throw new Error("unknown message type: "+o)}},{postTask({type:e,update:s,params:i,maxRunTime:l}){const c=t++;r[c]=s;const p=new Promise((function(e,t){return n[c]=e,a[c]=t}));return o.postMessage({type:e,jobId:c,params:i,maxRunTime:l}),p}}}},function(e,t,n){n(659),n(660),n(661),n(321),n(322),n(662),n(663),n(664),n(665),n(666),n(667),n(668),n(323),n(328)},function(e,t){EASEL.appAPI=function(){let e=null,t=null,n=null,a=null,r=null,o=null;const s=function(t){switch(t.data.type){case"loaded":e.postMessage({type:"properties",message:l()});break;case"properties":a(t.data.message);break;case"executor":n(t.data.message);break;case"failed":r(t.data.message)}},i=e=>o(e.message);var l=()=>{const e=EASEL.store.getState();return{volumes:EASEL.volumeStore.getVolumes(),material:EASEL.materialStore.getActiveMaterial(),bitParams:EASEL.bitSelectors.bitParams(e),preferredUnit:EASEL.unitSelectors.getPreferredUnit(e),selectedVolumeIds:EASEL.editorStore.getSelectedVolumeIds()}};const c=function(n){t=n,e=new Worker(n),e.addEventListener("message",s),e.addEventListener("error",i)};return{properties:function(t){null!=e&&e.terminate(),c(t.url),a=t.done,r=t.fail,o=t.error},execute:function(a){let s;t!==a.url&&c(a.url),n=a.done,r=a.fail,o=a.error;const i={};for(let e of a.properties)i[e.id]=e.value;if("1.0.0"===a.apiVersion){if(s=[i],a.requiresSelectedVolume){const t=EASEL.editorStore.getSelectedVolumeIds(),n=EASEL.volumeStore.getVolumes(t),a={left:EASEL.volumeHelper.boundingBoxLeft(n),top:EASEL.volumeHelper.boundingBoxTop(n),right:EASEL.volumeHelper.boundingBoxRight(n),bottom:EASEL.volumeHelper.boundingBoxBottom(n)},r=n.map((e=>EASEL.polylineGenerator.process(e.shape).lighten().simplify().toPromise()));return void Promise.all(r).then((function(t){const n=[];for(let e of t)for(let t of e)n.push(t.points.map((e=>[e.x,e.y])));return a.pointArrays=n,s.push(a),e.postMessage({type:"executor",message:s})}))}}else s=l(),s.params=i;e.postMessage({type:"executor",message:s})}}}()},function(e,t){EASEL.cancelReasonAPI={submitCancelReason:(e,t,n)=>$.ajax({url:"/cancel_reason",method:"POST",data:{reason:e,description:t,plan_id:n}})}},function(e,t){EASEL.designElementsAPI={get:e=>$.ajax({url:"/design_elements.json"}).done(e.done).fail(e.fail),search:(e,t)=>Promise.resolve($.ajax({url:`/pro_designs?term=${e}&page=${t}`})),recentUploads:e=>Promise.resolve($.ajax({url:`/pro_designs?page=${e}`}))}},function(e,t){EASEL.machineRunTimeAPI={create:(e,t)=>$.ajax({url:"/machine_run_times",method:"post",data:{serial_number:e,seconds:t}})}},function(e,t,n){const a=n(35);EASEL.materialAPI=function(){const e=e=>new Promise(((t,n)=>$.ajax(e).then(t,n)));return{createMaterial:t=>e({url:"/toolbox/materials",method:"POST",data:{material:{name:t.name,category:t.category,display_name:t.displayName,width_x:t.widthX,length_y:t.lengthY,thickness_z:t.thicknessZ,image_url:t.imageUrl,store_id:t.storeId,store_url:t.storeUrl,source:t.source}}}),deleteMaterial:t=>e({url:`/toolbox/materials/${t.id}`,method:"DELETE"}),updateMaterial:t=>e({url:`/toolbox/materials/${t.id}`,method:"PUT",data:{material:{name:t.name,category:t.category,display_name:t.displayName,width_x:t.widthX,length_y:t.lengthY,thickness_z:t.thicknessZ,image_url:t.imageUrl,store_id:t.storeId,store_url:t.storeUrl,color:t.color,source:t.source}}}),loadInventablesMaterials:()=>e({url:"/inventables/materials",dataType:"json",cache:!1}).then((e=>e.map(a.toCamelCase)))}}()},function(e,t,n){const a=n(27);var r;EASEL.projectAPI=(r=function(e){return null==e.workpiece.version&&(e.workpiece.version=2),e},{clone:e=>$.ajax(`/clone?link_token=${e}`),create:e=>$.ajax({url:"/projects",method:"POST",async:!1,data:e}),get:e=>$.ajax(`/projects/${e}.json`),delete:e=>$.ajax({url:`/projects/${e}`,method:"POST",data:{_method:"delete"}}),update:(e,t)=>$.ajax({url:`/projects/${e}`,dataType:"json",method:"POST",data:EASEL.merge(t,{_method:"PUT"})}),createWorkpiece:function(e,t){return t=r(t),$.ajax({url:`/projects/${e}/workpieces`,method:"POST",async:!1,data:t})},updateWorkpiece:function(e,t,n,o){return o=r(o),$.ajax({url:`/projects/${e}/workpieces/${t}`,dataType:"json",method:"POST",data:EASEL.merge(o,{_method:"PUT",save_version:n}),success(e){if(e.error&&e.error===a.workpieceSaveVersionMismatchError)return EASEL.stats.trackEventOnServer(EASEL.events.workpieceSaveVersionMismatchError,{"Link Token":EASEL.projectMetadataStore.getLinkToken()})}})},deleteWorkpiece:(e,t)=>$.ajax({url:`/projects/${e}/workpieces/${t}`,dataType:"json",method:"POST",data:{_method:"DELETE"}})})},function(e,t){EASEL.projectsAPI={getProjects:(e,t,n)=>$.ajax({url:"/projects",data:{offset:e,query:t,starred:null!=n?n.starred:void 0,label_ids:null!=n?n.label_ids:void 0}})}},function(e,t){EASEL.labelsAPI={create:function(e){const t=$.ajax({url:"/labels.json",method:"POST",async:!1,data:e});return new Promise(((e,n)=>t.then(e,n)))},index:()=>{const e=$.ajax("/labels.json");return new Promise(((t,n)=>e.then(t,n)))},delete:(e,t)=>{const n=$.ajax({url:`/labels/${e}`,method:"POST",data:EASEL.merge(t,{_method:"DELETE"})});return new Promise(((e,t)=>n.then(e,t)))},update:(e,t)=>{const n=$.ajax({url:`/labels/${e}`,dataType:"json",method:"POST",data:EASEL.shallowMerge(t,{_method:"PUT"})});return new Promise(((e,t)=>n.then(e,t)))},assignLabels:e=>{const t=$.ajax({url:"/project_labels",method:"POST",data:e});return new Promise(((e,n)=>t.then(e,n)))},unassignLabels:e=>{const t=$.ajax({url:"/project_labels",method:"DELETE",data:e});return new Promise(((e,n)=>t.then(e,n)))}}},function(e,t){EASEL.troubleshootingAPI={get:e=>$.ajax({url:"/problem_symptoms.json"}).done(e.done).fail(e.fail),getFeedback:e=>$.ajax({url:"/troubleshooting_feedbacks.json"}).done(e.done).fail(e.fail),postFeedback:(e,t,n)=>$.ajax({url:"/troubleshooting_feedbacks",type:"POST",dataType:"json",data:{problemSymptomId:e,troubleshootingPathId:t,helpful:n}}),postProblemSymptomMetric:e=>$.ajax({url:"/troubleshooting",type:"POST",dataType:"json",data:{problemSymptomId:e}})}},function(e,t){EASEL.userAPI=function(){const e=function(e){const t=$.ajax({url:"/user",method:"put",data:{user:e}});return new Promise(((e,n)=>t.then(e,n)))},t=t=>e({defaults_json:JSON.stringify(t)}).then((()=>EASEL.store.dispatch(EASEL.userActionCreators.setDefaults(t))));return{updateBetaTester:t=>e({beta_tester:t}),updateKeyboardControlEnabled:t=>e({keyboard_control_enabled:t}),updateRepeatCarvingEnabled:t=>e({repeat_carving_enabled:t}),dismissProjectTemplates:()=>e({project_templates_dismissed:!0}),updateStartStopSafetyHeight:t=>e({start_stop_safety_height:t}),updateUserProfileData:t=>e({about:t.about,location:t.location,website:t.website,first_name:t.name,interests:t.interests}).then((e=>{EASEL.store.dispatch(EASEL.userActionCreators.setProfileData({name:e.first_name,website:e.website,about:e.about,interests:e.user_interests,location:e.location}))})),updateDefaults:t,resetDefaults:()=>t({}),logInUser:function(e){const t=$.ajax({method:"POST",url:"/authenticate/login",data:{user:e}});return new Promise(((e,n)=>t.then(e,n)))},createUser:function(e){const t=$.ajax({method:"POST",url:"/authenticate/new",data:{user:e}});return new Promise(((e,n)=>t.then(e,n)))},updateUserProfileImage:function(e){const t=$.ajax({method:"POST",url:"/users/profile_image_upload",data:{user:{profile_image:e}}}).then((e=>{EASEL.store.dispatch(EASEL.userActionCreators.setProfileData({profileImageUrl:e.url}))}));return new Promise(((e,n)=>t.then(e,n)))}}}()},function(e,t,n){n(670),n(671),n(672),n(673),n(674),n(675),n(676),n(677),n(678),n(679),n(329),n(680),n(681),n(682),n(683),n(684),n(685),n(686),n(330),n(331),n(687),n(688),n(689),n(690),n(691),n(692),n(693),n(694),n(695),n(696),n(697),n(698),n(699),n(700),n(701),n(702),n(703),n(704),n(705),n(706),n(707),n(708),n(710),n(711),n(712),n(713),n(714),n(715),n(716),n(717),n(718),n(519),n(333),n(719),n(720),n(721),n(722),n(723),n(724),n(725),n(726),n(727),n(728),n(729),n(730),n(731),n(732),n(733),n(734),n(735),n(736),n(737),n(738),n(739),n(740),n(519),n(741),n(742),n(743),n(744),n(745),n(746),n(747),n(748),n(749),n(750),n(751),n(752),n(753),n(754),n(755),n(756),n(757),n(758),n(760),n(761),n(762),n(763),n(764),n(765),n(766),n(767),n(768),n(769),n(770),n(771),n(772),n(773),n(774),n(775),n(776),n(777),n(778),n(779),n(780),n(781),n(782),n(783),n(784),n(785),n(786),n(787),n(788),n(789),n(790),n(791),n(792),n(793),n(794),n(795),n(796),n(797),n(798),n(799),n(800),n(801),n(802),n(803),n(804),n(805),n(806),n(807),n(808),n(809),n(810),n(811),n(812),n(813),n(814),n(815),n(816),n(817),n(818),n(819),n(820),n(821),n(822),n(823),n(824),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(839),n(840),n(841),n(842),n(843),n(844),n(845),n(846),n(847),n(848),n(849),n(850),n(851),n(852),n(853),n(854),n(855),n(856),n(857),n(858),n(859),n(860),n(861),n(862),n(863),n(864),n(865),n(866),n(867),n(868),n(869),n(870),n(871),n(872),n(873),n(874),n(875),n(876),n(334),n(877),n(878),n(879),n(880),n(881),n(882),n(883),n(884),n(885),n(886),n(887),n(888),n(889),n(890),n(891),n(892),n(893),n(894),n(895),n(335),n(336),n(896),n(897),n(898),n(899),n(900),n(901),n(902),n(903),n(904),n(905),n(906),n(907),n(908),n(909),n(910),n(911),n(912),n(913),n(914),n(915),n(916),n(917),n(918),n(919),n(920),n(921),n(922),n(923),n(924),n(925),n(926),n(927),n(928),n(929),n(930),n(931),n(932),n(933),n(934),n(935),n(936),n(937),n(938),n(939),n(940),n(941),n(942),n(943),n(944),n(945),n(946),n(947),n(948),n(949),n(950),n(951),n(952),n(953),n(954),n(955),n(956),n(957),n(958),n(959),n(960),n(961),n(962),n(963),n(964),n(965),n(966),n(967),n(968),n(969),n(970),n(971),n(972),n(973),n(974),n(975),n(976),n(977),n(978),n(979),n(980),n(981),n(982),n(983),n(984),n(985),n(986),n(987),n(988),n(989),n(990),n(991),n(992),n(993),n(995),n(996),n(997),n(998),n(999),n(1e3),n(1001),n(1002),n(1003),n(1004),n(1005),n(1006),n(1007),n(1008),n(1009),n(1010),n(1011),n(1012),n(1013),n(1014),n(1015),n(1016),n(1017),n(1018),n(1019),n(1020),n(1021),n(1022),n(1023),n(1024),n(1025),n(1026),n(1027),n(1028),n(1029),n(1030),n(1031),n(1032),n(1033),n(1034),n(1035),n(1036),n(1037),n(1038),n(1039),n(1040),n(1041),n(1042),n(1043),n(1044),n(338),n(1045),n(1046),n(1047),n(1048),n(1049),n(1050),n(1051),n(1052),n(1053),n(1054),n(1055),n(1056),n(1057),n(1058),n(1059),n(1060),n(1061),n(1062),n(1063),n(1064),n(1065)},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.a=createReactClass({onClick(e){return"#"===e.currentTarget.getAttribute("href")&&e.preventDefault(),"function"===typeof this.props.onClick?this.props.onClick(e):void 0},render(){const e=EASEL.shallowMerge(this.props,{href:null!=this.props.href?this.props.href:"#",onClick:this.onClick,children:null});return React.createElement("a",((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({},e),this.props.children)}}),EASEL.component.DOM.a=(...e)=>React.createElement(EASEL.component.a,...e)},function(e,t){EASEL.component.alertModal=createReactClass({getInitialState:()=>({show:!1}),componentDidMount(){EASEL.flux.events.addListener("show-alert",this.show),EASEL.flux.events.addListener("hide-alert",this.hide)},show({title:e,message:t,detail:n,buttons:a}){this.setState({show:!0,title:e,message:t,buttons:a,detail:n})},hide(){this.setState({show:!1})},onModalOpen(){this.state.show&&this.alertModal["autofocus-button"]&&this.alertModal.focus()},modalContent(){if(!this.state.show)return null;const e=this.state.buttons.map(((e,t)=>{const n=t===this.state.buttons.length-1;return React.createElement(ReactBootstrap.Button,{key:`alert-button-${t}`,bsSize:"large",bsStyle:n?"primary":"default",onClick:e.action,ref:n&&"autofocus-button"},e.text)}));return React.createElement("div",{ref:e=>this.alertModal=e},React.createElement("div",{className:"alert-header"},React.createElement("img",{src:EASEL.assets.images.warning}),React.createElement("h2",null,this.state.title)),React.createElement("h3",null,this.state.message),React.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.detail}}),React.createElement(ReactBootstrap.Modal.Footer,{className:"buttons"},e))},render(){return React.createElement(ReactBootstrap.Modal,{className:"alert-modal",show:this.state.show,onHide:this.hide,onEnter:this.onModalOpen},this.modalContent())}})},function(e,t){EASEL.component.bitAndMaterialRecommendationsLink=createReactClass({trackRecommendationsClick(){EASEL.stats.trackEvent("Bit and Material Recommendations Click")},render(){return React.createElement("div",{className:"dropdown-external-link"},"Need Help? ",React.createElement("a",{href:"https://inventables.com/assets/shared/bit_materialchart.jpg",target:"_blank",rel:"noreferrer",onClick:this.trackRecommendationsClick},"Bit and Material Recommendations"))}})},function(e,t){EASEL.component.utils.bitWidthInput=createReactClass({propTypes:{width:PropTypes.number.isRequired,unit:PropTypes.string.isRequired,onChange:PropTypes.func.isRequired,showButtons:PropTypes.bool,className:PropTypes.string,showUnit:PropTypes.bool},getDefaultProps:()=>({showButtons:!0}),mixins:[React.addons.PureRenderMixin],setUnit(e){this.props.onChange(this.props.width,e)},render(){const e="aligned-input btn",t=e+("in"===this.props.unit?" btn-primary":" btn-default"),n=e+("in"!==this.props.unit?" btn-primary":" btn-default"),a="in"!==this.props.unit?2:null,r=this.props.showButtons?[React.createElement("button",{"data-title":"in",key:"inButton",className:t,onClick:this.setUnit.bind(this,"in")},"in"),React.createElement("button",{"data-title":"mm",key:"mmButton",className:n,onClick:this.setUnit.bind(this,"mm")},"mm")]:void 0;return React.createElement("div",{className:"form-inline"},React.createElement(EASEL.component.utils.dimensionalInput,{className:this.props.className||"aligned-input",id:this.props.id,value:this.props.width,unit:this.props.unit,showUnit:this.props.showUnit,precision:a,onChange:this.props.onChange}),r)}})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.utils.clickPopover=createReactClass({mixins:[React.addons.PureRenderMixin],getInitialState(){return{showPopover:this.props.showOnMount,rootClose:!1}},onMouseEnterPopover(){this.state.showPopover||this.setState({showPopover:!0,rootClose:!0})},closePopover(){"function"===typeof this.props.onDismiss&&this.props.onDismiss(),this.setState({showPopover:!1})},getWarningContainer(){return this.warningContainer},render(){const{popoverClass:e,popoverTitle:t,popoverContent:n,children:i,placement:l,className:c}=this.props,p={id:this.props.id,title:React.createElement("span",null,t,React.createElement("button",{className:"close",onClick:this.closePopover},"\xd7")),className:e,onMouseEnter:this._onMouseEnterPopover,onMouseLeave:this._onMouseLeavePopover},u=React.createElement(ReactBootstrap.Popover,((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({},p),n);return React.createElement("span",null,React.createElement("span",{className:c,onMouseEnter:this.onMouseEnterPopover,ref:e=>this.warningContainer=e},i,React.createElement(ReactBootstrap.Overlay,{show:this.state.showPopover,onHide:this.closePopover,rootClose:this.state.rootClose,placement:l||"top",target:this.getWarningContainer},u)))}})},function(e,t){EASEL.component.utils.collapsiblePanel=createReactClass({getInitialState:()=>({}),propTypes:{header:PropTypes.node.isRequired,initiallyExpanded:PropTypes.bool,reset:PropTypes.bool},getDefaultProps:()=>({initiallyExpanded:!0}),componentWillReceiveProps(e){e.reset&&this.setState({expanded:null})},mixins:[React.addons.PureRenderMixin],expanded(){return null!=this.state.expanded?this.state.expanded:this.props.initiallyExpanded},toggleExpanded(){this.setState({expanded:!this.expanded()})},render(){const e=this.expanded()?"minus":"plus",t=React.createElement("div",{onClick:this.toggleExpanded},React.createElement("div",{className:"collapsible-panel__header",onClick:this.toggleExpanded},this.props.header,React.createElement("div",null,React.createElement("i",{className:`fa fa-${e}`},""))));return React.createElement(ReactBootstrap.Panel,{header:t,collapsible:!0,expanded:this.expanded()},this.props.children)}})},function(e,t){EASEL.component.utils.colorPicker=function({onSetColor:e}){return React.createElement("div",{className:"color-picker"},[[[34,34,34],[85,85,85],[119,119,119],[153,153,153],[187,187,187],[204,204,204],[221,221,221],[238,238,238],[255,255,255]],[[255,191,191],[255,228,191],[255,250,191],[191,255,191],[191,255,255],[191,228,255],[191,191,255],[223,191,255],[255,191,255]],[[249,134,134],[249,201,134],[249,239,134],[134,249,134],[134,249,249],[134,201,249],[134,134,249],[191,134,249],[249,134,249]],[[230,25,25],[230,145,25],[230,213,25],[25,230,25],[25,229,230],[25,145,230],[25,25,230],[127,25,230],[230,25,229]],[[162,8,8],[162,98,8],[162,149,8],[8,162,8],[8,161,162],[8,98,162],[8,8,162],[85,8,162],[162,8,161]],[[85,0,0],[85,50,0],[85,78,0],[0,85,0],[0,85,85],[0,50,85],[0,0,85],[42,0,85],[85,0,85]]].map(((t,n)=>React.createElement("div",{className:"color-picker__row",key:`row[${n}]`},(()=>{const n=[];for(var a=0;a<t.length;a++){const[r,o,s]=t[a];n.push(((t,n,r)=>React.createElement(EASEL.component.a,{className:"color-picker__color",key:`color[${a}]`,style:{background:`rgb(${t}, ${n}, ${r})`},onClick:function(){return"function"===typeof e?e(t,n,r):void 0}}))(r,o,s))}return n})()))))}},function(e,t){EASEL.component.copyLink=createReactClass({propTypes:{link:PropTypes.string.isRequired,className:PropTypes.string,onClick:PropTypes.func,renderLink:PropTypes.bool},getInitialState:()=>({showCopied:!1}),copyLink(){this.props.renderLink&&this.link.select(),window.navigator.clipboard.writeText(this.props.link).then((()=>{this.setState({showCopied:!0}),this.props.onClick,setTimeout((()=>{this.setState({showCopied:!1})}),1500)}))},render(){return React.createElement(ReactBootstrap.OverlayTrigger,{placement:"bottom",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"copy-link-tooltip"},this.state.showCopied?"Completed":"Copy Link")},React.createElement(EASEL.component.a,{className:this.props.className,onClick:this.copyLink},this.props.renderLink?React.createElement("input",{className:"project-sharing-modal__link",ref:e=>this.link=e,value:window.location.href,onClick:this.highlightLink,readOnly:!0}):React.createElement("i",{className:this.state.showCopied?"fa fa-check":"fa fa-files-o","aria-hidden":"false"})))}})},function(e,t){EASEL.component.crossOriginImg=createReactClass({propTypes:{src:PropTypes.string.isRequired},createRawHTML(){return`<img crossorigin="anonymous"\n  src="${EASEL.crossOriginResources.getUrlToRequestWithOriginHeader(this.props.src)}"\n  ${null!=this.props.alt?`alt='${EASEL.string.escapeAttribute(this.props.alt)}'`:""}\n  ${null!=this.props.id?`id='${this.props.id}'`:""}\n  ${this.props.className?`class='${this.props.className}'`:""}\n  />`},render(){return React.createElement("span",{className:"cross-element-img",dangerouslySetInnerHTML:{__html:this.createRawHTML()}})}})},function(e,t){EASEL.component.utils.customBitInput=createReactClass({propTypes:{bit:EASEL.propTypes.bit.isRequired,changeOtherVBitSize:PropTypes.func.isRequired,changeOtherBitSize:PropTypes.func.isRequired,toggleDropdown:PropTypes.func},changeOtherVBitAngle(e){e=parseInt(e);const{width:t,unit:n,tipAngle:a}=this.props.bit;return 0<e&&e<180?e!==a?this.props.changeOtherVBitSize(t,n,e):void 0:(this.forceUpdate(),EASEL.alert("V-Bit angle must be greater than 0 and less than 180 degrees.","",[{text:"OK",action:this.props.toggleDropdown}]))},changeOtherVBitSize(e,t){this.props.changeOtherVBitSize(e,t,this.props.bit.tipAngle)},changeOtherBitSize(e,t){this.props.changeOtherBitSize(e,t)},render(){const{type:e,width:t,tipAngle:n,unit:a}=this.props.bit;return"V"===e?React.createElement("div",{className:"bit-table__bit__flex"},React.createElement("div",{className:"bit-table__other-bit-input"},React.createElement("label",{htmlFor:"other-v-bit-angle-input",className:"bit-table__other-bit-label"},"Angle"),React.createElement(EASEL.component.textInput,{className:"form-control bit-table__custom-input",id:"other-v-bit-angle-input",initialValue:n,submit:this.changeOtherVBitAngle})),React.createElement("div",{className:"bit-table__other-bit-input"},React.createElement("label",{htmlFor:"other-bit-input",className:"bit-table__other-bit-label"},"Width"),React.createElement(EASEL.component.utils.bitWidthInput,{className:"form-control bit-table__custom-input",id:"other-bit-input",width:t,unit:a,showButtons:!0,onChange:this.changeOtherVBitSize}))):React.createElement("div",{className:"bit-table__bit__flex"},React.createElement("div",{className:"bit-table__other-bit-input"},React.createElement("label",{htmlFor:"other-bit-input",className:"bit-table__other-bit-label"},"Width"),React.createElement(EASEL.component.utils.bitWidthInput,{className:"form-control bit-table__custom-input",id:"other-bit-input",width:t,unit:a,showButtons:!0,onChange:this.changeOtherBitSize})))}})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.utils.hoverPopover=createReactClass({propTypes:{popoverTitle:PropTypes.string,popoverContent:PropTypes.node.isRequired},mixins:[React.addons.PureRenderMixin],_onMouseEnterPopover(){this.setState({inPopover:!0}),this.popoverTrigger.show()},_onMouseLeavePopover(){this.setState({inPopover:!1}),this.state.inLabel||this.popoverTrigger.hide()},_enterProLabel(){this.setState({inLabel:!0}),this.popoverTrigger.show()},_exitProLabel(){this.setState({inLabel:!1}),this.state.inPopover||this.popoverTrigger.hide()},render(){const{popoverClass:e,popoverTitle:t,popoverContent:n,children:i,placement:l,className:c}=this.props,p=EASEL.shallowMerge(this.props,{title:t,className:e,onMouseEnter:this._onMouseEnterPopover,onMouseLeave:this._onMouseLeavePopover});delete p.popoverTitle,delete p.popoverContent,delete p.children,delete p.placement;const u=React.createElement(ReactBootstrap.Popover,((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({},p),n);return React.createElement(ReactBootstrap.OverlayTrigger,{ref:e=>this.popoverTrigger=e,placement:l||"top",overlay:u},React.createElement("div",{className:c},React.Children.map(i,(e=>React.cloneElement(e,{onMouseEnter:this._enterProLabel,onMouseLeave:this._exitProLabel})))))}})},function(e,t){EASEL.component.iconLink=createReactClass({propTypes:{link:PropTypes.string,tooltipText:PropTypes.string.isRequired,id:PropTypes.string.isRequired,icon:PropTypes.string.isRequired,className:PropTypes.string,onClickIcon:PropTypes.func},getInitialState:()=>({showCopied:!1}),render(){return React.createElement(ReactBootstrap.OverlayTrigger,{placement:"bottom",overlay:React.createElement(ReactBootstrap.Tooltip,{id:this.props.id},this.props.tooltipText),delayShow:EASEL.constants.TOOLBAR_TOOLTIP_DELAY},React.createElement(EASEL.component.a,{id:this.props.id,className:this.props.className,href:this.props.link,target:"_blank",rel:"noreferrer",onClick:this.props.onClickIcon},React.createElement("i",{className:`fa fa-${this.props.icon}`,"aria-hidden":"false"})))}})},function(e,t){EASEL.component.utils.imagePopoverHelper=createReactClass({propTypes:{header:PropTypes.string.isRequired,image:PropTypes.string.isRequired,width:PropTypes.number.isRequired,height:PropTypes.number.isRequired},popover({header:e,image:t,width:n,height:a}){const r=`popover-${e.toLowerCase().split(" ").join("-")}`;return React.createElement(ReactBootstrap.Popover,{id:r,title:e},React.createElement("img",{src:t,width:n,height:a}))},defaultTrigger:()=>React.createElement(EASEL.component.a,{style:{marginLeft:"8px"}},React.createElement("i",{className:"fa fa-question-circle-o"})),render(){const e=this.props.children||this.defaultTrigger(),t=this.popover(this.props);return React.createElement(ReactBootstrap.OverlayTrigger,{trigger:["hover","focus"],placement:"right",overlay:t},e)}})},function(e,t){EASEL.component.lengthInput=createReactClass({propTypes:{initialValue:PropTypes.number.isRequired,unit:PropTypes.string.isRequired,onSubmit:PropTypes.func.isRequired,readonly:PropTypes.bool},format:function(e,t){let n;switch(t){case"in":n=3;break;case"mm":n=1}return`${(e*EASEL.units.unitsPerInch(t)).toFixed(n)} ${t}`},render(){const e=this.format(this.props.initialValue,this.props.unit);return React.createElement(EASEL.component.textInput,{id:this.props.id,initialValue:e,submit:this.props.onSubmit,readonly:this.props.readonly})}})},function(e,t){EASEL.component.utils.materialDimensionInput=createReactClass({propTypes:{name:PropTypes.string.isRequired,value:PropTypes.number.isRequired,displayUnit:PropTypes.string.isRequired,id:PropTypes.string,label:PropTypes.string,className:PropTypes.string},setDimension(e,t,n){e>=0?this.props.onDimensionChange(this.props.name,n,e,t):this.forceUpdate()},render(){const e=this.props.label||`${this.props.name.toUpperCase()}:`;return React.createElement("div",{className:"material-dimension-input"},React.createElement("label",{htmlFor:this.props.id},e),React.createElement(EASEL.component.utils.dimensionalInput,{value:this.props.value,unit:"in",id:this.props.id,displayUnit:this.props.displayUnit,showUnit:!0,precision:EASEL.units.defaultPrecision[this.props.displayUnit],className:this.props.className,onChange:this.setDimension}))}})},function(e,t){EASEL.component.proLabel=createReactClass({render(){const{type:e,showWarning:t}=this.props,n="easel-pro-label "+(e?`label-${e}`:"");return React.createElement("span",{className:n},t&&React.createElement("i",{className:"fa fa-exclamation-circle"}),"Pro")}})},function(e,t){EASEL.component.spinner=createReactClass({render(){const e=this.props.size,t=null!=e?e:15,{color:n,className:a}=this.props,r=["spinner"];return"white"===n&&r.push("spinner--white"),null!=a&&r.push(a),React.createElement("svg",{className:r.join(" "),height:t,width:t,viewBox:"-7.5 -7.5 15 15"},React.createElement("circle",{cx:4,cy:-4,r:1.5}),React.createElement("circle",{cx:6,cy:0,r:1.5}),React.createElement("circle",{cx:4,cy:4,r:1.5}),React.createElement("circle",{cx:0,cy:6,r:1.5}),React.createElement("circle",{cx:-4,cy:4,r:1.5}),React.createElement("circle",{cx:-6,cy:0,r:1.5}),React.createElement("circle",{cx:-4,cy:-4,r:1.5}),React.createElement("circle",{cx:0,cy:-6,r:1.5}))}})},function(e,t){var n=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.utils.withToolpathAnimationControls=function(e){return createReactClass({getInitialState(){return{animating:!1,totalFrames:null,framesPerSecondMultiplier:1,framesPerSecond:30,segmentsPerFrame:1,currentFrame:this.props.startFrame}},nextToolpathAnimationFrame(){this.setState((e=>{const t=Math.min(e.currentFrame+e.segmentsPerFrame,e.totalFrames),n={currentFrame:t};return t===e.totalFrames&&(n.animating=!1),n}))},stepAnimation(){this.nextToolpathAnimationFrame();const e=this.state.framesPerSecond*this.state.framesPerSecondMultiplier;setTimeout((()=>{if(this.state.animating)return this.stepAnimation()}),1e3/e)},resetAndStartAnimation(){this.setState({currentFrame:0}),this.startAnimation()},startAnimation(){this.setState({animating:!0}),this.stepAnimation()},stopAnimation(){this.setState({animating:!1})},setSpeedMultiplier(e){let t,n;e<=1?(t=e,n=1):(t=1,n=e),this.setState({framesPerSecondMultiplier:t,segmentsPerFrame:n})},setCurrentFrame(e){this.setState({currentFrame:e})},setFrameCount(e){const t={totalFrames:e};null!=this.state.currentFrame&&this.state.currentFrame!=this.state.totalFrames||(t.currentFrame=e),this.setState(t)},componentWillUnmount(){this.stopAnimation()},render(){return React.createElement(e,(t=((e,t)=>{for(var n in t||(t={}))s.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))i.call(t,n)&&l(e,n,t[n]);return e})({},this.props),n={currentFrame:this.state.currentFrame,setFrameCount:this.setFrameCount,toolpathAnimationControls:React.createElement(EASEL.component.toolpathAnimationControls,{currentFrame:this.state.currentFrame,gcodePasses:this.props.gcodePasses||[{gcode:this.props.gcode}],resetAndStartAnimation:this.resetAndStartAnimation,running:this.state.animating,setFrame:this.setCurrentFrame,setSpeedMultiplier:this.setSpeedMultiplier,showTimeEstimates:this.props.showTimeEstimates,speedMultiplier:this.state.framesPerSecondMultiplier*this.state.segmentsPerFrame,startAnimation:this.startAnimation,stopAnimation:this.stopAnimation,toolpathsVisible:null==this.props.toolpathsVisible||this.props.toolpathsVisible,totalFrames:this.state.totalFrames})},a(t,r(n))));var t,n}})}},function(e,t){var n=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))i.call(t,n)&&l(e,n,t[n]);return e},p=(e,t)=>a(e,r(t));EASEL.component.externalMeshController=EASEL.component.utils.withToolpathAnimationControls(EASEL.redux.connect({mapStateToProps:e=>({jsonMesh:EASEL.threeDPrototypeSelectors.getMesh(e),workArea:EASEL.machineSettingsSelectors.getWorkArea(e),gcodePasses:EASEL.internalGcodeSelectors.getGcodePasses(e),material:EASEL.threeDPrototypeSelectors.getMaterial(e),roughing:EASEL.threeDPrototypeSelectors.getRoughing(e),finishing:EASEL.threeDPrototypeSelectors.getFinishing(e),transform:EASEL.threeDPrototypeSelectors.getTransform(e)}),mapDispatchToProps:e=>({clearGcodePasses:()=>e(EASEL.internalGcodeActionCreators.clearGcodePasses()),setMaterial:t=>e(EASEL.threeDPrototypeActionCreators.setMaterial(t)),setTransform:t=>e(EASEL.threeDPrototypeActionCreators.setTransform(t)),setRoughing:t=>e(EASEL.threeDPrototypeActionCreators.setRoughing(t)),setFinishing:t=>e(EASEL.threeDPrototypeActionCreators.setFinishing(t))}),component:createReactClass({SIDE_PANEL_WIDTH:300,props:{panelWidth:PropTypes.number.isRequired,panelHeight:PropTypes.number.isRequired,jsonMesh:PropTypes.object.isRequired},componentDidMount(){EASEL.flux.events.addListener("generate-3d-toolpaths",this.generateToolpaths)},componentWillUnmount(){EASEL.flux.events.removeListener("generate-3d-toolpaths",this.generateToolpaths)},getInitialState(){return this.getState(this.props.jsonMesh)},getState:e=>({mesh:EASEL.mesh(e)}),componentWillReceiveProps(e){EASEL.isEqual(e.jsonMesh,this.props.jsonMesh)||(null!==this.state.mesh&&this.state.mesh.dispose(),this.setState(this.getState(e.jsonMesh)))},generateToolpaths(e,t){const n=this.transformMatrix(),{material:a,roughing:r,finishing:o}=this.props,s={material:a,roughing:r,finishing:o,matrix:n};EASEL.gcodeForMeshes.process({style:e,cutParams:s,done:(e,n)=>{(null!=e.error||null!=n&&n.error)&&console.log("error generating toolpaths: ",e.error||n.error),null!=t&&t(e,n)}})},setOrientation(e){this.props.setTransform(EASEL.merge(this.props.transform,{orientation:e}))},setTranslation(e,t){this.props.setTransform(EASEL.setIn(this.props.transform,["translation",e.toLowerCase()],t))},setScale(e,t){this.props.setTransform(EASEL.setIn(this.props.transform,["scale",e.toLowerCase()],t))},setRotation(e,t){this.props.setTransform(EASEL.setIn(this.props.transform,["rotation",e.toLowerCase()],t))},setMaterial(e,t){this.props.setMaterial(p(c({},this.props.material),{[e.toLowerCase()]:t}))},setRoughingBit(e,t){this.props.setRoughing(p(c({},this.props.roughing),{[e]:t}))},setFinishingBit(e,t){this.props.setFinishing(p(c({},this.props.finishing),{[e]:t}))},render(){const{mesh:e}=this.state,{gcodePasses:t,material:n}=this.props;if(null==e)return null;const a=null!=t?t[0]:null;return React.createElement("div",{className:"external-mesh-container"},React.createElement(EASEL.component.externalMeshPreview,{mesh:e,material:n,transform:this.transformMatrix(),gcode:null!=a?a.gcode:null,panelWidth:this.props.panelWidth-this.SIDE_PANEL_WIDTH,panelHeight:this.props.panelHeight,workArea:this.props.workArea,currentFrame:this.props.currentFrame,setFrameCount:this.props.setFrameCount,startFrame:this.props.startFrame}),React.createElement("div",{className:"external-mesh-properties",style:{width:this.SIDE_PANEL_WIDTH}},React.createElement(ReactBootstrap.Accordion,{defaultActiveKey:"transform"},React.createElement(ReactBootstrap.Panel,{header:"Transform",eventKey:"transform"},React.createElement(EASEL.component.threeDimensionalTransformControls,{setOrientation:this.setOrientation,setTranslation:this.setTranslation,setScale:this.setScale,setRotation:this.setRotation,orientation:this.props.transform.orientation,translation:this.props.transform.translation,scale:this.props.transform.scale,rotation:this.props.transform.rotation})),React.createElement(ReactBootstrap.Panel,{header:"Material",eventKey:"material","data-type":"material"},React.createElement(EASEL.component.threeDimensionalMaterialControls,{setMaterial:this.setMaterial,material:n})),React.createElement(ReactBootstrap.Panel,{header:"Roughing",eventKey:"roughing","data-type":"roughing"},React.createElement(EASEL.component.threeDimensionalRoughingControls,{setRoughingBit:this.setRoughingBit,roughing:this.props.roughing}),this.gcodeButton((()=>this.generateToolpaths("roughing")))),React.createElement(ReactBootstrap.Panel,{header:"Finishing",eventKey:"finishing","data-type":"finishing"},React.createElement(EASEL.component.threeDimensionalFinishingControls,{setFinishingBit:this.setFinishingBit,finishing:this.props.finishing}),this.gcodeButton((()=>this.generateToolpaths("detail")))))),null!=a&&React.createElement("div",{className:"gcode-sender-controls"},this.props.toolpathAnimationControls,React.createElement("div",null,React.createElement("i",{className:"fa fa-lg fa-clock-o"}),React.createElement("span",{className:"gcode-sender__time-estimate"},EASEL.utility.timeFormatter.durationFromMinutes(a.timeEstimate)))))},gcodeButton:e=>React.createElement(React.Fragment,null,React.createElement("hr",null),React.createElement(EASEL.component.a,{onClick:e,className:"btn btn-default"},"Generate Toolpaths")),transformMatrix(){const{translation:e,scale:t,rotation:n,orientation:a}=this.props.transform,r=new THREE.Matrix4;switch(a){case"Bottom":r.makeRotationX(Math.PI);break;case"Left":r.makeRotationY(Math.PI/2);break;case"Right":r.makeRotationY(-Math.PI/2);break;case"Front":r.makeRotationX(-Math.PI/2);break;case"Back":r.makeRotationX(Math.PI/2)}return r.premultiply((new THREE.Matrix4).makeScale(t.x,t.y,t.z)),r.premultiply((new THREE.Matrix4).makeRotationZ(n.z*Math.PI/180)),r.premultiply((new THREE.Matrix4).makeTranslation(e.x,e.y,e.z)),r}})}))},function(e,t){EASEL.component.threeDimensionalControlsInput=createReactClass({props:{initialValue:PropTypes.number.isRequired,property:PropTypes.string.isRequired,callback:PropTypes.func.isRequired,modifier:PropTypes.number,unit:PropTypes.oneOf(["in","in/min","%","\xb0"])},render(){const{initialValue:e,property:t,callback:n,modifier:a=1,unit:r="in"}=this.props,o=`${e*a} ${r}`;return React.createElement(React.Fragment,null,React.createElement("label",{htmlFor:`threedee-input-field-${t.toLowerCase()}`},`${t} `),React.createElement(EASEL.component.textInput,{id:`threedee-input-field-${t.toLowerCase()}`,initialValue:o,submit:e=>n(parseFloat(e)/a)}))}})},function(e,t){EASEL.component.threeDimensionalFinishingControls=createReactClass({render(){const{finishing:e,setFinishingBit:t}=this.props;return React.createElement(React.Fragment,null,React.createElement("div",{className:"external-mesh-properties-group external-mesh-properties-group--col2"},React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.bitWidth,property:"Ballnose",callback:e=>t("bitWidth",e)}),React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.stepOver,property:"Step Over",callback:e=>t("stepOver",e),unit:"%",modifier:100})),React.createElement("div",{className:"external-mesh-properties-group external-mesh-properties-group--col2"},React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.feed,property:"Feed",callback:e=>t("feed",e),unit:"in/min"}),React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.plunge,property:"Plunge",callback:e=>t("plunge",e),unit:"in/min"})))}})},function(e,t){EASEL.component.threeDimensionalMaterialControls=createReactClass({render(){const{material:e,setMaterial:t}=this.props;return React.createElement(React.Fragment,null,React.createElement("div",{className:"external-mesh-properties-group external-mesh-properties-group--col3"},React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.x,property:"X",callback:e=>t("X",e)}),React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.y,property:"Y",callback:e=>t("Y",e)}),React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.z,property:"Z",callback:e=>t("Z",e)})),React.createElement("div",{className:"external-mesh-properties-group external-mesh-properties-group--col2"},React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.safez,property:"SafeZ",callback:e=>t("SafeZ",e)})))}})},function(e,t){EASEL.component.threeDimensionalRoughingControls=createReactClass({render(){const{roughing:e,setRoughingBit:t}=this.props;return React.createElement(React.Fragment,null,React.createElement("div",{className:"external-mesh-properties-group external-mesh-properties-group--col2"},React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.bitWidth,property:"Endmill",callback:e=>t("bitWidth",e)}),React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.stepOver,property:"Step Over",callback:e=>t("stepOver",e),unit:"%",modifier:100})),React.createElement("div",{className:"external-mesh-properties-group external-mesh-properties-group--col2"},React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.feed,property:"Feed",callback:e=>t("feed",e),unit:"in/min"}),React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.plunge,property:"Plunge",callback:e=>t("plunge",e),unit:"in/min"})),React.createElement("div",{className:"external-mesh-properties-group external-mesh-properties-group--col2"},React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.dpp,property:"DPP",callback:e=>t("dpp",e)})))}})},function(e,t){EASEL.component.threeDimensionalTransformControls=createReactClass({render(){const{translation:e,scale:t,rotation:n,setOrientation:a,setTranslation:r,setScale:o,setRotation:s}=this.props;return React.createElement(React.Fragment,null,React.createElement("h4",null,"Orientation:"),React.createElement("div",{className:"external-mesh-properties-group"},React.createElement("select",{className:"form-control",onChange:e=>a(e.target.value),value:this.props.orientation},["Top","Bottom","Left","Right","Front","Back"].map((e=>React.createElement("option",{key:`orientation-${e}`,value:e},e))))),React.createElement("h4",null,"Translate:"),React.createElement("div",{className:"external-mesh-properties-group external-mesh-properties-group--col3","data-type":"translation"},React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.x,property:"X",callback:e=>r("X",e)}),React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.y,property:"Y",callback:e=>r("Y",e)}),React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:e.z,property:"Z",callback:e=>r("Z",e)})),React.createElement("h4",null,"Scale:"),React.createElement("div",{className:"external-mesh-properties-group external-mesh-properties-group--col3","data-type":"scale"},React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:t.x,property:"X",callback:e=>o("X",e),unit:"%",modifier:100}),React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:t.y,property:"Y",callback:e=>o("Y",e),unit:"%",modifier:100}),React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:t.z,property:"Z",callback:e=>o("Z",e),unit:"%",modifier:100})),React.createElement("h4",null,"Rotate:"),React.createElement("div",{className:"external-mesh-properties-group external-mesh-properties-group--col2","data-type":"rotation"},React.createElement(EASEL.component.threeDimensionalControlsInput,{initialValue:n.z,property:"Z",callback:e=>s("Z",e),unit:"\xb0"})))}})},function(e,t){EASEL.component.actionModal=createReactClass({getInitialState:()=>({show:!1}),componentDidMount(){EASEL.flux.events.addListener("show-action",this.show),EASEL.flux.events.addListener("hide-action",this.hide)},show({title:e,message:t,buttons:n}){this.setState({show:!0,title:e,message:t,buttons:n})},hide(){this.setState({show:!1})},modalContent(){if(!this.state.show)return null;const e=this.state.buttons.map(((e,t)=>React.createElement(ReactBootstrap.Button,{key:`alert-button-${t}`,bsSize:"large",bsStyle:"primary",onClick:e.action},e.text)));return React.createElement("div",null,React.createElement("div",{className:"alert-header"},React.createElement("h2",null,this.state.title)),React.createElement("h3",null,this.state.message),React.createElement(ReactBootstrap.Modal.Footer,{className:"buttons"},e))},render(){return React.createElement(ReactBootstrap.Modal,{className:"alert-modal",show:this.state.show,onHide:this.hide},this.modalContent())}})},function(e,t){EASEL.component.betaFeatureToggle=createReactClass({propTypes:{checked:PropTypes.bool.isRequired,onChange:PropTypes.func.isRequired,overlayComponent:PropTypes.object,featureName:PropTypes.string.isRequired},getInitialState:()=>({isMousedOver:!1}),onEnter(){this.refs.overlayTrigger.show(),this.setState({isMousedOver:!0})},onExit(){this.setState({isMousedOver:!1}),this.refs.overlayTrigger.hide()},onExiting(){this.state.isMousedOver&&this.refs.overlayTrigger.show()},render(){const{checked:e,onChange:t,overlayComponent:n,featureName:a}=this.props,r=React.createElement(ReactBootstrap.Popover,{id:a,onMouseEnter:this.onEnter,onMouseLeave:this.onExit},n);return React.createElement("div",{className:"settings-panel__item"},React.createElement("label",null,a,null!=n&&React.createElement(ReactBootstrap.OverlayTrigger,{rootClose:!0,trigger:["hover"],overlay:r,ref:"overlayTrigger",delayHide:1e3,onExiting:this.onExiting},React.createElement("i",{className:"fa fa-question-circle"}))),React.createElement("div",{className:"settings-panel__toggler"},React.createElement("input",{type:"checkbox",onChange:t,checked:e})))}})},function(e,t){EASEL.component.browserWarning=createReactClass({render(){return React.createElement(ReactBootstrap.Modal,{show:!0,onHide:this.props.dismissBrowserWarning,bsSize:"large"},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0}),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("div",{className:"browser-deprecation"},React.createElement("div",null,React.createElement("img",{src:EASEL.assets.images.unsupportedBrowser}),React.createElement("h2",null,"Please use Firefox or Chrome with Easel"),React.createElement("span",null,"Firefox and Chrome are well-tested to work with Easel, specifically on Windows, MacOS or Linux. Internet Explorer is not supported to work with Easel."),React.createElement(EASEL.component.a,{href:"https://inventables.zendesk.com/hc/en-us/articles/360012725734-System-Requirements",target:"_blank",rel:"noreferrer"},"Read more"),React.createElement("span",null,"for detailed system requirements.")),React.createElement("div",{className:"browser-deprecation__downloads"},React.createElement(EASEL.component.a,{href:"https://www.mozilla.org/en-US/exp/firefox/new/nav/",target:"_blank",rel:"noreferrer"},React.createElement("i",{className:"fa fa-arrow-down"}),"Get Firefox"),React.createElement(EASEL.component.a,{href:"https://www.google.com/chrome/",target:"_blank",rel:"noreferrer"},React.createElement("i",{className:"fa fa-arrow-down"}),"Get Chrome")))))}})},function(e,t){EASEL.component.carvesContainer=createReactClass({getInitialState:()=>({count:0,carves:[],requesting:!0}),componentDidMount(){return $.ajax({url:"/carves.json"}).done((e=>{for(let t of e)t.job_settings=JSON.parse(t.job_settings),t.bit_params=JSON.parse(t.bit_params),t.material_dimensions=JSON.parse(t.material_dimensions);this.setState({carves:e,count:e.length,requesting:!1})}))},friendlyDimensions:e=>e?`${e.x} x ${e.y} x ${e.z} in`:"-Unknown-",bitDescription:e=>EASEL.bit(e).longDescription(),bitInUse:(e,t)=>"all"===e.passType||"roughing"===e.passType?t.bit:t.detailBit,safeRate:e=>null!=e?`${e} in/min`:"-Unknown-",safeValue:e=>null!=e?`${e} in/min`:"-Unknown-",carveDataRow(e,t,n){const a=EASEL.service.cutSettingService.getCutSettingsForJob(n.job_settings),r=this.bitInUse(n.job_settings,n.bit_params);return[n.successful?React.createElement("i",{className:"fa fa-check",style:{color:"green"}}):null===n.successful?React.createElement("i",{className:"fa fa-question"}):React.createElement("i",{className:"fa fa-times",style:{color:"red"}}),React.createElement("div",{key:"carve-project-entry",className:"carve-project-entry"},n.project_link_token?[React.createElement("img",{key:`${n.project_name}-img`,src:n.project_image}),React.createElement("a",{key:`${n.project_name}-token`,href:`/projects/${n.project_link_token}`,target:"_blank",rel:"noreferrer"},n.project_name)]:React.createElement("i",null,"-project deleted-")),React.createElement("div",{key:"carve-material-entry",className:"carve-material-entry"},React.createElement("img",{src:e[n.material]}),React.createElement("div",null,React.createElement("p",null,n.material),React.createElement("p",null,this.friendlyDimensions(n.material_dimensions)))),React.createElement("div",{key:"carve-bit-entry",className:"carve-bit-entry"},React.createElement("img",{src:t[r.id]}),React.createElement("p",null,this.bitDescription(r))),React.createElement("div",{key:"cut-settings",className:"cut-settings"},React.createElement("span",null,"Feed:"),React.createElement("span",null,this.safeRate(a.feedRate)),React.createElement("span",null,"Plunge:"),React.createElement("span",null,this.safeRate(a.plungeRate)),React.createElement("span",{title:"Depth per pass"},"DoC:"),React.createElement("span",null,this.safeValue(a.depthPerPass))),React.createElement("div",{key:"carve-date"},React.createElement("p",null,`${n.time_ago_created_at} ago`),React.createElement("p",null,n.formatted_duration," ",n.interrupted&&React.createElement("i",{className:"fa fa-warning",title:"Stopped before completion"})))]},render(){const e={},t=EASEL.materialStore.getMaterials();for(let a of t)e[a.name]=a.textureUrl;const n={"other-bit":EASEL.assets.images.otherBit};for(let a of Array.from(EASEL.store.getState().bits))n[a.id]=a.imageURL;return React.createElement("div",null,React.createElement("div",{className:"project-list-container",onScroll:this.onScroll},React.createElement("div",{className:"scrollable-content"},React.createElement("div",{id:"carve-container"},React.createElement("div",null),React.createElement("div",null,"Project"),React.createElement("div",null,"Material"),React.createElement("div",null,"Bit"),React.createElement("div",null,"Cut Settings"),React.createElement("div",null,"Carved"),this.state.carves.map((t=>this.carveDataRow(e,n,t)))),React.createElement("span",{style:{opacity:this.state.requesting?1:0}},React.createElement(EASEL.component.spinner,null)))))}})},function(e,t){EASEL.component.chatboxComponent=createReactClass({propTypes:{projectName:PropTypes.string.isRequired,linkToken:PropTypes.string.isRequired,readOnly:PropTypes.bool.isRequired,ownerName:PropTypes.string.isRequired,broadcasterId:PropTypes.number,setBroadcasterId:PropTypes.func.isRequired},getInitialState:()=>({messages:[],message:"",minimized:!1,users:{}}),componentDidMount(){const e=ActionCable.createConsumer();this.chatSubscription=e.subscriptions.create({channel:"ChatChannel",id:this.props.linkToken},{connected:()=>{this.chatSubscription.send({request_users:!0})},received:e=>{e.users?this.setState({users:e.users}):(this.props.readOnly||EASEL.stats.trackEvent("Live - Owner Received Chat Message",{linkToken:this.props.linkToken}),this.setState({messages:this.state.messages.concat(e)}),this.chatboxElement.scrollTop=this.chatboxElement.scrollHeight)}})},inputKeyPress(e){if("Enter"==(e.code||e.key)){const t={name:this.props.userName,text:e.target.value};if(null!=this.chatSubscription)EASEL.stats.trackEvent("Live - Sent Chat Message",{linkToken:this.props.linkToken}),this.chatSubscription.send({name:this.props.userName,text:e.target.value}),this.setState({message:""});else{const e=this.state.messages.concat(t);this.setState({messages:e,message:""})}}},onInputChange(e){e.preventDefault(),e.stopPropagation(),this.setState({message:e.target.value})},minimize(){this.setState({minimized:!this.state.minimized})},render(){const{linkToken:e,projectName:t,ownerName:n,readOnly:a,broadcasterId:r,setBroadcasterId:o}=this.props,{minimized:s,messages:i,message:l,users:c}=this.state;return React.createElement("div",{className:"chatbox",style:s?{height:"0"}:{height:"300px"}},React.createElement("div",{className:"chatbox__header"},React.createElement("div",{className:"chatbox__header-title"},n," - ",t),React.createElement("i",{className:"fa fa-minus chatbox__minimize",onClick:this.minimize})),React.createElement("div",{className:"chatbox__body"},React.createElement("div",{className:"chatbox--left"},React.createElement(EASEL.component.chatboxUserList,{users:c,broadcasterId:r,setBroadcasterId:o,readOnly:a,linkToken:e})),React.createElement("div",{className:"chatbox--right"},React.createElement("div",{className:"chatbox__messages",ref:e=>{this.chatboxElement=e}},i.map(((e,t)=>React.createElement("div",{key:`${t}`,className:"chatbox__message"},React.createElement("span",{className:"chatbox__username"},e.name,": "),e.text)))),React.createElement("input",{type:"text",className:"chatbox__text-input",value:l,onChange:this.onInputChange,onKeyPress:this.inputKeyPress}))))}}),EASEL.component.chatbox=EASEL.redux.connect({component:EASEL.component.chatboxComponent,mapStateToProps:e=>({userName:EASEL.userSelectors.getUserState(e).userName})})},function(e,t){EASEL.component.chatboxUserListComponent=createReactClass({propTypes:{broadcasterId:PropTypes.number,users:PropTypes.object.isRequired,setBroadcasterId:PropTypes.func.isRequired,readOnly:PropTypes.bool.isRequired,linkToken:PropTypes.string.isRequired},getInitialState:()=>({broadcasterRequests:[]}),componentDidMount(){const e=ActionCable.createConsumer();this.permissionsSubscription=e.subscriptions.create({channel:"ProjectBroadcastPermissionsChannel",id:this.props.linkToken},{received:e=>{e.payload.broadcaster_request?this.setState({broadcasterRequests:this.state.broadcasterRequests.concat([e.payload.broadcaster_request])}):this.props.setBroadcasterId(e.payload.broadcaster)}})},getIcon(e){return!this.props.readOnly&&this.state.broadcasterRequests.includes(e)?React.createElement("i",{className:`fa ${e===this.props.broadcasterId?"fa fa-times":"fa-hand-o-up"} chatbox--link`,onClick:()=>this.addCollaborator(e)}):e===EASEL.projectMetadataStore.ownerId()?React.createElement("i",{className:"fa fa-pencil chatbox--icon"}):void 0},addCollaborator(e){this.props.broadcasterId===e?(EASEL.stats.trackEvent("Live - Owner resets control",{linkToken:this.props.linkToken}),this.permissionsSubscription.send({payload:{broadcaster:null}})):(EASEL.stats.trackEvent("Live - Owner gives control",{linkToken:this.props.linkToken}),this.permissionsSubscription.send({payload:{broadcaster:e}}))},toggleControl(){if(this.state.broadcasterRequests.includes(this.props.userId)){if(this.props.broadcasterId===this.props.userId){EASEL.stats.trackEvent("Live - User returns control",{linkToken:this.props.linkToken}),this.permissionsSubscription.send({payload:{broadcaster:null}});const e=this.state.broadcasterRequests.filter((e=>e!==this.props.userId));this.setState({broadcasterRequests:e})}}else EASEL.stats.trackEvent("Live - User requests control",{linkToken:this.props.linkToken}),this.permissionsSubscription.send({payload:{broadcaster_request:this.props.userId}})},controlButtonText(){return this.props.broadcasterId===this.props.userId?"Return Control":this.state.broadcasterRequests.includes(this.props.userId)?"Request Sent":"Request Control"},render(){return React.createElement(React.Fragment,null,React.createElement("div",{className:"chatbox__users"},Object.keys(this.props.users).map((e=>React.createElement("div",{key:e},this.props.users[e],this.getIcon(parseInt(e)))))),this.props.readOnly&&React.createElement("button",{className:"chatbox__btn",onClick:this.toggleControl},this.controlButtonText()))}}),EASEL.component.chatboxUserList=EASEL.redux.connect({component:EASEL.component.chatboxUserListComponent,mapStateToProps:e=>({userId:EASEL.userSelectors.getUserId(e)})})},function(e,t,n){const a=n(96);EASEL.component.cutSettingsDialogComponent=createReactClass({getInitialState(){return{disabled:!1,saving:!1,errors:[],overrideSettings:EASEL.merge(this.props.jobSettings,{feedRate:this.props.jobSettings.feedRate*(this.props.currentFeedRate/100),spindleSpeed:this.props.jobSettings.spindleSpeed*(this.props.currentSpindleSpeed/100)}),previouslySaved:EASEL.service.cutSettingService.findSavedCustomSettings(this.props.material,this.props.bit,this.props.machineProfile?this.props.machineProfile.id:null)}},onSaveCutSettings(e){if(this.state.saving)return;this.setState({saving:!0});const t={bitId:this.props.bit.id,materialId:this.props.material.id,feedRate:e.feedRate,plungeRate:e.plungeRate,depthPerPass:e.depthPerPass,preferredUnit:this.props.jobSettings.preferredUnit,machineProfileId:this.props.machineProfile?this.props.machineProfile.id:null};return this.props.showSpindleSpeed&&e.spindleSpeed>1&&(t.spindleSpeed=e.spindleSpeed),null!=this.state.previouslySaved?(t.id=this.state.previouslySaved.id,a.updateCutSetting(t).fail((e=>this.setState({saving:!1,errors:e.responseJSON.errors}))).done((e=>{EASEL.store.dispatch(EASEL.cutSettingsActionCreators.updateCutSetting(e)),EASEL.stats.trackEvent("Modified saved cut settings",{Material:this.props.material.displayName,Bit:EASEL.bit(this.props.bit).description()}),this.setState({saving:!1,errors:[]}),this.props.handleCutSettingsSaved(EASEL.shallowMerge(this.props.jobSettings,t))}))):a.addCutSetting(t).fail((e=>this.setState({saving:!1,errors:e.responseJSON.errors}))).done((e=>{EASEL.stats.trackEvent(EASEL.events.addCutSetting,{Source:"Cut settings dialog",Material:this.props.material.displayName,Bit:EASEL.bit(this.props.bit).description()}),EASEL.store.dispatch(EASEL.cutSettingsActionCreators.addCutSetting(e)),this.setState({saving:!1,errors:[]}),this.props.handleCutSettingsSaved(EASEL.shallowMerge(this.props.jobSettings,t))}))},produceCutSettingsSummary(){const{overrideSettings:e,previouslySaved:t}=this.state,{currentFeedRate:n,currentSpindleSpeed:a,isProUser:r,jobSettings:o,showSpindleSpeed:s,machineProfile:i}=this.props;return o.useCustom?t?100!==n||100!==a?React.createElement(EASEL.component.cutSettingsSummary,{isProUser:r,jobSettings:e,showSpindleSpeed:s,machineProfile:i,title:"You carved with the following cut settings:"}):React.createElement(EASEL.component.cutSettingsSummary,{isProUser:r,jobSettings:o,showSpindleSpeed:s,machineProfile:i,title:"You carved with the following cut settings:"}):100!==n||100!==a?React.createElement(EASEL.component.cutSettingsSummary,{isProUser:r,jobSettings:o,saveOptions:[{settings:o,title:"Before Override",selectable:!0},{settings:e,title:"After Override",selectable:!0,defaulted:!0}],showSpindleSpeed:s,onSaveCutSettings:this.onSaveCutSettings,machineProfile:i,title:"Would you like to save your cut settings? Easel will automatically apply them to your next carve when using this bit and material combination."}):React.createElement(EASEL.component.cutSettingsSummary,{isProUser:r,jobSettings:o,saveOptions:[{settings:o,title:"Current Settings",selectable:!1,defaulted:!0}],showSpindleSpeed:s,onSaveCutSettings:this.onSaveCutSettings,machineProfile:i,title:"Would you like to save your cut settings? Easel will automatically apply them to your next carve when using this bit and material combination."}):t?React.createElement(EASEL.component.cutSettingsSummary,{isProUser:r,jobSettings:o,saveOptions:[{settings:t,title:"Previously Saved",selectable:!1},{settings:e,title:"After Override",selectable:!1,defaulted:!0}],showSpindleSpeed:s,onSaveCutSettings:this.onSaveCutSettings,machineProfile:i,title:"Would you like to save your overriden settings? Easel will automatically apply them to your next carve when using this bit and material combination."}):React.createElement(EASEL.component.cutSettingsSummary,{isProUser:r,jobSettings:o,saveOptions:[{settings:e,title:"After Override",selectable:!1,defaulted:!0}],showSpindleSpeed:s,onSaveCutSettings:this.onSaveCutSettings,machineProfile:i,title:"Would you like to save your overriden settings? Easel will automatically apply them to your next carve when using this bit and material combination."})},render(){const{disabled:e,errors:t}=this.state;return React.createElement("div",{className:"cut-settings-dialog"},e&&React.createElement("div",{className:"cut-settings-dialog__overlay"}),t.map((e=>React.createElement("p",{className:"alert alert-danger",key:e},e))),this.produceCutSettingsSummary())}}),EASEL.component.cutSettingsDialog=EASEL.redux.connect({mapStateToProps:e=>({isProUser:EASEL.userSelectors.isProEnabled(Date.now(),e)}),component:EASEL.component.cutSettingsDialogComponent})},function(e,t){EASEL.component.cutSettingsSummary=createReactClass({getInitialState(){const e=this.props.saveOptions?this.props.saveOptions:[];let t=null;for(let n of e)n.defaulted&&(t=n.settings,t.title=n.title);return{saving:!1,selected:t,cutSettingsSaved:null}},onSaveCutSettings(){null!=this.state.selected&&"Recommended Settings"!==this.state.selected.title&&(this.props.onSaveCutSettings(this.state.selected),this.setState({saving:!0}))},showUserModal(){EASEL.stats.trackEvent(EASEL.events.showedAccountModal,{proRequired:!0,source:"Cut Settings Summary"}),EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalAccountTab())},selectSetting(e,t){t.title=e,this.setState({selected:t})},getCutSettingRowValues(e){const{preferredUnit:t}=this.props.jobSettings,n=`${t}/min`,a=t,r=[React.createElement("span",{className:"cut-settings-dialog__detail-item",key:"feedRate"},`${EASEL.units.convertFromIn(e.feedRate,t)} ${n}`),React.createElement("span",{className:"cut-settings-dialog__detail-item",key:"plungeRate"},`${EASEL.units.convertFromIn(e.plungeRate,t)} ${n}`),React.createElement("span",{className:"cut-settings-dialog__detail-item",key:"depthPerPass"},`${EASEL.units.convertFromIn(e.depthPerPass,t)} ${a}`)];return this.props.showSpindleSpeed&&r.push(React.createElement("span",{className:"cut-settings-dialog__detail-item",key:"spindleSpeed"},`${e.spindleSpeed&&e.spindleSpeed.toFixed(0)||"-"} RPM`)),r},getCutSettingsRow(e,t){const n=null!=this.state.selected&&this.state.selected.title===e,{isProUser:a}=this.props,r="Current Settings"===e;return r&&!a?React.createElement("div",{className:"cut-settings-dialog__not-pro",key:e},React.createElement(EASEL.component.proLabel,null),React.createElement("span",null," Saving cut settings requires an active Easel Pro account. "),React.createElement(EASEL.component.a,{onClick:()=>this.showUserModal()},"Sign up for Easel Pro!"),React.createElement("div",{className:"cut-settings-dialog__details cut-settings-dialog__button"},React.createElement("label",{className:"cut-settings-dialog__check-container","data-action":e},React.createElement("input",{className:"cut-settings-dialog__radio",type:"radio",name:e,defaultChecked:n}),React.createElement("img",{src:EASEL.assets.images.greyCircleLight})),React.createElement("span",{className:"cut-settings-dialog__detail-item cut-settings-dialog__detail-item--main"},React.createElement("span",{className:"cut-settings-dialog__row-title"},`${e}:`)),this.getCutSettingRowValues(t))):React.createElement(EASEL.component.a,{className:"cut-settings-dialog__details cut-settings-dialog__button "+(n?"cut-settings-dialog--selected":""),key:e,onClick:()=>this.selectSetting(e,t)},React.createElement("label",{className:"cut-settings-dialog__check-container","data-action":e},React.createElement("input",{className:"cut-settings-dialog__radio",type:"radio",name:e,defaultChecked:n}),React.createElement("img",{src:n?EASEL.assets.images.blueRadioButton:EASEL.assets.images.blueCircleLight})),React.createElement("span",{className:"cut-settings-dialog__detail-item cut-settings-dialog__detail-item--main"},!r&&React.createElement(EASEL.component.proLabel,{type:"left"}),React.createElement("span",{className:"cut-settings-dialog__row-title"},`${e}:`)),this.getCutSettingRowValues(t))},getNonSelectableCutSettingsRow(e,t,{defaulted:n}){return React.createElement("div",{className:`cut-settings-dialog__details cut-settings-dialog__button ${n?"":"non-selectable"} `,key:e},React.createElement("label",{className:"cut-settings-dialog__check-container","data-action":e},React.createElement("span",null)),React.createElement("span",{className:"cut-settings-dialog__detail-item cut-settings-dialog__detail-item--main"},React.createElement("span",{className:"cut-settings-dialog__row-title"},`${e}:`)),this.getCutSettingRowValues(t))},render(){const{jobSettings:e,title:t,saveOptions:n,machineProfile:a}=this.props,r="detail"===e.passType?e.detailBit:e.bit;return React.createElement("div",{className:"cut-settings-dialog__summary"},React.createElement("p",{className:"cut-settings-dialog__info"},t),React.createElement("div",{className:"cut-settings-dialog__header"},React.createElement("span",{className:"cut-settings-dialog__header-item"},React.createElement("strong",null,"Machine: "),React.createElement("span",null,`${a?a.name:"N/A"}`)),React.createElement("span",{className:"cut-settings-dialog__header-item"},React.createElement("strong",null,"Material: "),React.createElement("span",null,`${e.material.displayName}`)),React.createElement("span",{className:"cut-settings-dialog__header-item"},React.createElement("strong",null,"Bit: "),React.createElement("span",null,`${EASEL.bitHelper.descriptionForBit(r)}`))),React.createElement("div",{className:"cut-settings-dialog__details "+(n?"cut-settings-dialog__details--heading":"")},null!=n&&React.createElement("strong",{className:"cut-settings-dialog__detail-item cut-settings-dialog__detail-item--main"},"Settings"),React.createElement("strong",{className:"cut-settings-dialog__detail-item"},"Feed Rate"),React.createElement("strong",{className:"cut-settings-dialog__detail-item"},"Plunge Rate"),React.createElement("strong",{className:"cut-settings-dialog__detail-item"},"Depth Per Pass"),this.props.showSpindleSpeed&&React.createElement("strong",{className:"cut-settings-dialog__detail-item"},"Spindle Speed")),null!=n?React.createElement("div",null,n.map((e=>e.selectable?this.getCutSettingsRow(e.title,e.settings):this.getNonSelectableCutSettingsRow(e.title,e.settings,{defaulted:e.defaulted}))),React.createElement("div",{className:"cut-settings-dialog__actions"},React.createElement("button",{className:"cut-settings-dialog__btn btn btn-primary",onClick:this.onSaveCutSettings,disabled:this.state.saving},"Save"))):React.createElement("div",{className:"cut-settings-dialog__details"},this.getCutSettingRowValues(e)))}})},function(e,t){EASEL.component.designPreview3d=createReactClass({getInitialState:()=>({previewPanel:null}),componentDidMount(){const e=EASEL.threeDimensionalRenderer();e.init(),this.container.appendChild(e.getDOMElement()),e.setSize(this.props.previewWidth,this.props.previewHeight);const t=EASEL.textureLoader(),n=EASEL.materialHeightMap();n.initialize(new fabric.Canvas("tmp"));const a=EASEL.designPreview.init(e);a.setInaccurateElement(n.getGraphic());const r=EASEL.wasteboard().init(e.render).getMesh(),o=EASEL.previewElement([r]);a.setWasteboardElement(o),EASEL.hasAccessGrant("pair_programming_exercise")&&(EASEL.previewPanel=e,EASEL.designPreview=a),EASEL.store.subscribeWithSelector(EASEL.materialSelectors.getMaterialDimensions,(()=>e.homeControls())),EASEL.previewScheduler.init({designPreview:a,previewPanel:e,textureLoader:t,materialHeightMap:n}),this.setState({previewPanel:e}),e.onWebglContextRestored.subscribe((e=>{const r=this.container;r.removeChild(this.state.previewPanel.getDOMElement()),r.appendChild(e.getDOMElement()),n.initialize(new fabric.Canvas("tmp")),a.setInaccurateElement(n.getGraphic()),t.loadMaterial(EASEL.materialStore.getActiveMaterial()).then((e=>n.setTextures([{texture:e}]))),a.setWasteboardElement(o),n.updateDimensions(),this.setState({previewPanel:e})}))},componentDidUpdate(e,t){e.previewWidth===this.props.previewWidth&&e.previewHeight===this.props.previewHeight&&t.previewPanel===this.state.previewPanel||this.state.previewPanel.setSize(this.props.previewWidth,this.props.previewHeight)},render(){return React.createElement("div",{ref:e=>this.container=e,style:{marginLeft:this.props.marginLeft}},React.createElement(EASEL.component.previewControlsController,{previewPanel:this.state.previewPanel}))}})},function(e,t){EASEL.component.downloadZipModal=createReactClass({getInitialState:()=>({show:!1,includeAllWorkpieces:!0,downloading:!1,zipLibraryLoaded:null!=window.JSZip,zipLibraryFailedLoad:!1}),componentDidMount(){EASEL.flux.events.addListener("show-download-zip",this.showModal),EASEL.flux.events.addListener("hide-download-zip",this.hideModal)},componentWillUnmount(){EASEL.flux.events.removeListener("show-download-zip"),EASEL.flux.events.removeListener("hide-download-zip")},loadZipLibrary(){return this.setState({zipLibraryLoading:!0}),$.ajax({url:EASEL.assets.javascripts.zip,dataType:"script",async:!0}).done((()=>{this.setState({zipLibraryLoaded:!0})})).fail((()=>{this.setState({zipLibraryFailedLoad:!0,zipLibraryLoading:!1})}))},showModal(){this.state.zipLibraryLoaded||this.state.zipLibraryLoading||this.loadZipLibrary(),this.setState({show:!0})},hideModal(){this.setState({show:!1})},allWorkpieces(){this.setState({includeAllWorkpieces:!0})},activeWorkpiece(){this.setState({includeAllWorkpieces:!1})},addWorkpieceToZip(e,t,n){let a;const r=`Workpiece ${t+1}`;let o=r;if(null!=e.name&&""!==e.name){o+=` (${EASEL.string.truncate(e.name,255-r.length-1)})`}o=EASEL.string.sanitize(o),o===`${r} ()`&&(o=r);const s=n.folder(o);if((a=EASEL.externalGcodeSelectors.getGcode(EASEL.store.getState(),e.id))?s.file("imported_gcode.nc",a):s.file("design.svg",EASEL.workpieceHelper.svgString(e.id)),s.file("settings.txt",EASEL.workpieceHelper.settingsString(e.id)),null!=e.note)return s.file("notes.txt",e.note)},download(){if(this.state.downloading)return;let e=EASEL.string.sanitize(EASEL.projectMetadataStore.getName());0===e.length&&(e="Project");const t=new JSZip,n=t.folder(e);if(this.state.includeAllWorkpieces){const e=EASEL.workpieceStore.getWorkpieces();for(let t=0;t<e.length;t++){const a=e[t];this.addWorkpieceToZip(a,t,n)}}else this.addWorkpieceToZip(EASEL.workpieceStore.getActiveWorkpiece(),0,n);this.setState({downloading:!0}),EASEL.stats.trackEvent(EASEL.events.downloadProjectZip),t.generateAsync({type:"blob"}).then((t=>{saveAs(t,`${e}.zip`),this.setState({downloading:!1}),this.hideModal()})).catch((function(){EASEL.oops("There was a problem downloading your project"),this.setState({downloading:!1})}))},render(){if(!this.state.show)return null;const e=this.state.downloading||!this.state.zipLibraryLoaded;let t=React.createElement("div",null,React.createElement("p",null,"Initializing ZIP archive tools..."));return this.state.zipLibraryLoaded?t=React.createElement("div",null,React.createElement("div",{className:"radio"},React.createElement("p",null,"Download an archive of your project as a ",React.createElement("code",null,".zip")," file."),React.createElement("label",null,React.createElement("input",{type:"radio",name:"workpiece-download",value:"all",checked:this.state.includeAllWorkpieces,onChange:this.allWorkpieces}),"All workpieces")),React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",name:"workpiece-download",value:"active",checked:!this.state.includeAllWorkpieces,onChange:this.activeWorkpiece}),"Current workpiece"))):this.state.zipLibraryLoadFailed&&(t=React.createElement("div",null,React.createElement("p",null,"Oops. There was a problem initializing ZIP archive tools. Please try again later."))),React.createElement(ReactBootstrap.Modal,{show:this.state.show,onHide:this.hideModal,id:"download-zip-modal"},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"Download Project")),React.createElement(ReactBootstrap.Modal.Body,null,t),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement("button",{className:"btn btn-default",onClick:this.hideModal},"Cancel"),React.createElement("button",{className:"btn btn-primary",onClick:this.download,disabled:e},"Download ZIP file")))}})},function(e,t){EASEL.component.dropdownMenu=createReactClass({render(){return React.createElement("ul",{className:"dropdown-menu"},this.props.items.map((({title:e,action:t})=>React.createElement("li",{key:`dropdown-${e}`},React.createElement(EASEL.component.a,{onClick:t},e)))))}})},function(e,t){EASEL.component.easelLiveModal=createReactClass({getInitialState:()=>({isLive:EASEL.projectMetadataStore.isLive(),linkToken:EASEL.projectMetadataStore.getLinkToken()}),componentDidMount(){EASEL.flux.events.addListener("show-easel-live-modal",this.open)},componentWillUnmount(){EASEL.flux.events.removeListener("show-easel-live-modal",this.open)},open(){EASEL.stats.trackEvent("Live - Opened Easel Live Modal",{linkToken:this.state.linkToken}),this.setState({open:!0,live:EASEL.projectMetadataStore.isLive()})},close(){this.setState({open:!1})},toggleLive(){const e=!this.state.isLive;EASEL.projectMetadataActions.setLive(e);EASEL.projectMetadataStore.isShared()||EASEL.projectMetadataActions.setShared(!0),e?EASEL.stats.trackEvent("Live - Started Easel Live",{linkToken:this.state.linkToken}):EASEL.stats.trackEvent("Live - Ended Easel Live",{linkToken:this.state.linkToken}),this.setState({isLive:e,open:!1})},render(){const{open:e,isLive:t}=this.state;return React.createElement(ReactBootstrap.Modal,{show:e,onHide:this.close,className:"easel-live-modal"},React.createElement(ReactBootstrap.Modal.Header,null,React.createElement(ReactBootstrap.Modal.Title,null,"Easel Live")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("div",null,"Collaborate with others by sharing your process. Design in Easel live and let other users see your work!"),!t&&React.createElement(React.Fragment,null,React.createElement("div",{className:"center-text"},React.createElement("button",{onClick:this.toggleLive},"Go Live")),React.createElement(EASEL.component.copyLink,{link:window.location.href,renderLink:!0})),t&&React.createElement(React.Fragment,null,React.createElement("div",null,"You are currently live!"),React.createElement("div",{className:"center-text"},React.createElement("button",{onClick:this.toggleLive},"End Live Session")))),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement(ReactBootstrap.Button,{bsStyle:"default",onClick:this.close},"Close")))}})},function(e,t){EASEL.component.errorReportForm=createReactClass({propTypes:{project:PropTypes.object,jobSettings:PropTypes.object,savedData:PropTypes.object,connectionLog:PropTypes.array.isRequired,detectedGarbledMessage:PropTypes.bool.isRequired,error:PropTypes.object,gcode:PropTypes.string,isExternalGcode:PropTypes.bool,machineSettings:PropTypes.string,onClose:PropTypes.func.isRequired,hideForm:PropTypes.func.isRequired},getInitialState:()=>({failedToSend:!1,sending:!1,notes:""}),close(){this.props.onClose()},hideForm(){this.props.hideForm()},handleNotesTextareaChange(e){this.setState({notes:e.target.value})},handleSubmit(e){e.preventDefault();const{mediaProps:t,notes:n}=this.state,a=$.ua,r={browser:{name:a.browser.name,version:a.browser.version},engine:a.engine,os:a.os};this.setState({sending:!0}),n.length>0||null!=t?EASEL.stats.trackEvent(EASEL.events.failedWithFeedback,{Feedback:n}):EASEL.stats.trackEvent(EASEL.events.failedWithoutFeedback,{});const o=this;return EASEL.errorReporter.submitUserReportedError({project:this.props.project,jobSettings:this.props.jobSettings,savedData:this.props.savedData,gcode:this.props.gcode,isExternalGcode:this.props.isExternalGcode,machineSettings:this.props.machineSettings,maxSpindleCurrent:EASEL.machineStateStore.getMaxSpindleCurrent(),userNotes:n,mediaUrl:null!=t?t.url:void 0,mediaMimetype:null!=t?t.mimetype:void 0,error:this.props.error,connectionLog:this.props.connectionLog,detectedGarbledMessage:this.props.detectedGarbledMessage,userAgentData:r}).done((function(){EASEL.projectStatus.flash("Thanks for your feedback."),o.close()})).fail((()=>o.setState({failedToSend:!0}))).always((()=>o.setState({sending:!1})))},onFile(e){this.setState({mediaProps:e[0]})},onClickUploadPicture(){EASEL.filepickerUtils.pickAndStore({access:"public",accept:["image/*","video/*"],path:"error-reports/"}).then(this.onFile)},render(){let e,t;const{mediaProps:n,failedToSend:a,sending:r,notes:o}=this.state,s=a&&React.createElement("p",{className:"text-error"},"Oops, there was a problem sending your feedback.");if(null!=n){let a;n.mimetype.indexOf("image")>=0?(a=n.url,t="Change picture"):(a=EASEL.assets.images.video,t="Change video"),e=React.createElement("div",null,React.createElement("img",{src:a,alt:"Error report picture preview"}))}else t="Upload picture or video";return React.createElement("div",{className:"error-report-form"},React.createElement("h3",null,"Get Help From Inventables"),React.createElement("a",{href:"#",className:"back-btn",onClick:this.hideForm},React.createElement("i",{className:"fa fa-chevron-left"})),React.createElement("p",null,"Our Customer Success team wants to help you solve this issue.  Tell us more about your problem and we\u2019ll respond within the next business day."),React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("div",{className:"form-group"},s,React.createElement("textarea",{className:"form-control",name:"notes",onChange:this.handleNotesTextareaChange})),React.createElement("p",{className:"center-text"},"Please attach a picture or video showing the problem, if possible."),e,React.createElement("button",{className:"btn btn-default",type:"button",onClick:this.onClickUploadPicture},t),React.createElement("div",{className:"btn-group",role:"group"},React.createElement("button",{className:"btn btn-primary",type:"submit",disabled:0===o.length||r},r?"Sending....":"Send"),React.createElement("button",{className:"btn btn-default",type:"button",onClick:this.hideForm},"Cancel"))))}})},function(e,t){EASEL.component.externalMeshPreview=EASEL.redux.connect({mapStateToProps:e=>({isCarvey:EASEL.machineSettingsSelectors.isCarvey(e)}),component:createReactClass({props:{mesh:PropTypes.object.isRequired,panelWidth:PropTypes.number.isRequired,panelHeight:PropTypes.number.isRequired,isCarvey:PropTypes.bool.isRequired,material:PropTypes.object.isRequired},getInitialState(){const{mesh:e,material:t}=this.props,n=EASEL.threeDimensionalRenderer();n.init(),n.add(EASEL.wasteboard().init(n.render).getMesh());return{renderer:n,model:this.updateModel(n,e,t,this.props.transform),materialMesh:this.updateMaterial(n,t),gcodeMesh:null,gcodeVerts:null}},componentDidMount(){this.updateCanvas(this.props.panelWidth,this.props.panelHeight),this.el.appendChild(this.state.renderer.getDOMElement())},componentWillReceiveProps(e){const{mesh:t,gcode:n,material:a,panelWidth:r,panelHeight:o,currentFrame:s,transform:i}=e,{renderer:l,gcodeMesh:c,gcodeVerts:p}=this.state;if(r===this.props.panelWidth&&o===this.props.panelHeight||this.updateCanvas(r,o),this.props.mesh!==t){const e=this.updateModel(l,t,a);this.setState({model:e,gcodeMesh:null,gcodeVerts:null})}else this.props.transform.equals(i)||(this.state.model.matrix=i,l.render());if(this.props.material.x!==a.x||this.props.material.y!==a.y||this.props.material.z!==a.z){const e=this.updateMaterial(l,a);this.setState({materialMesh:e})}this.props.gcode!==n&&this.updateGcode(n),s!==this.props.currentFrame&&null!=c&&(EASEL.toolpathVisualizer.animateToFrame([c],[],[p],s),l.render())},componentWillUnmount(){this.disposeAll()},updateCanvas(e,t){this.state.renderer.setSize(e,t)},updateMaterial(e,t){null!=this.state&&this.dispose(this.state.materialMesh);const n=new THREE.LineSegments(new THREE.EdgesGeometry(new THREE.BoxGeometry(t.x,t.y,t.z)),new THREE.LineBasicMaterial({color:65280}));return n.translateX(t.x/2).translateY(t.y/2).translateZ(t.z/2),e.add(n),n},updateModel(e,t,n,a){null!=this.state&&this.dispose(this.state.model);const r=new THREE.Mesh(t.geometry(),new THREE.MeshPhongMaterial({color:16178880,specular:100,shininess:100}));r.matrixAutoUpdate=!1,e.add(r);const o=n.x+12>=n.y?1.5:2,s=Math.max(n.x,n.y),i=45*Math.PI/180,l=Math.tan(i)*s;return e.setCameraPosition({x:n.x/2,y:-s/o,z:l/o+t.center().z/2}),e.setCameraViewCenter({x:n.x/2,y:n.y/2.5,z:0}),r.matrix=a,r},updateGcode(e){const{renderer:t}=this.state;if(this.dispose(this.state.gcodeMesh),null==e)return void this.setState({gcodeMesh:null,gcodeVerts:null});const n=EASEL.toolpathVisualizer.createMesh(e);n.position.z=this.props.material.z;const a=n.geometry.vertices.slice(0);this.props.setFrameCount(a.length),t.add(n),this.setState({gcodeMesh:n,gcodeVerts:a})},disposeAll(){const{model:e,gcodeMesh:t,materialMesh:n}=this.state;for(const a of[e,t,n])this.dispose(a)},dispose(e){null!=e&&(this.state.renderer.removeMeshes([e]),e.geometry.dispose(),e.material.dispose())},render(){return React.createElement("div",{className:"external-mesh-render",ref:e=>this.el=e})}})})},function(e,t,n){const a=n(709);EASEL.component.featureFeedback=createReactClass({getInitialState:()=>({characterCount:0,clickedSubmit:!1}),submitFeedback(){a.sendFeedback(this.refs.feedbackInput.value,this.props.featureTitle),this.setState({clickedSubmit:!0})},feedbackChange(e){const t=e.target.value.length;this.setState({characterCount:t})},render(){const{characterCount:e,clickedSubmit:t}=this.state;return React.createElement("div",{className:"feature-feedback"},React.createElement("strong",null,"Leave feedback"),t?React.createElement("p",{className:"feature-feedback__description"},"Thank you for your feedback!"):React.createElement("div",null,React.createElement("p",{className:"feature-feedback__description"},"We\u2019re always looking to improve Easel and value your feedback. Please write your comments, concerns, or ideas in the box below."),React.createElement("label",{htmlFor:"feature-modal-feedback",style:{display:"none"}},"User feedback"),React.createElement("textarea",{ref:"feedbackInput",id:"feature-feedback",className:"form-control feature-feedback__input-text",onChange:this.feedbackChange,maxLength:5e3}),5e3===e&&React.createElement("p",{className:"character-count"},"You have reached the maximum character limit."),React.createElement("button",{className:"btn btn-primary",disabled:e<1,onClick:this.submitFeedback},"Send")))}})},function(e,t){const n={sendFeedback:(e,t)=>{const n=t.replace(/\s+/g,"-").toLowerCase();return $.ajax({url:`/features/${n}/feature_feedbacks`,type:"POST",dataType:"json",data:{feature_feedback:{details:e}}})}};e.exports=n},function(e,t){EASEL.component.featuresContainerComponent=createReactClass({getInitialState(){return{selectedFeature:this.props.features[0],showCopied:!1}},componentDidUpdate(e){!e.visible&&this.props.visible&&EASEL.stats.trackEvent(EASEL.events.featuresModalFeatureViewed,{feature:this.props.features[0].title})},featureLink:e=>location.host+"/features/"+e.link,onClickIcon(e){EASEL.stats.trackEvent(EASEL.events.featuresModalShared,{source:e,feature:this.state.selectedFeature.title})},onFeatureClick(e){this.setState({selectedFeature:e}),EASEL.stats.trackEvent(EASEL.events.featuresModalFeatureViewed,{feature:e.title})},render(){const{selectedFeature:e}=this.state;return this.props.visible&&React.createElement("div",{className:"features-container"},React.createElement("div",{className:"features-container__header"},React.createElement("div",{className:"features-container__title"},"Features & Tools"),React.createElement("button",{className:"close","aria-label":"Close",onClick:this.props.hide},React.createElement("span",{"aria-hidden":"true"},"\xd7"))),React.createElement("div",null,this.props.error&&this.props.error),React.createElement("div",{className:"features-container__body"},React.createElement("div",{className:"features-container__categories"},React.createElement("ul",{className:"nav nav-stacked nav-pills"},this.props.features.map((t=>React.createElement("li",{key:`feature-${t.title}`,className:"features-container__category "+(t===e?"active":""),onClick:()=>this.onFeatureClick(t)},t.title,t.isNew&&React.createElement("span",{className:"features-container__new"},"NEW")))))),React.createElement("div",{className:"features-container__column-content"},React.createElement("div",{className:"features-container__column-content-container"},React.createElement("div",{key:`feature-${e.title}`},React.createElement("h3",null,e.title),React.createElement("div",{dangerouslySetInnerHTML:{__html:e.description},className:"features-container__description"}),React.createElement("hr",null),React.createElement("div",{className:"features-container__description-footer"},React.createElement("footer",{className:"features-container__footer"},React.createElement("div",null,React.createElement("strong",null,"Share this feature"),React.createElement(EASEL.component.socialSharing,{copyLink:this.featureLink(e),emailLink:`mailto:?subject=Check out ${e.title} in Easel!&body=Have you heard about ${e.title} in Easel? To learn more, check out ${this.featureLink(e)}.`,externalLink:`/features/${e.link}`,fbParams:`?t=${e.title}&u=${this.featureLink(e)}`,onClickIcon:this.onClickIcon})),e.isCollectingFeedback&&React.createElement(EASEL.component.featureFeedback,{featureTitle:e.title}))))))))}}),EASEL.component.featuresContainer=EASEL.redux.connect({mapStateToProps:function(e){const{errorMessage:t,features:n}=e.features;return{error:t,features:n,visible:EASEL.pageSelectors.isPageVisible(e,"features")}},mapDispatchToProps:e=>({hide(){e(EASEL.pageActionCreators.hidePage())}}),component:EASEL.component.featuresContainerComponent})},function(e,t){EASEL.component.feedbackPrompt=createReactClass({propTypes:{message:PropTypes.string.isRequired,onClickYes:PropTypes.func.isRequired,onClickNo:PropTypes.func.isRequired},render(){return React.createElement("p",{className:"feedback-prompt"},this.props.message,React.createElement("button",{className:"btn-primary btn-xs",onClick:this.props.onClickYes},"Yes"),React.createElement("button",{className:"btn-danger btn-xs",onClick:this.props.onClickNo},"No"))}})},function(e,t){EASEL.component.filterMenu=createReactClass({render(){return React.createElement("ul",{className:"dropdown-menu"},this.props.items.map((({title:e,action:t,checked:n})=>React.createElement("li",{key:`dropdown-${e}`},n&&React.createElement("i",{className:"fa fa-check"}),React.createElement(EASEL.component.a,{onClick:t},e)))))}})},function(e,t){EASEL.component.fontErrorModalComponent=createReactClass({fontsMissingFromLibrary(){return this.props.errors.custom_fonts||[]},fontsMissingFromVolumes(){return this.props.errors.volume_fonts||[]},fontsMissingFromVolumesWithoutFallback(){return this.props.errors.volume_fonts_without_fallback||[]},fontListContent:e=>React.createElement("ul",null,e.slice(0,11).map((e=>React.createElement("li",{key:e},e)))),missingFromLibraryContent(){const e=this.fontsMissingFromLibrary();return e.length>0?React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-body"},React.createElement("p",null,"The following fonts could not be loaded from your user library. If this problems persists you can remove them from your Easel Pro font list:"),this.fontListContent(e))):null},missingFromVolumesContent(){const e=this.fontsMissingFromVolumes();return e.length>0?React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-body"},React.createElement("p",null,"Text elements using the following fonts have been converted to path elements."),this.fontListContent(e))):null},missingFromVolumesWithoutFallbackContent(){const e=this.fontsMissingFromVolumesWithoutFallback();return e.length>0?React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-body"},React.createElement("p",null,`Text elements using the following fonts have been updated to use the ${EASEL.fontConstants.defaultFontName} font`),this.fontListContent(e))):null},modalContent(){if(!this.props.visible)return null;const e=React.createElement(ReactBootstrap.Button,{bsSize:"large",bsStyle:"primary",onClick:this.onHide},"Continue"),t=this.missingFromLibraryContent(),n=this.missingFromVolumesContent(),a=this.missingFromVolumesWithoutFallbackContent();return t||n||a?React.createElement("div",null,React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0}),React.createElement(ReactBootstrap.Modal.Title,null,"Some fonts failed to load"),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("p",null,"We\u2019re sorry, but the following fonts have been revoked by the font owner or are temporarily unavailable."),t,n,a),React.createElement(ReactBootstrap.Modal.Footer,{className:"buttons"},e)):null},onHide(){this.props.hide()},render(){return React.createElement(ReactBootstrap.Modal,{className:"font-error-modal",show:this.props.visible,onHide:this.onHide},this.modalContent())}}),EASEL.component.fontErrorModal=EASEL.redux.connect({mapStateToProps:e=>({errors:EASEL.fontSelectors.getFontErrors(e),visible:EASEL.fontSelectors.getFontErrorsModalVisible(e)}),mapDispatchToProps:e=>({hide:()=>e(EASEL.fontActionCreators.setFontErrorsVisible(!1))}),component:EASEL.component.fontErrorModalComponent})},function(e,t){EASEL.component.iconToggleButton=function({inputId:e,checked:t,onChange:n,iconClassName:a,labelText:r}){return React.createElement("div",{className:"icon-toggle-button"},React.createElement("input",{id:e,type:"checkbox",checked:t,onChange:n}),React.createElement("label",{htmlFor:e,className:t?"btn btn-primary":"btn btn-default"},React.createElement("i",{className:a})),r&&React.createElement("span",{className:"icon-toggle-button__label-text",onClick:n},r))}},function(e,t,n){const a=n(332),r=n(81),o=n(28);EASEL.component.jobStatusComponent=createReactClass({carvingProjectEventData(){const e=EASEL.carvingInfo.data(),t=e.project;let n=null,a=null;return null!=e&&null!=e.jobSettings&&(n=e.jobSettings.material,a=e.jobSettings.bit),{"Contains imported SVG":null!=t?t.contains_imported_svg:void 0,Material:null!=n?n.name:void 0,Bit:null!=a?`${a.width} ${a.unit}`:void 0}},getInitialState:()=>({error:null,bit:null,open:!1,jobSettings:null,machineSettings:null,small:!1,cutSettingsSaved:null,material:null,tile:null,showSuccessfulCarveContent:!1,showUnsuccessfulCarveContent:!1}),populateStateData(){const e=EASEL.carvingInfo.data(),t=e.jobSettings;let n=null;null!=t&&(n="detail"===t.passType?t.detailBit:t.bit);const a=EASEL.machineTypeHelper.supportsSpindleSpeed(this.props.machineType,this.props.spindleType,this.props.automaticSpindleControl),r=this.props.machineProfiles.find((t=>t.id===e.machineProfileId));this.setState(EASEL.merge(this.getInitialState(),{material:null!=e.jobSettings?e.jobSettings.material:void 0,error:this.props.errorData,bit:n,jobSettings:e.jobSettings,currentFeedRate:this.props.currentFeedRate,currentSpindleSpeed:this.props.currentSpindleSpeed,tile:e.tile,showSpindleSpeed:a,machineProfile:r}))},componentDidUpdate(e){this.props.open!==e.open&&!0===this.props.open&&this.populateStateData()},componentDidMount(){EASEL.flux.events.addListener("close-job-status-modal",this.closeWithoutFeedback)},componentWillUnmount(){EASEL.flux.events.removeListener("close-job-status-modal",this.closeWithoutFeedback),this.closeWithoutFeedback()},showCutSettingsData(){return!((null!=this.state.bit?this.state.bit.source:void 0)===o.USER_UNSAVED_INPUT)&&null!=this.state.jobSettings&&null!=this.state.jobSettings.material&&null!=this.state.bit},handleSuccessfulJob(){EASEL.localSender.sentFeedback(),EASEL.stats.trackEventOnServer(EASEL.events.completedSuccessfully),EASEL.stats.trackEvent(EASEL.events.completedSuccessfully,this.carvingProjectEventData()),r.update({successful:!0}),EASEL.flux.events.emit("job-completed-success"),this.showCutSettingsData()?this.setState({showSuccessfulCarveContent:!0}):this.props.close()},handleUnsuccessfulJob(){EASEL.localSender.sentFeedback(),EASEL.stats.trackEventOnServer(EASEL.events.completedUnsuccessfully),EASEL.stats.trackEvent(EASEL.events.completedUnsuccessfully,this.carvingProjectEventData()),r.update({successful:!1}),this.setState({showUnsuccessfulCarveContent:!0})},handleCutSettingsSaved(e){this.setState({cutSettingsSaved:e})},closeWithoutFeedback(){EASEL.stats.trackEvent(EASEL.events.closedJobStatusModalWithoutStatus),EASEL.stats.trackEventOnServer(EASEL.events.closedJobStatusModalWithoutStatus),this.props.close()},getCutSettingsContent(){const e=EASEL.service.cutSettingService.usingSavedCustomSettings(this.state.jobSettings,this.state.material,this.props.machineProfileId),t=!this.state.jobSettings.useCustom,n=100===this.state.currentFeedRate&&100===this.state.currentSpindleSpeed;return null!=this.state.cutSettingsSaved?React.createElement(EASEL.component.cutSettingsSummary,{showSpindleSpeed:this.state.showSpindleSpeed,jobSettings:this.state.cutSettingsSaved,title:"The following settings have been saved for this bit and material combination",machineProfile:this.state.machineProfile}):(e||t)&&n?React.createElement(EASEL.component.cutSettingsSummary,{showSpindleSpeed:this.state.showSpindleSpeed,jobSettings:this.state.jobSettings,title:"You carved with the following cut settings:",machineProfile:this.state.machineProfile}):React.createElement(EASEL.component.cutSettingsDialog,{bit:this.state.bit,currentFeedRate:this.state.currentFeedRate,currentSpindleSpeed:this.state.currentSpindleSpeed,material:this.state.material,jobSettings:this.state.jobSettings,handleCutSettingsSaved:this.handleCutSettingsSaved,showSpindleSpeed:this.state.showSpindleSpeed,machineProfile:this.state.machineProfile})},machineParking(){return React.createElement(EASEL.component.machineParking,{tile:this.state.tile,material:this.state.material})},render(){const{isBetaTester:e}=this.props,t=this.props.machineType!==EASEL.machineType.CARVEY;return React.createElement(ReactBootstrap.Modal,{show:this.props.open,bsSize:"large",onHide:this.closeWithoutFeedback,id:"job-completed-modal",className:"walkthrough-modal "+(t?"walkthrough-modal--has-sidebar":""),enforceFocus:!1},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement("h3",null,this.state.showUnsuccessfulCarveContent?"Troubleshoot Carve":"Carve Complete")),React.createElement(ReactBootstrap.Modal.Body,null,!this.state.showSuccessfulCarveContent&&!this.state.showUnsuccessfulCarveContent&&React.createElement("div",{className:"job-status"},"Let us know how your carve turned out:",React.createElement("div",{className:"feedback-buttons"},React.createElement("div",{className:"feedback-buttons__negative",onClick:this.handleUnsuccessfulJob},React.createElement("img",{src:EASEL.assets.images.sadEaselOrange}),React.createElement("div",null,"Not well - Troubleshoot")),React.createElement("div",{className:"feedback-buttons__positive",onClick:this.handleSuccessfulJob},React.createElement("img",{src:EASEL.assets.images.glassesEaselGreen}),React.createElement("div",null,"Great",this.showCutSettingsData()?" - Review/Save Cut Settings":"")))),this.state.showSuccessfulCarveContent&&this.getCutSettingsContent(),this.state.showUnsuccessfulCarveContent&&React.createElement(EASEL.component.troubleshootingModalContent,{errorInfo:a.getDataForLastCarve(),error:this.state.error,close:this.props.close})),t&&React.createElement("div",{className:"walkthrough-sidebar"},React.createElement("h3",{className:e?"new-machine-controls":""},"Jog Machine"),React.createElement(EASEL.component.machineControls,{context:"job_status",hasUsedDetailBit:this.state.jobSettings&&this.state.jobSettings.useDetailBit,machineParking:this.machineParking()}),!e&&this.machineParking()))}}),EASEL.component.jobStatus=EASEL.redux.connect({mapStateToProps:e=>({machineProfiles:EASEL.userSelectors.getMachineProfiles(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e),machineProfileId:EASEL.machineSettingsSelectors.getMachineProfileId(e),spindleType:EASEL.machineSettingsSelectors.getSpindleType(e),automaticSpindleControl:EASEL.machineSettingsSelectors.getAutomaticSpindleControl(e),currentFeedRate:EASEL.jobStatusSelectors.getCurrentFeedRatePercentage(e)||100,currentSpindleSpeed:EASEL.jobStatusSelectors.getCurrentSpindleSpeedPercentage(e)||100,isBetaTester:EASEL.userSelectors.isBetaTester(e)}),component:EASEL.component.jobStatusComponent})},function(e,t){EASEL.component.labelList=createReactClass({propTypes:{labels:PropTypes.arrayOf(PropTypes.shape({name:PropTypes.string.isRequired,id:PropTypes.number.isRequired})),filterLabels:PropTypes.arrayOf(PropTypes.shape({id:PropTypes.number.isRequired})),onToggleFilterLabel:PropTypes.func.isRequired},onLabelClicked(e,t){e.preventDefault(),e.stopPropagation(),e.target.classList.toggle("selected"),this.props.onToggleFilterLabel({value:t.id,label:t.name,id:t.id})},render(){const e=this.props.labels.map((e=>{let t="project-thumbnail-list__item__metadata__label";return this.props.filterLabels.find((t=>t.id===e.id))&&(t+=" selected"),React.createElement("span",{key:e.id,className:t,onClick:t=>this.onLabelClicked(t,e)},e.name)}));return React.createElement("div",{className:"project-thumbnail-list__item__metadata__labels"},e)}})},function(e,t){EASEL.component.learnContainer=EASEL.redux.connect({component:createReactClass({render:()=>React.createElement("div",{className:"learn-container"},React.createElement("div",{className:"learn-container__inner"},React.createElement("div",{className:"learn-container__video"},React.createElement("iframe",{width:"100%",height:"300",src:"https://youtube.com/embed/playlist?list=PLFr1ntD6SYNTnIRPzquaPNgZpjCE3PSAz",frameBorder:"0",allowFullScreen:""})),React.createElement("div",{className:"learn-container__flex learn-container__flex-vcenter"},React.createElement("h3",null,"Start learning now"),React.createElement("a",{className:"btn btn-lg btn-success learn-container__intro-button",href:"/intro",rel:"noreferrer"},"New intro project")),React.createElement("hr",null),React.createElement("div",null,React.createElement("h3",null,"See what you can do with Easel Pro"),React.createElement("div",{className:"learn-container__flex"},React.createElement("div",null,React.createElement("a",{className:"learn-container__links",href:"https://inventables.zendesk.com/hc/en-us/categories/360001068153-Easel",target:"_blank",rel:"noreferrer"},React.createElement("i",{className:"fa fa-question-circle"}),React.createElement("h3",null,"Help")),React.createElement("p",null,"Learn about all the different features that Easel offers for hobbyists and businesses.")),React.createElement("div",null,React.createElement("a",{className:"learn-container__links",href:"https://discuss.inventables.com/",target:"_blank",rel:"noreferrer"},React.createElement("i",{className:"fa fa-users"}),React.createElement("h3",null,"Forum")),React.createElement("p",null,"Be part of the Easel community of passionate and skillful makers.")),React.createElement("div",null,React.createElement("a",{className:"learn-container__links",href:"https://www.inventables.com/projects",target:"_blank",rel:"noreferrer"},React.createElement("i",{className:"fa fa-lightbulb-o"}),React.createElement("h3",null,"Projects")),React.createElement("p",null,"Get your creative wheels spinning with hundreds of wonderful projects."))))))})})},function(e,t){EASEL.component.liveWrapperComponent=createReactClass({componentDidMount(){EASEL.projectMetadataStore.addChangeListener((()=>this.setState(this.getState()))),this.state.isLive&&this.setupLiveSubscription()},getInitialState(){return this.getState()},getState:()=>({projectName:EASEL.projectMetadataStore.getName(),isLive:EASEL.projectMetadataStore.isLive(),linkToken:EASEL.projectMetadataStore.getLinkToken(),readOnly:EASEL.projectMetadataStore.isReadOnly(),ownerName:EASEL.projectMetadataStore.ownerName()}),componentDidUpdate(e,t){t.isLive!==this.state.isLive?this.state.isLive?this.setupLiveSubscription():this.subscription=null:t.broadcasterId!=this.state.broadcasterId&&(this.enabledControl()?(EASEL.projectUpdatesBroadcaster.setSubscription(this.subscription),this.setState({mousePosition:null})):EASEL.projectUpdatesBroadcaster.setSubscription(null),this.lastReceivedStateCounter=0,this.receivedStateQueue={})},receivedProjectUpdate(e){if(!this.enabledControl()){if(EASEL.projectUpdatesBroadcaster.queuedUpdate(e))return;switch(e.type){case"redux":null!=e.payload.payload&&null!=e.payload.payload.actionType?EASEL.dispatcher.dispatch(e.payload.payload):EASEL.store.dispatch(e.payload);break;case"mouse":this.setState(e.payload)}}const t=EASEL.projectUpdatesBroadcaster.getNextUpdateInQueue();t&&this.receivedProjectUpdate(t)},setupLiveSubscription(){const e=ActionCable.createConsumer();this.receivedStateQueue={},this.lastReceivedStateCounter=null,this.subscription=e.subscriptions.create({channel:"ProjectUpdatesChannel",id:this.state.linkToken},{received:this.receivedProjectUpdate,rejected:()=>{EASEL.oops("This project has reached audience capacity. You won't see live project updates!")}}),this.enabledControl()&&EASEL.projectUpdatesBroadcaster.setSubscription(this.subscription)},enabledControl(){return this.state.readOnly&&this.state.broadcasterId===this.props.userId||null==this.state.broadcasterId&&!this.state.readOnly},setBroadcasterId(e){this.setState({broadcasterId:e})},render(){if(this.state.isLive){const e=this.enabledControl();return React.createElement("div",{className:"live-wrapper"},React.createElement(EASEL.component.mouseIndicator,{mousePosition:this.state.mousePosition,mouseDown:this.state.mouseDown,enabledControl:e,readOnly:this.state.readOnly}),React.createElement(EASEL.component.chatbox,{projectName:this.state.projectName,linkToken:this.state.linkToken,readOnly:this.state.readOnly,ownerName:this.state.ownerName,broadcasterId:this.state.broadcasterId,setBroadcasterId:this.setBroadcasterId}),React.createElement(EASEL.component.readOnlyOverlay,{enabledControl:e}))}return null}}),EASEL.component.liveWrapper=EASEL.redux.connect({mapStateToProps:e=>({userId:EASEL.userSelectors.getUserId(e)}),component:EASEL.component.liveWrapperComponent})},function(e,t){EASEL.component.manageLabelsModal=createReactClass({mixins:[React.addons.PureRenderMixin],getInitialState:()=>({labelsList:EASEL.labelStore.getLabels(),isOpen:!1,labelUpdateInput:{},isValidInput:!1}),_getState(){this.setState({labelsList:EASEL.labelStore.getLabels()})},_open(){EASEL.labelsAPI.index().then((e=>{EASEL.labelActions.setUserLabels(e.labels)})),this.labelUpdateInput={},this.setState({isOpen:!0,labelsList:EASEL.labelStore.getLabels()})},_close(){this.setState({isOpen:!1}),EASEL.flux.events.emit("open-project-properties-modal")},componentDidMount(){EASEL.flux.events.addListener("open-manage-labels-modal",this._open),EASEL.labelStore.addChangeListener(this._getState)},componentWillUnmount(){EASEL.flux.events.removeListener("open-manage-labels-modal",this._open)},_deleteLabel(e){EASEL.labelActions.deleteLabel(e.id,!0);const t=EASEL.projectMetadataStore.assignedLabels();t.splice(t.map((e=>e.id)).indexOf(e.id),1),EASEL.projectMetadataActions.setAssignedLabels(t),EASEL.stats.trackEventOnce(EASEL.events.projectLabelDeleted)},onLabelCreate(){this.labelInput.blur(),this.state.isValidInput&&(EASEL.labelActions.createLabel({name:this.labelInput.value}),EASEL.stats.trackEventOnce(EASEL.events.projectLabelCreated)),this.labelInput.value="",this.setState({labelsList:[...EASEL.labelStore.getLabels()]})},onLabelUpdate(e){const{labelsList:t,isValidInput:n}=this.state,a=t.map((e=>e.id)).indexOf(e.id);if(this.labelUpdateInput[a].blur(),n){const t=EASEL.projectMetadataStore.assignedLabels();EASEL.labelActions.updateLabel(e.id,this.labelUpdateInput[a].value),EASEL.stats.trackEventOnce(EASEL.events.projectLabelEdited);for(let n=0;n<t.length;n++){t[n].id===e.id&&(t[n]={id:e.id,name:this.labelUpdateInput[a].value})}EASEL.projectMetadataActions.setAssignedLabels(t)}else this.labelUpdateInput[a].value=t[a].name;this.labelUpdateInput[a].classList.add("inactive")},inputChanged(e){const{labelsList:t}=this.state,n=e.target.value.match(EASEL.constants.TAG_NAME_REGEX)&&!t.map((e=>e.name)).some((t=>t===e.target.value));this.setState({isValidInput:n})},onLabelDelete(e){if(e.projects&&e.projects.length>0){const t=e.projects.map((e=>e.name)).join(", ");EASEL.confirm(`Delete ${e.name}?`,`This label assigned to the projects: ${t}.`,(()=>{this._deleteLabel(e)}))}else this._deleteLabel(e)},render(){const{labelsList:e,isOpen:t}=this.state,n=e&&e.length>0?e.map(((e,t)=>React.createElement("li",{key:`labels-list-item-${e.id}`,className:"label-list-item",id:`label-${e.name}`},React.createElement("input",{id:`new-label-name-${e.id}`,key:`label-update-input-${e.id}`,ref:e=>{this.labelUpdateInput[t]=e},className:"form-control label-input inactive",defaultValue:e.name,onFocus:e=>{e.target.classList.remove("inactive")},onChange:e=>this.inputChanged(e),onKeyPress:t=>{"Enter"===t.key&&this.onLabelUpdate(e)}}),React.createElement("button",{id:`label-delete-button-${e.id}`,key:`label-delete-button-${e.id}`,className:"label-delete-button",onClick:()=>this.onLabelDelete(e)},React.createElement("i",{className:"fa fa-times"}))))):[];return React.createElement(ReactBootstrap.Modal,{show:t,onHide:this._close},React.createElement(ReactBootstrap.Modal.Header,null,React.createElement(ReactBootstrap.Modal.Title,null,"Manage Labels")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement(ReactBootstrap.Row,{className:"labels-list-container"},n),React.createElement(ReactBootstrap.Row,null,React.createElement("hr",null),React.createElement("input",{ref:e=>{this.labelInput=e},style:{marginTop:"16px"},id:"new-label-name",className:"form-control label-input",placeholder:"Add new label",onChange:e=>this.inputChanged(e),onKeyPress:e=>{"Enter"===e.key&&this.onLabelCreate()}}))),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement(ReactBootstrap.Row,null,React.createElement("button",{className:"btn btn-default",onClick:this._close},"Back to project"))))}})},function(e,t){EASEL.component.materialColorThumbnail=createReactClass({propTypes:{name:PropTypes.string.isRequired,thumbnailUrl:PropTypes.string,thumbnailName:PropTypes.string,onClick:PropTypes.func,layerColors:PropTypes.array},thumbnail(){if(this.props.thumbnailName){const e=EASEL.component.thumbnailRegistry(this.props.thumbnailName);return React.createElement(e,{colors:this.props.layerColors})}return React.createElement("img",{className:"material-color-thumbnail__img",src:this.props.thumbnailUrl})},render(){const e=`material-color-${this.props.name.toLowerCase().replace(new RegExp(" ","g"),"-")}`;let t="material-color-thumbnail";return this.props.active&&(t+=" material-color-thumbnail--active"),React.createElement("li",{id:e,className:t},EASEL.component.DOM.a({className:"material-color-thumbnail__content",onClick:this.props.onClick},this.thumbnail(),React.createElement("span",{className:"material-color-thumbnail__name"},this.props.name)),React.createElement("a",{target:"_blank",rel:"noreferrer",className:"material-color-thumbnail__badge",href:this.props.storeUrl},React.createElement("i",{className:"fa fa-shopping-cart"})))}})},function(e,t){EASEL.component.materialThumbnail=createReactClass({propTypes:{name:PropTypes.string.isRequired,dimensions:PropTypes.string,storeUrl:PropTypes.string,thumbnailUrl:PropTypes.string.isRequired,onClick:PropTypes.func,unit:PropTypes.string},render(){const{active:e,dimensions:t,name:n,storeUrl:a,thumbnailUrl:r}=this.props;return React.createElement("li",{id:`material-${n.toLowerCase().replace(" ","-")}`,className:`material-thumbnail ${e&&" material-thumbnail--active"}`},React.createElement("div",{className:"material-thumbnail__content",onClick:this.props.onClick},React.createElement("div",null,React.createElement(EASEL.component.materialThumbnailIcon,{thumbnailUrl:r}),React.createElement("span",{className:"material-thumbnail__name"},EASEL.string.truncate(n,40))),null!=t&&React.createElement("span",{className:"material-thumbnail__dimensions"},t),null!=a&&React.createElement("a",{target:"_blank",rel:"noreferrer",className:"material-thumbnail__badge",href:a},React.createElement("i",{className:"fa fa-shopping-cart material-thumbnail__badge__icon"}))))}})},function(e,t){EASEL.component.modals=createReactClass({modals:()=>[EASEL.component.actionModal,EASEL.component.activeApp,EASEL.component.advancedMachinePanel,EASEL.component.appList,EASEL.component.carveyPostWalkthrough,EASEL.component.carveyWelcome,EASEL.component.designElementsModal,EASEL.component.downloadZipModal,EASEL.component.driverDeprecatedModal,EASEL.component.driverNotInstalledModal,EASEL.component.driverUnsupportedModal,EASEL.component.easelLiveModal,EASEL.component.firmwareMismatchModal,EASEL.component.firmwareUploadWalkthroughModal,EASEL.component.fontErrorModal,EASEL.component.gcodeImportModal,EASEL.component.libraryFontsModal,EASEL.component.machineControlModal,EASEL.component.machineInspector,EASEL.component.machineInspectorTest,EASEL.component.machineNotFoundModal,EASEL.component.machineProfileModal,EASEL.component.planingWelcome,EASEL.component.planingWalkthroughModal,EASEL.component.postCarveModal,EASEL.component.projectSharingModal,EASEL.component.projectPropertiesModal,EASEL.component.svgImportError,EASEL.component.troubleshootingModal,EASEL.component.walkthroughContainer,EASEL.component.webglModal,EASEL.component.workpieceNotesModal,EASEL.component.workpieceRenameModal,EASEL.component.manageLabelsModal],render(){return React.createElement("div",null,this.modals().map(((e,t)=>React.createElement(e,{key:t}))))}})},function(e,t){EASEL.component.mouseIndicator=createReactClass({componentDidMount(){this.props.enabledControl&&this.addListeners()},componentWillUnmount(){this.props.enabledControl&&this.removeListeners()},addListeners(){document.getElementById("app-container").addEventListener("mousemove",this.handleMouseMove),document.getElementById("app-container").addEventListener("mousedown",this.handleMouseDown),document.getElementById("app-container").addEventListener("mouseup",this.handleMouseUp)},removeListeners(){document.getElementById("app-container").removeEventListener("mousemove",this.handleMouseMove),document.getElementById("app-container").removeEventListener("mousedown",this.handleMouseDown),document.getElementById("app-container").removeEventListener("mouseup",this.handleMouseUp)},componentDidUpdate(e){e.enabledControl!=this.props.enabledControl&&(this.props.enabledControl?this.addListeners():this.removeListeners())},handleMouseMove(e){const t=document.getElementById("app-container").offsetHeight,n=document.getElementById("app-container").offsetWidth;EASEL.projectUpdatesBroadcaster.broadcastUpdate({mousePosition:{x:e.x/n,y:e.y/t}},"mouse")},handleMouseDown(){EASEL.projectUpdatesBroadcaster.broadcastUpdate({mouseDown:!0},"mouse")},handleMouseUp(){EASEL.projectUpdatesBroadcaster.broadcastUpdate({mouseDown:!1},"mouse")},render(){if(!this.props.mousePosition)return null;const e=document.getElementById("app-container").offsetHeight,t=document.getElementById("app-container").offsetWidth,n=this.props.mousePosition.x*t-10,a=this.props.mousePosition.y*e-10;return React.createElement("div",{className:"mouse-indicator "+(this.props.mouseDown?"mouse-indicator--down":""),style:{left:n,top:a}})}})},function(e,t){EASEL.component.numberInput=createReactClass({propTypes:{id:PropTypes.string,min:PropTypes.number.isRequired,max:PropTypes.number.isRequired,size:PropTypes.string.isRequired,initialValue:PropTypes.number.isRequired,onChange:PropTypes.func.isRequired},getInitialState(){return{value:this.props.initialValue}},componentWillReceiveProps(e){this.setState({value:e.initialValue})},onChange(e){const t=e.target.value;this.setState({value:t});const n=parseFloat(t);isNaN(n)||this.props.onChange(n)},render(){return React.createElement("input",{type:"number",className:null!=this.props.className?this.props.className:"form-control",min:this.props.min,max:this.props.max,size:this.props.size,id:this.props.id,onChange:this.onChange,value:this.state.value})}})},function(e,t){EASEL.component.pageTitle=EASEL.redux.connect({mapStateToProps:function(e){const{projectName:t,percentComplete:n}=e.jobStatus;return{projectName:t,percentComplete:n}},component:createReactClass({componentDidMount(){EASEL.projectMetadataStore.addChangeListener(this.setPageTitle),EASEL.machineStateStore.addChangeListener(this.setPageTitle)},componentWillUnmount(){EASEL.projectMetadataStore.removeChangeListener(this.setPageTitle),EASEL.machineStateStore.removeChangeListener(this.setPageTitle)},setPageTitle(){const e=EASEL.projectMetadataStore.getName(),t=this.props.percentComplete,n=this.props.projectName,a=EASEL.machineStateStore.getConnectionState();let r=e?`Easel - ${e}`:"Easel";return t&&["paused","running"].includes(a)&&(r=`${r} - (Carving ${n}, ${t.toFixed(0)}% completed)`),document.title=r},render:()=>React.createElement("div",null)})})},function(e,t){EASEL.component.postCarveModal=createReactClass({componentDidMount(){EASEL.flux.events.addListener("ended-job",this.show)},componentWillUnmount(){EASEL.flux.events.removeListener("ended-job",this.show)},getInitialState:()=>({open:!1,errorData:null}),show(e){this.setState({open:!0,errorData:e})},close(){this.setState({open:!1})},render(){let e;switch(EASEL.carvingInfo.data().postCarveModal){case"planing":e=EASEL.component.postPlaningModal;break;default:e=EASEL.component.jobStatus}return React.createElement("div",null,React.createElement(e,{open:this.state.open,errorData:this.state.errorData,close:this.close}))}})},function(e,t){EASEL.component.preProjectWrapper=createReactClass({render(){return React.createElement("div",null,React.createElement(EASEL.component.projectWrapper,{userEmail:this.props.email,logoutPath:"/logout"}),React.createElement(EASEL.component.alertModal,null))}})},function(e,t){EASEL.component.problemSymptomDetails=createReactClass({propTypes:{icon:PropTypes.string.isRequired,title:PropTypes.string.isRequired,formattedDescription:PropTypes.string.isRequired,possibleCauses:PropTypes.array.isRequired,troubleshootingFeedback:PropTypes.array.isRequired,onSubmitFeedback:PropTypes.func.isRequired},getInitialState(){return{selectedPossibleCause:this.props.possibleCauses[0]}},selectPossibleCause(e){const t=this.props.possibleCauses[e];this.setState({selectedPossibleCause:t})},deselect(){this.props.onDeselect()},render(){return React.createElement("div",{className:"container-fluid problem-content"},React.createElement(EASEL.component.a,{"data-action":"Back",className:"back-btn",onClick:this.deselect},React.createElement("i",{className:"fa fa-chevron-left"})),React.createElement("div",{className:"row problem-header"},React.createElement("div",{className:"col-md-2"},React.createElement("img",{src:this.props.icon})),React.createElement("div",{className:"col-md-10"},React.createElement("h3",null,this.props.title),React.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.formattedDescription}}))),0===this.props.possibleCauses.length?React.createElement("div",{className:"row problem-body no-details"},React.createElement("p",null,"There are currently no troubleshooting details for this problem in our database."),React.createElement("p",null,"We recommend visiting our ",React.createElement("a",{href:"https://www.inventables.com/support"},"support center"),", or looking for help in ",React.createElement("a",{href:"https://www.inventables.com/forum"},"our forum"),".")):React.createElement("div",{className:"row problem-body"},React.createElement("div",{className:"col-md-4"},React.createElement("h3",null,"Potential Causes"),React.createElement("ol",{className:"possible-causes"},this.props.possibleCauses.map(((e,t)=>{const n=`possible-cause-${e.id}`,a=e===this.state.selectedPossibleCause?"active":"";return React.createElement("li",{key:n,id:n,className:a,onClick:this.selectPossibleCause.bind(this,t)},e.description)})))),React.createElement("div",{className:"col-md-8"},React.createElement("h3",null,"Troubleshooting steps"),React.createElement(EASEL.component.troubleshootingContent,{troubleshootingPaths:this.state.selectedPossibleCause.visible_troubleshooting_paths,submittedFeedbackIds:this.props.troubleshootingFeedback,onSubmitFeedback:this.props.onSubmitFeedback}))))}})},function(e,t){EASEL.component.problemSymptomPicker=createReactClass({propTypes:{problemSymptoms:PropTypes.array.isRequired,onSelect:PropTypes.func.isRequired,trackProblemSymptomClick:PropTypes.func.isRequired},selectProblemSymptom(e){this.props.onSelect(e),this.props.trackProblemSymptomClick(e)},render(){return React.createElement("div",{className:"row"},this.props.problemSymptoms.map((e=>React.createElement("div",{id:`problem-symptom-${e.id}`,key:`problem-symptom-${e.id}`,onClick:this.selectProblemSymptom.bind(this,e.id),className:"col-md-2 issue"},React.createElement("div",{className:"problem-symptom-icon"},React.createElement("img",{src:e.icon})),React.createElement("div",{className:"caption"},React.createElement("h5",null,e.title))))))}})},function(e,t){EASEL.profileControls=createReactClass({mixins:[EASEL.pointDraggingMixin],onPathChange(e){this.props.onChangeProfileSettings({path:e})},onChangeWidth(e){const t=EASEL.units.inchesPerUnit(this.props.unit)*e;this.props.onChangeProfileSettings({width:t})},widthControl(){const e=EASEL.units.unitsPerInch(this.props.unit)*this.props.profileSettings.width,t="in"===this.props.unit?3:2;return React.createElement("div",{className:"form-group"},this.popover(),React.createElement("label",{htmlFor:"profile-width",id:"profile-width-label",className:"control-label",style:{width:"35px"}},"Width"),React.createElement(EASEL.component.utils.dimensionalInput,{value:e,unit:this.props.unit,showUnit:!0,precision:t,id:"profile-width",onChange:this.onChangeWidth}))},controls(){if(this.props.useProfile)return React.createElement("div",null,React.createElement(EASEL.profileEditor,{onPathChange:this.onPathChange,path:this.props.profileSettings.path}),this.widthControl())},popover(){const e=React.createElement(ReactBootstrap.Popover,{id:"profile-carving-width-pop-over"},React.createElement("p",null,"Fills: Width of the profile from the edge of your shape, towards the center of the shape"),React.createElement("p",null,"Stroke: Width of the profile from the edge of your shape, towards outwards"));return React.createElement(ReactBootstrap.OverlayTrigger,{trigger:"hover",placement:"left",overlay:e},React.createElement("b",null,React.createElement("i",{className:"fa fa-question-circle-o",style:{fontSize:"12px",marginRight:"4px"}})))},render(){return React.createElement("div",{id:"profile-controls",className:"form-group tabs-input"},React.createElement("label",{htmlFor:"use-profiles"},React.createElement("input",{id:"use-profiles",type:"checkbox",checked:this.props.useProfile,onChange:this.props.onChangeUseProfile}),"3D Profile"),this.controls())}})},function(e,t){EASEL.profileEditor=createReactClass({propTypes:{path:PropTypes.array.isRequired,onPathChange:PropTypes.func.isRequired},getInitialState:()=>({isDragging:!1}),mixins:[EASEL.pointDraggingMixin],componentDidMount(){this.addDragHandler(this.dragHandler)},dragHandler(e,t,n){const a=Number(n.getAttribute("data-index")),r=n.getAttribute("data-handle");if((0===a||a===this.props.path.length-1)&&!r)return;const o=document.getElementById("profile-path").getBoundingClientRect(),s=e/o.width,i=t/o.height,l=this.props.path.map(((e,t)=>(t===a&&("lh"===r?(e.lh.x=EASEL.math.clamp(e.lh.x+s+e.x,0,1)-e.x,e.lh.y=EASEL.math.clamp(e.lh.y-i+e.y,0,1)-e.y):"rh"===r?(e.rh.x=EASEL.math.clamp(e.rh.x+s+e.x,0,1)-e.x,e.rh.y=EASEL.math.clamp(e.rh.y-i+e.y,0,1)-e.y):(e.x=EASEL.math.clamp(e.x+s,0,1),e.y=EASEL.math.clamp(e.y-i,0,1))),e)));this.props.onPathChange(l)},circle:(e,t,n,a)=>React.createElement("circle",{r:"0.035",cx:e.x,cy:e.y,key:n,"data-index":t,"data-handle":a}),dashedLine:(e,t,n)=>React.createElement("line",{x1:e.x,y1:e.y,x2:t.x,y2:t.y,strokeDasharray:"2, 2",key:n}),render(){let e;const t=(()=>{const t=[];for(var n=0;n<this.props.path.length;n++){var a=this.props.path[n];const r=this.circle({x:a.x,y:a.y},n,`p${n}`),o=(()=>{if(a.lh)return e={x:a.x+a.lh.x,y:a.y+a.lh.y},[this.dashedLine(a,e,`dashed${n}`),this.circle(e,n,`lh${n}`,"lh")]})(),s=(()=>{if(a.rh)return e={x:a.x+a.rh.x,y:a.y+a.rh.y},[this.dashedLine(a,e,`dashed${n}`),this.circle(e,n,`rh${n}`,"rh")]})();t.push(React.createElement("g",{key:n},r,o,s))}return t})(),n=EASEL.svgPathBuilder.string([this.props.path]),a=this.state.isDragging?"dragging":"";return React.createElement("div",{id:"profile-editor",className:a},React.createElement("svg",{id:"profile-path",height:"120",width:"120",viewBox:"0 0 1 1"},React.createElement("g",{transform:"translate(0, 1) scale(1, -1) translate(0.05, 0.05) scale(0.9, 0.9)"},React.createElement("line",{x1:"0",y1:"0",x2:"0",y2:"1"}),React.createElement("line",{x1:"0",y1:"0",x2:"1",y2:"0"}),React.createElement("path",{d:n}),React.createElement("g",{onMouseDown:this.handleMouseDown},t))))}})},function(e,t){EASEL.component.projectListContainer=createReactClass({onSearchChange(e){this.props.setSearchQuery(e.target.value),this._debounceSearch()},_debounceSearch(){this.search||(this.search=EASEL.debounce(this._search,100)),this.search()},_search(){this.props.reloadProjects(this.props.search,{starred:this.props.starred,label_ids:this.getLabelIds()})},createProject(e){e.preventDefault(),this.props.createProject()},openProject(e){this.props.setSearchQuery(null),this.props.openProject(e)},deleteProject(e,t){this.props.deleteProject(this.props.search,{starred:this.props.starred,label_ids:this.getLabelIds()},e,t)},onScroll(e){if((null!=this.props.projects?this.props.projects.length:void 0)<this.props.count&&e.target.scrollTop>=e.target.scrollHeight-e.target.clientHeight-200&&!this.props.requesting)return this.props.loadPage(null!=this.props.projects?this.props.projects.length:void 0,this.props.search,{starred:this.props.starred,label_ids:this.props.filterLabels.map((e=>e.id))})},setListView(){this.props.setProjectListView("list")},setThumbView(){this.props.setProjectListView("thumbnail")},toggleStarFilter(){this.props.setStarFilter(!this.props.starred),this._debounceSearch()},getLabelIds(){return this.props.filterLabels?this.props.filterLabels.map((e=>e.id)):[]},setStarredProject(e,t,n){this.props.setStarredProject(e,t),this.props.starred&&!t&&this.props.removeProjectFromList(e),e===EASEL.projectMetadataStore.getLinkToken()?EASEL.projectMetadataActions.setStarred(t):EASEL.projectAPI.update(e,{project:{starred:t}}).fail((()=>{if(EASEL.oops(`There was a problem ${t?"starring":"unstarring"} project '${n}'.           Make sure you're connected to the Internet and try again.`),this.props.setStarredProject(e,!t),this.props.starred&&!t)return this.props.reloadProjects(this.props.search,{starred:!0,label_ids:this.getLabelIds()})}))},toggleFilterLabel(e){const t=this.props.filterLabels;t.map((e=>e.id)).includes(e.id)?t.splice(t.map((e=>e.id)).indexOf(e.id),1):t.push(e),this.props.setLabelsFilter(t),this.props.reloadProjects(this.props.search,{starred:this.props.starred,label_ids:this.getLabelIds()}),EASEL.stats.trackEventOnce(EASEL.events.projectLabelFiltered)},setFilterLabels(e){this.props.setLabelsFilter(e);const t=e.map((e=>e.id));this.props.reloadProjects(this.props.search,{starred:this.props.starred,label_ids:t}),EASEL.stats.trackEventOnce(EASEL.events.projectLabelFiltered)},compareProjects(e,t){const n="name"===this.props.sortValue?e[this.props.sortValue].toLowerCase():new Date(e[this.props.sortValue]).getTime(),a="name"===this.props.sortValue?t[this.props.sortValue].toLowerCase():new Date(t[this.props.sortValue]).getTime();return this.props.isAscendingSort?n<a?-1:n>a?1:0:n<a?1:n>a?-1:0},setSortValue(e){this.props.setSortValue(e.target.value)},toggleSortDirection(e){e.preventDefault(),e.stopPropagation(),this.props.setSortDirection(!this.props.isAscendingSort)},options:[{text:"Date",value:"sortDate"},{text:"Name",value:"name"}],showTemplatesTab(){EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalTemplatesTab())},render(){const{isProUser:e,areProjectTemplatesDismissed:t,areProjectTemplatesDismissedFirstTime:n}=this.props;let a="",r="",o=null;if("list"===this.props.view?(a="active",o=EASEL.component.projectThumbnailList):(r="active",o=EASEL.component.projectThumbnailView),null!=this.props.projectLoadingError&&0===this.props.projects.length)return React.createElement("div",{className:"project-list-container__error"},React.createElement("i",{className:"fa fa-warning"}),React.createElement("div",{className:"project-list-container__error-msg"},this.props.projectLoadingError));if(null!=this.props.projects){const s=EASEL.labelStore.getLabels(),i=s?s.map((e=>({value:e.id,label:e.name,id:e.id}))):[];return React.createElement("div",{className:"project-list-container",onScroll:this.onScroll},React.createElement("div",{className:"search-bar"},React.createElement("div",{id:"project-list-search"},React.createElement("input",{className:"form-control",name:"Search",type:"text",placeholder:"Search\u2026",onChange:this.onSearchChange})),e&&React.createElement("div",{className:"sort-filter-bar"},React.createElement(ReactSelect.default,{name:"label-input-combined-field",className:"project-list-container__search-labels",classNamePrefix:"project-list-container__search-labels",options:i,value:this.props.filterLabels,onChange:this.setFilterLabels,isMulti:!0,placeholder:"Filter by label...",closeMenuOnSelect:!1})),React.createElement("button",{className:"btn btn-default "+(this.props.starred?"active":""),id:"thumbnail-star-filter",onClick:this.toggleStarFilter},React.createElement("i",{className:"fa fa-"+(this.props.starred?"star":"star-o")})," Starred"),React.createElement("div",{className:"btn-group",role:"group"},React.createElement("button",{className:`btn btn-default ${a}`,id:"thumbnail-list-button",onClick:this.setListView},React.createElement("span",{className:"fa fa-th-list"})),React.createElement("button",{className:`btn btn-default ${r}`,id:"thumbnail-view-button",onClick:this.setThumbView},React.createElement("span",{className:"fa fa-th-large"}))),e&&React.createElement("div",{className:"btn-group",role:"group"},React.createElement("select",{className:`btn btn-default ${a}`,id:"thumbnail-list-sort-select",onChange:this.setSortValue},this.options.map(((e,t)=>React.createElement("option",{key:t,className:"thumbnail-list-sort-select-option",value:e.value},e.text)))),React.createElement("button",{className:"btn",id:"thumbnail-sort-button",onClick:this.toggleSortDirection},React.createElement("i",{className:this.props.isAscendingSort?"fa fa-sort-amount-asc":"fa fa-sort-amount-desc"})))),React.createElement("div",{className:"project-list-container__scroller"},!t&&React.createElement(React.Fragment,null,React.createElement(EASEL.component.projectTemplatesSingleRow,null),React.createElement("h2",{className:"project-list-header"},"My Projects")),n&&React.createElement("p",{className:"project-templates-single-row-alert alert alert-success"},"Project templates row is now hidden. If you want to see the templates again they are in the top tab under ",React.createElement(EASEL.component.a,{onClick:this.showTemplatesTab},"Templates"),"."),React.createElement(o,{projects:this.props.projects,filterLabels:this.props.filterLabels,onOpenProject:this.openProject,onDeleteProject:this.deleteProject,onSetStarredProject:this.setStarredProject,onToggleFilterLabel:this.toggleFilterLabel,onCompareProjects:this.compareProjects,isProUser:e}),this.props.projects.length<this.props.count||this.props.requesting&&React.createElement("span",{style:{opacity:this.props.requesting?1:0}},React.createElement(EASEL.component.spinner,{size:25}))))}return React.createElement(EASEL.component.spinner,{size:25})}})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.projectListItem=createReactClass({propTypes:{name:PropTypes.string.isRequired,linkToken:PropTypes.string.isRequired,image:PropTypes.string,starred:PropTypes.bool,removing:PropTypes.bool,date:PropTypes.string.isRequired,labels:PropTypes.arrayOf(PropTypes.shape({name:PropTypes.string.isRequired,id:PropTypes.number.isRequired})).isRequired,onOpenProject:PropTypes.func.isRequired,onDeleteProject:PropTypes.func.isRequired,onSetStarredProject:PropTypes.func.isRequired,onToggleFilterLabel:PropTypes.func.isRequired},onOpenProject(){this.props.onOpenProject(this.props.linkToken)},onDeleteProject(e){e.preventDefault(),e.stopPropagation(),this.props.onDeleteProject(this.props.linkToken,this.props.name)},onToggleStarred(e){e.preventDefault(),e.stopPropagation(),this.props.onSetStarredProject(this.props.linkToken,!this.props.starred,this.props.name)},render(){const{isProUser:e}=this.props;return React.createElement(EASEL.component.a,{key:this.props.linkToken,"data-token":this.props.linkToken,className:"project-thumbnail-list__item "+(this.props.removing?"project-thumbnail-list__item--deleting":""),onClick:this.onOpenProject},React.createElement("i",{className:"fa fa-"+(this.props.starred?"star":"star-o"),onClick:this.onToggleStarred}),React.createElement("img",{className:"project-thumbnail-list__item__thumbnail",src:this.props.image||EASEL.assets.images.grayEasel}),React.createElement("div",{className:"project-thumbnail-list__item__metadata"},React.createElement("h4",{className:"project-thumbnail-list__item__metadata__title"},this.props.name),e&&React.createElement(EASEL.component.labelList,((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({},this.props)),React.createElement("p",{className:"project-thumbnail-list__item__metadata__time small"},this.props.date)),React.createElement("i",{className:"fa fa-trash project-delete",onClick:this.onDeleteProject}))}})},function(e,t){EASEL.component.projectSharingModal=createReactClass({getInitialState:()=>({open:!1,shared:EASEL.projectMetadataStore.isShared(),projectName:EASEL.projectMetadataStore.getName()}),componentDidMount(){EASEL.flux.events.addListener("show-project-sharing-modal",this.open)},componentWillUnmount(){EASEL.flux.events.removeListener("show-project-sharing-modal",this.open)},open(e){EASEL.stats.trackEvent("Opened Sharing Project Modal",{source:e}),this.setState({open:!0,shared:EASEL.projectMetadataStore.isShared()})},close(){this.setState({open:!1})},save(){EASEL.projectMetadataActions.setShared(this.state.shared);const e=this.state.shared?"Made project public":"Made project private";EASEL.stats.trackEvent(e)},setLinkPrivacy(e){this.setState({shared:e},this.save)},onClickIcon(e){EASEL.stats.trackEvent("Share project",{source:e})},render(){const{open:e,shared:t}=this.state;return React.createElement(ReactBootstrap.Modal,{show:e,onHide:this.close,className:"project-sharing-modal"},React.createElement(ReactBootstrap.Modal.Header,null,React.createElement(ReactBootstrap.Modal.Title,null,"Sharing")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("strong",null,"Project Link Settings"),React.createElement("div",{key:"project-private",className:"project-sharing-modal__option "+(t?"":"project-sharing-modal__option--selected"),onClick:()=>this.setLinkPrivacy(!1)},React.createElement("input",{id:"project-private",type:"radio",value:!1,checked:!1===t,readOnly:!0}),React.createElement("i",{className:"fa fa-lock"}),React.createElement("label",{htmlFor:"project-private"},"Private",React.createElement("p",null,"You are the only one who can view this project."))),React.createElement("div",{key:"project-unlisted",className:"project-sharing-modal__option "+(t?"project-sharing-modal__option--selected":""),onClick:()=>this.setLinkPrivacy(!0)},React.createElement("div",{className:"project-sharing-modal__flex"},React.createElement("input",{id:"project-unlisted",type:"radio",value:!0,checked:!0===t,readOnly:!0}),React.createElement("i",{className:"fa fa-globe"}),React.createElement("label",{htmlFor:"project-unlisted"},"Unlisted",React.createElement("p",null,"Anyone with this link can open your project in Easel for customizing or carving."))),t&&React.createElement(EASEL.component.copyLink,{link:window.location.href,renderLink:!0})),React.createElement("hr",null),React.createElement("div",{className:"project-sharing-modal__flex"},React.createElement("strong",null,"Share on Social"),React.createElement(EASEL.component.socialSharing,{emailLink:`mailto:?subject=Look what I made in Easel!&body=Check out my project ${window.location.href}`,fbParams:`?t=${this.props.projectName}&u=${window.location.href}`,onClickIcon:this.onClickIcon}))),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement(ReactBootstrap.Button,{bsStyle:"default",onClick:this.close},"Close")))}})},function(e,t){EASEL.component.projectStatusBanner=createReactClass({getInitialState:()=>({message:null,flashMessage:null,flashTimeout:null}),componentDidMount(){EASEL.flux.events.addListener("set-project-status",this.updateStatus),EASEL.flux.events.addListener("flash-project-status",this.flashStatus)},componentWillUnmount(){clearTimeout(this.state.flashTimeout),EASEL.flux.events.removeListener("set-project-status",this.updateStatus),EASEL.flux.events.removeListener("flash-project-status",this.flashStatus)},updateStatus(e){clearTimeout(this.state.flashTimeout),this.setState({message:e,flashMessage:null,flashTimeout:null})},flashStatus(e){clearTimeout(this.state.flashTimeout),this.setState({flashMessage:e,flashTimeout:setTimeout((()=>this.clearFlashStatus()),4e3)})},clearFlashStatus(){this.setState({flashMessage:null,flashTimeout:null})},closeBanner(){this.setState({message:null}),this.clearFlashStatus()},render(){const e=this.state.flashMessage||this.state.message;return React.createElement("div",{className:"project-status-banner "+(null!=e?"show":"hide")},React.createElement("div",null,e),null!=this.state.message&&React.createElement("button",{className:"project-status-banner__close","aria-label":"Close",onClick:this.closeBanner},"\xd7"))}})},function(e,t){EASEL.component.projectThumbnail=createReactClass({propTypes:{name:PropTypes.string.isRequired,linkToken:PropTypes.string.isRequired,image:PropTypes.string,readOnly:PropTypes.bool,starred:PropTypes.bool,subtitle:PropTypes.string,labels:PropTypes.arrayOf(PropTypes.shape({name:PropTypes.string.isRequired,id:PropTypes.number.isRequired})),removing:PropTypes.bool,date:PropTypes.string,onOpenProject:PropTypes.func,onDeleteProject:PropTypes.func,onSetStarredProject:PropTypes.func,onToggleFilterLabel:PropTypes.func},onOpenProject(){this.props.onOpenProject(this.props.linkToken)},onDeleteProject(e){e.preventDefault(),e.stopPropagation(),this.props.onDeleteProject(this.props.linkToken,this.props.name)},onToggleStarred(e){e.preventDefault(),e.stopPropagation(),this.props.onSetStarredProject(this.props.linkToken,!this.props.starred,this.props.name)},render(){const{removing:e,linkToken:t,readOnly:n,image:a,name:r,date:o,subtitle:s,starred:i,labels:l,filterLabels:c,onToggleFilterLabel:p,isProUser:u}=this.props,d=u&&l&&l.length>0&&React.createElement(EASEL.component.labelList,{labels:l,filterLabels:c,onToggleFilterLabel:p});return React.createElement(EASEL.component.a,{className:"project-thumbnail "+(e?"deleting":""),"data-token":t,key:t,onClick:this.onOpenProject},!n&&React.createElement("i",{className:"fa fa-trash thumbnail-project-delete project-delete",onClick:this.onDeleteProject}),React.createElement("div",{className:"project-thumbnail__caption"},React.createElement("img",{src:a||EASEL.assets.images.grayEasel,alt:r}),React.createElement("div",{className:"project-thumbnail__caption__details"},React.createElement("div",{className:"project-thumbnail__caption__details__text"},r,d,React.createElement("p",{className:"project-thumbnail__caption__subtext"},o||s)),!n&&React.createElement("div",{className:"project-thumbnail__caption__details__icons"},React.createElement("i",{className:"fa fa-"+(i?"star":"star-o"),"data-action":"toggleStar",onClick:this.onToggleStarred})))))}})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.projectThumbnailList=createReactClass({propTypes:{projects:PropTypes.arrayOf(PropTypes.shape({name:PropTypes.string.isRequired,linkToken:PropTypes.string.isRequired,date:PropTypes.string.isRequired})).isRequired,onOpenProject:PropTypes.func.isRequired,onDeleteProject:PropTypes.func.isRequired,onToggleFilterLabel:PropTypes.func.isRequired,onCompareProjects:PropTypes.func.isRequired},render(){const{isProUser:e}=this.props,t=this.props.projects.sort(this.props.onCompareProjects);return React.createElement("div",{className:"project-thumbnail-list",id:"project-list"},t.map(((t,n)=>React.createElement(EASEL.component.projectListItem,((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({key:n},EASEL.shallowMerge(t,{filterLabels:this.props.filterLabels,onOpenProject:this.props.onOpenProject,onDeleteProject:this.props.onDeleteProject,onSetStarredProject:this.props.onSetStarredProject,onToggleFilterLabel:this.props.onToggleFilterLabel,isProUser:e}))))))}})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.projectThumbnailView=createReactClass({propTypes:{projects:PropTypes.arrayOf(PropTypes.shape({id:PropTypes.number,name:PropTypes.string.isRequired,linkToken:PropTypes.string.isRequired,image:PropTypes.string,starred:PropTypes.bool,removing:PropTypes.bool,date:PropTypes.string.isRequired})).isRequired,onOpenProject:PropTypes.func.isRequired,onDeleteProject:PropTypes.func.isRequired,onSetStarredProject:PropTypes.func.isRequired,onToggleFilterLabel:PropTypes.func.isRequired,onCompareProjects:PropTypes.func.isRequired,isProUser:PropTypes.bool},render(){const{isProUser:e}=this.props,t=this.props.projects.sort(this.props.onCompareProjects);return React.createElement("div",{className:"thumbnail-container"},t.map(((t,n)=>React.createElement(EASEL.component.projectThumbnail,((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({key:n},EASEL.shallowMerge(t,{filterLabels:this.props.filterLabels,onOpenProject:this.props.onOpenProject,onDeleteProject:this.props.onDeleteProject,onSetStarredProject:this.props.onSetStarredProject,onToggleFilterLabel:this.props.onToggleFilterLabel,isProUser:e}))))))}})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.projectWrapper=createReactClass({dismissBrowserWarning(){return Cookies.set("browser-deprecation-acknowledged",!0,{expires:30}),this.forceUpdate()},isIE:()=>null!=window.navigator.userAgent.match(/msie|trident/i),showBrowserWarning(){const e=Cookies.get("browser-deprecation-acknowledged");return this.isIE()&&!e},render(){return this.showBrowserWarning()?React.createElement(EASEL.component.browserWarning,{dismissBrowserWarning:this.dismissBrowserWarning}):React.createElement(EASEL.component.userModal,((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({},this.props))}})},function(e,t){EASEL.component.propertyButton=createReactClass({render(){const{selected:e,disabled:t,onClick:n,children:a}=this.props,r=["property-button"];return e&&r.push("property-button--selected"),t&&r.push("property-button--disabled"),t?React.createElement("div",{className:r.join(" ")},a):React.createElement(EASEL.component.a,{onClick:n,className:r.join(" ")},a)}})},function(e,t){EASEL.component.socialSharing=createReactClass({propTypes:{copyLink:PropTypes.string,fbParams:PropTypes.string,emailLink:PropTypes.string,externalLink:PropTypes.string,onClickIcon:PropTypes.func.isRequired},getInitialState:()=>({showCopied:!1}),render(){const{copyLink:e,emailLink:t,externalLink:n,fbParams:a}=this.props;return React.createElement("div",null,a&&React.createElement(EASEL.component.iconLink,{className:"social-sharing__link-icon",link:`https://www.facebook.com/sharer/sharer.php${a}`,tooltipText:"Share on Facebook",id:"facebook-share-tooltip",icon:"facebook-square",onClickIcon:()=>this.props.onClickIcon("facebook")}),e&&React.createElement(EASEL.component.copyLink,{className:"social-sharing__link-icon",link:e,onClick:()=>this.props.onClickIcon("copy")}),t&&React.createElement(EASEL.component.iconLink,{className:"social-sharing__link-icon",link:t,tooltipText:"Email Link",id:"email-share-tooltip",icon:"envelope-o",onClickIcon:()=>this.props.onClickIcon("email")}),n&&React.createElement(EASEL.component.iconLink,{className:"social-sharing__link-icon",link:n,tooltipText:"Open in Tab",id:"external-link-tooltip",icon:"external-link",onClickIcon:()=>this.props.onClickIcon("external")}))}})},function(e,t){EASEL.component.spindleSetting=createReactClass({propTypes:{automaticSpindleControl:PropTypes.bool.isRequired,machineType:PropTypes.string.isRequired,spindleRPM:PropTypes.number.isRequired,spindleType:PropTypes.string.isRequired,onSpindleControlChange:PropTypes.func.isRequired,onSpindleRPMChange:PropTypes.func.isRequired},render(){const e=this.props.automaticSpindleControl?"automatic":"manual";let t=null;return EASEL.machineTypeHelper.supportsSpindleSpeed(this.props.machineType,this.props.spindleType,this.props.automaticSpindleControl)&&(t=React.createElement("div",{className:"settings-panel__item"},React.createElement("label",{className:"control-label",htmlFor:"rpm-input"},"Default RPM\xa0",React.createElement(ReactBootstrap.OverlayTrigger,{placement:"bottom",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"spindle-rpm-tooltip"},"Set the spindle's RPM.  If you are unsure about this value, leave the default value (12000).")},React.createElement("i",{className:"fa fa-question-circle"}))),React.createElement("div",null,React.createElement(EASEL.component.textInput,{initialValue:this.props.spindleRPM.toFixed(),submit:this.props.onSpindleRPMChange,id:"rpm-input"})))),React.createElement("div",null,React.createElement("div",{className:"settings-panel__item"},React.createElement("label",{className:"control-label",htmlFor:"spindle-control"},"Spindle Control\xa0",React.createElement(ReactBootstrap.OverlayTrigger,{placement:"top",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"spindle-control-tooltip"},"Automatic: Set RPM in Easel. Manual: External RPM control.")},React.createElement("i",{className:"fa fa-question-circle"}))),React.createElement("div",null,React.createElement("select",{className:"form-control",id:"spindle-control",value:e,onChange:this.props.onSpindleControlChange},React.createElement("option",{value:"manual"},"Manual"),React.createElement("option",{value:"automatic"},"Automatic")))),t)}})},function(e,t){EASEL.component.svgImportError=createReactClass({getInitialState:()=>({show:!1,callback:null,title:null,body:null}),componentDidMount(){EASEL.flux.events.addListener("show-svg-error",this.showModal)},componentWillUnmount(){EASEL.flux.events.removeListener("show-svg-error")},showModal(e,t,n){this.setState({show:!0,title:e,body:n,callback:t})},hideModal(){this.setState({show:!1})},import(){this.hideModal(),this.state.callback()},render(){return this.state.show?React.createElement(ReactBootstrap.Modal,{show:this.state.show,onHide:this.hideModal},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,React.createElement("h3",null,this.state.title))),React.createElement(ReactBootstrap.Modal.Body,null,this.state.body),this.state.callback&&React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement("button",{className:"btn btn-primary",onClick:this.import},"Import Anyway"),React.createElement("button",{className:"btn",onClick:this.hideModal},"Cancel"))):null}}),EASEL.component.svgImportError.showText=e=>{const t=React.createElement("p",null,"Easel does not support importing SVG text. You can still import your text if you do the following:",React.createElement("ul",null,React.createElement("li",null,React.createElement("h4",null,"Adobe Illustrator"),"Select all objects and select ",React.createElement("em",null,"Object -> Expand")),React.createElement("li",null,React.createElement("h4",null,"Inkscape"),"Select all objects and use the keyboard command ",React.createElement("em",null,"Ctrl+Shift+C")),React.createElement("li",null,React.createElement("h4",null,"Other programs"),"Convert your text into paths. If there is an equivalent to 'Create Outlines' or 'Expand', that is what you're looking for.")));EASEL.flux.events.emit("show-svg-error","Easel can't import SVG text",e,t)},EASEL.component.svgImportError.showGeneric=(e,t)=>{const n=React.createElement("div",null,React.createElement("p",null,e),React.createElement("p",null,"Read our ",React.createElement(EASEL.component.a,{href:"https://inventables.zendesk.com/hc/en-us/articles/360012642454-SVG-Import-Guide"},"SVG Import Guide")," for more help, or try the following steps:"),React.createElement("ul",null,React.createElement("li",null,React.createElement("h4",null,"Remove Images"),"Only vectors are importable. Try to remove any raster or image objects from your SVG."),React.createElement("li",null,React.createElement("h4",null,"Remove Gradients and Clip Paths"),"Only solid stroke and fill colors are supported. Advanced effects like clipping paths and gradients will not import correctly."),React.createElement("li",null,React.createElement("h4",null,"Export using SVG \u201cTiny\u201d"),"To get the best results, select \u201cSVG Tiny\u201d or \u201cSVG Basic\u201d when exporting from your editor. Do not use \u201cSVG 2.0\u201d")));EASEL.flux.events.emit("show-svg-error","Easel can't import part of this SVG",t,n)}},function(e,t){EASEL.component.toolpathAnimationControls=createReactClass({toggleRunning(e){return e.preventDefault(),this.props.running?this.props.stopAnimation():this.props.currentFrame===this.props.totalFrames?this.props.resetAndStartAnimation():this.props.startAnimation()},onUpdateSpeedMultiplier(e,t){e.preventDefault(),this.props.setSpeedMultiplier(Math.pow(2,t))},onUpdateFrame(e){const t=e.target.value;this.props.setFrame(parseInt(t))},onSkipToEnd(){this.props.setFrame(this.props.totalFrames)},onSkipToStart(){this.props.setFrame(0)},render(){if(null==this.props.totalFrames||null==this.props.currentFrame)return null;const e=Math.log(this.props.speedMultiplier)/Math.log(2);let t="";const n=this.props.gcodePasses.map((e=>e.timeEstimate));return this.props.showTimeEstimates&&(t=n.map(EASEL.utility.timeFormatter.durationFromMinutes)),React.createElement("div",{className:"animation-controls"},React.createElement("div",{className:"animation-controls__play"},React.createElement("button",{className:"btn btn-primary fa "+(this.props.running?"fa-pause":"fa-play"),onClick:this.toggleRunning,disabled:!this.props.toolpathsVisible})),React.createElement("div",{className:"animation-controls__speed"},React.createElement("button",{onClick:t=>this.onUpdateSpeedMultiplier(t,e-1),className:"btn btn-primary fa fa-minus",disabled:e<=-2||!this.props.toolpathsVisible}),React.createElement("span",null,this.props.speedMultiplier>=1?`${this.props.speedMultiplier.toFixed(0)}x`:`1/${(1/this.props.speedMultiplier).toFixed(0)}x`),React.createElement("button",{onClick:t=>this.onUpdateSpeedMultiplier(t,e+1),className:"btn btn-primary fa fa-plus",disabled:e>=5||!this.props.toolpathsVisible})),React.createElement("div",{className:"animation-controls__frame"},React.createElement("button",{onClick:this.onSkipToStart,className:"btn btn-primary fa fa-fast-backward",disabled:!this.props.toolpathsVisible}),React.createElement("input",{type:"range",name:"animation_controls",className:"animation-controls__slider",min:0,max:this.props.totalFrames,value:this.props.currentFrame,onChange:this.onUpdateFrame,disabled:!this.props.toolpathsVisible}),React.createElement("button",{onClick:this.onSkipToEnd,className:"btn btn-primary fa fa-fast-forward",disabled:!this.props.toolpathsVisible})),React.createElement("div",{className:"toolpath-preview-controls"},this.props.showTimeEstimates&&React.createElement("div",{className:"toolpath-preview-controls__time"},React.createElement("i",{className:"fa fa-lg fa-clock-o"}," "),React.createElement("span",null," ",t.join(" + ")))))}})},function(e,t){EASEL.component.troubleshootingContent=createReactClass({propTypes:{troubleshootingPaths:PropTypes.array.isRequired,submittedFeedbackIds:PropTypes.array.isRequired,onSubmitFeedback:PropTypes.func.isRequired},onSubmitFeedback(e,t){this.props.onSubmitFeedback(e,t)},getActionSteps:e=>e.visible_action_steps.map((e=>{if(!e.hidden)return React.createElement("li",{key:`action-step-${e.id}`,dangerouslySetInnerHTML:{__html:e.formatted_description}})})),getFeedbackComponent(e){let t;const n={};for(t of this.props.submittedFeedbackIds)n[t]=!0;return n[e]?React.createElement("div",null):React.createElement(EASEL.component.feedbackPrompt,{message:"Was this helpful?",onClickYes:this.onSubmitFeedback.bind(this,e,!0),onClickNo:this.onSubmitFeedback.bind(this,e,!1)})},render(){const{troubleshootingPaths:e}=this.props,t=e.map(((e,t)=>React.createElement("div",{id:`troubleshooting-path-${e.id}`,className:"troubleshooting-path",key:`troubleshooting-path-${t}`},React.createElement("h4",{dangerouslySetInnerHTML:{__html:e.formatted_description}}),React.createElement("ol",null,this.getActionSteps(e)),this.getFeedbackComponent(e.id))));return React.createElement("div",{className:"troubleshooting-content"},t)}})},function(e,t){EASEL.component.troubleshootingModalContentComponent=createReactClass({propTypes:{error:PropTypes.object,errorInfo:PropTypes.object,close:PropTypes.func},getInitialState(){EASEL.troubleshooting.ensureTroubleshootingData();const{error:e,errorInfo:t}=this.props,n=EASEL.websocketMessageStore.getWebsocketMessages(),a=EASEL.websocketMessageStore.hasDetectedGarbledMessage();return EASEL.websocketMessageActions.clearWebsocketMessages(),{formVisible:null,project:t.project,jobSettings:t.jobSettings,savedData:t.savedData,error:e,gcode:t.gcode,isExternalGcode:t.isExternalGcode,machineSettings:EASEL.machineStateStore.getSettings().join("\n"),small:!1,connectionLog:n,detectedGarbledMessage:a,errorData:null}},showForm(){this.setState({formVisible:!0})},hideForm(){this.setState({formVisible:null})},trackFeedback(e,t){this.props.addTroubleshootingFeedback(this.props.selectedProblemSymptom.id,e,t)},render(){if(null==this.props.problemSymptoms||null==this.props.troubleshootingFeedback)return React.createElement(EASEL.component.spinner,null);if(null!=this.state.formVisible)return React.createElement(EASEL.component.errorReportForm,{key:this.state.formVisible,project:this.state.project,jobSettings:this.state.jobSettings,savedData:this.state.savedData,error:this.state.error,isExternalGcode:this.state.isExternalGcode,gcode:this.state.gcode,machineSettings:this.state.machineSettings,onClose:this.props.close,hideForm:this.hideForm,machineType:this.props.machineType,connectionLog:this.state.connectionLog,detectedGarbledMessage:this.state.detectedGarbledMessage});if(null!=this.props.selectedProblemSymptom){const e=this.props.selectedProblemSymptom.visible_possible_causes.slice().filter((e=>e.machine_type===this.props.machineType||"all"===e.machine_type));return React.createElement(EASEL.component.problemSymptomDetails,{icon:this.props.selectedProblemSymptom.icon,title:this.props.selectedProblemSymptom.title,formattedDescription:this.props.selectedProblemSymptom.formatted_description,possibleCauses:e,onDeselect:()=>this.props.selectProblemSymptom(null),troubleshootingFeedback:this.props.troubleshootingFeedback,onSubmitFeedback:this.trackFeedback})}return React.createElement("div",null,React.createElement(EASEL.component.problemSymptomPicker,{problemSymptoms:this.props.problemSymptoms,onSelect:this.props.selectProblemSymptom,trackProblemSymptomClick:this.props.trackProblemSymptomClick}),React.createElement("button",{id:"view-error-form",onClick:this.showForm,className:"btn btn-primary btn-contact"},"Get help from Inventables"))}}),EASEL.component.troubleshootingModalContent=EASEL.redux.connect({component:EASEL.component.troubleshootingModalContentComponent,mapStateToProps:e=>({problemSymptoms:EASEL.troubleshootingSelectors.getProblemSymptoms(e),troubleshootingFeedback:EASEL.troubleshootingSelectors.getTroubleshootingFeedback(e),selectedProblemSymptom:EASEL.troubleshootingSelectors.getSelectedProblemSymptom(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e)}),mapDispatchToProps:e=>({addTroubleshootingFeedback(t,n,a){EASEL.troubleshootingAPI.postFeedback(t,n,a),e(EASEL.troubleshootingActionCreators.addTroubleshootingFeedback(n))},trackProblemSymptomClick(e){EASEL.troubleshootingAPI.postProblemSymptomMetric(e)},selectProblemSymptom(t){e(EASEL.troubleshootingActionCreators.setSelectedProblemSymptomID(t))}})})},function(e,t,n){const a=n(332);EASEL.component.troubleshootingModal=createReactClass({getInitialState:()=>({errorInfo:null,error:null,open:!1}),componentDidMount(){EASEL.flux.events.addListener("show-troubleshooting-modal",this.show)},componentWillUnmount(){EASEL.flux.events.removeListener("show-troubleshooting-modal",this.show)},show(e){EASEL.troubleshooting.ensureTroubleshootingData();const t=e.fromMenu?a.getDataForCurrentProject():a.getDataForLastCarve();this.setState(EASEL.merge(this.getInitialState(),{open:!0,error:e,errorInfo:t}))},close(){this.setState({open:!1})},render(){const e=this.state.open;return React.createElement(ReactBootstrap.Modal,{show:e,onHide:this.close,bsSize:"large",id:"troubleshooting-modal"},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement("div",{className:"feedback-header"},React.createElement("img",{src:EASEL.assets.images.sadEasel,className:"feedback-success-img"}),React.createElement("h3",null,"What happened?"))),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement(EASEL.component.troubleshootingModalContent,{errorInfo:this.state.errorInfo,error:this.state.error,close:this.close})))}})},function(e,t){EASEL.component.userComponent=createReactClass({render(){return React.createElement("div",{className:"user"},React.createElement("div",{className:"user-icon"},React.createElement("img",{src:this.props.profileImageUrl})),React.createElement("div",{className:"username-container"},React.createElement("div",{className:"username"},this.props.userEmail,React.createElement("a",{href:this.props.logoutPath}," (Log out)"))))}})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,i=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e};EASEL.component.userModal=EASEL.redux.connect({mapStateToProps:function(e){const{visible:t,activeTab:n}=e.userModal,{count:a,projects:r,requesting:o,search:s,view:i,starred:l,filterLabels:c,isAscendingSort:p,sortValue:u,error:d}=e.projects,h=e.userNotification;return{visible:t,activeTab:n,count:a,projects:r,requesting:o,search:s,view:i,starred:l,filterLabels:c,isAscendingSort:p,sortValue:u,projectLoadingError:d,notificationMessage:h.message,notificationId:h.id,notificationType:h.type,acknowledgeable:h.acknowledgeable,isProUser:EASEL.userSelectors.isProEnabled(Date.now(),e),areProjectTemplatesDismissed:EASEL.userSelectors.areProjectTemplatesDismissed(e),areProjectTemplatesDismissedFirstTime:EASEL.userSelectors.areProjectTemplatesDismissedFirstTime(e),profileImageUrl:EASEL.userSelectors.getProfileImageUrl(e)}},mapDispatchToProps:e=>({deleteProject(t,n,a,r){EASEL.projectListActionCreators.deleteProject({query:t,filters:n},a,r,e)},removeProjectFromList(t){EASEL.projectListActionCreators.removeProjectFromList(t,e)},setStarredProject(t,n){e(EASEL.projectListActionCreators.setStarredProject(t,n))},loadPage(t,n,a){EASEL.projectListActionCreators.loadPage({offset:t,query:n,clear:!1,filters:a},e)},openProject(t){t===EASEL.projectLinkToken?e(EASEL.userModalActionCreators.hideUserModal()):EASEL.flux.events.emit("open-project",t)},setSearchQuery(t){e(EASEL.projectListActionCreators.setSearchQuery(t))},createProject(){EASEL.flux.events.emit("create-project")},reloadProjects(t,n){EASEL.projectListActionCreators.reloadProjects({query:t,filters:n},e)},setProjectListView(t){e(EASEL.projectListActionCreators.setProjectListView(t))},setStarFilter(t){e(EASEL.projectListActionCreators.setStarFilter(t))},setLabelsFilter(t){e(EASEL.projectListActionCreators.setLabelsFilter(t))},setSortDirection(t){e(EASEL.projectListActionCreators.setSortDirection(t))},setSortValue(t){e(EASEL.projectListActionCreators.setSortValue(t))},openUserModal(){e(EASEL.projectListActionCreators.setSearchQuery("")),EASEL.projectListActionCreators.reloadProjects({query:"",filters:{}},e),e(EASEL.userModalActionCreators.showUserModalProjectsTab())},onHide(){null!==EASEL.projectLinkToken&&e(EASEL.userModalActionCreators.hideUserModal())}}),component:createReactClass({tabs(){return{projects:{title:"Projects",content:React.createElement(EASEL.component.projectListContainer,i({},this.props))},profile:{title:"Profile",content:React.createElement(EASEL.component.userProfileContainer,{projects:this.props.projects}),classOverride:"open-project-modal__content profile-tab"},account:{title:"Account",content:React.createElement(EASEL.component.accountContainer,null),classOverride:"open-project-modal__content account-tab"},options:{title:"Options",content:React.createElement(EASEL.component.optionsContainer,null)},learn:{title:"Learning",content:React.createElement(EASEL.component.learnContainer,null)},carves:{title:"Carves",content:React.createElement(EASEL.component.carvesContainer,null)},templates:{title:"Templates",content:React.createElement(EASEL.component.projectTemplatesContainer,null)}}},tabItem(e,t){const n=this.tabs()[e].title;return React.createElement("li",{className:this.props.activeTab===e?"active":""},React.createElement(EASEL.component.a,{onClick:()=>EASEL.store.dispatch(t())},n))},render(){const e=this.tabs(),{areProjectTemplatesDismissed:t}=this.props;let n=null;for(let a of Object.keys(e||{})){const{classOverride:t,content:r}=e[a];a===this.props.activeTab&&(n=React.createElement("div",{className:`${t||"open-project-modal__content"}`},r))}return React.createElement(ReactBootstrap.Modal,{className:"open-project-modal",show:this.props.visible,onHide:this.props.onHide,bsSize:"large"},React.createElement(ReactBootstrap.Modal.Header,{closeButton:null!==EASEL.projectLinkToken},React.createElement(EASEL.component.userComponent,i({},this.props))),React.createElement(ReactBootstrap.Modal.Body,null,this.props.notificationMessage&&React.createElement(EASEL.component.userNotification,{notificationId:this.props.notificationId,message:this.props.notificationMessage,acknowledgeable:this.props.acknowledgeable,type:this.props.notificationType}),React.createElement("ul",{className:"nav nav-tabs"},this.tabItem("projects",EASEL.userModalActionCreators.showUserModalProjectsTab),EASEL.hasAccessGrant("user_profile")&&this.tabItem("profile",EASEL.userModalActionCreators.showUserModalProfileTab),this.tabItem("account",EASEL.userModalActionCreators.showUserModalAccountTab),this.tabItem("options",EASEL.userModalActionCreators.showUserModalOptionsTab),this.tabItem("learn",EASEL.userModalActionCreators.showUserModalLearnTab),EASEL.hasAccessGrant("carves")&&this.tabItem("carves",EASEL.userModalActionCreators.showUserModalCarvesTab),t&&this.tabItem("templates",EASEL.userModalActionCreators.showUserModalTemplatesTab),"learn"!==this.props.activeTab&&React.createElement("li",{key:"nav-tab-button",className:"nav-tabs-button"},React.createElement("button",{className:"btn btn-success",id:"new-project-btn",onClick:this.props.createProject},"New project"))),n))}})})},function(e,t){EASEL.component.userNotification=createReactClass({getNotificationModifierClass(){switch(this.props.type){case"expiration":return"user-notification--purple";case"update-payment":return"user-notification--orange";default:return""}},clearNotification(e){return e.preventDefault(),EASEL.webAPIUtils.acknowledgeUserNotification(this.props.notificationId)},render(){return React.createElement("div",{className:`user-notification ${this.getNotificationModifierClass()}`},React.createElement("img",{className:"user-notification--warning",src:EASEL.assets.images.exclamationIcon}),React.createElement("span",{className:"user-notification__text",dangerouslySetInnerHTML:{__html:this.props.message}}),this.props.acknowledgeable&&React.createElement("button",{className:"close-button",onClick:this.clearNotification},React.createElement("i",{className:"fa fa-remove"})))}})},function(e,t){EASEL.component.userProfileContainerComponent=createReactClass({getInitialState:()=>({loading:!1,error:null,editing:!1}),showEdit(){this.setState({editing:!0})},hideEdit(){this.setState({editing:!1})},render(){return this.state.loading||this.state.error?React.createElement("div",{className:"user-profile-container"},this.state.loading&&React.createElement(EASEL.component.spinner,null),this.state.error&&React.createElement("div",null,"There was an error loading the user profile: ",this.state.error.toString())):this.state.editing?React.createElement(EASEL.component.userProfileEditForm,{key:this.props.userId,hideEdit:this.hideEdit,profileImageUrl:this.props.profileImageUrl,email:this.props.email,location:this.props.location,website:this.props.website,name:this.props.name,about:this.props.about,interests:this.props.interests}):React.createElement(EASEL.component.userProfileContent,{profileImageUrl:this.props.profileImageUrl,email:this.props.email,location:this.props.location,website:this.props.website,projects:this.props.projects.filter((e=>null!=e.inventablesUrl)),name:this.props.name,showEdit:this.showEdit,about:this.props.about,interests:this.props.interests})}}),EASEL.component.userProfileContainer=EASEL.redux.connect({mapStateToProps:e=>{const t=EASEL.userSelectors.getProfileData(e);return{profileImageUrl:EASEL.userSelectors.getProfileImageUrl(e),userId:EASEL.userSelectors.getUserId(e),email:EASEL.USER.email,name:t.name,location:t.location,website:t.website,about:t.about,interests:t.interests}},component:EASEL.component.userProfileContainerComponent})},function(e,t){EASEL.component.userProfileContent=createReactClass({proptypes:{name:PropTypes.string,location:PropTypes.string,about:PropTypes.string,website:PropTypes.string,interests:PropTypes.array,profileImageUrl:PropTypes.string,projects:PropTypes.array,showEdit:PropTypes.func},compareProjects(e,t){const n=new Date(e.sortDate).getTime(),a=new Date(t.sortDate).getTime();return n<a?-1:n>a?1:0},openProject(e){EASEL.flux.events.emit("open-project",e)},render(){return React.createElement("div",{className:"user-profile-content"},React.createElement("div",{className:"user-profile-content__heading"},React.createElement("div",{className:"user-profile-content__left-col"},React.createElement("div",{className:"user-profile-content__img-container"},React.createElement("img",{className:"user-profile-content__img",src:this.props.profileImageUrl,alt:`${this.props.name} profile image`})),React.createElement("div",{className:"user-profile-content__label"},"Name:"),React.createElement("div",null,this.props.name),React.createElement("div",{className:"user-profile-content__label"},"Website:"),React.createElement("div",null,this.props.website),React.createElement("div",{className:"user-profile-content__label"},"Location:"),React.createElement("div",null,this.props.location)),React.createElement("div",{className:"user-profile-content__right-col"},React.createElement("div",{className:"user-profile-content__about"},React.createElement("div",{className:"user-profile-content__label"},"About Me:"),React.createElement("div",null,this.props.about||"-")),React.createElement("div",{className:"user-profile-content__interests"},React.createElement("div",{className:"user-profile-content__label"},"Interests:"),React.createElement("div",{className:"user-profile-content__interests-container"},this.props.interests.map((e=>React.createElement("span",{key:e.interest},e.interest))))),React.createElement("div",null,this.props.showEdit&&React.createElement(EASEL.component.a,{onClick:this.props.showEdit},"Edit your profile")))),React.createElement("div",{className:"user-profile-content__body"},React.createElement("h4",null,"Published Projects"),React.createElement("div",{className:"thumbnail-container"},this.props.projects.map((e=>React.createElement(EASEL.component.projectThumbnail,{key:e.linkToken,name:e.name,linkToken:e.linkToken,image:e.image,onOpenProject:()=>this.openProject(e.linkToken),readOnly:!0}))))))}})},function(e,t){EASEL.component.userProfileEditForm=createReactClass({proptypes:{name:PropTypes.string,location:PropTypes.string,about:PropTypes.string,interests:PropTypes.array,profileImageUrl:PropTypes.string,projects:PropTypes.array,hideEdit:PropTypes.func,website:PropTypes.string},getInitialState(){return{about:this.props.about,profileImageUrl:this.props.profileImageUrl,name:this.props.name,interests:(this.props.interests||[]).map((e=>e.interest)),website:this.props.website,location:this.props.location,newProfileImageFile:null}},setAttribute(e){return t=>this.setState({[e]:t.target.value})},saveEditProfile(){if(null!==this.state.newProfileImageFile){new ActiveStorage.DirectUpload(this.state.newProfileImageFile,"/profile_image_direct_upload").create(((e,t)=>{if(!e)return EASEL.userAPI.updateUserProfileImage(t.signed_id);EASEL.oops(e)}))}EASEL.userAPI.updateUserProfileData({about:this.state.about,name:this.state.name,website:this.state.website,location:this.state.location,interests:this.state.interests}).catch((e=>EASEL.oops(`There was an error updating the user profile: ${EASEL.apiHelper.getErrorMessage(e)}`))),this.props.hideEdit()},changeInterest(e){const t=[...this.state.interests],n=this.state.interests.indexOf(e);n>-1?(t.splice(n,1),this.setState({interests:t})):(t.push(e),this.setState({interests:t}))},uploadProfileImage(e){let t=e.target.files[0];this.setState({newProfileImageFile:t})},previewNewProfileImage(){if(null!==this.state.newProfileImageFile)return URL.createObjectURL(this.state.newProfileImageFile)},textInput(e,t){return React.createElement(React.Fragment,null,React.createElement("label",{className:"user-profile-edit-form__label",htmlFor:`user-profile-${t}`},e,":"),React.createElement("input",{type:"text",id:`user-profile-${t}`,className:"form-control","data-attribute":t,onChange:this.setAttribute(t),value:this.state[t]||""}))},render(){return React.createElement("div",{className:"user-profile-edit-form"},React.createElement("div",{className:"user-profile-edit-form__heading"},React.createElement("div",{className:"user-profile-edit-form__left-col"},React.createElement("div",{className:"user-profile-edit-form__img-container"},React.createElement("img",{className:"user-profile-edit-form__img",src:this.previewNewProfileImage()||this.props.profileImageUrl})),React.createElement("input",{type:"file",name:"photo",accept:"image/png, image/jpeg",onChange:this.uploadProfileImage}),this.textInput("Name","name"),this.textInput("Website","website"),this.textInput("Location","location")),React.createElement("div",{className:"user-profile-edit-form__right-col"},React.createElement("div",{className:"user-profile-edit-form__about"},React.createElement("div",{className:"user-profile-edit-form__label"},"About Me:"),React.createElement("textarea",{className:"form-control",onChange:this.setAttribute("about"),value:this.state.about||""})),React.createElement("div",{className:"user-profile-edit-form__interests"},React.createElement("div",{className:"user-profile-edit-form__label"},"Interests:"),React.createElement("div",{className:"user-profile-edit-form__interests-container"},["signmaking","woodworking","design","furniture","tools","seasonal decorations","architecture","mixed"].map((e=>React.createElement("div",{key:e,className:"user-profile-edit-form__interest"},React.createElement("input",{className:`${e}-checkbox`,type:"checkbox",checked:this.state.interests.includes(e),onChange:()=>this.changeInterest(e)}),React.createElement("span",{className:"user-profile-edit-form__interest-label"},e)))))),React.createElement("div",{className:"user-profile-edit-form__footer"},React.createElement("button",{className:"btn btn-primary user-profile-edit-form__cancel",onClick:this.props.hideEdit},"Cancel"),React.createElement("button",{className:"btn btn-primary user-profile-edit-form__save",onClick:this.saveEditProfile},"Save")))))}})},function(e,t){EASEL.component.webglError=createReactClass({getInitialState:()=>({browser:()=>navigator.userAgent.indexOf("Chrome")>-1?"chrome":navigator.userAgent.indexOf("Safari")>-1?"safari":navigator.userAgent.indexOf("Firefox")>-1?"firefox":navigator.userAgent.indexOf("MSIE")>-1?"ie":void 0}),showModal(){EASEL.flux.events.emit("show-webgl-help-modal",{browser:this.state.browser})},humanizeBrowserName:e=>"chrome"===e?"Google Chrome":"ie"===e?"Internet Explorer":"safar"===e?"Safari":"Firefox",render(){const{browser:e}=this.state,t=EASEL.component.webglPanels[e],n=this.humanizeBrowserName(e);return React.createElement("div",{id:"webgl-help"},React.createElement("div",{id:"webgl-help-message"},React.createElement("img",{src:EASEL.assets.images.glassesEasel}),React.createElement("h3",null,"Hmm...there should be a 3D preview here."),React.createElement("p",null,'The 3D preview relies on WebGL, a new graphics technology that"s available in the latest versions of all the major browsers.'),React.createElement("div",{className:"panel-group"},"function"===typeof t&&t(React.createElement("a",{onClick:this.showModal},`Not using ${n}? Click here for advice for other browsers.`)))))}})},function(e,t){EASEL.component.webglModal=createReactClass({getInitialState:()=>({show:!1}),componentDidMount(){EASEL.flux.events.addListener("show-webgl-help-modal",this.show)},componentWillUnmount(){EASEL.flux.events.removeListener("show-webgl-help-modal",this.show)},show({browser:e}){this.setState({browser:e,show:!0})},hide(){this.setState({show:!1})},render(){const{browser:e}=this.state,{safari:t,chrome:n,firefox:a,ie:r}=EASEL.component.webglPanels;return React.createElement(ReactBootstrap.Modal,{id:"webgl-help-modal",show:this.state.show,onHide:this.hide},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,{className:"text-center"},'Let"s make some 3D magic')),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("div",{className:"panel-group"},"safari"!==e&&t(),"chrome"!==e&&n(),"firefox"!==e&&a(),"ie"!==e&&r())))}})},function(e,t){EASEL.component.webglPanels=(()=>{const e=(e,...t)=>React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("h4",{className:"panel-title"},e)),React.createElement("div",{className:"panel"},React.createElement("div",{className:"panel-body"},t)));return{safari:()=>e("Safari",React.createElement("ol",{key:"safari"},React.createElement("li",null,'Choose "Preferences" from the Safari menu.'),React.createElement("li",null,'Click "Advanced"'),React.createElement("li",null,'Check "Show Develop menu"'),React.createElement("li",null,'Now go to the Develop menu and click "Enable WebGL"'))),chrome:()=>e("Google Chrome",React.createElement("span",{key:"chrome"},"WebGL is enabled by default in Chrome for most recent graphics cards. However, there are some cases where WebGL may not be available. See",React.createElement("a",{href:"https://support.google.com/chrome/answer/1220892?hl=en",alt:"Chrome WebGL Help"},"Chrome WebGL Help"),"for more information.")),firefox:()=>e("Firefox",React.createElement("span",{key:"firefox"},"WebGL is enabled by default in Firefox 4 and higher. If webGL is not enabled, you can enable it manually:",React.createElement("ol",null,React.createElement("li",null,'Go to "Preferences" under the Firefox menu'),React.createElement("li",null,'Click "Advanced"'),React.createElement("li",null,'Under the "General" tab, check "Use hardware acceleration when available"'),React.createElement("li",null,"Restart Firefox")))),ie:()=>e("Internet Explorer","WebGL is only available for IE 11 and higher. You'll need to either upgrade to IE 11 or try a different browser, like Firefox or Google Chrome.")}})()},function(e,t){EASEL.component.wrapper=()=>React.createElement(React.Fragment,null,React.createElement(EASEL.component.pageTitle,null),React.createElement("div",{className:"wrapper__content"},React.createElement(EASEL.component.liveWrapper,null),React.createElement(EASEL.component.navWrapper,null),React.createElement("div",{className:"wrapper__main"},React.createElement("div",{className:"wrapper__flex"},React.createElement(EASEL.component.toolboxContainer,null),React.createElement(EASEL.component.featuresContainer,null)),React.createElement("div",{className:"wrapper__flex"},React.createElement(EASEL.component.projectStatusBanner,null),React.createElement(EASEL.component.editorContainer,null),React.createElement(EASEL.component.workpiecesContainer,null)))),React.createElement(EASEL.component.modals,null))},function(e,t,n){const a=n(759);EASEL.component.projectTemplatesContainer=createReactClass({getInitialState:()=>({loading:!0,projects:[],error:null}),componentDidMount(){a.loadInventablesProjects().then((e=>{this.setState({loading:!1,projects:e})}),(e=>{this.setState({loading:!1,error:e})}))},trackProject(e,t){EASEL.stats.trackEvent(EASEL.events.openedFeaturedProject,{projectTitle:e.title,position:t}),EASEL.store.dispatch(EASEL.userModalActionCreators.hideUserModal()),EASEL.projectAPI.clone(e.easelLink).done((function(e){const t=null!=e&&null!=e.project?e.project.link_token:void 0;EASEL.projectManager.appropriatelyLoadProject(t)})).fail((()=>EASEL.oops("Something went wrong trying open the project template.")))},render(){const{loading:e,error:t,projects:n}=this.state,{limit:a}=this.props;return e?React.createElement(EASEL.component.spinner,null):t?React.createElement("div",{className:"alert alert-danger"},React.createElement("p",null,"Could not load featured projects. Please try again later.")):React.createElement("div",{className:"projects-templates"},React.createElement("h2",{className:"project-list-header"},"Featured Projects"),React.createElement("div",{className:"thumbnail-container"},n.slice(0,a).map(((e,t)=>React.createElement(EASEL.component.projectThumbnail,{key:t,name:e.title,linkToken:e.easelLink,image:e.photoImageUrl,subtitle:e.subtitle,onOpenProject:()=>this.trackProject(e,t+1),readOnly:!0})))))}}),EASEL.component.projectTemplatesContainer.defaultProps={limit:999}},function(e,t){const n=function(){const e=e=>({acceptedLicense:e.accepted_license,commentsCount:e.comments_count,photoImageUrl:e.photo_image_url,description:e.description,downloadCount:e.download_count,easelCopyCount:e.easel_copy_count,easelLink:e.easel_link,easelOpenCount:e.easel_open_count,featured:e.featured,formattedDescription:e.formatted_description,heartsCount:e.hearts_count,id:e.id,output:e.output,parentId:e.parent_id,projectLicenseId:e.project_license_id,publiclyVisible:e.publicly_visible,slug:e.slug,subtitle:e.subtitle,title:e.title,userId:e.user_id});return{loadInventablesProjects:()=>fetch("/inventables/projects").then((e=>e.json())).then((t=>t.map(e)))}}();e.exports=n},function(e,t){EASEL.component.projectTemplatesSingleRow=createReactClass({getInitialState:()=>({error:null}),dismissProjectTemplates(){EASEL.userAPI.dismissProjectTemplates().then((()=>{this.setState({error:!1})})).catch((e=>{this.setState({error:!0}),console.error(`Could not permanently dismiss account modal project templates row. ${e.getMessage()}`)})).finally((()=>{EASEL.store.dispatch(EASEL.userActionCreators.setProjectTemplatesDismissedFirstTime())}))},render(){const{error:e}=this.state;return React.createElement(React.Fragment,null,e&&React.createElement("p",{className:"project-templates-single-row-alert alert alert-danger"},"There was a problem dismissing the project templates."),React.createElement(EASEL.component.a,{onClick:this.dismissProjectTemplates,className:"project-templates-single-row-dismiss"},"\xd7 Close"),React.createElement(EASEL.component.projectTemplatesContainer,{limit:4}))}})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.accountContainer=EASEL.redux.connect({mapStateToProps:e=>{const t=Date.now();return{proFeaturesInUse:EASEL.proSelectors.getInUseCarvingProFeatures(e),isProUser:EASEL.userSelectors.isProEnabled(t,e),easelProDayTimeLeft:EASEL.userSelectors.getEaselProDayTimeLeftDisplay(t,e)}},component:createReactClass({render(){const{proFeaturesInUse:e,isProUser:t,easelProDayTimeLeft:n}=this.props;return React.createElement("div",{className:"account-container"},React.createElement(EASEL.component.easelProModalAlert,{isProUser:t,proFeaturesInUse:e,easelProDayTimeLeft:n}),React.createElement(EASEL.component.easelProManagementContainer,((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({},this.props)))}})})},function(e,t,n){const a=n(93);EASEL.component.braintreeForm=EASEL.redux.connect({mapStateToProps:e=>({token:EASEL.userSelectors.getBraintreeToken(e),easelProApiError:EASEL.proSelectors.getError(e)}),mapDispatchToProps:e=>({setBraintreeToken(t){e(EASEL.userActionCreators.setBraintreeToken(t))}}),component:createReactClass({getInitialState:()=>({dropinInstance:null,braintreeLoading:!0}),initializeBraintree(e){const t=this.wrapper,n=this;braintree.setup(e,"dropin",{container:t,paypal:{button:{type:"checkout"},enableShippingAddress:!0},onReady(e){n.setState({dropinInstance:e})},onError(e){console.error("Something went wrong when initalizing Braintree",e)},onPaymentMethodReceived(e){const t=e&&e.details;n.props.onReceivedPaymentNonce(e.nonce,t.shippingAddress)}})},componentDidMount(){const{dropinInstance:e}=this.state,{token:t}=this.props;if(!e){if(null==t)return a.getBraintreeKey().done((({key:e})=>{this.props.setBraintreeToken(e),this.initializeBraintree(e),this.setState({braintreeLoading:!1})}));this.initializeBraintree(t),this.setState({braintreeLoading:!1})}},getBraintreeForm(){const{braintreeLoading:e,dropinInstance:t}=this.state,{buttonId:n,buttonClass:a,cancelButton:r,showCancelButton:o,loading:s,buttonText:i,easelProApiError:l}=this.props;return"undefined"!==typeof window.braintree?e?React.createElement(EASEL.component.spinner,null):null!=t&&React.createElement("div",{className:"easel-pro-management__button-container"},l&&React.createElement("p",{className:"easel-pro-management--error"},l),React.createElement("button",{id:n,type:"submit",className:`btn btn-lg braintree-button ${a}`,disabled:s},i),o&&React.createElement(EASEL.component.a,{className:"easel-pro-management__cancel-link",onClick:r},"Cancel")):React.createElement("div",null,"There was an error loading the payment form. Please try refreshing the page, and contact Inventables if the problem persists.")},render(){return React.createElement("form",{className:"braintree-form"},React.createElement("div",{ref:e=>this.wrapper=e}),this.getBraintreeForm())}})})},function(e,t){EASEL.component.easelProCancelContainer=createReactClass({statics:{cancellationAnswers:[{id:"unused-pro",value:"unused_pro_features",text:"I don&rsquo;t use it enough"},{id:"too-expensive",value:"too_expensive",text:"It is too expensive"},{id:"lacking-features",value:"lacking_features",text:"There are not enough features"},{id:"different-program",value:"different_program",text:"I use a different program"}].sort((()=>Math.random()-.5))},getInitialState:()=>({cancelReason:null,otherDescription:""}),onChange:e=>{this.setState({otherDescription:e.target.value})},selectCancelReason(e){this.setState({cancelReason:e.target.value})},submitCancelReason(){const{cancelReason:e,otherDescription:t}=this.state;EASEL.stats.trackEvent(EASEL.events.canceledEaselPro,{reason:e,source:"Easel Modal"}),null!==e&&EASEL.cancelReasonAPI.submitCancelReason(e,"other"===e?t:"")},trackAndCancelSubscription(){this.props.cancelSubscription().then((()=>{this.submitCancelReason(),this.props.showCancelledEaselConfirmation()}))},render(){const{isLoading:e,toggleCancel:t}=this.props,n=EASEL.component.easelProCancelContainer.cancellationAnswers.map((e=>React.createElement("div",{key:e.id},React.createElement("input",{id:e.id,type:"radio",value:e.value,name:"cancel-reason",onChange:this.selectCancelReason}),React.createElement("label",{htmlFor:e.id,className:"easel-pro-management__cancel-reason",dangerouslySetInnerHTML:{__html:e.text}}))));return React.createElement("div",{className:"easel-pro-management__cancel-reason-container"},React.createElement("hr",null),React.createElement("strong",null,"Please tell us the reason you want to end your Easel Pro subscription."),n,React.createElement("div",null,React.createElement("input",{id:"other",type:"radio",value:"other",name:"cancel-reason",onChange:this.selectCancelReason}),React.createElement("label",{htmlFor:"other",className:"easel-pro-management__cancel-reason"},"Other"),React.createElement("input",{id:"other-reason",className:"easel-pro-management__cancel-reason-input",value:this.state.otherDescription||"",onChange:e=>this.setState({otherDescription:e.target.value})})),React.createElement("div",{className:"easel-pro-management__button-container"},this.props.cancelError&&React.createElement("p",{className:"easel-pro-management--error"},this.props.cancelError),React.createElement("button",{className:"btn btn-lg btn-danger easel-pro-management__cancel-subscription-button",onClick:this.trackAndCancelSubscription,disabled:e},"End Subscription"),React.createElement(EASEL.component.a,{className:"easel-pro-management__cancel-link",onClick:t},"Cancel"),e&&React.createElement(EASEL.component.spinner,null)))}})},function(e,t,n){const a=n(36);EASEL.component.easelProManagementContainerComponent=createReactClass({getInitialState:()=>({showCancelledEasel:!1}),componentDidMount(){if(this.props.braintreeSubscriptionLoadingState===EASEL.userConstants.loadingState.UNLOADED)return this.props.getSubscriptionInfo()},hideCancelledEaselConfirmation(){this.setState({showCancelledEasel:!1})},showCancelledEaselConfirmation(){this.setState({showCancelledEasel:!0})},cancelledEaselConfirmation(){return this.props.isLoading?React.createElement("div",{className:"easel-pro-management__cancelled-easel"},React.createElement(EASEL.component.spinner,null,null)):React.createElement("div",{className:"easel-pro-management__cancelled-easel"},React.createElement("div",null,React.createElement("img",{className:"easel-pro-management__cancelled-img",src:EASEL.assets.images.sadEasel})),React.createElement("p",null,"Sorry to see you go. If you want to sign up for Pro again you can do so in your Easel account."),React.createElement("button",{className:"btn btn-primary",onClick:this.hideCancelledEaselConfirmation},"Close"))},subscriptionTypeTitle(){const{subscriptionStatus:e,proExpirationDate:t,isProExpired:n}=this.props;switch(e){case"trial":if(EASEL.hasAccessGrant("thirty_day_trial")){if(n)return"Your free trial has ended!";{const e=a.msToDays(t-Date.now()).toFixed(0);return`Your trial of Easel Pro ends in ${e} day${"1"===e?"":"s"}.`}}return n?"You have Easel Free":"You have Easel Pro";case"subscribed_payer":case"subscribed_admin":return"You have Easel Pro";case"subscribed_promo":case"user_canceled":return n?"You have Easel Free":"You have Easel Pro";case"payment_error_inactive":return"Unable to process payment. Please double-check your payment info!";default:return"You have Easel Free"}},easelProSignUpRow(){const{isProUser:e,easelProUnactivated:t,subscriptionStatus:n}=this.props;let a="Sign up for Easel Pro";return"subscribed_promo"===n?a="Activate Easel Pro":["user_canceled","admin_canceled"].includes(n)&&(a="Renew Easel Pro"),!e&&null!=t&&t.length>0?React.createElement(EASEL.component.easelProSignUp,{yearlyPlanPreSelected:!0,foundProductKey:t[0],title:"Activate"}):"subscribed_payer"!==n&&"subscribed_admin"!==n?React.createElement(EASEL.component.easelProSignUp,{title:a}):void 0},render(){const{subscriptionRenewalDate:e,proExpirationDate:t,braintreeSubscriptionLoadingState:n,subscriptionStatus:r,isProExpired:o,trialExpirationDate:s}=this.props,{showCancelledEasel:i}=this.state;return React.createElement("div",{className:"setting-block container-fluid"},(()=>i?this.cancelledEaselConfirmation():n===EASEL.userConstants.loadingState.UNLOADED?React.createElement("div",null,"Loading subscription information ",React.createElement(EASEL.component.spinner,null)):React.createElement("div",null,React.createElement("h3",null,this.subscriptionTypeTitle()),(()=>{switch(r){case"subscribed_promo":if(!o)return React.createElement(EASEL.component.easelProPromoUser,{formattedExpirationDate:a.formatDate(t)});break;case"user_canceled":case"admin_canceled":return o?React.createElement("div",{className:"center-block easel-pro-management__pro-cancelled-expired"},React.createElement("p",null,`Your canceled Easel Pro subscription expired on ${a.formatDate(e)}.`)):React.createElement("div",{className:"center-block easel-pro-management__pro-cancelled"},React.createElement("p",null,`Your Easel Pro subscription has been cancelled and will expire on ${a.formatDate(e)}.`));case"subscribed_payer":case"subscribed_admin":return React.createElement(EASEL.component.easelProSubscribedUser,{isLoading:this.props.isLoading,showCancelledEaselConfirmation:this.showCancelledEaselConfirmation,subscriptionRenewalDate:this.props.subscriptionRenewalDate});case"trial":if(o&&EASEL.hasAccessGrant("thirty_day_trial"))return React.createElement("p",null,"Please select an option below to keep using Easel Pro.");break;default:if(EASEL.hasAccessGrant("thirty_day_trial")&&null==s)return React.createElement(EASEL.component.easelTrialSignUp,null)}})(),this.easelProSignUpRow()))())}}),EASEL.component.easelProManagementContainer=EASEL.redux.connect({mapStateToProps:e=>{let t;const n=Date.now(),a=EASEL.userSelectors.getEaselProInfo(e),r=null!=a.easel_pro_expiration_date?new Date(a.easel_pro_expiration_date):void 0;t=null!=a.subscription?a.subscription.next_billing_date:void 0;const o=t?new Date(t):void 0;return{proExpirationDate:r,isProExpired:EASEL.userSelectors.isProExpired(n,e),trialExpirationDate:EASEL.userSelectors.getTrialExpirationDate(e),braintreeSubscriptionLoadingState:EASEL.userSelectors.getBraintreeSubscriptionLoadingState(e),subscriptionRenewalDate:o,isLoading:EASEL.proSelectors.isLoading(e),easelProUnactivated:EASEL.userSelectors.unactivatedEaselProProductKeys(e),subscriptionStatus:EASEL.userSelectors.getSubscriptionStatus(e)}},mapDispatchToProps:e=>({getSubscriptionInfo:()=>EASEL.easelProActions.getEaselProInfoWithSubscription(e)}),component:EASEL.component.easelProManagementContainerComponent})},function(e,t){EASEL.component.easelProModalAlert=createReactClass({render(){const{isProUser:e,proFeaturesInUse:t,easelProDayTimeLeft:n}=this.props,a=null!=n?`You have ${n} left in your Easel Pro carve day.`:"This project uses features that require an Easel Pro subscription to be carved or downloaded:";return null!=e&&!e&&null!=t&&0!==t.length||null!=n?React.createElement("div",{className:"easel-pro-feature-alert"},a,null==n&&t.map((e=>React.createElement("li",{key:e.label},e.label)))):null}})},function(e,t){EASEL.component.easelProPlanOption=createReactClass({render(){const{onClick:e,isSelected:t,isAnySelected:n,name:a,description:r,price:o,referencePrice:s,discounts:i}=this.props,l=o-i.reduce(((e,t)=>e+t.amount),0),c=100*(s-l)/s;return React.createElement("div",{className:"easel-pro-plan-option"},React.createElement(EASEL.component.a,{className:"easel-pro-plan-option__card "+(t?"easel-pro-plan-option__card--selected":n?"easel-pro-plan-option__card--dimmed":""),onClick:e},React.createElement("div",null,React.createElement("p",{className:"easel-pro-plan-option__name"},a),c>0&&React.createElement("p",{className:"easel-pro-plan-option__discount"},`Save ${c.toFixed(0)}% now`),React.createElement("p",{className:"easel-pro-plan-option__price"},`$${l}`,React.createElement("span",{className:"easel-pro-plan-option__fine-print"}," + tax")),React.createElement("p",{className:"easel-pro-plan-option__description"},r)),n||React.createElement("p",{className:"easel-pro-plan-option__button"},React.createElement("span",{className:"btn btn-warning"},c>0?"Subscribe and Save":"Subscribe"))))}})},function(e,t){EASEL.component.easelProPromoUser=createReactClass({props:{formattedExpirationDate:PropTypes.string},render(){return React.createElement("div",null,React.createElement("div",{className:"content-row"},React.createElement("div",{className:"easel-pro-management--max-width"},React.createElement("div",{className:"easel-pro-management__promo-container"},React.createElement("img",{className:"green-check",src:EASEL.assets.images.greenCheck}),React.createElement("div",null,React.createElement("p",null,"You are subscribed to Easel Pro via a promo code"),this.props.formattedExpirationDate&&React.createElement("p",null," ",`Your subscription will expire on: ${this.props.formattedExpirationDate}`))))),React.createElement("div",{className:"easel-pro-management__promo-renew-description"},React.createElement("div",null,"How should Easel Pro renew when your subscription expires?")))}})},function(e,t){EASEL.component.easelProSignUpComponent=createReactClass({getInitialState:()=>({selectedPlanId:null,activationProcessStarted:!1,productKey:null,monthsToNextBill:12}),componentDidMount(){const{plans:e,setEaselProPlans:t,yearlyPlanPreSelected:n,foundProductKey:a}=this.props,r=this;null!=e&&0===e.length?t().done((function(){n&&r.setYearlyActivationPlan()})):n&&r.setYearlyActivationPlan(),null!=a&&this.setState({activationProcessStarted:!0,productKey:a.product_key,monthsToNextBill:a.duration_in_months})},toggleActivationProcess(){const{activationProcessStarted:e}=this.state;e?this.setState({selectedPlanId:null}):this.setYearlyActivationPlan(),this.setState({activationProcessStarted:!e})},setYearlyActivationPlan(){const{plans:e}=this.props,t=e.find((e=>12===e.billing_frequency));null!=t&&this.setState({selectedPlanId:t.id,activationProcessStarted:!0})},togglePlan(e){this.setState({selectedPlanId:this.state.selectedPlanId===e?null:e,activationProcessStarted:!1})},processPayment(e,t){const{subscribeToPlan:n,callback:a}=this.props,{selectedPlanId:r,productKey:o}=this.state;n(e,r,t,o).then(a)},render(){const{loading:e,onPaymentError:t,plans:n,title:a,isPromoUser:r,yearlyPlanPreSelected:o,hidePlanId:s}=this.props,{selectedPlanId:i,productKey:l,activationProcessStarted:c}=this.state;return React.createElement(React.Fragment,null,(null!=n&&n.length)>0?React.createElement("div",{className:"easel-pro-sign-up__plans"},React.createElement("h3",null,a),React.createElement("p",null,"Select the plan that works for you. ",React.createElement(EASEL.component.a,{target:"_blank",rel:"noreferrer",href:"https://inventables.zendesk.com/hc/en-us/articles/360012849133-Easel-Pro-FAQ-and-Overview",className:"easel-pro-sign-up__learn-more"},"Learn more")),React.createElement("div",{className:"easel-pro-sign-up__plans-container"},null==o&&n.sort(((e,t)=>e.price-t.price)).filter((e=>e.id!==s)).map((e=>React.createElement(EASEL.component.easelProPlanOption,{key:e.id,name:e.name,description:e.description,price:e.price,referencePrice:e.reference_price,discounts:e.discounts,billingMonths:e.billing_frequency,isSelected:e.id===i,isAnySelected:null!==i,onClick:()=>this.togglePlan(e.id)})))),!r&&React.createElement("div",{className:"easel-pro-sign-up__activate-key"},React.createElement("span",null,null!=l?"Activate your Easel Pro subscription now.":"Have an Easel Pro Product Key?"),React.createElement("button",{className:"btn btn-primary",onClick:()=>this.toggleActivationProcess()},c?"Cancel activation":"Activate it here")),c&&React.createElement("div",{className:"easel-pro-sign-up-row__activate-key-wrapper"},React.createElement("div",{className:"easel-pro-sign-up-row__activate-key-container"},React.createElement("span",{className:"easel-pro-sign-up-row__activate-title"},"Product key from your order:"),React.createElement("input",{id:"product-key",className:"easel-pro__promo-code__input",value:l||"",placeholder:"XXXX-XXXX",onChange:e=>this.setState({productKey:e.target.value})})),React.createElement("p",null,"Submitting payment information will activate Easel Pro. After your key expires, you'll be billed annually. You'll see your expiration date after submitting. Cancel any time.")),null!=i&&React.createElement("div",null,React.createElement("div",{className:"easel-pro-sign-up-row__payment-form"},React.createElement(EASEL.component.braintreeForm,{onReceivedPaymentNonce:(e,t)=>{this.processPayment(e,t)},onPaymentError:t,buttonId:"easel-pro-sign-up-button",buttonClass:"btn-success",buttonText:"Submit Payment Information",showCancelButton:!1,loading:e})))):React.createElement(EASEL.component.spinner,null))}}),EASEL.component.easelProSignUp=EASEL.redux.connect({mapStateToProps:e=>({plans:EASEL.proSelectors.getPlans(e),loading:EASEL.proSelectors.isLoading(e),isPromoUser:EASEL.userSelectors.isPromoUser(e)}),mapDispatchToProps:EASEL.redux.dispatchActions(EASEL.easelProActions,["setEaselProPlans","subscribeToPlan"]),component:EASEL.component.easelProSignUpComponent})},function(e,t,n){const a=n(36);EASEL.component.easelProSubscribedUserComponent=createReactClass({getInitialState:()=>({footerTypeShown:null,changePlanSuccess:!1}),componentDidMount(){const{plans:e,setEaselProPlans:t}=this.props;null!=e&&0===e.length&&t()},showFooter(e){const{footerToShow:t}=this.state;this.setState({footerTypeShown:e===t?null:e})},hideFooter(){this.setState({footerTypeShown:null})},updateBillingAndHideFooter(e,t){return this.props.updateBilling(e,t).then(this.hideFooter)},showPlanChangedAndHideFooter(){this.setState({changePlanSuccess:!0},this.hideFooter())},render(){const{isAdminSubscribed:e,subscriptionRenewalDate:t,easelProInfo:n,getCurrentlySelectedPlanName:r,isLoading:o,cancelSubscription:s,showCancelledEaselConfirmation:i,easelProApiError:l}=this.props,c=this.props.easelProInfo.subscription,{changePlanSuccess:p,footerTypeShown:u}=this.state;return React.createElement("div",{className:"content-row"},React.createElement("div",{className:"easel-pro-management--max-width"},(!t||!r)&&React.createElement(EASEL.component.spinner,null),t&&r&&React.createElement(React.Fragment,null,React.createElement("div",{className:"easel-pro-management__content-container"},p&&React.createElement("p",{className:"notification notification-success"},"You have changed your plan! Details of the new plan are below."),React.createElement("dl",{className:"easel-pro-management__subscription-info"},React.createElement("dt",null,"Your plan is"),React.createElement("dd",null,r),React.createElement("dt",null,"Your subscription will renew on"),React.createElement("dd",null,`${a.formatDate(t)}`),React.createElement("dt",null,"Next charge will be"),React.createElement("dd",null,"$",c.next_billing_period_amount),null!=c&&null!=c.card_type&&React.createElement(React.Fragment,null,React.createElement("dt",null,"To card"),React.createElement("dd",null,`${c.card_type} ending in ${c.last_4}`))),React.createElement("hr",null),e&&React.createElement("div",{className:"easel-pro-update-billing"},React.createElement("p",null,"Your subscription requires no payment")),!e&&React.createElement("div",{className:"easel-pro-management__links"},React.createElement("p",null,"I want to "),React.createElement("label",null,React.createElement("input",{type:"radio",value:"update",checked:"updateBilling"===u,onClick:()=>this.showFooter("updateBilling"),id:"update-billing-information"}),"Edit my billing info"),React.createElement("label",null,React.createElement("input",{type:"radio",value:"cancel",checked:"cancelSubscription"===u,onClick:()=>this.showFooter("cancelSubscription")}),"End my subscription"),React.createElement("label",null,React.createElement("input",{type:"radio",value:"change",checked:"changeSubscription"===u,onClick:()=>this.showFooter("changeSubscription")}),"Change my subscription"))),"updateBilling"===u&&React.createElement("div",{className:"easel-pro-management__update-billing-container"},React.createElement(EASEL.component.easelProUpdateBilling,{cancelButton:this.hideFooter,easelProInfo:n,updateBilling:this.updateBillingAndHideFooter})),"cancelSubscription"===u&&React.createElement(EASEL.component.easelProCancelContainer,{isLoading:o,cancelSubscription:s,showCancelledEaselConfirmation:i,cancelError:l,toggleCancelFooter:()=>this.showFooter("cancelSubscription")}),"changeSubscription"===u&&t&&n&&React.createElement(EASEL.component.easelProUpdatePlan,{changePlan:this.showPlanChangedAndHideFooter,hidePlanId:n.subscription.plan_id}))))}}),EASEL.component.easelProSubscribedUser=EASEL.redux.connect({mapStateToProps:e=>({easelProInfo:EASEL.userSelectors.getEaselProInfo(e),isAdminSubscribed:"subscribed_admin"===EASEL.userSelectors.getSubscriptionStatus(e),easelProApiError:EASEL.proSelectors.getError(e),getCurrentlySelectedPlanName:EASEL.proSelectors.getCurrentlySelectedPlanName(e),plans:EASEL.proSelectors.getPlans(e)}),mapDispatchToProps:e=>({updateBilling:(t,n)=>EASEL.easelProActions.updateBilling(e,t,n),cancelSubscription:()=>EASEL.easelProActions.cancelSubscription(e),setEaselProPlans:()=>EASEL.easelProActions.setEaselProPlans(e)}),component:EASEL.component.easelProSubscribedUserComponent})},function(e,t){EASEL.component.easelProUpdateBilling=createReactClass({render(){return"subscribed_payer"===this.props.easelProInfo.status||"payment_error_inactive"===this.props.easelProInfo.status?React.createElement("div",{className:"easel-pro-update-billing"},React.createElement("div",null,React.createElement(EASEL.component.braintreeForm,{onReceivedPaymentNonce:this.props.updateBilling,onPaymentError:this.props.onPaymentError,buttonClass:"btn-success",buttonText:"Update Payment Method",cancelButton:this.props.cancelButton,showCancelButton:!0}))):React.createElement(EASEL.component.spinner,null)}})},function(e,t){EASEL.component.easelProUpdatePlan=createReactClass({render(){return React.createElement("div",{className:"easel-pro-update-plan"},React.createElement(EASEL.component.easelProSignUp,{title:"Change plan",callback:this.props.changePlan,hidePlanId:this.props.hidePlanId}))}})},function(e,t){EASEL.component.easelTrialSignUpComponent=createReactClass({getInitialState:()=>({buttonText:"Start Easel Pro Trial",showCancel:!1,startingTrial:!1}),startThirtyDayTrial(){!1===this.state.showCancel?this.setState({buttonText:"Confirm Start Trial",showCancel:!0}):(this.setState({startingTrial:!0}),this.props.startEaselProTrial())},cancelStartTrial(){return this.setState({buttonText:"Start Easel Pro Trial",showCancel:!1})},render(){return React.createElement("div",{className:"trial__container"},React.createElement("div",null,React.createElement("p",null,"Experience advanced features of Easel Pro with a 30 day Free Trial:"),React.createElement("ul",null,React.createElement("li",null,"Access to V-carving"),React.createElement("li",null,"200+ fonts"),React.createElement("li",null,"Raster tool paths"))),React.createElement("div",{className:"trial__buttons"},React.createElement("button",{className:`btn ${this.state.showCancel?"btn-primary-dark":"btn-primary"} `,disabled:this.state.startingTrial,onClick:this.startThirtyDayTrial},this.state.buttonText),React.createElement(EASEL.component.a,{className:"trial__button-cancel "+(this.state.showCancel?"fade-in":""),onClick:this.cancelStartTrial},"Cancel")))}}),EASEL.component.easelTrialSignUp=EASEL.redux.connect({mapDispatchToProps:e=>({startEaselProTrial(){EASEL.easelProActions.startEaselProTrial(e)}}),component:EASEL.component.easelTrialSignUpComponent})},function(e,t){EASEL.component.activeApp=EASEL.redux.connect({mapStateToProps:e=>{const t=EASEL.appSelectors.getAppState(e);return{activeApp:t.activeApp,properties:t.appProperties,output:t.appOutput,status:t.appStatus,volumes:t.appVolumes}},mapDispatchToProps:e=>({deactivate:()=>e(EASEL.appActionCreators.deactivateApp()),addVolumes:e=>EASEL.volumeActions.add.apply(null,e),removeVolumes:e=>EASEL.volumeActions.remove(e.map((e=>e.id))),trackAppImport:e=>EASEL.stats.trackEvent("Importing from app",{name:e}),importSvg:(e,t)=>EASEL.svgLoader({pro:e}).load(t)}),component:createReactClass({import(){this.props.trackAppImport(this.props.activeApp.name),this.props.deactivate();const e={};if(this.props.activeApp.requiresSelectedVolume)for(const t of EASEL.volumeStore.getVolumes(EASEL.editorStore.getSelectedVolumeIds())){const n=EASEL.shapeUtils.proFeatures(t.shape);n.length>0&&(e[t.id]=n)}return"1.0.0"===this.props.activeApp.apiVersion?this.props.importSvg(Object.keys(e).length>0,this.props.output):(EASEL.undoActions.beginGroup(`Import from ${this.props.activeApp.name}`),this.props.removeVolumes(this.props.volumes.filter((e=>null!=e.id))),this.props.addVolumes(this.props.volumes.filter((e=>null!=e.shape)).map((t=>EASEL.merge(t,{id:null,shape:{combinedProFeatures:e[t.id]}})))),EASEL.undoActions.endGroup())},appManager(){if(null!=this.props.activeApp)return React.createElement(EASEL.component.appManager,{author:this.props.activeApp.author,formattedDescription:this.props.activeApp.formattedDescription,name:this.props.activeApp.name,properties:this.props.properties,output:this.props.output,status:this.props.status,onImport:this.import,apiVersion:this.props.activeApp.apiVersion,volumes:this.props.volumes})},render(){const e=null!=this.props.activeApp,t=null!=this.props.activeApp?this.props.activeApp.name:null;return React.createElement(ReactBootstrap.Modal,{show:e,onHide:this.props.deactivate,bsSize:"large",id:"active-app",enforceFocus:!1},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,t)),React.createElement(ReactBootstrap.Modal.Body,null,this.appManager()))}})})},function(e,t){EASEL.component.appList=EASEL.redux.connect({mapStateToProps:function(e){const t=EASEL.appSelectors.getAppState(e);return{apps:t.apps,errorMessage:t.errorMessage,appListOpen:t.appListOpen}},mapDispatchToProps:e=>({closeAppList(){e(EASEL.appActionCreators.closeAppList())},activateApp:(t,n)=>EASEL.appActions.activateAppById(e,{id:t,name:n})}),component:createReactClass({getState:()=>({isVolumeSelected:EASEL.editorStore.getSelectedVolumeIds().length>0}),getInitialState(){return EASEL.merge(this.getState(),{searchText:""})},mixins:[React.addons.PureRenderMixin],componentDidMount(){EASEL.volumeStore.addChangeListener(this._onChange),EASEL.editorStore.addChangeListener(this._onChange),EASEL.flux.events.addListener("show-apps-explanation",this.showExplanation)},componentWillUnmount(){EASEL.volumeStore.removeChangeListener(this._onChange),EASEL.editorStore.removeChangeListener(this._onChange),EASEL.flux.events.removeListener("show-apps-explanation",this.showExplanation)},_onChange(){return this.setState(this.getState())},filteredApps(){return this.state.searchText.length?this.props.apps.filter((function(e){return e.name.toUpperCase().includes(this.state.searchText.toUpperCase())||(null!=e.description?e.description.toUpperCase().includes(this.state.searchText.toUpperCase()):void 0)}),this):this.props.apps},appCategories(){const e={};for(let r of this.filteredApps()){r.publiclyVisible?0===r.categories.length&&(r.categories=["Other"]):r.categories=["Private"];for(let t of r.categories)e[t]=e[t]||[],e[t].push(r)}const t=(()=>{const t=[];for(let n in e)t.push(n);return t})(),n="General category",a=["Featured",n,"Other","Beta","Private"];return t.sort((function(e,t){const[r,o]=[e,t].map((function(e){const t=a.indexOf(e);return t>-1?t:a.indexOf(n)}));return r!==o?r-o:e.localeCompare(t)})),{categoryTitles:t,appsByCategory:e}},closeAppList(){this.props.closeAppList(),this.hideExplanation(),this.setState({searchText:""})},showExplanation(){this.setState({showExplanation:!0})},hideExplanation(){this.setState({showExplanation:!1})},errorHtml(){return React.createElement("div",{className:"alert alert-warning"},`Failed to load the app library: ${this.props.errorMessage}`)},scrollToRef(e){const t=$(this.appList),n=$(this["category_"+e]).offset().top-t.offset().top+t.scrollTop();return t.animate({scrollTop:n})},appComponent(e){return React.createElement(EASEL.component.appThumbnail,{key:e.id,author:e.author,name:e.name,id:e.id,thumbnail:e.thumbnail,altThumbnail:e.altThumbnail,publiclyVisible:e.publiclyVisible,disabled:e.requiresSelectedVolume&&!this.state.isVolumeSelected,afterClick:this.closeAppList,activateApp:this.props.activateApp})},appCategoryComponent(e,t,n){return t=t.map((e=>this.appComponent(e))),React.createElement("div",{className:"app-list__main-panel__list "+(n?"big-apps":"normal-apps"),ref:t=>this["category_"+e]=t,key:e},React.createElement("div",{className:"app-list__main-panel__list__title"},e),"Beta"===e&&React.createElement("p",{className:"alert alert-warning"},"These apps are in early development. They may not have full functionality or behave as intended in all circumstances."),React.createElement("div",{className:"app-list__main-panel__list__apps"},t))},render(){const{appsByCategory:e,categoryTitles:t}=this.appCategories(),n=1===t.length?this.appCategoryComponent("",e[t[0]],!1):t.map((t=>this.appCategoryComponent(t,e[t],"Featured"===t)));return React.createElement(ReactBootstrap.Modal,{show:this.props.appListOpen,onHide:this.closeAppList,bsSize:"large"},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"App Library")),React.createElement(ReactBootstrap.Modal.Body,null,0===this.props.apps.length&&React.createElement("div",{className:"center-text"},React.createElement(EASEL.component.spinner,{size:25}),React.createElement("p",null,"Loading Apps")),this.state.showExplanation&&this.props.apps.length>0&&React.createElement("div",{className:"empty-walkthrough-banner"},"Here is a list of apps that you can use. You can get started with an app like the",React.createElement("i",null,"Maze Generator")," or ",React.createElement("i",null,"Box Maker"),". Some apps, such as the ",React.createElement("i",null,"Offsetter")," require that you selected a shape before you can use them."),this.props.errorMessage&&this.errorHtml(),React.createElement("div",{className:"app-list row"},React.createElement("div",{className:"col-sm-2"},React.createElement("div",{className:"app-list__left-bar"},t.map((e=>React.createElement("div",{key:`category-${e}`,className:"app-list__left-bar__item",onClick:()=>this.scrollToRef(e)},React.createElement("a",null,e)))))),React.createElement("div",{className:"col-sm-10 app-list__main-panel scrollable-content",ref:e=>this.appList=e},React.createElement("div",{className:"app-list__search"},React.createElement("i",{className:"fa fa-search"}),React.createElement("label",{htmlFor:"app-search",style:{display:"none"}},"App Search"),React.createElement("input",{id:"app-search",className:"app-list__search-input",type:"input",value:this.state.searchText,placeholder:"Search Apps",autoFocus:!0,onChange:e=>this.setState({searchText:e.target.value})})),n))))}})})},function(e,t){EASEL.component.appManager=EASEL.redux.connect({mapStateToProps:()=>({}),mapDispatchToProps:e=>({requestAppProperties(){EASEL.appActions.requestAppProperties()},requestAppOutput(){EASEL.appActions.requestAppOutput()},updateAppProperty(t,n){e(EASEL.appActionCreators.updateAppProperty({id:t,value:n}))}}),component:createReactClass({propTypes:{name:PropTypes.string.isRequired,status:PropTypes.string.isRequired,output:PropTypes.string.isRequired,author:PropTypes.string.isRequired,formattedDescription:PropTypes.string,properties:PropTypes.array,onImport:PropTypes.func.isRequired,apiVersion:PropTypes.string.isRequired,volumes:PropTypes.array},updateApp(e){null!=e?setTimeout(this.props.requestAppOutput,0):setTimeout(this.props.requestAppProperties,0)},componentDidMount(){this.updateApp(this.props.properties,this.props.output,this.props.volumes)},componentDidUpdate(e){e.properties!==this.props.properties&&this.updateApp(this.props.properties,this.props.output,this.props.volumes)},importDisabled(){return this.props.status!==EASEL.appConstants.states.IDLE},setProperty(e,t){this.props.updateAppProperty(e,t)},rawAppDescription(){return{__html:this.props.formattedDescription}},render(){let e,t;if(e=null!=this.props.properties?this.props.properties.length>0?React.createElement("div",{className:"well"},React.createElement(EASEL.component.appProperties,{properties:this.props.properties,onSetProperty:this.setProperty})):null:React.createElement("p",null,"Loading..."),"1.0.0"===this.props.apiVersion)t=React.createElement(EASEL.component.appPreviewV1,{output:this.props.output,status:this.props.status});else{const e=this.props.volumes.filter((e=>null!=e.shape&&null!=e.cut));t=React.createElement(EASEL.component.appPreviewV2,{volumes:e,status:this.props.status,output:this.props.output})}return React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-5"},React.createElement("p",{className:"app-attribution"},"Created by ",this.props.author),React.createElement("div",{className:"app-description",dangerouslySetInnerHTML:this.rawAppDescription()}),e,React.createElement("div",{className:"form-group"},React.createElement("button",{className:"btn btn-success",disabled:this.importDisabled(),onClick:this.props.onImport},"Import"))),React.createElement("div",{className:"col-sm-7"},React.createElement("div",{id:"output-preview","data-api-version":this.props.apiVersion},t)))}})})},function(e,t){EASEL.component.appPreviewV1=createReactClass({propTypes:{output:PropTypes.string.isRequired,status:PropTypes.oneOf(Object.keys(EASEL.appConstants.states)).isRequired},errorState(){return React.createElement("p",{className:"alert alert-danger"},this.props.output)},failedState(){return React.createElement("p",{className:"alert alert-info"},this.props.output)},idleState(){return React.createElement("div",null,React.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.output}}))},runningState:()=>React.createElement("p",{id:"app-preview-loading"},"Loading..."),render(){const e=EASEL.appConstants.states;switch(this.props.status){case e.ERROR:return this.errorState();case e.FAILED:return this.failedState();case e.IDLE:return this.idleState();case e.RUNNING:return React.createElement("div",null,this.runningState(),this.idleState());default:return null}}})},function(e,t){EASEL.component.appPreviewV2=createReactClass({propTypes:{volumes:PropTypes.array.isRequired,output:PropTypes.string.isRequired,status:PropTypes.oneOf(Object.keys(EASEL.appConstants.states)).isRequired},errorState(){return React.createElement("p",{className:"alert alert-danger"},this.props.output)},failedState(){return React.createElement("p",{className:"alert alert-info"},this.props.output)},idleState(){const{volumes:e}=this.props;if(0===e.length)return null;const t=EASEL.volumeHelper.boundingBoxLeft(e),n=EASEL.volumeHelper.boundingBoxTop(e),a=EASEL.volumeHelper.boundingBoxRight(e),r=EASEL.volumeHelper.boundingBoxBottom(e),o=a-t,s=n-r,i=EASEL.store.getState(),l=EASEL.materialStore.getCurrentDepth(),c=EASEL.bit(EASEL.bitSelectors.strokeBit(i)).inchWidth(l),p=.01*o+c,u=.01*s+c,d=`${t-p} ${r-u} ${o+2*p} ${s+2*u}`,h=`translate(0 ${n+r})`;return React.createElement("svg",{width:"400px",height:"400px",viewBox:d,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},React.createElement("g",{transform:h},React.createElement(EASEL.component.appPreview.volumes,{volumes:e})))},runningState:()=>React.createElement("p",{id:"app-preview-loading"},"Loading..."),render(){const e=EASEL.appConstants.states;switch(this.props.status){case e.ERROR:return this.errorState();case e.FAILED:return this.failedState();case e.IDLE:return this.idleState();case e.RUNNING:return React.createElement("div",null,this.runningState(),this.idleState());default:return null}}})},function(e,t){EASEL.component.appProperties=createReactClass({propTypes:{properties:PropTypes.arrayOf(PropTypes.shape({id:PropTypes.string.isRequired,type:PropTypes.oneOf(["boolean","range","file-input","text","list"]).isRequired})).isRequired,onSetProperty:PropTypes.func.isRequired},render(){const{properties:e}=this.props,t=e.map((e=>{switch(e.type){case"boolean":return React.createElement(EASEL.component.booleanProperty,{key:e.id,value:e.value,id:e.id,onChange:this.props.onSetProperty});case"range":return React.createElement(EASEL.component.rangeProperty,{key:e.id,value:e.value,id:e.id,min:e.min,max:e.max,step:e.step,onChange:this.props.onSetProperty});case"file-input":return React.createElement(EASEL.component.filepickerProperty,{key:e.id,id:e.id,onChange:this.props.onSetProperty,mimeTypes:e.mimeTypes});case"text":return React.createElement(EASEL.component.textProperty,{key:e.id,value:e.value,id:e.id,onChange:this.props.onSetProperty});case"list":return React.createElement(EASEL.component.listProperty,{key:e.id,value:e.value,id:e.id,onChange:this.props.onSetProperty,options:e.options});default:return}}));return React.createElement("div",{className:"app-properties"},t)}})},function(e,t){EASEL.component.appThumbnail=createReactClass({propTypes:{afterClick:PropTypes.func.isRequired,id:PropTypes.number.isRequired,name:PropTypes.string.isRequired,thumbnail:PropTypes.string.isRequired,altThumbnail:PropTypes.string,publiclyVisible:PropTypes.bool.isRequired,author:PropTypes.string},getInitialState:()=>({useAltImage:!1}),onMouseEnter(){this.setState({useAltImage:!0})},onMouseLeave(){this.setState({useAltImage:!1})},handleClick(e){e.preventDefault(),this.props.disabled||(this.props.activateApp(this.props.id,this.props.name),this.props.afterClick())},render(){const e=this.state.useAltImage&&this.props.altThumbnail?this.props.altThumbnail:this.props.thumbnail;return React.createElement("div",{className:"app-thumbnail-container",onClick:this.handleClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},React.createElement("div",{className:`app-thumbnail ${this.props.disabled&&"disabled"}`},React.createElement("div",{className:"app-thumbnail-image-container",style:{backgroundImage:`url(${e})`}}),React.createElement("div",{className:"app-thumbnail-caption"},React.createElement(EASEL.component.a,null,this.props.name),React.createElement("br",null),React.createElement("p",{className:"app-attribution app-attribution-thumbnail"},this.props.author)),!this.props.publiclyVisible&&React.createElement("span",{className:"thumbnail-tag"},"Private")))}})},function(e,t){null==EASEL.component.appPreview&&(EASEL.component.appPreview={}),EASEL.component.appPreview.drill=createReactClass({render(){const e=EASEL.store.getState(),t=EASEL.materialStore.getCurrentDepth(),n=EASEL.bit(EASEL.bitSelectors.strokeBit(e)).inchWidth(t),a={shape:{type:"ellipse",center:this.props.volume.shape.center,flipping:{},width:n,height:n,rotation:0},cut:{type:"fill",depth:t,outlineStyle:"on-path"}};return React.createElement(EASEL.component.appPreview.path,{volume:a})}})},function(e,t){null==EASEL.component.appPreview&&(EASEL.component.appPreview={}),EASEL.component.appPreview.path=createReactClass({render(){let{shape:e,cut:t}=this.props.volume;e=EASEL.shapeUtils.pathifyShape(e);const n=`matrix(${EASEL.shapeUtils.shapeMatrix(e).toArray().join(",")})`,a=EASEL.pathUtils.pathBoundingBox(e.points),r=a.minX===a.maxX?1:e.width/(a.maxX-a.minX),o=a.minY===a.maxY?1:e.height/(a.maxY-a.minY),s=-(a.minX+a.maxX)/2,i=-(a.minY+a.maxY)/2,l=e=>({x:(e.x+s)*r,y:(e.y+i)*o}),c=e=>({x:e.x*r,y:e.y*o}),p=Array.from(e.points).map((e=>(()=>{const t=[];for(let n of Array.from(e)){const e=l(n);null!=n.lh&&(e.lh=c(n.lh)),null!=n.rh&&(e.rh=c(n.rh)),t.push(e)}return t})()));return React.createElement("g",{transform:n},React.createElement("path",{className:t.type,d:EASEL.svgPathBuilder.string(p)}))}})},function(e,t){null==EASEL.component&&(EASEL.component={}),null==EASEL.component.appPreview&&(EASEL.component.appPreview={}),EASEL.component.appPreview.text=createReactClass({render(){const{shape:e,cut:t}=this.props.volume,n=EASEL.polylineGenerator.process(e).all().reduce(((e,t)=>{const n=t.points.map((e=>`${e.x},${e.y}`));return e.push(`M${n.join("L")}Z`),e}),[]);return React.createElement("g",null,React.createElement("path",{className:t.type,d:n.join(" ")}))}})},function(e,t){null==EASEL.component.appPreview&&(EASEL.component.appPreview={}),EASEL.component.appPreview.volumes=createReactClass({propTypes:{volumes:PropTypes.array.isRequired},render(){const{volumes:e}=this.props;if(0===e.length)return null;let t=e.map(((e,t)=>{let n;switch(e.shape.type){case"text":n=EASEL.component.appPreview.text;break;case"drill":n=EASEL.component.appPreview.drill;break;default:n=EASEL.component.appPreview.path}const a=e.cut.depth/EASEL.materialStore.getCurrentDepth(),r=Math.floor(255*(1-a)),o=`rgb(${r},${r},${r})`,s="fill"===e.cut.type||"drill"===e.cut.type?{fill:o,stroke:"none"}:{fill:"none",stroke:o};return React.createElement("g",{fill:s.fill,stroke:s.stroke,key:t},React.createElement(n,{key:e.id,volume:e}))}));return React.createElement("g",{transform:"scale(1, -1)"},t)}})},function(e,t){EASEL.component.booleanProperty=createReactClass({propTypes:{id:PropTypes.string.isRequired,value:PropTypes.bool.isRequired,onChange:PropTypes.func.isRequired},onChange(e){this.props.onChange(this.props.id,e.target.checked)},render(){return React.createElement("div",{className:"form-group"},React.createElement("label",null,this.props.id),React.createElement("div",{className:"pull-right"},React.createElement("input",{type:"checkbox",defaultChecked:this.props.value,onChange:this.onChange})))}})},function(e,t){EASEL.component.filepickerProperty=createReactClass({propTypes:{id:PropTypes.string.isRequired,onChange:PropTypes.func.isRequired,mimeTypes:PropTypes.array},onFile(e){this.props.onChange(this.props.id,e.url)},onClick(){let e={};null!=this.props.mimeTypes&&(e=EASEL.merge(e,{accept:this.props.mimeTypes})),EASEL.filepickerUtils.pick(e).then(this.onFile)},render(){return React.createElement("div",{className:"form-group"},React.createElement("label",null,this.props.id),React.createElement("div",{className:"pull-right"},React.createElement("button",{className:"btn btn-primary",onClick:this.onClick},"Upload file")))}})},function(e,t){EASEL.component.listProperty=createReactClass({propTypes:{id:PropTypes.string.isRequired,value:PropTypes.string.isRequired,options:PropTypes.array.isRequired,onChange:PropTypes.func.isRequired},onChange(e){this.props.onChange(this.props.id,e.target.value)},render(){const{options:e}=this.props,t=e.map((e=>{let t,n;return"string"===typeof e?n=t=e:(n=e[0],t=e[1]),React.createElement("option",{key:n,value:n},t)}));return React.createElement("div",{className:"form-group"},React.createElement("label",null,this.props.id),React.createElement("div",{className:"pull-right"},React.createElement("select",{value:this.props.value,onChange:this.onChange},t)))}})},function(e,t){EASEL.component.rangeProperty=createReactClass({propTypes:{id:PropTypes.string.isRequired,value:PropTypes.number.isRequired,onChange:PropTypes.func.isRequired,min:PropTypes.number,max:PropTypes.number,step:PropTypes.number},getDefaultProps:()=>({min:0,max:100,step:1}),rangeChange(e){this.submitChange(parseFloat(e.target.value))},textChange(e){this.submitChange(parseFloat(e))},submitChange(e){e!==this.props.value&&this.props.onChange(this.props.id,e)},render(){const e=this.props.value.toString(),t=e.length+1;return React.createElement("div",{className:"form-group"},React.createElement("label",null,this.props.id),React.createElement("div",{className:"pull-right"},React.createElement("input",{type:"range",min:this.props.min,max:this.props.max,step:this.props.step,value:this.props.value,onChange:this.rangeChange}),React.createElement(EASEL.component.textInput,{initialValue:e,submit:this.textChange,size:t,className:"range-output"})))}})},function(e,t){EASEL.component.textProperty=createReactClass({propTypes:{id:PropTypes.string.isRequired,value:PropTypes.string.isRequired,onChange:PropTypes.func.isRequired},onChange(e){this.props.onChange(this.props.id,e.target.value)},render(){return React.createElement("div",{className:"form-group"},React.createElement("label",null,this.props.id),React.createElement("div",{className:"pull-right"},React.createElement("input",{defaultValue:this.props.value,onChange:this.onChange})))}})},function(e,t){EASEL.component.bitSelectorCategory=createReactClass({buildTooltip:({type:e,title:t,tooltip:n})=>t?React.createElement(ReactBootstrap.Popover,{id:`${e}-popover`,title:t},React.createElement("span",null,n)):null,render(){const{type:e,rows:t}=this.props,n=EASEL.bitHelper.bitTypeInfo(e),a=this.buildTooltip(n);return React.createElement("td",{rowSpan:t,className:"bit-table__facet"},null!=a&&React.createElement(ReactBootstrap.OverlayTrigger,{trigger:["hover","focus"],placement:"left",overlay:a},React.createElement("div",null,React.createElement("div",null,React.createElement("span",null,e),React.createElement("i",{className:"fa fa-question-circle bit-table__badge"})),React.createElement("img",{src:n.image,className:"bit-table__facet-image"}))))}})},function(e,t){EASEL.component.bitSelectorCustomCategory=createReactClass({render(){const{proLabel:e,rows:t}=this.props;return React.createElement("td",{rowSpan:t,className:"bit-table__facet"},React.createElement("div",null,React.createElement("div",null,React.createElement("span",null,"Custom"),e&&React.createElement(EASEL.component.proLabel,null))))}})},function(e,t){EASEL.component.bitSelectorOtherBitRow=createReactClass({render(){const{bit:e,otherBitId:t,changeOtherVBitSize:n,onSelectOtherVBit:a,changeOtherBitSize:r,toggleDropdown:o}=this.props,s=e.id===t,i=["bit-table__bit","bit-table__other-bit"];return s&&i.push("bit-table__bit--selected"),React.createElement("tr",{className:"bit-table__row",key:"otherBit"},React.createElement("td",{className:"bit-table__facet"}),React.createElement("td",{className:i.join(" "),onClick:()=>a(t)},React.createElement("div",{className:"bit-table__bit__container"},React.createElement("div",{className:"bit-table__bit__description bit-table__bit__description--other"},React.createElement("div",null,"Other"),s?React.createElement("div",null,React.createElement(EASEL.component.utils.customBitInput,{bit:e,changeOtherVBitSize:n,changeOtherBitSize:r,toggleDropdown:o})):React.createElement("div",{className:"bit-table__image-container"},React.createElement("img",{src:EASEL.assets.images.otherBit,className:"bit-table__bit-image"}))))))}})},function(e,t){EASEL.component.bitSelectorRow=createReactClass({clickHandler(){const{bit:e}=this.props;if(null!=e.error)return!1;this.props.onChange(e.id,e.width,e.unit,e.tipAngle,e.type,e.source)},disabledInfo(e){if(null!=e.error){const{title:t,description:n}=e.error,a=React.createElement(ReactBootstrap.Popover,{id:"disabled-popover",title:t},React.createElement("span",null,n));return React.createElement(ReactBootstrap.OverlayTrigger,{trigger:["hover","focus"],placement:"left",overlay:a},React.createElement("div",null,React.createElement("i",{className:"fa fa-question-circle bit-table__badge"})))}},render(){const{bit:e,image:t,selectedBit:n}=this.props,a=["bit-table__bit"];return n.id===e.id&&a.push("bit-table__bit--selected"),this.disabledInfo(e)&&a.push("bit-table__bit--disabled"),React.createElement("td",{className:a.join(" "),onClick:this.clickHandler},React.createElement("div",{className:"bit-table__bit__container"},React.createElement("div",{className:"bit-table__bit__description"},React.createElement("div",null,React.createElement("span",null,EASEL.bitHelper.descriptionForBit(e))),React.createElement("div",{className:"bit-table__image-container"},React.createElement("img",{src:t,className:"bit-table__bit-image"})),React.createElement("div",null,e.storeURL&&React.createElement("a",{target:"_blank",rel:"noreferrer",className:"bit-thumb__badge",href:e.storeURL+"?utm_source=easel&utm_medium=inapp&utm_content=bit_thumbnail&utm_campaign=easelbits"},null!=e.error?this.disabledInfo(e):React.createElement("i",{className:"fa fa-shopping-cart bit-thumb__badge__icon"})))),e.name&&React.createElement("div",null,React.createElement("span",null,e.name))))}})},function(e,t){EASEL.component.bitTypeButton=createReactClass({render(){const{active:e,buttonImage:t,buttonText:n,onClick:a,id:r}=this.props,[o,s]=e?["bit-type-button bit-type-button--active","btn btn-primary"]:["bit-type-button","btn btn-default"];return React.createElement("div",{className:o},React.createElement("button",{className:s,onClick:a,id:r},React.createElement("span",null,n),t))}})},function(e,t){EASEL.component.bitTypeButtonContainer=createReactClass({iconSvg(e){},render(){const{bit:e,onClick:t}=this.props;return React.createElement("div",{className:"bit-type-button-container"},React.createElement(EASEL.component.bitTypeButton,{id:"bit-table__other-v-bit",onClick:()=>t("other-v-bit"),active:"other-v-bit"===e.id,buttonImage:this.iconSvg("M 0,0 6,12 12,0 10,0 6,8 2,0 Z"),buttonText:"V-Tip"}),React.createElement(EASEL.component.bitTypeButton,{id:"bit-table__other-bit",onClick:()=>t("other--bit"),active:"other-bit"===e.id,buttonImage:this.iconSvg("M 0,0 0,12 12,12 12,0 10,0 10,10 2,10 2,0 Z"),buttonText:"Flat"}))}})},function(e,t,n){const a=n(28);EASEL.component.facetedBitSelector=createReactClass({propTypes:{bit:EASEL.propTypes.bit.isRequired,bits:PropTypes.arrayOf(EASEL.propTypes.bit).isRequired,onChange:PropTypes.func.isRequired,isMain:PropTypes.bool.isRequired,toggleDropdown:PropTypes.func.isRequired},getInitialState:()=>({}),increasingWidth:function(e,t){return"V"===e.type&&"V"===t.type?e.tipAngle-t.tipAngle:EASEL.bitHelper.inchWidth(e)-EASEL.bitHelper.inchWidth(t)},changeOtherBitSize(e,t){this.props.onChange("other-bit",e,t,0,"other-flat",a.USER_UNSAVED_INPUT)},changeOtherVBitSize(e,t,n){n>0&&n<180?this.props.onChange("other-v-bit",e,t,n,"V"):EASEL.alert("V-Bit angle must be greater than 0 and less than 180 degrees.")},_onSelectOtherVBit(e){e!==this.props.bit.id&&("other-v-bit"===e&&this.props.bit.tipAngle>0&&this.props.bit.tipAngle<180?this.props.onChange("other-v-bit",EASEL.bitHelper.bitSizeInches(),"in",this.props.bit.tipAngle,"V",a.USER_UNSAVED_INPUT):"other-v-bit"===e?this.props.onChange("other-v-bit",EASEL.bitHelper.bitSizeInches(),"in",90,"V",a.USER_UNSAVED_INPUT):this.props.onChange("other-bit",EASEL.bitHelper.bitSizeInches(),"in",0,"other-flat",a.USER_UNSAVED_INPUT))},selectOtherBit(){"other-bit"!==this.props.bit.id&&"other-v-bit"!==this.props.bit.id&&this.changeOtherBitSize(EASEL.bitHelper.bitSizeInches(),"in")},customBitRows(e,t){const n=[],a=e.sort(this.increasingWidth);for(let r=0;r<a.length;r++){const o=a[r];n.push(React.createElement("tr",{className:"bit-table__row",key:r},0===r&&React.createElement(EASEL.component.bitSelectorCustomCategory,{rows:e.length,proLabel:!t.pro}),React.createElement(EASEL.component.bitSelectorRow,{bit:o,image:o.imageURL,selectedBit:this.props.bit,onChange:this.props.onChange})))}return n},globalBitRows(e){const t=[],n=e.groupBy((e=>e.type));for(const a in n){const e=n[a],r=e.sort(this.increasingWidth);for(let n=0;n<r.length;n++){const o=r[n];t.push(React.createElement("tr",{className:"bit-table__row",key:o.id},0===n&&React.createElement(EASEL.component.bitSelectorCategory,{rows:e.length,type:a}),React.createElement(EASEL.component.bitSelectorRow,{bit:o,image:o.imageURL,selectedBit:this.props.bit,onChange:this.props.onChange})))}}return t},bitTableRows(e,t){const{otherBitType:n}=e,[a,r]=t.partition((e=>e.global||e.storeURL)),o=this.customBitRows(r,e),s=this.globalBitRows(a);return s.push(React.createElement(EASEL.component.bitSelectorOtherBitRow,{key:"other-bit-row",bit:this.props.bit,otherBitId:n,changeOtherVBitSize:this.changeOtherVBitSize,changeOtherBitSize:this.changeOtherBitSize,toggleDropdown:this.props.toggleDropdown,onSelectOtherVBit:this._onSelectOtherVBit})),e.pro?s.concat(o):o.concat(s)},render(){if(!this.props.bit.width||!this.props.bit.unit)return null;const e=this.props.bits.groupBy((e=>EASEL.bitHelper.bitTypeInfo(e.type).supertype)),t=Object.keys(e).sort(),n=React.createElement("span",null,"Selecting a v bit enables you to ",React.createElement("a",{href:"https://inventables.zendesk.com/hc/en-us/articles/360012725894-What-is-V-Carving-",target:"_blank",rel:"noreferrer"},"v-carve.")," Carving requires use of an ",React.createElement("a",{href:"https://inventables.zendesk.com/hc/en-us/articles/360012849133-Easel-Pro-FAQ-and-Overview",target:"_blank",rel:"noreferrer"},"Easel Pro")," carve day.");return React.createElement("div",{className:"tab-content"},t.map((t=>{const a=e[t];var r=EASEL.bitHelper.supertypeInfo(t);const o=this.bitTableRows(r,a),s=React.createElement("h4",{className:"panel-title"},t,r.pro&&React.createElement(EASEL.component.utils.hoverPopover,{popoverTitle:"V Carving",popoverContent:n,id:"faceted-bit-popover"},React.createElement(EASEL.component.proLabel,null)));return React.createElement("div",{className:"faceted-bit-selector","data-type":t,key:t},React.createElement(EASEL.component.utils.collapsiblePanel,{header:s},React.createElement("table",{className:"bit-table"},React.createElement("thead",{className:"bit-table__head"},React.createElement("tr",{className:"bit-table__row"},React.createElement("th",{className:"bit-table__header"},React.createElement("div",null,"Type")),React.createElement("th",{className:"bit-table__header"},React.createElement("div",null,"Size")))),React.createElement("tbody",{className:"bit-table__body"},o))))})))}})},function(e,t){EASEL.component.contextMenu=createReactClass({propTypes:{selectedVolumeIds:PropTypes.array.isRequired},cut:()=>EASEL.mainMenu.trigger("cut"),copy:()=>EASEL.mainMenu.trigger("copy"),remove:()=>EASEL.mainMenu.trigger("remove"),flipHorizontal:()=>EASEL.mainMenu.trigger("flip-horizontal"),flipVertical:()=>EASEL.mainMenu.trigger("flip-vertical"),sendBackward:()=>EASEL.mainMenu.trigger("backward"),sendToBack:()=>EASEL.mainMenu.trigger("send-to-back"),bringForward:()=>EASEL.mainMenu.trigger("forward"),bringToFront:()=>EASEL.mainMenu.trigger("bring-to-front"),combine:()=>EASEL.mainMenu.trigger("combine"),alignLeft(){return this.triggerAlignment("left")},alignHorizontalCenter(){return this.triggerAlignment("horizontal")},alignRight(){return this.triggerAlignment("right")},alignBottom(){return this.triggerAlignment("bottom")},alignVerticalCenter(){return this.triggerAlignment("vertical")},alignTop(){return this.triggerAlignment("top")},selectMatchingDepth:()=>EASEL.mainMenu.trigger("select-matching-depth"),triggerAlignment(e){return EASEL.volumeActions.align(this.props.selectedVolumeIds,e)},multipleCombinableVolumes(){return EASEL.volumeHelper.combinableVolumes(EASEL.volumeStore.getVolumes(this.props.selectedVolumeIds)).length>1},render(){const e=EASEL.volumeStore.getVolumes(EASEL.editorStore.getSelectedVolumeIds());return React.createElement("div",{className:"context-menu"},React.createElement("ul",{className:"dropdown-menu",style:{display:"block"}},React.createElement("li",null,React.createElement("a",{onClick:this.cut},React.createElement(EASEL.component.modifierKey,{title:"Cut",shortcut:"X"}))),React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.copy},React.createElement(EASEL.component.modifierKey,{title:"Copy",shortcut:"C"}))),React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.remove},"Remove")),!EASEL.volumeHelper.isOneDrillHoleSelected(e)&&[React.createElement("li",{key:"divider",className:"divider"}),React.createElement("li",{key:"flip-horizontal"},React.createElement(EASEL.component.a,{className:"flip-icon",onClick:this.flipHorizontal},"Flip Horizontal")),React.createElement("li",{key:"flip-vertical"},React.createElement(EASEL.component.a,{id:"flip-vertical",className:"flip-icon",onClick:this.flipVertical},"Flip Vertical"))],!EASEL.volumeHelper.areOnlyDrillHolesSelected(e)&&[React.createElement("li",{key:"divider",className:"divider"}),React.createElement("li",{key:"send-backward"},React.createElement(EASEL.component.a,{onClick:this.sendBackward},React.createElement(EASEL.component.modifierKey,{title:"Send Backward",shortcut:"["}))),React.createElement("li",{key:"send-to-back"},React.createElement(EASEL.component.a,{onClick:this.sendToBack},React.createElement(EASEL.component.modifierKey,{title:"Send to Back",shortcut:";"}))),React.createElement("li",{key:"bring-forward"},React.createElement(EASEL.component.a,{onClick:this.bringForward},React.createElement(EASEL.component.modifierKey,{title:"Bring Forward",shortcut:"]"}))),React.createElement("li",{key:"bring-to-front"},React.createElement(EASEL.component.a,{onClick:this.bringToFront},React.createElement(EASEL.component.modifierKey,{title:"Bring to Front",shortcut:"'"})))],this.multipleCombinableVolumes()&&[React.createElement("li",{key:"divider",className:"divider"}),React.createElement("li",{key:"combine"},React.createElement(EASEL.component.a,{onClick:this.combine},React.createElement(EASEL.component.modifierKey,{title:"Combine",shortcut:"J"})))],this.props.selectedVolumeIds.length>1&&[React.createElement("li",{key:"divider",className:"divider"}),React.createElement("li",{key:"align-left"},React.createElement(EASEL.component.a,{onClick:this.alignLeft},"Align left")),React.createElement("li",{key:"align-horizontal-center"},React.createElement(EASEL.component.a,{onClick:this.alignHorizontalCenter},"Align horizontal center")),React.createElement("li",{key:"align-right"},React.createElement(EASEL.component.a,{onClick:this.alignRight},"Align right")),React.createElement("li",{key:"align-bottom"},React.createElement(EASEL.component.a,{onClick:this.alignBottom},"Align bottom")),React.createElement("li",{key:"align-vertical-center"},React.createElement(EASEL.component.a,{onClick:this.alignVerticalCenter},"Align vertical center")),React.createElement("li",{key:"align-top"},React.createElement(EASEL.component.a,{onClick:this.alignTop},"Align top"))],EASEL.volumeHelper.allSelectedShapesMatchingCutDepth(e)&&[React.createElement("li",{key:"divider",className:"divider"}),React.createElement("li",{key:"matching-depth"},React.createElement(EASEL.component.a,{onClick:this.selectMatchingDepth},"Select by Matching Depth"))]))}})},function(e,t){EASEL.component.contextMenuController=createReactClass({getInitialState:()=>({visible:!1,position:null}),componentDidMount(){EASEL.flux.events.addListener("show-context-menu",this.show),EASEL.volumeStore.addChangeListener(this.hide)},componentWillUnmount(){EASEL.flux.events.removeListener("show-context-menu",this.show),EASEL.volumeStore.removeChangeListener(this.hide)},show(e){let t;EASEL.stats.trackEventOnce("Right Click Menu");const n=EASEL.volumeStore.getVolumes(EASEL.editorStore.getSelectedVolumeIds());t=EASEL.volumeHelper.isOneDrillHoleSelected(n)?172:EASEL.volumeHelper.areOnlyDrillHolesSelected(n)?334:504;const a=null!=this.element&&this.element.getBoundingClientRect()||{left:0,top:0},r=e.clientX-a.left,o=Math.min(window.innerHeight-a.top-t,e.clientY-a.top);if(null!=EASEL.editorStore.getSelectedVolumeIds()&&EASEL.editorStore.getSelectedVolumeIds().length>0)return this.setState({visible:!0,position:{x:r,y:o}})},hide(){return this.setState({visible:!1})},render(){const{visible:e}=this.state;return React.createElement("div",{id:"context-menu-bg",ref:e=>this.element=e,onClick:e?this.hide:null,style:e?void 0:{pointerEvents:"none"}},e&&React.createElement("div",{id:"context-menu-wrapper",style:{top:this.state.position.y,left:this.state.position.x}},React.createElement(EASEL.component.contextMenu,{selectedVolumeIds:EASEL.editorStore.getSelectedVolumeIds()})))}})},function(e,t){EASEL.component.categoriesList=createReactClass({getInitialState:()=>({categories:[]}),componentDidMount(){this.setState({categories:this.getCategories()})},getCategories(){const e=["New","Basic"],t={Christmas:{from:"December 14",to:"December 25"},Hannukah:{from:"December 14",to:"December 26"},Kwanzaa:{from:"December 14",to:"January 6"},"New Years":{from:"January 1",to:"January 1"},"Valentines Day":{from:"February 14",to:"February 14"},"Women's Day":{from:"March 8",to:"March 8"},"St Patrick's Day":{from:"March 17",to:"March 17"},Ramadan:{from:"April 2",to:"May 1"},Easter:{from:"April 17",to:"April 17"},"Cinco de Mayo":{from:"May 5",to:"May 5"},"July 4th":{from:"July 4",to:"July 4"},Halloween:{from:"October 31",to:"October 31"},"Men's Day":{from:"November 19",to:"November 19"},Thanksgiving:{from:"November 25",to:"November 25"}};for(const n in t){const a=t[n],r=new Date,o=new Date(`${a.from}, ${(new Date).getFullYear()} 00:00:01`),s=new Date(`${a.to}, ${(new Date).getFullYear()} 00:00:01`);r>o.setDate(o.getDate()-14)&&r<s.setDate(s.getDate()+1)&&e.push(n)}return e.push("Animal","Decoration","Drink","Emoji","Fashion","Food","Game","Holiday","Music","Nature","Pattern","Science","Symbol","Tool","Travel"),e},render(){const{categories:e}=this.state,{selectedCategory:t,onSelectCategory:n}=this.props;return React.createElement("ul",{className:"nav nav-stacked nav-pills"},e.map((e=>React.createElement("li",{key:`category-${e}`,className:e===t?"active":""},React.createElement(EASEL.component.a,{className:"nav-link",onClick:()=>n(e)},e)))))}})},function(e,t){EASEL.component.cutTypeSelectorComponent=createReactClass({getInitialState:()=>({loading:!0,volumes:[],volumePreviews:[],loadingError:!1,previewData:[{title:"Fill",type:"fill",outlineStyle:"fill"},{title:"Outline (on path)",type:"outline",outlineStyle:"on-path"},{title:"Outline (outside)",type:"outline",outlineStyle:"outside"},{title:"Outline (inside)",type:"outline",outlineStyle:"inside"}]}),componentDidMount(){this.fetchAndRenderSvg()},fetchAndRenderSvg(){const{designElement:e,bit:t}=this.props,n=e.pro;fetch(EASEL.crossOriginResources.getUrlToRequestWithOriginHeader(e.url)).then((e=>e.text())).then((e=>n?window.atob(EASEL.string.reverse(e)):e)).then((e=>EASEL.svgImporter.svgStringToVolumes(e))).then((a=>{const r="V"===t.groupName?EASEL.constants.V_BIT_PLACED_SHAPE_DEPTH:EASEL.materialStore.getShapePlacementDepth();a=a.map((t=>EASEL.merge(t,{shape:{icon:{pro:n,name:e.term}},cut:{depth:r}}))),this.setState({loading:!1,loadingError:!1,volumes:a},this.renderSvgPreviews)})).catch((e=>{console.error(e),this.setState({loading:!1,loadingError:!0})}))},componentDidUpdate(e){e.designElementIndex!==this.props.designElementIndex&&this.setState({loading:!0,loadingError:!1,volumes:[],volumePreviews:[]},this.fetchAndRenderSvg)},renderSvgPreviews(){const{previewData:e,volumes:t}=this.state,n=e.map((e=>{const n=EASEL.merge(t);n.forEach((function(t){t.cut.type=e.type,t.cut.outlineStyle=e.outlineStyle}));return EASEL.thumbnailRenderer({height:250,width:250,passedVolumes:n,material:{width:30,height:30}}).render().getElement().toDataURL()}));this.setState({volumePreviews:n,loading:!1})},renderPreviews(){const{volumes:e,volumePreviews:t,previewData:n}=this.state;return 0===e.length?null:React.createElement("div",{className:"cut-type-selector"},n.map(((n,a)=>React.createElement("div",{key:"thumbnail-preview-"+a,onClick:()=>{this.props.handleClick({outlineStyle:n.outlineStyle,volumes:e})},className:`cut-selector--${n.outlineStyle}`},React.createElement("img",{src:t[a],style:{width:"250px"}}),React.createElement("button",{key:n.outlineStyle,className:"btn btn-primary btn-block",type:"button"},n.title)))))},render(){const{isFirstIcon:e,isLastIcon:t}=this.props,{loading:n,loadingError:a}=this.state;return React.createElement("div",null,React.createElement("div",{className:"design-element-container__navigation"},React.createElement(EASEL.component.a,{onClick:this.props.cancelImport},"\u2190 Back"),React.createElement("h4",null,"Select Cut Type"),React.createElement("div",{className:"design-element-container__navigation__buttons"},React.createElement("button",{className:"btn btn-link "+(e?"disabled":""),onClick:this.props.setPreviousDesignElement,disabled:this.props.isFirstIcon},"\u2190 Previous Icon"),React.createElement("button",{className:"btn btn-link "+(t?"disabled":""),onClick:this.props.setNextDesignElement,disabled:this.props.isLastIcon},"Next Icon \u2192"))),React.createElement("div",{className:"design-element-container__importer"},n&&React.createElement("div",{className:"pro-list-container__spinner"},React.createElement(EASEL.component.spinner,{size:25})),!n&&!a&&this.renderPreviews(),a&&React.createElement("p",null,"There was an error while loading the design element.")))}}),EASEL.component.cutTypeSelector=EASEL.redux.connect({mapStateToProps:e=>({bit:EASEL.bitSelectors.bit(e)}),component:EASEL.component.cutTypeSelectorComponent})},function(e,t){EASEL.component.designElementThumbnail=createReactClass({propTypes:{nounProjectID:PropTypes.number.isRequired,name:PropTypes.string.isRequired,url:PropTypes.string.isRequired,afterClick:PropTypes.func.isRequired},render(){let{nounProjectID:e,name:t,url:n,previewUrl:a,pro:r}=this.props;const o=`design-element-${e}`;return a=a||n,React.createElement("div",{"data-noun-project-id":o,className:"design-element-thumbnail "+(r?"design-element-thumbnail__pro":""),onClick:this.props.afterClick},r&&React.createElement("div",{className:"design-element-thumbnail__overlay"}),React.createElement(EASEL.component.crossOriginImg,{className:"design-element-thumbnail__img",src:a,alt:t}))}})},function(e,t){EASEL.component.designElementsModal=EASEL.redux.connect({mapStateToProps:e=>({elements:e.designElements.elements,open:e.designElements.open,loadStatus:e.designElements.loadStatus,errorMessage:e.designElements.errorMessage,isBetaTester:EASEL.userSelectors.isBetaTester(e)}),mapDispatchToProps:e=>({closeElementsPanel:()=>e(EASEL.designElementsActionCreators.closeElementsPanel())}),component:createReactClass({mixins:[React.addons.PureRenderMixin],closeModal(){this.props.closeElementsPanel()},render:()=>React.createElement(EASEL.component.proDesignElementsContainer,null)})})},function(e,t){EASEL.component.proDesignElementsContainer=EASEL.redux.connect({mapStateToProps:e=>({elements:e.designElements.elements,open:e.designElements.open,loadStatus:e.designElements.loadStatus,errorMessage:e.designElements.errorMessage}),mapDispatchToProps:e=>({closeElementsPanel:()=>e(EASEL.designElementsActionCreators.closeElementsPanel())}),component:createReactClass({getInitialState:()=>({searchTerm:"",searchBarText:"",selectedCategory:"New"}),closeModal(){this.props.closeElementsPanel(),this.clearSearch()},clearSearch(){this.setState({searchBarText:"",searchTerm:""})},selectCategory(e){this.setState({selectedCategory:e,searchBarText:"",searchTerm:""})},searchIcons(){const{searchBarText:e}=this.state;this.setState({searchTerm:e,selectedCategory:""})},render(){let{selectedCategory:e,searchTerm:t,searchBarText:n}=this.state;const{errorMessage:a,open:r}=this.props,o=t||e,s=EASEL.merge([],this.props.elements);let i;return s.map((function(e){return e.pro=!1,e.term=e.name,e})),i="ERROR"===this.props.loadStatus?React.createElement("div",{className:"col-sm-6 alert alert-warning"},"Failed to load the design library",a):"LOADING"===this.props.loadStatus||"UNLOADED"===this.props.loadStatus?React.createElement(EASEL.component.spinner,null):React.createElement(EASEL.component.proDesignElementsList,{closeModal:this.closeModal,filterTerm:o,basicDesigns:s}),React.createElement(ReactBootstrap.Modal,{show:r,onHide:this.closeModal,bsSize:"large"},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"Design Library"),React.createElement("div",{className:"design-elements__search-container"},React.createElement("div",{className:"design-elements__search"},React.createElement("i",{className:"fa fa-search"}),React.createElement("label",{htmlFor:"element-search"},"Search Designs"),React.createElement("input",{id:"element-search",className:"design-elements__search-input",type:"input",value:n,placeholder:"Search Designs",onKeyPress:e=>"Enter"===e.key&&this.searchIcons(),onChange:e=>this.setState({searchBarText:e.target.value})}),""!==n&&React.createElement("i",{className:"fa fa-times",onClick:this.clearSearch})),React.createElement("button",{className:"btn btn-primary",onClick:this.searchIcons},"Search"))),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("div",{className:"modal-columns"},React.createElement("div",{className:"design-elements__categories column-nav"},React.createElement(EASEL.component.categoriesList,{selectedCategory:e,onSelectCategory:this.selectCategory})),i)))}})})},function(e,t){EASEL.component.proDesignElementsListComponent=createReactClass({propTypes:{closeModal:PropTypes.func.isRequired,filterTerm:PropTypes.string.isRequired,basicDesigns:PropTypes.array.isRequired},getInitialState(){return this.scrollRef=React.createRef(),{selectedDesignElementIndex:null,designs:{basic:[],pro:[]},currentPage:1,resultSet:1,loading:!0,noMoreElements:!1}},componentDidUpdate(e){return e.filterTerm!==this.props.filterTerm&&this.setState({designs:{basic:[],pro:[]},currentPage:1,resultSet:this.state.resultSet+1,loading:!0,noMoreElements:!1},this.searchDesigns),!0},componentDidMount(){this.searchDesigns()},randomBasicElements(){return this.props.basicDesigns.shuffle().slice(0,12)},setNextDesignElement(){const{selectedDesignElementIndex:e}=this.state;this.setState({selectedDesignElementIndex:e+1})},setPreviousDesignElement(){const{selectedDesignElementIndex:e}=this.state;this.setState({selectedDesignElementIndex:e-1})},setSelectedDesignElementIndex(e){this.setState({selectedDesignElementIndex:e})},getSelectedDesignElement(){const{designs:e,selectedDesignElementIndex:t}=this.state;return t<e.basic.length?e.basic[t]:e.pro[t-e.basic.length]},cancelImport(){this.setState({selectedDesignElementIndex:null})},loadProDesigns(){const{designs:e,currentPage:t,resultSet:n}=this.state,{filterTerm:a}=this.props;"New"===a||""===a?EASEL.designElementsAPI.recentUploads(t,48).then((t=>{n===this.state.resultSet&&(this.setState({designs:EASEL.merge(e,{pro:e.pro.concat(t)}),loading:!1}),t.length<48&&this.setState({noMoreElements:!0}))})):EASEL.designElementsAPI.search(a,t,48).then((t=>{n===this.state.resultSet&&(this.setState({designs:EASEL.merge(e,{pro:e.pro.concat(t)}),loading:!1}),t.length<48&&this.setState({noMoreElements:!0}))}))},displayDesignElements(e){const{filterTerm:t}=this.props,{loading:n}=this.state;if(0===e.length)return!n&&React.createElement("p",null,"We didn\u2019t find any designs for \u201c",t,"\u201d.");{const t=e[0].pro?this.state.designs.basic.length:0;return React.createElement("div",{className:"design-element-container"},e.map(((e,n)=>React.createElement(EASEL.component.designElementThumbnail,{key:e.id,name:e.term,url:e.url,nounProjectID:parseInt(e.id),previewUrl:e.preview_url,afterClick:this.setSelectedDesignElementIndex.bind(this,n+t),pro:e.pro}))))}},searchDesigns(){const{basicDesigns:e,filterTerm:t}=this.props;let n={basic:[],pro:[]};""===t?(n={basic:this.randomBasicElements(e),pro:[]},this.setState({designs:n,loading:!0,selectedDesignElementIndex:null},this.loadProDesigns)):"Basic"===t?(n={basic:e,pro:[]},this.setState({designs:n,loading:!1,selectedDesignElementIndex:null,noMoreElements:!0})):(e.forEach((e=>{`${e.name} ${e.category?e.category:""}`.toUpperCase().includes(t.toUpperCase())&&n.basic.push(e)})),this.setState({designs:n,loading:!0,selectedDesignElementIndex:null},this.loadProDesigns))},handleLoadDesigns(e){const{currentPage:t,noMoreElements:n}=this.state;e&&!n&&this.setState({currentPage:t+1,loading:!0},this.loadProDesigns)},importDesignElement({outlineStyle:e,volumes:t}){const{id:n,pro:a,term:r}=this.getSelectedDesignElement();EASEL.stats.trackEvent("Import Design Element",{iconId:n,term:r,pro:a,cutType:e});const o="fill"===e?"fill":"outline";t=t.map((t=>EASEL.merge(t,{cut:{outlineStyle:e,type:o}}))),EASEL.volumeActions.add(...t),EASEL.editorActions.select(...t.map((e=>e.id))),this.props.closeModal()},cutTypeSelector(){const{selectedDesignElementIndex:e,designs:t}=this.state;return React.createElement(EASEL.component.cutTypeSelector,{designElement:this.getSelectedDesignElement(),designElementIndex:e,handleClick:this.importDesignElement,cancelImport:this.cancelImport,setNextDesignElement:this.setNextDesignElement,setPreviousDesignElement:this.setPreviousDesignElement,isFirstIcon:0===e,isLastIcon:e===t.pro.length+t.basic.length-1})},showUserModal(){EASEL.stats.trackEvent(EASEL.events.showedAccountModal,{proRequired:!0,source:"Pro Design Library"}),this.props.openAccountModal()},render(){const{designs:e,noMoreElements:t,selectedDesignElementIndex:n,loading:a}=this.state,{filterTerm:r,isProSubscriber:o}=this.props;return React.createElement("div",{className:"pro-list-container column-content"},null!==n?this.cutTypeSelector():React.createElement("div",{className:"design-elements-container scrollable-content",ref:this.scrollRef},"New"!==r&&React.createElement("h4",null,r),"New"!==r&&this.displayDesignElements(e.basic),!a&&"Basic"!==r&&React.createElement("h4",null,"Pro Designs"),!a&&"New"!==r&&!o&&React.createElement("p",{className:"design-elements__upgrade"},"More \u201c",r,"\u201d icons available with an ",React.createElement(EASEL.component.a,{onClick:this.showUserModal},"Easel Pro subscription")),"Basic"!==r&&this.displayDesignElements(e.pro),!a&&React.createElement(ReactObserver.InView,{root:this.scrollRef.current,rootMargin:"200px 0px",onChange:e=>this.handleLoadDesigns(e)},React.createElement("hr",null)),t&&React.createElement("hr",null),a&&React.createElement("div",{className:"pro-list-container__spinner"},React.createElement(EASEL.component.spinner,{size:25}))))}}),EASEL.component.proDesignElementsList=EASEL.redux.connect({mapStateToProps:e=>({isProSubscriber:EASEL.userSelectors.isProSubscriber(Date.now(),e)}),mapDispatchToProps:e=>({openAccountModal:()=>{e(EASEL.userModalActionCreators.showUserModalAccountTab())}}),component:EASEL.component.proDesignElementsListComponent})},function(e,t){EASEL.component.additionalDepthInput=createReactClass({CUT_THROUGH_AMOUNTS:{in:[.01,.05,.1,.15],mm:[.2,.5,1,3]},onChangeAdditionalDepthAmount(e){const t=parseFloat(e.target.value);t>0&&EASEL.stats.trackEvent(EASEL.events.usedAdditionalCutThroughDepth),EASEL.volumeActions.setCutParams(this.props.selectedVolumeIds,{additionalDepthAmount:t})},getCutThroughOptions(){const e=[...this.CUT_THROUGH_AMOUNTS[this.props.preferredUnit]],t=EASEL.units.convertToUnit(this.props.representativeCut.additionalDepthAmount,"in",this.props.preferredUnit);t>0&&!this.CUT_THROUGH_AMOUNTS[this.props.preferredUnit].some((e=>EASEL.math.closeTo(e,t)))&&e.push(t);const n=e.sort().map((e=>{const t=EASEL.units.convertToUnit(e,this.props.preferredUnit,"in");return React.createElement("option",{key:t,value:t},`${parseFloat(e.toFixed(2))} ${this.props.preferredUnit}`)}));return n.unshift(React.createElement("option",{key:"none",value:0},"None")),n},render(){return React.createElement("div",{className:"additional-depth-input"},React.createElement("div",{className:"additional-depth-input__checkbox-container"},React.createElement("label",{className:"additional-depth-input__label",htmlFor:"cut-through"},"Add Depth",React.createElement(ReactBootstrap.OverlayTrigger,{placement:"top",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"additional-depth-input__tooltip"},"Cut into the wasteboard to ensure shape is completely cut through")},React.createElement("i",{className:"fa fa-question-circle additional-depth-input__tooltip-icon"})))),React.createElement("select",{id:"cut-through-amount",value:this.props.representativeCut.additionalDepthAmount||0,onChange:this.onChangeAdditionalDepthAmount},this.getCutThroughOptions()),React.createElement(EASEL.component.proLabel,null))}})},function(e,t){EASEL.component.alignmentControls=createReactClass({getState(){const e=EASEL.editorStore.getSelectedVolumeIds();return{selectedVolumeIds:e,selectedVolumes:EASEL.volumeStore.getVolumes(e)}},getInitialState(){return this.getState()},componentDidMount(){EASEL.editorStore.addChangeListener(this._onChange),EASEL.volumeStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.editorStore.removeChangeListener(this._onChange),EASEL.volumeStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},getPosition(e,t){switch(t){case"left":return EASEL.volumeHelper.boundingBoxLeft([e]);case"horizontal":return EASEL.volumeHelper.boundingBoxHorizontalCenter([e]);case"right":return EASEL.volumeHelper.boundingBoxRight([e]);case"bottom":return EASEL.volumeHelper.boundingBoxBottom([e]);case"vertical":return EASEL.volumeHelper.boundingBoxVerticalCenter([e]);case"top":return EASEL.volumeHelper.boundingBoxTop([e])}},getAlignment(e){const t=this.state.selectedVolumes.map((t=>this.getPosition(t,e)));return Math.max(...t)-Math.min(...t)<1e-5},onClickAlignment(e){const t=e.target.id;EASEL.volumeActions.align(this.state.selectedVolumeIds,t)},render(){if(this.state.selectedVolumes.length>=2){const e=["left","horizontal","right","bottom","vertical","top"].map((e=>{let t="align-tool";return this.getAlignment(e)&&(t+=" aligned"),React.createElement(EASEL.component.a,{className:t,key:e,id:e,onClick:this.onClickAlignment})}));return React.createElement("div",{id:"alignment-controls"},e)}return React.createElement("div",null)}})},function(e,t){EASEL.component.carveyClamp=function({matrix:e}){const{WIDTH:t,LENGTH:n,OFFSET:a,FILLET:r,KEEP_AWAY:o}=EASEL.smartClampConstants,s="#9C9C9C",i="#E4AFB0";return React.createElement("g",{transform:`matrix(${e.toArray()})`},React.createElement("clipPath",{id:"positive-area"},React.createElement("rect",{x:0,y:0,width:n+o,height:n+o})),React.createElement("g",{clipPath:"url(#positive-area)"},React.createElement("rect",{fill:i,x:-a,y:-a,width:t+o,height:n+o,rx:r+o,ry:r+o}),React.createElement("rect",{fill:i,x:-a,y:-a,width:n+o,height:t+o,rx:r+o,ry:r+o}),React.createElement("rect",{fill:s,x:-a,y:-a,width:t,height:n,rx:r,ry:r}),React.createElement("rect",{fill:s,x:-a,y:-a,width:n,height:t,rx:r,ry:r})))}},function(e,t){EASEL.component.cutProperties=createReactClass({onChangeDepthInches(e){const t={depth:e=EASEL.math.clamp(e,0,this.props.materialThickness)};e<this.props.materialThickness&&(t.additionalDepthAmount=0),EASEL.volumeActions.setCutParams(this.props.selectedVolumeIds,t)},onChangeDepth(e,t,n){this.onChangeDepthInches(n)},onCompleteDepthChange(){EASEL.volumeActions.completeDepthChange(this.props.selectedVolumeIds)},onCutDepthValueChanged(e,t,n){this.onChangeDepth(e,t,n),this.onCompleteDepthChange()},setType(e){EASEL.volumeActions.setCutParams(this.props.combinableVolumeIds,{type:e})},setOutlineStyle(e){if("outside"===e||"inside"===e)for(let t of EASEL.volumeStore.getVolumes(this.props.selectedVolumeIds)){if(EASEL.polylineGenerator.process(t.shape).open().any())return EASEL.alert("Cannot offset open paths","If you've imported an SVG, check for open paths and join them before importing."),void(null!=EASEL.stats&&EASEL.stats.trackEvent("Offset Open Path Error"))}EASEL.undoActions.beginGroup("Set Cut Type"),this.setType("outline"),EASEL.volumeActions.setCutParams(this.props.selectedVolumeIds,{outlineStyle:e}),EASEL.undoActions.endGroup()},onChangeTabPreference(e){const t=e.target.checked;EASEL.volumeActions.setCutParams(this.props.selectedVolumeIds,{tabPreference:t})},onChangeUseProfile(e){const t=e.target.checked;EASEL.volumeActions.setCutParams(this.props.selectedVolumeIds,{useProfile:t})},onChangeProfileSettings(e){EASEL.volumeActions.setCutParams(this.props.selectedVolumeIds,{profileSettings:e})},setCutParamWithUnits(e,t){let n;if(({value:t,unit:n}=EASEL.unitParser.parseInput(t)),null!=t){null==n&&(n=this.props.preferredUnit);let a=t*EASEL.units.inchesPerUnit(n);"tabHeight"===e&&(a=Math.min(a,this.props.materialThickness));const r={};return r[e]=a,EASEL.volumeActions.setCutParams(this.props.selectedVolumeIds,r)}return this.forceUpdate()},setTabCount(e){return e=Math.floor(e),EASEL.constants.MIN_TAB_COUNT<=e&&e<=EASEL.constants.MAX_TAB_COUNT?EASEL.volumeActions.setCutParams(this.props.selectedVolumeIds,{tabCount:e}):this.forceUpdate()},ticks(){return EASEL.utility.tickGenerator({materialThicknessInches:this.props.materialThickness,preferredUnitsPerInch:this.props.preferredUnitsPerInch,unit:this.props.preferredUnit}).generate()},displayDepth(e){let t="in"===this.props.preferredUnit?3:1;return`${e.toFixed(t)} ${this.props.preferredUnit}`},volumeIsPlausiblyTwoDimensional(e){switch(e.shape.type){case"drill":case"line":return!1;case"polygon":case"polyline":return e.shape.points.length>2;case"path":return e.shape.points[0]&&e.shape.points[0].length>2;default:return!0}},shouldShowCutType(){let e;const t=this.props.selectedVolumes.filter((e=>"drill"!==e.shape.type));if(0===t.length)return!1;for(e of t)if(!this.volumeIsPlausiblyTwoDimensional(e))return!1;return!0},getRepresentativeCut(){for(let e of this.props.selectedVolumes)if(this.volumeIsPlausiblyTwoDimensional(e))return e.cut;return this.props.selectedVolumes[0].cut},getTabSettingsElements(e){const{tabLength:t,tabHeight:n,tabCount:a}=e;return React.createElement("div",{className:"tab-settings"},React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"cut-tab-length",className:"control-label"},"Length"),React.createElement(EASEL.component.lengthInput,{id:"cut-tab-length",initialValue:t,unit:this.props.preferredUnit,onSubmit:this.setCutParamWithUnits.bind(this,"tabLength")})),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"cut-tab-height",className:"control-label"},"Height"),React.createElement(EASEL.component.lengthInput,{id:"cut-tab-height",initialValue:n,unit:this.props.preferredUnit,onSubmit:this.setCutParamWithUnits.bind(this,"tabHeight")})),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"cut-tab-count",className:"control-label"},"Quantity"),React.createElement(EASEL.component.numberInput,{id:"cut-tab-count",size:"2",initialValue:a,min:EASEL.constants.MIN_TAB_COUNT,max:EASEL.constants.MAX_TAB_COUNT,onChange:this.setTabCount})))},resetTabLocations(){EASEL.volumeActions.setCutParams(this.props.selectedVolumeIds,{tabs:null})},render(){if(this.props.selectedVolumes.length>0){let e;const t=this.getRepresentativeCut(),n=t.depth,a=t.type,r=t.outlineStyle,o=t.depth===this.props.materialThickness,s=o&&"outline"===a,i=EASEL.hasAccessGrant("profile_carving")&&EASEL.bitSelectors.useDetailBit(EASEL.store.getState())?React.createElement(EASEL.profileControls,{useProfile:t.useProfile,profileSettings:t.profileSettings,type:a,unit:this.props.preferredUnit,onChangeUseProfile:this.onChangeUseProfile,onChangeProfileSettings:this.onChangeProfileSettings}):void 0;return this.shouldShowCutType()&&(e=React.createElement(EASEL.component.cutTypePicker,{type:a,outlineStyle:r,onChangeType:this.setType,onChangeOutlineStyle:this.setOutlineStyle})),React.createElement("div",{className:"cut-properties"},React.createElement(EASEL.component.depthSlider,{value:n,min:0,max:this.props.materialThickness,layers:this.props.materialLayers,onChange:this.onChangeDepthInches,onDragEnd:this.onCompleteDepthChange,ticks:this.ticks()}),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"cut-depth-text",className:"control-label"},"Depth"),React.createElement(EASEL.component.utils.dimensionalInput,{id:"cut-depth-text",value:n,unit:"in",displayUnit:this.props.preferredUnit,showUnit:!0,onChange:this.onCutDepthValueChanged})),o&&React.createElement(EASEL.component.additionalDepthInput,{representativeCut:t,preferredUnit:this.props.preferredUnit,selectedVolumeIds:this.props.selectedVolumeIds}),e,s&&React.createElement("div",{className:"tabs-input"},React.createElement("div",{className:"tabs-input__checkbox-container"},React.createElement("input",{id:"use-tabs",type:"checkbox",checked:t.tabPreference,onChange:this.onChangeTabPreference}),React.createElement("label",{className:"tabs-input__label",htmlFor:"use-tabs"},"Use Tabs"),React.createElement(ReactBootstrap.OverlayTrigger,{placement:"top",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"additional-depth-input__tooltip"},"Reset any custom placed tabs.")},React.createElement("i",{className:"fa fa-refresh tabs-input__checkbox-container__refresh",onClick:this.resetTabLocations}))),t.tabPreference&&t.tabs&&this.getTabSettingsElements(t)),i)}}})},function(e,t){EASEL.component.cutTypeButton=createReactClass({render(){const{selected:e,show:t,onClick:n,children:a}=this.props,r=["cut-type-button"];return e&&r.push("cut-type--selected"),t&&r.push("cut-type--show"),React.createElement(EASEL.component.a,{onClick:n,className:r.join(" ")},a)}})},function(e,t){EASEL.component.cutTypePicker=createReactClass({getInitialState:()=>({cutTypeMenuVisible:!1}),toggleCutTypeMenu(){this.setState({cutTypeMenuVisible:!this.state.cutTypeMenuVisible})},setTypeFill(){this.props.onChangeType("fill"),this.toggleCutTypeMenu()},setOutlineStyleInside(){this.props.onChangeOutlineStyle("inside"),this.toggleCutTypeMenu()},setOutlineStyleOutside(){this.props.onChangeOutlineStyle("outside"),this.toggleCutTypeMenu()},setOutlineStyleOnPath(){this.props.onChangeOutlineStyle("on-path"),this.toggleCutTypeMenu()},cutTypeMenuIndicator(){return this.state.cutTypeMenuVisible?React.createElement("i",{className:"fa fa-caret-up"}):React.createElement("i",{className:"fa fa-caret-down"})},render(){const{type:e,outlineStyle:t}=this.props,n="fill"===e,a="outline"===e&&"on-path"===t,r="outline"===e&&"inside"===t,o="outline"===e&&"outside"===t,s=React.createElement("div",{id:"cut-type-picker__menu",className:"cut-type-picker__outline-style-menu "+(this.state.cutTypeMenuVisible?"abs":"")},React.createElement(EASEL.component.cutTypeButton,{selected:n,onClick:this.state.cutTypeMenuVisible?this.setTypeFill:this.toggleCutTypeMenu,show:this.state.cutTypeMenuVisible},React.createElement("img",{src:EASEL.assets.images.fillCut}),React.createElement("span",null,"Clear out a pocket")),React.createElement(EASEL.component.cutTypeButton,{selected:a,onClick:this.state.cutTypeMenuVisible?this.setOutlineStyleOnPath:this.toggleCutTypeMenu,show:this.state.cutTypeMenuVisible},React.createElement("img",{src:EASEL.assets.images.onPathCut}),React.createElement("span",null,"Cut on shape path")),React.createElement(EASEL.component.cutTypeButton,{selected:o,onClick:this.state.cutTypeMenuVisible?this.setOutlineStyleOutside:this.toggleCutTypeMenu,show:this.state.cutTypeMenuVisible},React.createElement("img",{src:EASEL.assets.images.outsideCut}),React.createElement("span",null,"Cut outside shape path")),React.createElement(EASEL.component.cutTypeButton,{selected:r,onClick:this.state.cutTypeMenuVisible?this.setOutlineStyleInside:this.toggleCutTypeMenu,show:this.state.cutTypeMenuVisible},React.createElement("img",{src:EASEL.assets.images.insideCut}),React.createElement("span",null,"Cut inside shape path")));return React.createElement("div",{className:"cut-type-picker"},React.createElement("div",{className:"cut-type-picker__title"},"Cut Path"),s,React.createElement("span",{className:"cut-type-picker__menu-visibility-toggler",onClick:this.toggleCutTypeMenu},this.cutTypeMenuIndicator()))}})},function(e,t){EASEL.component.depthSlider=createReactClass({getInitialState(){return{startDragPoint:null,valueAtStartDrag:this.props.value}},valueForCoordinates(e,t){const n=(t-this.state.startDragPoint.y)/this.refs.track.offsetHeight,a=(this.props.max-this.props.min)*n+this.state.valueAtStartDrag;return EASEL.math.clamp(a,this.props.min,this.props.max)},startDragWithPointer({clientX:e,clientY:t}){EASEL.undoActions.beginGroup(),this.setState({startDragPoint:{x:e,y:t},valueAtStartDrag:this.props.value}),$(window).on("mousemove",this.onMouseMove),$(window).on("mouseup",this.onMouseUp)},dragWithPointer({clientX:e,clientY:t}){null!=this.state.startDragPoint&&this.props.onChange(this.valueForCoordinates(e,t))},finishDrag(){$(window).off("mousemove",this.onMouseMove),$(window).off("mouseup",this.onMouseUp),this.setState({startDragPoint:null}),EASEL.undoActions.endGroup(),this.props.onDragEnd()},onMouseDown(e){this.startDragWithPointer(e),e.stopPropagation()},onMouseMove(e){this.dragWithPointer(e),e.stopPropagation()},onMouseUp(e){this.dragWithPointer(e),this.finishDrag(),e.stopPropagation()},onTouchStart(e){this.startDragWithPointer(e.touches[0]),e.stopPropagation()},onTouchMove(e){this.dragWithPointer(e.touches[0]),e.stopPropagation()},onTouchEnd(e){this.finishDrag(),e.stopPropagation()},onTouchCancel(e){this.finishDrag(),e.stopPropagation()},sliderTicks(){return this.props.ticks.map((e=>React.createElement(EASEL.component.sliderTick,{key:e.value,value:e.value,percentage:e.percentage,labelHTML:e.html,onClick:this.props.onChange})))},sliderHandle(){const e={top:`${100*(this.props.value-this.props.min)/(this.props.max-this.props.min)}%`};return React.createElement("div",{className:"depth-slider__handle",style:e,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd})},backgroundStyle(){if(null==this.props.layers||this.props.layers.length<=1)return{};let e=0;const t=[];for(let{rgb:n,bottomZ:a,relativeTo:r}of Array.from(this.props.layers)){const o=100*-(("top"===r?0:-this.props.max)+a)/this.props.max;t.push(`rgb(${n.join(", ")}) ${e+1}%`),t.push(`rgb(${n.join(", ")}) ${o-1}%`),e=o}return{background:`linear-gradient(to bottom, ${t.join(", ")})`}},render(){return React.createElement("div",{className:"depth-slider"},React.createElement("div",{className:"depth-slider__track",ref:"track",style:this.backgroundStyle()},React.createElement("div",{className:"depth-slider__ticks"},this.sliderTicks()),this.sliderHandle()))}})},function(e,t){EASEL.component.draggableAnchor=createReactClass({propTypes:{selected:PropTypes.bool.isRequired,anchor:PropTypes.object.isRequired,pointIndex:PropTypes.number.isRequired,subpathIndex:PropTypes.number.isRequired,onClick:PropTypes.func.isRequired,onDrag:PropTypes.func.isRequired,onDragStart:PropTypes.func.isRequired,onDragEnd:PropTypes.func.isRequired},mixins:[EASEL.pointDraggingMixin],componentDidMount(){this.addDragHandler(this.dragHandler),this.addDragStartHandler(this.props.onDragStart),this.addDragEndHandler(this.props.onDragEnd)},dragHandler(e,t,n,a){const r=n.getAttribute("data-type");return this.props.onDrag({event:a,pointIndex:this.props.pointIndex,subpathIndex:this.props.subpathIndex,pointType:r})},onMouseDown(){this.props.onClick(this.props.subpathIndex,this.props.pointIndex)},render(){const{anchor:e,selected:t}=this.props,n="point point--draggable",a=n+(t?" point--selected":"");return React.createElement("g",{className:"anchor-group"},React.createElement("g",{onMouseDown:this.handleMouseDown},t&&["lh","rh"].map((t=>{if(null!=e[t])return[React.createElement("line",{x1:e.x,y1:e.y,x2:e[t].x+e.x,y2:e[t].y+e.y,key:`line-${t}`,className:"path-handle-connector"}),React.createElement("rect",{x:e[t].x+e.x-4,y:e[t].y+e.y-4,width:8,height:8,className:n,key:t,"data-type":t})]})),React.createElement("circle",{cx:e.x,cy:e.y,r:5,className:a,onMouseDown:this.onMouseDown,"data-type":"anchor"})))}})},function(e,t){EASEL.component.editor=EASEL.redux.connect({mapStateToProps:e=>({workArea:EASEL.machineSettingsSelectors.getWorkArea(e),workpieceViewport:EASEL.viewportSelectors.getWorkpieceViewport(e)}),component:createReactClass({getState:()=>({materialDimensions:EASEL.materialStore.getActiveMaterial().dimensions}),getInitialState(){return this.getState()},componentDidMount(){EASEL.canvas=this.configureGlobalCanvas(),EASEL.materialStore.addChangeListener(this._onChange)},componentDidUpdate(e){e.workArea.x===this.props.workArea.x&&e.workArea.y===this.props.workArea.y||EASEL.viewportActions.homeViewport(),e.viewWidth===this.props.viewWidth&&e.viewHeight===this.props.viewHeight||EASEL.fabricRenderer.setViewSize(this.props.viewWidth,this.props.viewHeight)},configureGlobalCanvas(){const e=new fabric.Canvas("c");return e.volumeActions=EASEL.fabricVolumeActions,EASEL.fabricRenderer.init(e,this.props.viewWidth,this.props.viewHeight),e.getElement().parentElement.addEventListener("contextmenu",(function(e){EASEL.flux.events.emit("show-context-menu",e),e.stopPropagation(),e.preventDefault()})),e},setCenter({x:e,y:t}){EASEL.viewportActions.panTo({x:e,y:t})},_onChange(){this.setState(this.getState())},screenMatrix(){const{workpieceViewport:e,workArea:t}=this.props,n=EASEL.viewportHelper.getViewportMatrix(e),a=EASEL.constants.PIXELS_PER_INCH;return EASEL.matrix().scaledBy(1,-1).translatedBy(0,t.y).scaledBy(a,a).premultipliedBy(n)},render(){const{viewWidth:e,viewHeight:t,workArea:n,workpieceViewport:a}=this.props,{materialDimensions:r}=this.state,o=EASEL.viewportHelper.getCenter({width:e,height:t},a),s=Math.max(r.x,n.x),i=Math.max(r.y,n.y),l=s*EASEL.constants.PIXELS_PER_INCH,c=i*EASEL.constants.PIXELS_PER_INCH,p=(i-n.y)*EASEL.constants.PIXELS_PER_INCH,u=this.screenMatrix();return React.createElement(React.Fragment,null,React.createElement(EASEL.component.editorGrid,{viewWidth:e,viewHeight:t,screenMatrix:u}),React.createElement("canvas",{id:"c"}),React.createElement(EASEL.component.shapeEditorController,{viewWidth:e,viewHeight:t,screenMatrix:u}),React.createElement(EASEL.component.viewportControls,null),React.createElement(EASEL.component.editorScrollbars,{center:o,width:l,height:c,onSetCenter:this.setCenter,verticalScrollOffset:p}))}})})},function(e,t){EASEL.component.editorContainer=EASEL.redux.connect({mapStateToProps:e=>{const t=EASEL.viewportSelectors.getEditorSize(e),n=EASEL.viewportSelectors.getWindowSize(e);return{editorWidth:t.width,previewWidth:n.width-t.width}},component:createReactClass({getInitialState:()=>({}),setContainerRef(e){this.container=e},componentDidMount(){if("function"===typeof ResizeObserver){const e=new ResizeObserver((e=>{let{width:t,height:n}=e[0].contentRect;this.setState({width:t,height:n})}));e.observe(this.container),this.resizeObserver=e}else setInterval((()=>{this.container.clientWidth===this.state.width&&this.container.clientHeight===this.state.height||this.setState({width:this.container.clientWidth,height:this.container.clientHeight})}),100);this.setState({width:this.container.clientWidth,height:this.container.clientHeight})},render(){const{editorWidth:e,previewWidth:t}=this.props,{width:n,height:a}=this.state;return React.createElement("div",{id:"editor-container",ref:this.setContainerRef},n&&a&&React.createElement(React.Fragment,null,React.createElement(EASEL.component.projectSettings,null),React.createElement("div",{id:"left-panel",style:{width:e,height:a}},React.createElement(EASEL.component.editor,{viewWidth:e,viewHeight:a}),e>=180&&React.createElement(EASEL.component.unitSwitcher,null),e>=460&&React.createElement(EASEL.component.alignmentControls,null),React.createElement(EASEL.component.objectProperties,null),e>=46&&React.createElement(EASEL.component.toolbar,null)),React.createElement("div",{id:"right-panel",style:{width:t,height:a}},DISABLE_3D?React.createElement(EASEL.component.webglError,null):React.createElement(EASEL.component.designPreview3d,{previewWidth:t-15,previewHeight:a,marginLeft:15}),React.createElement(EASEL.component.editorResizer,{scrollBarWidth:15})),React.createElement(EASEL.component.contextMenuController,null),React.createElement(EASEL.component.externalGcodeSenderController,{panelWidth:n,panelHeight:a}),React.createElement(EASEL.component.externalMeshController,{panelWidth:n,panelHeight:a})))}})})},function(e,t){EASEL.component.editorGridComponent=createReactClass({getState:()=>({materialDimensions:EASEL.materialStore.getActiveMaterial().dimensions}),getInitialState(){return this.getState()},_onChange(){return this.setState(this.getState())},componentDidMount(){return EASEL.materialStore.addChangeListener(this._onChange)},componentWillUnmount(){return EASEL.materialStore.removeChangeListener(this._onChange)},pickSize(e,t){for(let n of Array.from(e))if(n>=t)return n;return e[e.length-1]},renderShadow(){const{viewWidth:e,viewHeight:t,workArea:n,screenMatrix:a}=this.props,{x:r,y:o}=a.transformedPoint({x:0,y:n.y}),{x:s,y:i}=a.transformedVector({x:n.x,y:-n.y});return React.createElement("path",{className:"editor-grid__shadow",d:`M 0,0 l ${e},0 0,${t} ${-e},0 M ${r},${o} l ${s},0 0,${i}, ${-s},0`})},renderWorkArea(){const{workArea:e,screenMatrix:t}=this.props,{x:n,y:a}=t.transformedPoint({x:0,y:e.y}),{x:r,y:o}=t.transformedVector({x:e.x,y:-e.y});return React.createElement("rect",{className:"editor-grid__work-area",x:n,y:a,width:r,height:o})},renderTileArea(){const{isTileSelected:e,selectedTile:t,screenMatrix:n}=this.props;if(!e)return null;const{x:a,y:r}=n.transformedPoint({x:0,y:t.getDimensions().y+t.getOffsetDistance()}),{x:o,y:s}=n.transformedVector({x:t.getDimensions().x,y:-t.getDimensions().y});return React.createElement("rect",{className:"editor-grid__tile-area",x:a,y:r,width:o,height:s})},renderMaterial(){const{screenMatrix:e}=this.props,{materialDimensions:t}=this.state,{x:n,y:a}=e.transformedPoint({x:0,y:t.y}),{x:r,y:o}=e.transformedVector({x:t.x,y:-t.y});return React.createElement("rect",{className:"editor-grid__material",x:n,y:a,width:r,height:o})},renderMaterialStroke(){const{screenMatrix:e}=this.props,{materialDimensions:t}=this.state,{x:n,y:a}=e.transformedPoint({x:0,y:t.y}),{x:r,y:o}=e.transformedVector({x:t.x,y:-t.y});return React.createElement("rect",{className:"editor-grid__material-stroke",x:n,y:a,width:r,height:o})},renderLines(e){const{screenMatrix:t}=this.props,{materialDimensions:n}=this.state;return React.createElement("g",{className:"editor-grid__lines"},e.mapXLines((function(e,a){const{x:r,y:o}=t.transformedPoint({x:e,y:0}),{x:s,y:i}=t.transformedPoint({x:e,y:n.y}),l=a?"editor-grid__line":"editor-grid__line--secondary";return React.createElement("line",{key:`x=${e}`,className:l,x1:r,y1:o,x2:s,y2:i})})),e.mapYLines((function(e,a){const{x:r,y:o}=t.transformedPoint({x:0,y:e}),{x:s,y:i}=t.transformedPoint({x:n.x,y:e}),l=a?"editor-grid__line":"editor-grid__line--secondary";return React.createElement("line",{key:`y=${e}`,className:l,x1:r,y1:o,x2:s,y2:i})})))},renderLabels(e){const{viewHeight:t,screenMatrix:n}=this.props,a=t-32;return React.createElement("g",{className:"editor-grid__labels"},e.mapXLabels((function(e,t){const r=n.transformedPoint({x:e,y:0});return React.createElement("text",{key:`x=${e}`,className:"editor-grid__label editor-grid__label--x",x:r.x,y:Math.min(r.y+4,a)},t.toFixed(0))})),e.mapYLabels((function(e,t){const a=n.transformedPoint({x:0,y:e});return React.createElement("text",{key:`y=${e}`,className:"editor-grid__label editor-grid__label--y",x:Math.max(a.x-4,16),y:a.y},t.toFixed(0))})))},render(){const{viewWidth:e,viewHeight:t,unit:n,wasteboardType:a,isProUser:r,screenMatrix:o}=this.props,{materialDimensions:s}=this.state,i=o.transformedVector({x:1,y:1}).x,l=25/i,c=8/i,p={minX:0,minY:0,maxX:s.x,maxY:s.y},u=EASEL.gridGenerator({unit:n,minLabelStepSize:l,minLineStepSize:c,boundingBox:p,isProUser:r});return React.createElement("svg",{className:"editor-grid",width:e,height:t},this.renderShadow(),this.renderMaterial(),this.renderWorkArea(),this.renderTileArea(),this.renderLines(u),"carvey"===a?React.createElement(EASEL.component.carveyClamp,{matrix:o}):void 0,this.renderMaterialStroke(),this.renderLabels(u))}}),EASEL.component.editorGrid=EASEL.redux.connect({mapStateToProps:function(e){return{workArea:EASEL.machineSettingsSelectors.getWorkArea(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e),wasteboardType:EASEL.machineTypeHelper.currentWasteboardType(),isProUser:EASEL.userSelectors.isProEnabled(Date.now(),e),unit:EASEL.unitSelectors.getPreferredUnit(e),isTileSelected:EASEL.tileSelectors.isTileSelected(e),selectedTile:EASEL.tileSelectors.getSelectedTile(e)}},component:EASEL.component.editorGridComponent})},function(e,t){EASEL.component.editorResizer=createReactClass({getInitialState:()=>({mouseDown:!1,initialMouseX:null,initialEditorWidth:null,previousWidth:null}),hidden3DPreviewWidth(){return window.innerWidth-this.props.scrollBarWidth},setEditorWidth(e){const{previousWidth:t}=this.state,n=EASEL.viewportSelectors.getEditorSize(EASEL.store.getState()),a=EASEL.viewportSelectors.getWorkpieceViewport(EASEL.store.getState()),r=EASEL.viewportHelper.getCenter(n,a);null!=t&&(e>=this.hidden3DPreviewWidth()&&t<this.hidden3DPreviewWidth()&&EASEL.previewScheduler.disableDetailedPreview(),t>=this.hidden3DPreviewWidth()&&e<this.hidden3DPreviewWidth()&&EASEL.previewScheduler.enableDetailedPreview()),EASEL.store.dispatch(EASEL.viewportActionCreators.setEditorFraction(Math.max(0,Math.min(e,this.hidden3DPreviewWidth()))/window.innerWidth)),EASEL.viewportActions.panTo(r),this.setState({previousWidth:e})},onMouseDown(e){this.setState({initialMouseX:e.clientX,initialEditorWidth:EASEL.viewportSelectors.getEditorSize(EASEL.store.getState()).width}),$(window).on("mouseup",this.onMouseUp),$(window).on("mousemove",this.onMouseMove)},onMouseMove(e){if(null!=this.state.initialMouseX){const t=this.state.initialEditorWidth+e.clientX-this.state.initialMouseX;this.setEditorWidth(t)}},onMouseUp(){return this.setState({initialEditorWidth:null,initialMouseX:null}),$(window).off("mouseup",this.onMouseUp),$(window).off("mousemove",this.onMouseMove),!0},onTouchStart(e){return this.onMouseDown(e.touches[0])},onTouchEnd(e){return this.onMouseUp(e.touches[0])},onTouchMove(e){return this.onMouseMove(e.touches[0])},onDoubleClick(){this.setEditorWidth(window.innerWidth*EASEL.constants.DEFAULT_EDITOR_FRACTION)},onLeftPanelClick(){this.setEditorWidth(this.hidden3DPreviewWidth())},onRightPanelClick(){this.setEditorWidth(0)},render(){return React.createElement("div",{id:"resizer-container"},React.createElement("div",{className:"resizer",onClick:this.onLeftPanelClick},React.createElement("i",{className:"fa fa-angle-double-right"})),React.createElement("div",{className:"resizer",onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onDoubleClick:this.onDoubleClick},React.createElement("i",{className:"fa fa-ellipsis-v"})),React.createElement("div",{className:"resizer",onClick:this.onRightPanelClick},React.createElement("i",{className:"fa fa-angle-double-left"})))}})},function(e,t){EASEL.component.editorScrollbars=createReactClass({propTypes:{center:PropTypes.shape({x:PropTypes.number,y:PropTypes.number}),width:PropTypes.number.isRequired,height:PropTypes.number.isRequired,onSetCenter:PropTypes.func.isRequired,verticalScrollOffset:PropTypes.number.isRequired},onHorizontalScrollBar(e){this.props.onSetCenter({x:e,y:this.props.center.y})},onVerticalScrollBar(e){this.props.onSetCenter({x:this.props.center.x,y:e})},render(){const e=-1*this.props.verticalScrollOffset,t=this.props.height-this.props.verticalScrollOffset;return React.createElement("div",{className:"scrollbars both"},React.createElement(EASEL.component.scrollbar,{onUpdate:this.onHorizontalScrollBar,min:0,max:this.props.width,value:this.props.center.x,orientation:"horizontal"}),React.createElement(EASEL.component.scrollbar,{onUpdate:this.onVerticalScrollBar,min:e,max:t,value:this.props.center.y,orientation:"vertical"}),React.createElement("div",{className:"corner"}))}})},function(e,t){EASEL.component.homeViewportButton=createReactClass({onClick(e){EASEL.viewportActions.homeViewport(),e.preventDefault()},render(){return React.createElement("a",{href:"#",id:"home-view",onClick:this.onClick},React.createElement("i",{className:"fa fa-home"}))}})},function(e,t){EASEL.component.lineTool=createReactClass({propTypes:{screenMatrix:PropTypes.object.isRequired,setPoints:PropTypes.func.isRequired,submitPoints:PropTypes.func.isRequired,points:PropTypes.arrayOf(PropTypes.shape({x:PropTypes.number.isRequired,y:PropTypes.number.isRequired}))},getInitialState:()=>({mousePoint:null,alignmentLines:[]}),pointsEqual:(e,t)=>e.x===t.x&&e.y===t.y,offsetMousePoint(e){const t=this.refs.background.parentNode.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},snapMousePoint(e,t){if(e=this.props.screenMatrix.inverse().transformedPoint(e),t&&t.altKey)return{mousePoint:e,alignmentLines:[]};{const[t,...n]=EASEL.snappingUtils.snapXY({point:e,testPoints:this.props.points,threshold:EASEL.interactionConstants.SNAP_DISTANCE});return{mousePoint:t,alignmentLines:n.filter((e=>null!=e)).map((e=>({point1:t,point2:e})))}}},onMouseMove(e){this.setState(this.snapMousePoint(this.offsetMousePoint(e),e))},onMouseDown(e){e.stopPropagation();const{points:t}=this.props,{mousePoint:n}=this.snapMousePoint(this.offsetMousePoint(e));if(t.length>1)for(let a=0;a<t.length;a++){const e=t[a];if(this.pointsEqual(n,e)){let e;switch(a){case t.length-1:case t.length-2:e=t;break;default:e=t.concat([n])}return this.props.submitPoints(e)}}if(null!=n)return this.props.setPoints(t.concat([n]))},render(){const{points:e,screenMatrix:t}=this.props,{alignmentLines:n,mousePoint:a}=this.state;let r=e;return null!=a&&(r=e.concat([a])),React.createElement("g",{ref:"background",onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove},React.createElement("rect",{x:0,y:0,width:"100%",height:"100%",fill:"transparent"}),React.createElement(EASEL.component.lineToolPreview,{screenMatrix:t,alignmentLines:n,points:r}))}})},function(e,t){EASEL.component.lineToolPreview=createReactClass({propTypes:{screenMatrix:PropTypes.object.isRequired,points:PropTypes.arrayOf(PropTypes.shape({x:PropTypes.number,y:PropTypes.number})).isRequired,alignmentLines:PropTypes.arrayOf(PropTypes.shape({point1:PropTypes.shape({x:PropTypes.number,y:PropTypes.number}),point2:PropTypes.shape({x:PropTypes.number,y:PropTypes.number})})).isRequired},render(){const{points:e,alignmentLines:t,screenMatrix:n}=this.props,[a]=EASEL.pathUtils.transformedPath([e],n),r=t.map((({point1:e,point2:t})=>({point1:n.transformedPoint(e),point2:n.transformedPoint(t)})));return React.createElement("g",null,a.length>1&&React.createElement("polyline",{className:"shape-outline",points:a.map((e=>`${e.x} ${e.y}`)).join(" ")}),r.map((({point1:e,point2:t},n)=>React.createElement("line",{x1:e.x,y1:e.y,x2:t.x,y2:t.y,className:"alignment-line",key:n}))),a.map(((e,t)=>React.createElement("circle",{cx:e.x,cy:e.y,r:5,className:"point",key:t}))))}})},function(e,t){EASEL.component.objectProperties=EASEL.redux.connect({mapStateToProps:function(e){const t=EASEL.fontSelectors.getFontState(e);return{preferredUnit:EASEL.unitSelectors.getPreferredUnit(e),preferredUnitsPerInch:EASEL.units.preferredUnitsPerInch(),inchesPerPreferredUnit:EASEL.units.inchesPerPreferredUnit(),fontData:t.data,isBetaTester:EASEL.userSelectors.isBetaTester(e)}},component:createReactClass({getState(){const e=EASEL.editorStore.getSelectedVolumeIds(),t=EASEL.volumeStore.getVolumes(e),n=EASEL.volumeHelper.combinableVolumeIds(EASEL.volumeStore.getVolumes(e)),a=EASEL.editorStore.getEditingVolumeId();return{selectedVolumeIds:e,selectedVolumes:t,combinableVolumeIds:n,disableAnchors:1===t.length&&"drill"===t[0].cut.type,editingVolumeId:a,editingVolume:null!=a?EASEL.volumeStore.getVolumes([a])[0]:void 0,materialThickness:EASEL.materialStore.getCurrentDepth(),materialLayers:EASEL.materialStore.getActiveMaterial().color&&EASEL.materialStore.getActiveMaterial().color.layers,selectedPointIndex:EASEL.editorStore.getSelectedPointIndex(),selectedSubpathIndex:EASEL.editorStore.getSelectedSubpathIndex(),lastObjectPropertyTab:EASEL.editorStore.getLastObjectPropertyTab(),groupRotation:EASEL.editorStore.getGroupRotation()}},getInitialState(){return this.getState()},componentDidMount(){EASEL.editorStore.addChangeListener(this._onChange),EASEL.volumeStore.addChangeListener(this._onChange),EASEL.materialStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.editorStore.removeChangeListener(this._onChange),EASEL.volumeStore.removeChangeListener(this._onChange),EASEL.materialStore.removeChangeListener(this._onChange)},componentDidUpdate(){this.objectProperties&&this.objectProperties.addEventListener("wheel",this.onWheel,{passive:!1})},_onChange(){this.setState(this.getState())},onSelectTab(e){null!=e&&EASEL.editorActions.setLastObjectPropertyTab(e)},onWheel(e){e.ctrlKey&&e.preventDefault()},render(){return 0===this.state.selectedVolumes.length?null:React.createElement("div",{className:"object-properties",ref:e=>this.objectProperties=e},React.createElement("div",{className:"property-panel"},React.createElement(ReactBootstrap.Tabs,{id:"object-properties-tabs",activeKey:this.state.lastObjectPropertyTab,animation:!1,onSelect:this.onSelectTab},React.createElement(ReactBootstrap.Tab,{eventKey:"shape",title:"Shape"},React.createElement(EASEL.component.shapeProperties,{selectedVolumeIds:this.state.selectedVolumeIds,selectedVolumes:this.state.selectedVolumes,disableAnchors:this.state.disableAnchors,preferredUnit:this.props.preferredUnit,fontData:this.props.fontData,groupRotation:this.state.groupRotation})),React.createElement(ReactBootstrap.Tab,{eventKey:"cut",title:"Cut"},React.createElement(EASEL.component.cutProperties,{selectedVolumeIds:this.state.selectedVolumeIds,selectedVolumes:this.state.selectedVolumes,combinableVolumeIds:this.state.combinableVolumeIds,preferredUnit:this.props.preferredUnit,materialThickness:this.state.materialThickness,materialLayers:this.state.materialLayers,preferredUnitsPerInch:this.props.preferredUnitsPerInch,inchesPerPreferredUnit:this.props.inchesPerPreferredUnit,isBetaTester:this.props.isBetaTester})))),React.createElement(EASEL.component.pointEditingPanel,{selectedVolumes:this.state.selectedVolumes,editingVolume:this.state.editingVolume,selectedPointIndex:this.state.selectedPointIndex,selectedSubpathIndex:this.state.selectedSubpathIndex,preferredUnit:this.props.preferredUnit}))}})})},function(e,t){EASEL.component.pathEditor=createReactClass({propTypes:{screenMatrix:PropTypes.object.isRequired,shape:PropTypes.object.isRequired,submitChange:PropTypes.func.isRequired,startChange:PropTypes.func.isRequired,endChange:PropTypes.func.isRequired,selectedSubpathIndex:PropTypes.number,selectedPointIndex:PropTypes.number,onSelect:PropTypes.func.isRequired},getInitialState:()=>({alignmentLines:[]}),offsetMousePoint(e){const t=(null!=this.refs.background?this.refs.background.parentNode.getBoundingClientRect():void 0)||{left:0,top:0};return{x:e.clientX-t.left,y:e.clientY-t.top}},setPointPosition({pointType:e,subpathIndex:t,pointIndex:n,event:a}){let r,o;const{shape:s}=this.props;a.shiftKey?("anchor"===e&&(e="lh"),r=a.metaKey?EASEL.pathConstants.constraints.ASYMMETRIC:EASEL.pathConstants.constraints.MIRRORED):({constraint:r}=this.props.shape.points[t][n]);const i=this.props.screenMatrix,l=EASEL.matrix().premultipliedBy(EASEL.shapeUtils.boundingBoxMatrix(s,EASEL.pathUtils.pathBoundingBox(s.points))).premultipliedBy(EASEL.shapeUtils.shapeMatrix(s)),c=this.offsetMousePoint(a),p=i.inverse().transformedPoint(c),u=s.points[t][n],d=EASEL.pathUtils.transformedPathPoint(u,l),h="anchor"===e?d:{x:(null!=d[e]&&d[e].x||0)+d.x,y:(null!=d[e]&&d[e].y||0)+d.y};o=a.altKey?[]:s.points[t].filter((e=>e.x!==u.x||e.y!==u.y)).map((e=>EASEL.pathUtils.transformedPathPoint(e,l)));const[E,...m]=EASEL.snappingUtils.snapXY({point:p,testPoints:o,threshold:EASEL.interactionConstants.SNAP_DISTANCE}),S=EASEL.shapeUtils.pathWithTranslatedPoint({delta:{x:E.x-h.x,y:E.y-h.y},constraint:r,pointType:e,subpathIndex:t,pointIndex:n,shape:this.props.shape});this.props.submitChange(S);const g=m.filter((e=>null!=e)).map((e=>({point1:i.transformedPoint(E),point2:i.transformedPoint(e)})));this.setState({alignmentLines:g})},onMouseUp(){this.setState({alignmentLines:[]})},onMouseMove(e){const t=e.target.nextElementSibling,n=EASEL.svgClosestPointOnPath(t,this.offsetMousePoint(e));this.setState({mousePoint:n})},onMouseOut(){this.setState({mousePoint:null})},shapeToScreenMatrix(){const e=EASEL.pathUtils.pathBoundingBox(this.props.shape.points);return EASEL.matrix().premultipliedBy(EASEL.shapeUtils.boundingBoxMatrix(this.props.shape,e)).premultipliedBy(EASEL.shapeUtils.shapeMatrix(this.props.shape)).premultipliedBy(this.props.screenMatrix)},onMouseDown(e,t,n){if(e.stopPropagation(),!this.state.mousePoint)return;const{shape:a}=this.props,r=this.shapeToScreenMatrix().inverse().transformedPoint(this.state.mousePoint),o=a.points.slice();o[t].splice(n+1,0,r),this.props.submitChange(EASEL.merge(a,{points:o})),this.props.onSelect({subpathIndex:t,pointIndex:n+1})},render(){const e=EASEL.pathUtils.transformedPath(this.props.shape.points,this.shapeToScreenMatrix());return React.createElement("g",{ref:"background",onMouseUp:this.onMouseUp},React.createElement("rect",{x:0,y:0,width:"100%",height:"100%",fill:"transparent"}),e.map(((e,t)=>e.slice(0,-1).map(((n,a)=>{const r=[e[a],e[a+1]],o=EASEL.svgPathBuilder.components([r]).map((e=>e.join(" "))).join(" ");return[React.createElement("path",{key:`pathArrayIndex.segmentIndex ${t}.${a} eventHandler`,className:`shape-outline--collision-tolerant i${t}j${a}`,d:o,onMouseMove:this.onMouseMove,onMouseOut:this.onMouseOut,onMouseDown:e=>this.onMouseDown(e,t,a)}),React.createElement("path",{key:`pathArrayIndex.segmentIndex ${t}.${a}`,className:"shape-outline",d:o,pointerEvents:"none"})]})))).flat(),this.state.alignmentLines.map((({point1:{x:e,y:t},point2:{x:n,y:a}},r)=>React.createElement("line",{className:"alignment-line",key:r,x1:e,x2:n,y1:t,y2:a}))),this.state.mousePoint&&React.createElement("circle",{cx:this.state.mousePoint.x,cy:this.state.mousePoint.y,r:5,className:"point",pointerEvents:"none"}),React.createElement(EASEL.component.pathPoints,{pointArrays:e,selectedSubpathIndex:this.props.selectedSubpathIndex,selectedPointIndex:this.props.selectedPointIndex,onSelect:this.props.onSelect,onDragStart:this.props.startChange,onDragEnd:this.props.endChange,onDrag:this.setPointPosition}))}})},function(e,t){EASEL.component.pathPoints=createReactClass({propTypes:{pointArrays:PropTypes.array.isRequired,selectedSubpathIndex:PropTypes.number,selectedPointIndex:PropTypes.number,onDrag:PropTypes.func.isRequired,onDragStart:PropTypes.func.isRequired,onDragEnd:PropTypes.func.isRequired,onSelect:PropTypes.func.isRequired},onClick(e,t){this.props.onSelect({subpathIndex:e,pointIndex:t})},onDrag(e){this.props.onDrag(e)},render(){return React.createElement("g",null,this.props.pointArrays.map(((e,t)=>e.map(((e,n)=>React.createElement(EASEL.component.draggableAnchor,{key:`${t}-${n}`,subpathIndex:t,pointIndex:n,anchor:e,selected:t===this.props.selectedSubpathIndex&&n===this.props.selectedPointIndex,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrag:this.onDrag,onClick:this.onClick}))))))}})},function(e,t){EASEL.component.pointEditingPanel=createReactClass({propTypes:{editingVolume:PropTypes.object,selectedVolumes:PropTypes.array,selectedPointIndex:PropTypes.number,selectedSubpathIndex:PropTypes.number,preferredUnit:PropTypes.string},getDisableSnapKey:()=>EASEL.info.isMac()?"Opt":"Alt",startEditing(e){EASEL.editorActions.startEditing(this.props.selectedVolumes[0].id),e.preventDefault()},endEditing(e){EASEL.editorActions.cancelEditing(),e.preventDefault()},onClickStraight(){const e=EASEL.shapeUtils.pathWithStraightPoint({subpathIndex:this.props.selectedSubpathIndex,pointIndex:this.props.selectedPointIndex,shape:EASEL.shapeUtils.pathifyShape(this.props.editingVolume.shape)});EASEL.volumeActions.setShapeParams([this.props.editingVolume.id],e,"Change Point Style")},onClickCurve(){const e=EASEL.shapeUtils.pathWithMirroredPoint({subpathIndex:this.props.selectedSubpathIndex,pointIndex:this.props.selectedPointIndex,shape:EASEL.shapeUtils.pathifyShape(this.props.editingVolume.shape)});EASEL.volumeActions.setShapeParams([this.props.editingVolume.id],e,"Change Point Style")},getSelectedPoint(){const{editingVolume:e,selectedPointIndex:t,selectedSubpathIndex:n}=this.props;if(null==e)return null;const a=EASEL.shapeUtils.pathifyShape(e.shape).points[n];return null==a?null:a[t]},getSelectedPointState(){const e=this.getSelectedPoint();return null==e?null:null!=e.lh&&null!=e.rh?"curved":"straight"},getSelectedPointCoordinate(){const e=this.getSelectedPoint();if(null==e)return null;const t=EASEL.shapeUtils.pathifyShape(this.props.editingVolume.shape);return EASEL.matrix().premultipliedBy(EASEL.shapeUtils.boundingBoxMatrix(t,EASEL.pathUtils.pathBoundingBox(t.points))).premultipliedBy(EASEL.shapeUtils.shapeMatrix(t)).transformedPoint(e)},setSelectedPointX(e){let t;if(({value:e,unit:t}=EASEL.unitParser.parseInput(e)),null!=e){t=t||this.props.preferredUnit,e*=EASEL.units.inchesPerUnit(t);const n=this.getSelectedPointCoordinate();n&&this.moveSelectedPointBy({x:e-n.x,y:0})}},setSelectedPointY(e){let t;if(({value:e,unit:t}=EASEL.unitParser.parseInput(e)),null!=e){t=t||this.props.preferredUnit,e*=EASEL.units.inchesPerUnit(t);const n=this.getSelectedPointCoordinate();n&&this.moveSelectedPointBy({x:0,y:e-n.y})}},moveSelectedPointBy(e){const{editingVolume:t,selectedPointIndex:n,selectedSubpathIndex:a}=this.props,r=EASEL.shapeUtils.pathifyShape(t.shape),o=EASEL.shapeUtils.pathWithTranslatedPoint({delta:e,pointType:"anchor",subpathIndex:a,pointIndex:n,shape:r});EASEL.volumeActions.setShapeParams(t.id,o),EASEL.stats.trackEventOnce("Edit path point coordinates")},render(){if(1===this.props.selectedVolumes.length&&-1===["text","drill"].indexOf(this.props.selectedVolumes[0].shape.type)){const e=this.getSelectedPointCoordinate();return React.createElement("div",{className:"point-editing-panel property-panel"},null!=this.props.editingVolume?React.createElement("div",null,React.createElement("a",{className:"property-panel-header property-depressed",href:"#",onClick:this.endEditing},React.createElement("span",null,"Stop editing"),React.createElement("kbd",{className:"depressed"},"E")),e&&React.createElement("div",{className:"point-editing-panel__position-inputs"},React.createElement("label",{className:"point-editing-panel__position-input-label"},"X",React.createElement(EASEL.component.lengthInput,{initialValue:e.x,unit:this.props.preferredUnit,onSubmit:this.setSelectedPointX})),React.createElement("label",{className:"point-editing-panel__position-input-label"},"Y",React.createElement(EASEL.component.lengthInput,{initialValue:e.y,unit:this.props.preferredUnit,onSubmit:this.setSelectedPointY}))),React.createElement(EASEL.component.pointEditingTypeMenu,{onClickStraight:this.onClickStraight,onClickCurve:this.onClickCurve,selectedPointState:this.getSelectedPointState()}),React.createElement("div",{className:"property-panel__info center-text"},React.createElement("i",{className:"fa fa-info-circle fa-lg"}),React.createElement("span",{className:"property-panel__text"},"Hold the ",React.createElement("kbd",null,this.getDisableSnapKey())," key to disable snapping"))):React.createElement("a",{className:"property-panel-header",href:"#",onClick:this.startEditing},React.createElement("span",null,"Edit points"),React.createElement("kbd",null,"E")))}return null}})},function(e,t){EASEL.component.pointEditingTypeMenu=createReactClass({propTypes:{onClickStraight:PropTypes.func.isRequired,onClickCurve:PropTypes.func.isRequired,selectedPointState:PropTypes.oneOf(["curved","straight",null])},render(){const{onClickCurve:e,onClickStraight:t,selectedPointState:n}=this.props;return React.createElement("div",{className:"property-button-pair"},React.createElement(EASEL.component.propertyButton,{"data-button-type":"curve-button",disabled:null===n,selected:"curved"===n,onClick:e},React.createElement("img",{src:EASEL.assets.images.curveAnchor}),React.createElement("span",null,"Curved")),React.createElement(EASEL.component.propertyButton,{"data-button-type":"straight-button",disabled:null===n,selected:"straight"===n,onClick:t},React.createElement("img",{src:EASEL.assets.images.straightAnchor}),React.createElement("span",null,"Straight")))}})},function(e,t){EASEL.component.rectangleShapeProperties=createReactClass({propTypes:{shape:PropTypes.object.isRequired,selectedVolumeIds:PropTypes.array.isRequired,unit:PropTypes.string.isRequired},doSetCornerRadius(e,t,n){let a;if(({value:t,unit:a}=EASEL.unitParser.parseInput(t)),null!=t&&t>=0){let r;if(null==a&&({unit:a}=this.props),0===(t*=EASEL.units.inchesPerUnit(a)))r=0;else{const e=this.props.shape,a=null!=e.cornerRadius?e.cornerRadius[n]:void 0;r=null==a||0===a?t:a}const o={};o[e]=t,o[n]=r,EASEL.volumeActions.setShapeParams(this.props.selectedVolumeIds,{cornerRadius:o},"Modify Corner Radius")}},setCornerRadiusX(e){this.doSetCornerRadius("x",e,"y")},setCornerRadiusY(e){this.doSetCornerRadius("y",e,"x")},render(){const e=this.props.shape,t=null!=e.cornerRadius?e.cornerRadius.x:0,n=null!=e.cornerRadius?e.cornerRadius.y:0;return React.createElement("div",null,React.createElement("div",{className:"section-header"},"Corner Radius"),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"x-corner-radius",className:"control-label"},"X"),React.createElement(EASEL.component.lengthInput,{id:"x-corner-radius",initialValue:t,unit:this.props.unit,onSubmit:this.setCornerRadiusX})),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"y-corner-radius",className:"control-label"},"Y"),React.createElement(EASEL.component.lengthInput,{id:"y-corner-radius",initialValue:n,unit:this.props.unit,onSubmit:this.setCornerRadiusY})))}})},function(e,t){EASEL.component.scrollbar=createReactClass({propTypes:{onUpdate:PropTypes.func.isRequired,min:PropTypes.number.isRequired,max:PropTypes.number.isRequired,value:PropTypes.number.isRequired,orientation:PropTypes.oneOf(["vertical","horizontal"]).isRequired},isVertical(){return"vertical"===this.props.orientation},innerScrollbarNode(){return $(this.innerScrollbarElement)},valueForCoordinates(e,t){let n;n=this.isVertical()?(t-this.state.startDragPoint.y)/this.innerScrollbarNode().height():(e-this.state.startDragPoint.x)/this.innerScrollbarNode().width();const a=(this.props.max-this.props.min)*n+this.state.valueAtStartDrag;return EASEL.math.clamp(a,this.props.min,this.props.max)},getInitialState(){return{startDragPoint:null,valueAtStartDrag:this.props.value}},onMouseDownScrollbar(e){let t;if(this.isVertical()){t=(e.clientY-this.innerScrollbarNode().offset().top)/this.innerScrollbarNode().height()}else{t=(e.clientX-this.innerScrollbarNode().offset().left)/this.innerScrollbarNode().width()}const n=this.props.min+(this.props.max-this.props.min)*t;this.props.onUpdate(n),this.startDragWithPointer(e),this.setState({valueAtStartDrag:n}),e.stopPropagation()},startDragWithPointer({clientX:e,clientY:t}){this.setState({startDragPoint:{x:e,y:t},valueAtStartDrag:this.props.value}),$(window).on("mousemove",this.onMouseMove),$(window).on("mouseup",this.onMouseUp)},dragWithPointer({clientX:e,clientY:t}){if(null!=this.state.startDragPoint){const n=this.valueForCoordinates(e,t);this.props.onUpdate(n)}},finishDrag(){$(window).off("mousemove",this.onMouseMove),$(window).off("mouseup",this.onMouseUp),this.setState({startDragPoint:null})},onMouseDownHandle(e){this.startDragWithPointer(e),e.stopPropagation()},onMouseMove(e){this.dragWithPointer(e),e.stopPropagation()},onMouseUp(e){this.dragWithPointer(e),this.finishDrag(),e.stopPropagation()},onTouchStart(e){this.startDragWithPointer(e.touches[0])},onTouchMove(e){this.dragWithPointer(e.touches[0])},onTouchEnd(){this.finishDrag()},onTouchCancel(){this.finishDrag()},handlePositionStyle(){const e=100*(this.props.value-this.props.min)/(this.props.max-this.props.min);return this.isVertical()?{top:`${e}%`}:{left:`${e}%`}},render(){const e=`scrollbar scrollbar-${this.props.orientation} ${null!=this.state.startDragPoint?"scrolling":""}`;return React.createElement("div",{className:e,onMouseDown:this.onMouseDownScrollbar},React.createElement("div",{className:"scrollbar-inner",ref:e=>this.innerScrollbarElement=e},React.createElement("a",{className:"scrollbar-handle",onMouseDown:this.onMouseDownHandle,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchCancel:this.onTouchCancel,style:this.handlePositionStyle()},React.createElement("div",{className:"scrollbar-handle-inner"}))))}})},function(e,t){EASEL.component.shapeEditorController=createReactClass({getState(){const e=EASEL.editorStore.getEditingVolumeId();return{volume:null!=e?EASEL.volumeStore.getVolumes([e])[0]:void 0,selectedPointIndex:EASEL.editorStore.getSelectedPointIndex(),selectedSubpathIndex:EASEL.editorStore.getSelectedSubpathIndex(),newPathPoints:EASEL.editorStore.getNewPathPoints()}},getInitialState(){return this.getState()},deactivate(){EASEL.editorActions.cancelEditing()},_onChange(){this.setState(this.getState())},componentDidMount(){EASEL.editorStore.addChangeListener(this._onChange),EASEL.volumeStore.addChangeListener(this._onChange)},componentDidUpdate(){this.shapeEditor&&this.shapeEditor.addEventListener("wheel",this.onWheel,{passive:!1})},componentWillUnmount(){EASEL.editorStore.removeChangeListener(this._onChange),EASEL.volumeStore.removeChangeListener(this._onChange)},submitChange(e){EASEL.volumeActions.setShapeParams([this.state.volume.id],e)},setPoints(e){EASEL.editorActions.setNewPathPoints(e)},submitPoints(e){EASEL.editorActions.submitNewPathPoints(e)},onSelect({subpathIndex:e,pointIndex:t}){EASEL.editorActions.selectPathPoint(e,t)},onWheel(e){EASEL.fabricRenderer.onWheel(e)},render(){const{viewWidth:e,viewHeight:t,screenMatrix:n}=this.props,{volume:a,newPathPoints:r}=this.state;return(null!=a||null!=r)&&React.createElement("svg",{id:"shape-editor",ref:e=>this.shapeEditor=e,width:e,height:t,onMouseDown:this.deactivate},null!=r&&React.createElement(EASEL.component.lineTool,{screenMatrix:n,setPoints:this.setPoints,points:r,submitPoints:this.submitPoints}),null!=a&&React.createElement(EASEL.component.pathEditor,{screenMatrix:n,shape:EASEL.shapeUtils.pathifyShape(a.shape),startChange:function(){EASEL.undoActions.beginGroup("Edit Point")},endChange:EASEL.undoActions.endGroup,submitChange:this.submitChange,selectedSubpathIndex:this.state.selectedSubpathIndex,selectedPointIndex:this.state.selectedPointIndex,onSelect:this.onSelect}))}})},function(e,t){EASEL.component.shapeLock=createReactClass({propTypes:{selectedVolumes:PropTypes.array.isRequired,selectedVolumeIds:PropTypes.array.isRequired,allLocked:PropTypes.bool.isRequired},anyLocked(){return this.props.selectedVolumes.some((e=>e.shape.anchored))},toggleLock(){this.anyLocked()?EASEL.volumeActions.setLocked(this.props.selectedVolumeIds,!1):EASEL.volumeActions.setLocked(this.props.selectedVolumeIds,!0)},render(){const e=this.anyLocked(),{selectedVolumes:t,allLocked:n}=this.props,a=e?"fa fa-unlock":"fa fa-lock",r=`${e?"Unlock":"Lock"} Object${t.length>1?"s":""}`;return React.createElement("div",{className:"shape-lock"},React.createElement(EASEL.component.iconToggleButton,{checked:e,inputId:"shape-lock",iconClassName:a,onChange:this.toggleLock,labelText:r}),e&&!n&&React.createElement(ReactBootstrap.OverlayTrigger,{placement:"bottom",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"partial-locked-tooltip"},"Selection has both locked & unlocked shapes")},React.createElement("i",{className:"shape-lock__warning fa fa-exclamation-circle"})))}})},function(e,t){EASEL.component.shapePosition=createReactClass({propTypes:{anchorX:PropTypes.string.isRequired,anchorY:PropTypes.string.isRequired,x:PropTypes.number.isRequired,y:PropTypes.number.isRequired,unit:PropTypes.string.isRequired,onChange:PropTypes.func.isRequired,onChangeAnchor:PropTypes.func.isRequired,disableAnchors:PropTypes.bool.isRequired},setX(e){let t;({value:e,unit:t}=EASEL.unitParser.parseInput(e)),null!=e&&(t=t||this.props.unit,e*=EASEL.units.inchesPerUnit(t),this.props.onChange(e,this.props.y))},setY(e){let t;({value:e,unit:t}=EASEL.unitParser.parseInput(e)),null!=e&&(t=t||this.props.unit,e*=EASEL.units.inchesPerUnit(t),this.props.onChange(this.props.x,e))},setAnchor(e){const t=e.target.value.match(/^(\w+)-(\w+)$/);if(null!=t){const e=t[1],n=t[2];this.props.onChangeAnchor(e,n)}},render(){const e="left"===this.props.anchorX&&"top"===this.props.anchorY,t="left"===this.props.anchorX&&"bottom"===this.props.anchorY,n="center"===this.props.anchorX&&"center"===this.props.anchorY,a="right"===this.props.anchorX&&"top"===this.props.anchorY,r="right"===this.props.anchorX&&"bottom"===this.props.anchorY;return React.createElement("div",null,React.createElement("div",{className:"section-header"},"Position"),React.createElement("div",{className:"clearfix"},React.createElement("div",{className:"shape-position__origin-inputs"},React.createElement("div",{className:"shape-position__origin-inputs-inner"},React.createElement("label",{htmlFor:"anchor-left-top"},"Left Top"),React.createElement("input",{id:"anchor-left-top",ref:"leftTop",type:"radio",value:"left-top",className:"left top",checked:e,onChange:this.setAnchor,disabled:this.props.disableAnchors}),React.createElement("label",{htmlFor:"anchor-left-bottom"},"Left Bottom"),React.createElement("input",{id:"anchor-left-bottom",ref:"leftBottom",type:"radio",value:"left-bottom",className:"left bottom",checked:t,onChange:this.setAnchor,disabled:this.props.disableAnchors}),React.createElement("label",{htmlFor:"anchor-center"},"Center"),React.createElement("input",{id:"anchor-center",ref:"center",type:"radio",value:"center-center",className:"center center",checked:n,onChange:this.setAnchor}),React.createElement("label",{htmlFor:"anchor-right-top"},"Right Top"),React.createElement("input",{id:"anchor-right-top",ref:"rightTop",type:"radio",value:"right-top",className:"right top",checked:a,onChange:this.setAnchor,disabled:this.props.disableAnchors}),React.createElement("label",{htmlFor:"anchor-right-bottom"},"Right Bottom"),React.createElement("input",{id:"anchor-right-bottom",ref:"rightBottom",type:"radio",value:"right-bottom",className:"right bottom",checked:r,onChange:this.setAnchor,disabled:this.props.disableAnchors}))),React.createElement("div",{className:"shape-position__position-inputs"},React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"settings-position-x",className:"control-label"},"X"),React.createElement(EASEL.component.lengthInput,{id:"settings-position-x",initialValue:this.props.x,unit:this.props.unit,onSubmit:this.setX,readonly:this.props.disabled})),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"settings-position-y",className:"control-label"},"Y"),React.createElement(EASEL.component.lengthInput,{id:"settings-position-y",initialValue:this.props.y,unit:this.props.unit,onSubmit:this.setY,readonly:this.props.disabled})))))}})},function(e,t){EASEL.component.shapeProperties=createReactClass({propTypes:{selectedVolumeIds:PropTypes.array.isRequired,selectedVolumes:PropTypes.array.isRequired,preferredUnit:PropTypes.string.isRequired,fontData:PropTypes.object.isRequired,disableAnchors:PropTypes.bool.isRequired},getInitialState(){return this.getAnchorPosition()},getX(){switch(this.state.anchorX){case"left":return EASEL.volumeHelper.boundingBoxLeft(this.props.selectedVolumes);case"center":return EASEL.volumeHelper.boundingBoxHorizontalCenter(this.props.selectedVolumes);case"right":return EASEL.volumeHelper.boundingBoxRight(this.props.selectedVolumes)}},getY(){switch(this.state.anchorY){case"bottom":return EASEL.volumeHelper.boundingBoxBottom(this.props.selectedVolumes);case"center":return EASEL.volumeHelper.boundingBoxVerticalCenter(this.props.selectedVolumes);case"top":return EASEL.volumeHelper.boundingBoxTop(this.props.selectedVolumes)}},getRotation(){return 1===this.props.selectedVolumes.length?this.props.selectedVolumes[0].shape.rotation||0:this.props.groupRotation||0},setAnchor(e,t){EASEL.editorActions.saveAnchorPosition(e,t),this.setState({anchorX:e,anchorY:t})},getAnchorPosition(){return this.props.disableAnchors?{anchorX:"center",anchorY:"center"}:EASEL.editorStore.getSavedAnchorPosition()},setPosition(e,t){EASEL.volumeActions.translate(this.props.selectedVolumeIds,e-this.getX(),t-this.getY())},setSize(e,t){const n=EASEL.volumeHelper.boundingBoxWidth(this.props.selectedVolumes),a=EASEL.volumeHelper.boundingBoxHeight(this.props.selectedVolumes),r=0===n?1:e/n,o=0===a?1:t/a;EASEL.volumeActions.scale(this.props.selectedVolumeIds,r,o,this.getX(),this.getY())},setRotation(e){const t=EASEL.volumeHelper.boundingBoxHorizontalCenter(this.props.selectedVolumes),n=EASEL.volumeHelper.boundingBoxVerticalCenter(this.props.selectedVolumes);EASEL.volumeActions.rotate(this.props.selectedVolumeIds,e-this.getRotation(),t,n)},allLocked(){return this.props.selectedVolumes.every((e=>e.shape.anchored))},getWidth(){return EASEL.volumeHelper.boundingBoxWidth(this.props.selectedVolumes)},getHeight(){return EASEL.volumeHelper.boundingBoxHeight(this.props.selectedVolumes)},isProportionLocked(){return this.props.selectedVolumes.every((e=>e.shape.isProportionLocked))},render(){let e;if(this.props.selectedVolumeIds.length<=0)return null;const t=this.getX(),n=this.getY(),a=this.getWidth(),r=this.getHeight(),o=this.getRotation(),s=this.allLocked(),i=this.isProportionLocked(),{anchorX:l,anchorY:c}=this.getAnchorPosition();this.props.selectedVolumes.every((e=>"rectangle"===e.shape.type))?e=React.createElement(EASEL.component.rectangleShapeProperties,{shape:this.props.selectedVolumes[0].shape,selectedVolumeIds:this.props.selectedVolumeIds,unit:this.props.preferredUnit}):this.props.selectedVolumes.every((e=>"text"===e.shape.type))&&(e=React.createElement(EASEL.component.textShapeProperties,{selectedFontFamily:this.props.selectedVolumes[0].shape.font,selectedTextEffect:this.props.selectedVolumes[0].shape.textEffect,selectedVolumeIds:this.props.selectedVolumeIds,fontData:this.props.fontData}));const p=1===this.props.selectedVolumes.length&&"drill"===this.props.selectedVolumes[0].shape.type;return React.createElement("div",{className:"shape-properties"},React.createElement(EASEL.component.shapePosition,{anchorX:l,anchorY:c,x:t,y:n,unit:this.props.preferredUnit,onChange:this.setPosition,onChangeAnchor:this.setAnchor,disableAnchors:this.props.disableAnchors,disabled:s}),React.createElement(EASEL.component.shapeSize,{width:a,height:r,unit:this.props.preferredUnit,onChange:this.setSize,selectedVolumeIds:this.props.selectedVolumeIds,isProportionLocked:i,disabled:s}),React.createElement(EASEL.component.shapeRotation,{angle:o,readonly:p||s,onChange:this.setRotation}),React.createElement(EASEL.component.shapeLock,{selectedVolumes:this.props.selectedVolumes,toggleLock:this.toggleLock,selectedVolumeIds:this.props.selectedVolumeIds,allLocked:s}),e)}})},function(e,t){EASEL.component.shapeRotation=createReactClass({propTypes:{angle:PropTypes.number.isRequired,onChange:PropTypes.func.isRequired,readonly:PropTypes.bool},setRotation(e){e=parseFloat(e),isFinite(e)&&this.props.onChange(e*Math.PI/180)},render(){let e=180*this.props.angle/Math.PI;e<0&&(e+=360);e=parseFloat(e.toFixed(1));const t=`${e}\xb0`;return React.createElement("div",null,React.createElement("div",{className:"section-header"},"Rotation"),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"settings-angle",className:"control-label"},"Angle"),React.createElement(EASEL.component.textInput,{id:"settings-angle",initialValue:t,readonly:this.props.readonly,submit:this.setRotation})))}})},function(e,t){EASEL.component.shapeSize=createReactClass({propTypes:{width:PropTypes.number.isRequired,height:PropTypes.number.isRequired,unit:PropTypes.string.isRequired,onChange:PropTypes.func.isRequired,isProportionLocked:PropTypes.bool.isRequired,selectedVolumeIds:PropTypes.array.isRequired,disabled:PropTypes.bool.isRequired},onProportionChange(e){const t=e.target.checked;EASEL.volumeActions.setProportionLock(t,this.props.selectedVolumeIds)},setWidth(e){let t;if(({value:e,unit:t}=EASEL.unitParser.parseInput(e)),null!=e&&e>0)if(t=t||this.props.unit,e*=EASEL.units.inchesPerUnit(t),this.props.isProportionLocked){const t=this.props.height/this.props.width;this.props.onChange(e,e*t)}else this.props.onChange(e,this.props.height)},setHeight(e){let t;if(({value:e,unit:t}=EASEL.unitParser.parseInput(e)),null!=e&&e>0)if(t=t||this.props.unit,e*=EASEL.units.inchesPerUnit(t),this.props.isProportionLocked){const t=this.props.width/this.props.height;this.props.onChange(e*t,e)}else this.props.onChange(this.props.width,e);else this.forceUpdate()},render(){const e=1e-5,t=this.props.isProportionLocked?"fa fa-chain":"fa fa-chain-broken";return React.createElement("div",{className:"size-settings"},React.createElement("div",{className:"section-header"},"Size"),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"settings-width",className:"control-label"},"Width"),React.createElement(EASEL.component.lengthInput,{id:"settings-width",initialValue:this.props.width,unit:this.props.unit,onSubmit:this.setWidth,readonly:Math.abs(this.props.width)<e||this.props.disabled})),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"settings-height",className:"control-label"},"Height"),React.createElement(EASEL.component.lengthInput,{id:"settings-height",initialValue:this.props.height,unit:this.props.unit,onSubmit:this.setHeight,readonly:Math.abs(this.props.height)<e||this.props.disabled})),React.createElement("div",{className:"shape-size__proportions"},React.createElement(EASEL.component.iconToggleButton,{checked:this.props.isProportionLocked,inputId:"proportion-lock",iconClassName:t,onChange:this.onProportionChange})))}})},function(e,t){EASEL.component.sliderTick=createReactClass({onMouseDown(){this.props.onClick(this.props.value)},render(){const e={top:`${this.props.percentage}%`},t={__html:this.props.labelHTML};return React.createElement(EASEL.component.a,{className:"tick",onMouseDown:this.onMouseDown,style:e},React.createElement("div",{className:"frac",dangerouslySetInnerHTML:t}))}})},function(e,t){EASEL.component.textShapePropertiesComponent=createReactClass({propTypes:{selectedFontFamily:PropTypes.string.isRequired,selectedVolumeIds:PropTypes.array.isRequired,selectedTextEffect:PropTypes.object,fontData:PropTypes.object.isRequired},getInitialState:()=>({showFontList:!1}),chooseFont(e){EASEL.volumeActions.setFont(this.props.selectedVolumeIds,e)},closeFontList(){document.removeEventListener("click",this.closeFontList),this.setState({showFontList:!1})},componentWillUnmount(){document.removeEventListener("click",this.closeFontList)},showFontList(e){e.preventDefault(),document.addEventListener("click",this.closeFontList);const t=this.refs.selectedFont.getBoundingClientRect(),n=window.innerHeight-t.bottom-6,a=t.right>=window.innerWidth-60?"left":"right";this.setState({showFontList:!0,maxFontListHeight:n,proLabelPlacement:a})},selectedFontDisplayName(){return this.props.fontData[this.props.selectedFontFamily].displayName},render(){return React.createElement("div",{className:"text-shape-properties"},React.createElement("div",{className:"section-header"},"Font"),React.createElement("div",null,React.createElement("a",{className:"text-shape-properties__selected-font",ref:"selectedFont",href:"#","aria-haspopup":!0,"aria-expanded":this.state.showFontList,onClick:this.showFontList,style:{fontFamily:`'${this.props.selectedFontFamily}'`}},this.selectedFontDisplayName(),React.createElement("i",{className:"fa fa-caret-down"})),React.createElement("div",{className:"text-shape-font-menu dropdown "+(this.state.showFontList?"open":"")},React.createElement(EASEL.component.fontMenu,{onChooseFont:this.chooseFont,className:"dropdown-menu easel-dropdown easel-dropdown--right",maxHeight:this.state.maxFontListHeight,proLabelPlacement:this.state.proLabelPlacement}))),React.createElement("div",{className:"section-header"},"Text Effect",React.createElement(EASEL.component.proLabel,null)),React.createElement(EASEL.component.textShapeTransformMenu,{selectedFontFamily:this.props.selectedFontFamily,selectedVolumeIds:this.props.selectedVolumeIds,selectedTextEffect:this.props.selectedTextEffect}))}}),EASEL.component.textShapeProperties=EASEL.redux.connect({mapStateToProps:e=>({isProUser:EASEL.userSelectors.isProEnabled(Date.now(),e),isBetaTester:EASEL.userSelectors.isBetaTester(e)}),component:EASEL.component.textShapePropertiesComponent})},function(e,t){EASEL.component.textShapeTransformMenu=createReactClass({textVolume(){const e=EASEL.volumeStore.getVolumes(this.props.selectedVolumeIds).filter((e=>"text"===e.shape.type));return null!=e&&e[0]},selectTransformFunc(e){return()=>this.selectTransform(e)},selectTransform(e){EASEL.stats.trackEvent(EASEL.events.appliedTextTransformation,{transformation:e,project:EASEL.projectMetadataStore.getID(),workpiece:EASEL.workpieceStore.getActiveID(),font:this.props.selectedFontFamily}),EASEL.volumeActions.setTextEffect(this.props.selectedVolumeIds,EASEL.textEffects[e])},getCurrentTransformPath(){const e=this.textVolume().shape&&this.textVolume().shape.textEffect,t=e?e.key:"none";return this.getTransformPreviewPath(t)},getTransformPreviewPath(e){const t=EASEL.textEffects[e],n=EASEL.shapeUpdater.buildText(this.props.selectedFontFamily);n.textEffect=t;const a=EASEL.textHelper.textShapeToCanvasShape(n),r=EASEL.matrix().scaledBy(1,-1),o=EASEL.pathUtils.transformedPath(a.points,r),s=EASEL.pathUtils.pathBoundingBox(o),i=EASEL.svgPathBuilder.string(o);return React.createElement("svg",{className:"text-shape-transform-menu__preview",viewBox:`${s.minX} ${s.minY} ${s.maxX-s.minX} ${s.maxY-s.minY}`,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},React.createElement("path",{d:i}))},textEffect(e){let t;const n=[];for(t in EASEL.textEffects){const a=EASEL.textEffects[t];let r=e===t&&" text-shape-transform-menu__item--selected";n.push(React.createElement(ReactBootstrap.OverlayTrigger,{id:t,key:t,placement:"bottom",overlay:React.createElement(ReactBootstrap.Tooltip,{id:t},a.name),delayShow:EASEL.constants.TOOLBAR_TOOLTIP_DELAY,rootClose:!0},React.createElement("li",{className:"text-shape-transform-menu__item dropdown-item"+r,"data-effect":t,key:t},React.createElement("a",{className:"text-shape-transform-menu__item-link",onClick:this.selectTransformFunc(t),key:t},this.getTransformPreviewPath(t)))))}return n},render(){const e=null!=this.props.selectedTextEffect&&this.props.selectedTextEffect.key||"none";return React.createElement("div",{className:"text-shape-transform-menu dropdown","data-effect":e},React.createElement("a",{className:"text-shape-transform-menu__toggle-link dropdown-toggle","data-toggle":"dropdown"},this.getCurrentTransformPath()),React.createElement("div",{className:"row"}),React.createElement("ul",{className:"text-shape-transform-menu__dropdown-menu dropdown-menu"},this.textEffect(e)))}})},function(e,t){EASEL.component.toolbar=createReactClass({getInitialState:()=>({showMenu:!0}),toolbarToggle(){this.setState({showMenu:!this.state.showMenu})},onClick(e){const t=e.target.id;const n={shape:EASEL.shape(t),cut:"drill"===t?{type:"drill",depth:EASEL.materialStore.getCurrentDepth()}:{type:"fill",depth:EASEL.materialStore.getShapePlacementDepth()}};EASEL.volumeActions.add(n),EASEL.editorActions.select(EASEL.volumeStore.getLastAddedVolume().id),e.preventDefault()},activateLineTool(e){EASEL.editorActions.startNewPathMode(),e.preventDefault()},render(){return React.createElement("div",null,React.createElement(EASEL.component.toolbarItem,{onClick:this.toolbarToggle,id:"toolbar-toggle",key:"toggle",tooltip:"Show / Hide Toolbar",listClass:"toolbar-toggle"},React.createElement("i",{className:"fa fa-angle-double-"+(this.state.showMenu?"up":"down")})),React.createElement("div",{className:"toolbar "+(this.state.showMenu?"useable":"tucked")},React.createElement("div",{className:"main-toolbar action-menu"},React.createElement("ul",{className:"nav nav--horizontal nav--bordered"},React.createElement(EASEL.component.shapesMenu,{insertShape:this.onClick}),React.createElement(EASEL.component.toolbarItem,{onClick:this.activateLineTool,id:"line-tool",tooltip:"Line Tool"}),React.createElement(EASEL.component.toolbarItem,{onClick:this.onClick,id:"drill",tooltip:"Drill"}),React.createElement(EASEL.component.fontToolbarItem,null),React.createElement(EASEL.component.designElementsToolbarItem,null),React.createElement(EASEL.component.appsToolbarItem,null),React.createElement(EASEL.component.importToolbarItem,null)))))}})},function(e,t){EASEL.component.unitSwitcher=EASEL.redux.connect({mapStateToProps:e=>({unit:EASEL.unitSelectors.getPreferredUnit(e)}),mapDispatchToProps:e=>({updateUnit(t){e(EASEL.unitActionCreators.setUnit(t))}}),component:createReactClass({onChangeUnit(){const e="in"===this.props.unit?"mm":"in";this.props.updateUnit(e)},render(){return React.createElement("div",{id:"unit-switcher",className:`unit-switcher__${this.props.unit}`},React.createElement("span",{className:"inches"},"inch"),React.createElement("label",{className:"unit-switcher__toggle",onClick:this.onChangeUnit},React.createElement("div",{className:"unit-switcher__outline"},React.createElement("div",{className:"unit-switcher__ball"}))),React.createElement("span",{className:"mm"},"mm"))}})})},function(e,t){EASEL.component.viewportControls=createReactClass({render:()=>React.createElement("div",{id:"viewport-controls"},React.createElement("div",{className:"viewport-btn-group"},React.createElement(EASEL.component.zoomInButton,null),React.createElement(EASEL.component.zoomOutButton,null)),React.createElement("div",{className:"viewport-btn-group"},React.createElement(EASEL.component.homeViewportButton,null)))})},function(e,t){EASEL.component.zoomInButton=createReactClass({onClick(e){EASEL.viewportActions.zoomIn(),e.preventDefault()},render(){return React.createElement("a",{href:"#",id:"zoom-in",onClick:this.onClick},React.createElement("i",{className:"fa fa-plus"}))}})},function(e,t){EASEL.component.zoomOutButton=createReactClass({onClick(e){EASEL.viewportActions.zoomOut(),e.preventDefault()},render(){return React.createElement("a",{href:"#",id:"zoom-out",onClick:this.onClick},React.createElement("i",{className:"fa fa-minus"}))}})},function(e,t){const n=createReactClass({getInitialState:()=>({maxDisplayCount:10,previewText:"",containerRef:null}),isNewFont(e){const t=this.props.fonts[e].createdAt;return t&&EASEL.constants.EASEL_LOADED_TIMESTAMP-t<EASEL.constants.FOUR_MONTHS},fontComponent(e){return React.createElement(EASEL.component.libraryFontPreview,{key:e,family:e,isNew:this.isNewFont(e),category:this.props.category,installFont:this.props.installFont,uninstallFont:this.props.uninstallFont,failed:this.props.failedFonts[e],fontLoaded:null!=this.props.fontData[e],installed:Array.from(this.props.toolbarFontNames).includes(e),previewText:""!==this.state.previewText?this.state.previewText:null})},componentWillReceiveProps(e){if(this.props.category!==e.category)return this.containerRef.scrollTop=0,this.setState({maxDisplayCount:10})},emptyContent(){return React.createElement("p",{className:"text-muted"},"Installed"===this.props.category?"You have not yet installed any Easel Pro fonts. To install a font, use the categories on the left.":"This category is currently empty.")},changePreviewText(e){return this.setState({previewText:e})},closeToBottom:e=>e.target.scrollTop>=e.target.scrollHeight-e.target.clientHeight-200,onScroll(e){if(this.closeToBottom(e)&&this.state.maxDisplayCount<Object.keys(this.props.fonts).length)return this.setState({maxDisplayCount:this.state.maxDisplayCount+10})},alphabetizedFonts(){return Object.keys(this.props.fonts).sort(((e,t)=>e.localeCompare(t)))},render(){const e=this.alphabetizedFonts().slice(0,this.state.maxDisplayCount).map((e=>this.fontComponent(e)));return React.createElement("div",null,React.createElement(EASEL.component.textInput,{id:"font-preview-text",placeholder:"Type here to preview custom text",initialValue:this.state.previewText,onChange:this.changePreviewText}),React.createElement("div",{ref:e=>this.containerRef=e,className:"scrollable-content",onScroll:this.onScroll},e.length>0?e:this.emptyContent()))}});EASEL.component.fontListContainer=EASEL.redux.connect({mapStateToProps:e=>{const{data:t,toolbar:n}=EASEL.fontSelectors.getFontState(e);return{fontData:t,toolbarFontNames:n.map((e=>e.name))}},component:n})},function(e,t){EASEL.component.fontMenuComponent=createReactClass({easelProPopover:()=>React.createElement("span",null,"300+ additional fonts. Carving requires use of ",React.createElement(EASEL.component.a,{href:"https://inventables.zendesk.com/hc/en-us/articles/360012849133-Easel-Pro-FAQ-and-Overview",target:"_blank"},"Easel Pro")),render(){const{fontsLoaded:e,fontToolbar:t,proLoadedInfo:n,toolbarLoadedInfo:a,maxHeight:r,addFont:o,onChooseFont:s,id:i,className:l}=this.props,c=t.sort(((e,t)=>e.displayName.localeCompare(t.displayName)));return React.createElement("ul",{id:i,className:l,"aria-label":"submenu",style:r?{maxHeight:`${r}px`}:{}},e&&React.createElement(React.Fragment,null,React.createElement("li",{className:"add-font-item",key:"add-font-item"},React.createElement(EASEL.component.a,{className:"add-font-link",onClick:o},React.createElement("span",null,React.createElement("i",{className:"fa fa-plus"})," Add fonts"),React.createElement(EASEL.component.utils.hoverPopover,{id:"font-toolbar-popover",placement:null!=this.props.proLabelPlacement?this.props.proLabelPlacement:"right",popoverTitle:"Font Library",popoverContent:this.easelProPopover()},React.createElement(EASEL.component.proLabel,null)))),React.createElement(EASEL.component.fontMenuList,{fonts:c,onChooseFont:s})),!e&&React.createElement("li",{className:"font-menu-loading",key:"fonts-list-loading"},React.createElement("div",{className:"font-menu-loading-text"},React.createElement("p",null,"Loading fonts ",n.loaded+a.loaded,"/",n.total+a.total),React.createElement("div",{className:"font-menu-loading-spinner"},React.createElement(EASEL.component.spinner,null))),React.createElement(EASEL.component.nukeFonts,null)))}}),EASEL.component.fontMenu=EASEL.redux.connect({mapStateToProps:e=>({fontToolbar:EASEL.fontSelectors.getToolbarFonts(e),fontsLoaded:EASEL.fontSelectors.isLoaded(e,"pro")&&EASEL.fontSelectors.isLoaded(e,"toolbar"),proLoadedInfo:EASEL.fontSelectors.getGroupLoadedInfo(e,"pro"),toolbarLoadedInfo:EASEL.fontSelectors.getGroupLoadedInfo(e,"toolbar")}),mapDispatchToProps:e=>({addFont(){e(EASEL.fontActionCreators.setFontListVisible(!0))}}),component:EASEL.component.fontMenuComponent})},function(e,t){EASEL.component.fontMenuList=createReactClass({alphabetizedFonts:e=>e.map((e=>({family:e.name,displayName:e.displayName}))).sort(((e,t)=>e.displayName.localeCompare(t.displayName))),chooseFont(e){return this.props.onChooseFont(e)},render(){const{fonts:e}=this.props;return this.alphabetizedFonts(e).map((e=>{const t=!EASEL.fonts[e.family];return React.createElement("li",{key:e.displayName},React.createElement(EASEL.component.a,{onClick:this.chooseFont.bind(this,e.family)},React.createElement("span",{"data-font-family":e.family,"data-font-weight":e.weight,style:{fontFamily:`'${e.family}'`}},e.displayName),t&&React.createElement(EASEL.component.proLabel,null)))}))}})},function(e,t){EASEL.component.fontToolbarItem=EASEL.redux.connect({mapDispatchToProps:e=>({addFont(){e(EASEL.fontActionCreators.setFontListVisible(!0))},chooseFont(e){const t={shape:EASEL.shapeUpdater.buildText(e),cut:{type:"fill",depth:EASEL.materialStore.getShapePlacementDepth()}};EASEL.volumeActions.add(t),EASEL.editorActions.select(t.id)}}),component:createReactClass({getInitialState:()=>({showMenu:!1}),closeFontMenu(){document.removeEventListener("click",this.closeFontMenu),this.setState({showMenu:!1})},showFontMenu(){document.addEventListener("click",this.closeFontMenu),this.setState({showMenu:!0})},getButton(){return EASEL.component.DOM.a({className:"shape-icon dropdown-toggle "+(this.state.showMenu?"":"menu-indicator"),"data-toggle":"dropdown",onClick:this.showFontMenu,id:"text"})},fontsTooltip(){const{showMenu:e}=this.state;return e?this.getButton():React.createElement(ReactBootstrap.OverlayTrigger,{placement:"right",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"fonts-toolbar-tooltip"},"Fonts"),delayShow:EASEL.constants.TOOLBAR_TOOLTIP_DELAY,rootClose:!0},this.getButton())},render(){return React.createElement("li",{className:"dropdown font-toolbar-item "+(this.state.showMenu?"open":"")},this.fontsTooltip(),React.createElement(EASEL.component.fontMenu,{id:"font-menu",className:"dropdown-menu easel-dropdown easel-dropdown--left",onChooseFont:this.props.chooseFont}))}})})},function(e,t){const n=["I watched the storm, so beautiful yet terrific.","The spectacle before us was indeed sublime.","A shining crescent far beneath the flying vessel.","Mist enveloped the ship three hours out from port.","Then came the night of the first falling star."];EASEL.component.libraryFontPreview=createReactClass({propTypes:{family:PropTypes.string.isRequired,installFont:PropTypes.func.isRequired,uninstallFont:PropTypes.func.isRequired,failed:PropTypes.bool,isNew:PropTypes.bool},loadFont:(e,t)=>EASEL.googleFontManager.loadFont(e).then((t=>EASEL.store.dispatch(EASEL.fontActionCreators.setFontData([{name:e,font:t}])))).catch((()=>{console.warn(`Font ${e} failed to load - removed from list!`),EASEL.store.dispatch(EASEL.fontActionCreators.removeFontFromLibrary({name:e,category:t}))})),componentWillMount(){this.props.fontLoaded||this.loadFont(this.props.family,this.props.category)},phraseForFont(e){const t=e.charCodeAt(0)+e.charCodeAt(e.length-1);return n[t%n.length]},installFont(){this.props.installFont(this.props.family)},uninstallFont(){this.props.uninstallFont(this.props.family)},installButton(e){return EASEL.component.DOM.a({onClick:this.installFont,className:`btn ${e} btn-xs pull-right`},"Install")},uninstallButton(e){return EASEL.component.DOM.a({onClick:this.uninstallFont,className:`btn ${e} btn-xs pull-right`},"Remove")},previewText(){const{fontLoaded:e,family:t,previewText:n}=this.props;return e?React.createElement("h2",{style:{fontFamily:`'${t}'`}},n||this.phraseForFont(t)):React.createElement("img",{src:EASEL.assets.images.spinner})},render(){let e;return this.props.fontLoaded&&(e=this.props.installed?this.props.failed?this.installButton("btn-danger"):this.uninstallButton("btn-default"):this.props.failed?this.uninstallButton("btn-danger"):this.installButton("btn-primary")),React.createElement("div",{className:"font-preview"},React.createElement("div",{className:"font-preview-header"},React.createElement("div",null,React.createElement("label",null,this.props.family,this.props.isNew?React.createElement("span",null,"NEW"):void 0)),React.createElement("div",null,e)),React.createElement("div",null,this.previewText()))}})},function(e,t){EASEL.component.libraryFontsModal=EASEL.redux.connect({mapStateToProps:e=>{let t;const{fontList:n,fontLibrary:a,toolbar:r}=EASEL.fontSelectors.getFontState(e),o={};for(t of r)EASEL.fonts[t.name]||(o[t.name]=t);let s={};for(let c in a){const e=a[c];s=EASEL.merge(s,e)}const i={};for(let c of Object.keys(s)){t=s[c];const e=t.createdAt;e&&EASEL.constants.EASEL_LOADED_TIMESTAMP-e<EASEL.constants.FOUR_MONTHS&&(i[c]=t)}const l=EASEL.shallowMerge(a);return l.All=s,0!==Object.keys(i).length&&(l.New=i),l.Installed=o,{visible:n.visible,categories:l,toolbarFontFamilies:r,newFontsAvailable:0!==Object.keys(i).length}},mapDispatchToProps:e=>({onHide:()=>e(EASEL.fontActionCreators.setFontListVisible(!1)),addFontToToolbar:t=>e(EASEL.fontActionCreators.addFontToToolbar(t)),removeFontFromToolbar:t=>e(EASEL.fontActionCreators.removeFontFromToolbar(t))}),component:createReactClass({getInitialState:()=>({selectedCategory:null,failedFonts:{}}),mixins:[React.addons.PureRenderMixin],installFont(e){return EASEL.stats.trackEvent(EASEL.events.fontInstalled,e),this.props.addFontToToolbar(e),EASEL.webAPIUtils.saveUserFont(e).catch((t=>{console.error(`There was a problem saving font '${e} to user account': ${t}`),EASEL.oops(`There was a problem saving '${e}' to your account for next time. Make sure you're connected to the Internet and try again.`),this.setState({failedFonts:EASEL.setIn(this.state.failedFonts,[e],!0)})}))},uninstallFont(e){return EASEL.stats.trackEvent(EASEL.events.fontUninstalled,e),this.props.removeFontFromToolbar(e),EASEL.webAPIUtils.deleteUserFont(e).catch((t=>{console.error(`There was a problem removing font '${e} from user account': ${t}`),EASEL.oops(`There was a problem removing '${e}' from your account for next time. Make sure you're connected to the Internet and try again.`),this.setState({failedFonts:EASEL.setIn(this.state.failedFonts,[e],!0)})}))},selectCategory(e){this.setState({selectedCategory:e})},sortedCategoryNames(){const e="General category",t=["All","New","Serif","Sans Serif",e,"Halloween","Installed"];return Object.keys(this.props.categories).sort((function(n,a){const[r,o]=[n,a].map((function(n){const a=t.indexOf(n);return a>-1?a:t.indexOf(e)}));return r!==o?r-o:n.localeCompare(a)}))},render(){if(!this.props.visible)return null;let e;const t=this.sortedCategoryNames(),n=this.state.selectedCategory||t[0];return null!=n&&(e=React.createElement(EASEL.component.fontListContainer,{category:n,toolbarFontFamilies:this.props.toolbarFontFamilies,fonts:this.props.categories[n],installFont:this.installFont,uninstallFont:this.uninstallFont,failedFonts:this.state.failedFonts})),React.createElement(ReactBootstrap.Modal,{show:this.props.visible,onHide:this.props.onHide,bsSize:"large",dialogClassName:"library_fonts"},React.createElement(ReactBootstrap.Modal.Header,{className:"",closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,{},"Font Library",React.createElement(EASEL.component.proLabel,null))),React.createElement(ReactBootstrap.Modal.Body,{},React.createElement("div",{className:"modal-columns"},React.createElement("div",{className:"column-nav"},React.createElement("ul",{className:"nav nav-stacked nav-pills"},t.map((e=>React.createElement("li",{key:`category-${e}`,className:e===n?"active":void 0},React.createElement(EASEL.component.a,{className:"nav-link",onClick:this.selectCategory.bind(this,e)},e)))))),React.createElement("div",{className:"column-content"},e))))}})})},function(e,t){EASEL.component.nukeFontsComponent=createReactClass({getInitialState:()=>({time:Date.now()}),componentDidMount(){this.interval=setInterval((()=>this.setState({time:Date.now()})),1e3)},componentWillUnmount(){clearInterval(this.interval)},nukeAllFonts:()=>EASEL.webAPIUtils.nukeUserFonts().then((()=>{window.location.reload(!1)})).catch((e=>{console.error(`There was a problem saving deleting all user fonts': ${e}`),EASEL.oops("There was a problem removing all the fonts.")})),render(){return(this.state.time-this.props.lastFontLoadedTimestamp)/1e3>15&&React.createElement("div",{className:"fonts-loading-nuke"},React.createElement("button",{className:"btn btn-default",onClick:this.nukeAllFonts},"Uninstall all the fonts"),React.createElement("p",null,"Helps if you are stuck with fonts not loading. This will not modify your project. You can install all the fonts again anytime."))}}),EASEL.component.nukeFonts=EASEL.redux.connect({mapStateToProps:e=>({lastFontLoadedTimestamp:EASEL.fontSelectors.getLastLoadedFontTimestamp(e)}),component:EASEL.component.nukeFontsComponent})},function(e,t,n){const a=n(82);EASEL.component.externalGcodeSender=EASEL.component.utils.withToolpathAnimationControls(createReactClass({props:{gcode:PropTypes.string.isRequired,panelWidth:PropTypes.number.isRequired,panelHeight:PropTypes.number.isRequired,isCarvey:PropTypes.bool,startFrame:PropTypes.number},getInitialState(){return{formattedTime:this.getFormattedTime(this.props.gcode)}},componentWillReceiveProps(e){e.gcode!==this.props.gcode&&this.setState({formattedTime:this.getFormattedTime(e.gcode)})},getFormattedTime(e){const t=a.getTime(a.withHeaderAndFooter(e));return EASEL.utility.timeFormatter.durationFromMinutes(t)},render(){return React.createElement("div",{className:"gcode-sender-container",style:{width:this.props.panelWidth,height:this.props.panelHeight}},DISABLE_3D?React.createElement(EASEL.component.gcodePreview2d,{gcode:this.props.gcode,isCarvey:this.props.isCarvey,panelWidth:this.props.panelWidth,panelHeight:this.props.panelHeight}):React.createElement("div",null,React.createElement(EASEL.component.gcodePreview3d,{gcode:this.props.gcode,isCarvey:this.props.isCarvey,currentFrame:this.props.currentFrame,setFrameCount:this.props.setFrameCount,panelWidth:this.props.panelWidth,panelHeight:this.props.panelHeight,startFrame:this.props.startFrame}),React.createElement("div",{className:"gcode-sender-controls"},this.props.toolpathAnimationControls,React.createElement("div",null,React.createElement("i",{className:"fa fa-lg fa-clock-o"}),React.createElement("span",{className:"gcode-sender__time-estimate"},this.state.formattedTime)))))}}))},function(e,t){EASEL.component.externalGcodeSenderController=EASEL.redux.connect({mapStateToProps:e=>({gcode:EASEL.externalGcodeSelectors.getGcode(e),isCarvey:EASEL.machineSettingsSelectors.isCarvey(e)}),component:createReactClass({render(){return null==this.props.gcode?null:React.createElement(EASEL.component.externalGcodeSender,{panelWidth:this.props.panelWidth,panelHeight:this.props.panelHeight,gcode:this.props.gcode,isCarvey:this.props.isCarvey})}})})},function(e,t){EASEL.gcode2dRenderer={renderGcodeToContext:function({gcode:e,ctx:t,workArea:n,unit:a,size:r,isCarvey:o,pixelRatio:s}){t.save(),t.fillStyle="#fff",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.scale(s,s);const i=Math.min(r.width/(n.x+3),r.height/(n.y+3));t.transform(...function(e,t,n){const a=e.width-t.x*n,r=e.height-t.y*n;return EASEL.matrix().translatedBy(a/2,r/2)}(r,n,i).toArray()),function(e,t,n,a,r){const o={drawingContext:e,pixelsPerInch:t,units:a,size:{width:n.x,height:n.y}};EASEL.gridRenderer.render(o),r&&EASEL.carveyClampRenderer.render(o)}(t,i,n,a,o);let{vertices:l,colors:c}=EASEL.toolpathVisualizer.gcodeToVerticesAndColors(e);c=c.map((e=>"#"+e.getHexString())),t.beginPath();for(let p=0;p<l.length;p++){const e=l[p];0===p&&t.moveTo(e.x,e.y);const a=c[p];t.strokeStyle!==a&&(t.stroke(),t.beginPath(),t.strokeStyle=a);const r=e.x*i,o=(n.y-e.y)*i;t.lineTo(r,o)}t.stroke(),t.restore()}}},function(e,t){EASEL.component.gcodeImportGuide=createReactClass({render:()=>React.createElement("div",null,React.createElement(ReactBootstrap.Alert,{bsStyle:"info"},"Toolpaths must be absolutely positioned inside the work area, away from the clamps. If you are using multiple bits, you also must export only one tool per file."),React.createElement(ReactBootstrap.Accordion,null,React.createElement(ReactBootstrap.Panel,{header:"Autodesk Fusion 360",eventKey:"1"},React.createElement("p",null,"Download the ",React.createElement("a",{href:EASEL.assets.postProcessors.fusion360,download:"Easel.cps"},"Easel post-processor for Fusion 360")),React.createElement("p",null,"For Windows"),React.createElement("ul",null,React.createElement("li",null,"In Fusion 360, open the Post Process dialog under CAM and set the configuration folder to a folder containing the downloaded Easel.cps"),React.createElement("li",null,"Select Easel.cps as the post configuration.")),React.createElement("p",null,"For Mac"),React.createElement("ul",null,React.createElement("li",null,"Follow ",React.createElement("a",{href:"https://inventables.zendesk.com/hc/en-us/articles/360012593133-Installing-Fusion-360-Post-Processor",target:"_blank",rel:"noreferrer"},"these directions")," to install the post processor."),React.createElement("li",null,"Select Easel.cps as the post configuration."))),React.createElement(ReactBootstrap.Panel,{header:"MeshCAM",eventKey:"3"},React.createElement("p",null,"You do not need to download a post-processor for MeshCAM, you can use the built-in post-processor ",React.createElement("code",null,"Basic_Gcode-Inch"),"."),React.createElement("p",null,"There are a few important things to keep in mind using MeshCAM with Easel. ",React.createElement("a",{href:"https://www.inventables.com/support/customer/portal/articles/2359549-using-meshcam-with-easel",target:"_blank",rel:"noreferrer"},"This guide has more details."))),React.createElement(ReactBootstrap.Panel,{header:"Vectric V-Carve, Aspire, Cut2D",eventKey:"2"},React.createElement("ul",null,React.createElement("li",null,"Download the ",React.createElement("a",{href:EASEL.assets.postProcessors.vectric,download:"Easel.pp"},"Easel post-processor for Vectric")),React.createElement("li",null,'Go to "File" -> "Open Application Data Folder..."'),React.createElement("li",null,"Copy the downloaded post-processor into the PostP folder."))),React.createElement(ReactBootstrap.Panel,{header:"Other",eventKey:"4"},"For creating post-processors for other programs, check our ",React.createElement("a",{href:"https://www.inventables.com/support/customer/en/portal/articles/2258567-easel-g-code-spec",target:"_blank",rel:"noreferrer"},"Official G-code Spec")," for information about how to format g-code so that it can be imported. If you make a post-processor, get in touch and we can post it here!")))})},function(e,t){EASEL.component.gcodeImportModal=EASEL.redux.connect({mapDispatchToProps:e=>({setFormattedGcode:t=>e(EASEL.externalGcodeActionCreators.formattedGcode(t))}),mapStateToProps:e=>({isCarvey:EASEL.machineSettingsSelectors.isCarvey(e),keepInRects:EASEL.machineSettingsSelectors.getKeepInRects(e),keepOutRects:EASEL.machineSettingsSelectors.getKeepOutRects(e)}),component:createReactClass({getInitialState:()=>({open:!1,contents:null,progress:0,error:null,filename:null}),resetAndOpen(){return this.setState({open:!0,contents:null,progress:0,error:null})},componentDidMount(){return EASEL.flux.events.addListener("import-gcode",(()=>this.resetAndOpen()))},close(){return this.setState({open:!1})},onGcodeValidated(e){"Untitled"===EASEL.projectMetadataStore.getName()&&1===EASEL.workpieceStore.getWorkpieces().length&&EASEL.projectMetadataActions.setName(this.state.filename);const t=EASEL.workpieceStore.getActiveID();if(0!==EASEL.volumeStore.getVolumesForWorkpiece(t).length){const e=EASEL.workpieceStore.getNewID();EASEL.workpieceActions.createWorkpiece({id:e,name:this.state.filename,thumbnailUrl:EASEL.assets.images.emptyThumbnail}),EASEL.workpieceActions.showWorkpiece(e)}else""===EASEL.workpieceStore.getWorkpiece(t).name&&EASEL.workpieceActions.updateWorkpiece(t,{name:this.state.filename});return setTimeout((()=>(this.props.setFormattedGcode(e),this.close())),100)},onValidationError(e){return this.setState({error:e})},onUpdate(e,t,n){return this.setState({progress:Math.floor(100*t/n)})},initialPosition(){return this.props.isCarvey?{x:20/25.4,y:20/25.4,z:20/25.4}:{x:0,y:0,z:EASEL.jobSettingsStore.settings().safetyHeight}},onFileReaderLoad(e){const t=e.target.result;return this.refs.fileForm.reset(),this.setState({contents:t}),EASEL.gcodeValidationLoader.validate({gcodeString:t,keepInRects:this.props.keepInRects,keepOutRects:this.props.keepOutRects,initialPosition:this.initialPosition(),update:this.onUpdate,done:this.onGcodeValidated}).catch((e=>null!=e.lineNumber&&null!=e.gcodeLine&&null!=e.message?this.onValidationError(e):Promise.reject(e)))},onFileChange(e){const t=e.target.files[0],n=new FileReader;this.setState({filename:t.name}),n.onload=this.onFileReaderLoad,n.readAsText(t)},errorComponent(){let e;if(null!=(e=this.state.error)){const t=`Line ${e.lineNumber}: ${e.gcodeLine}\n${e.message}`;return React.createElement("div",{className:"alert alert-danger"},React.createElement("h5",null,"Invalid G-code"),React.createElement("pre",null,t),React.createElement("p",null,"You must use one of our official post-processors in order to import external gcode."))}},loadingComponent(){return React.createElement("div",null,React.createElement("h4",null,"Validating..."),React.createElement(ReactBootstrap.ProgressBar,{now:this.state.progress}))},inputComponent(){return React.createElement("form",{ref:"fileForm",className:"well"},React.createElement("input",{type:"file",onChange:this.onFileChange,id:"gcode-file",accept:".nc,.gcode"}))},contents(){return this.state.contents&&!this.state.error?this.loadingComponent():React.createElement("div",null,this.errorComponent(),this.inputComponent(),React.createElement("hr",null),React.createElement("p",null,"Follow the instructions below for exporting from your CAM program."),React.createElement(EASEL.component.gcodeImportGuide,null))},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.open,onHide:this.close},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"G-code Import")),React.createElement(ReactBootstrap.Modal.Body,null,this.contents()))}})})},function(e,t,n){const a=n(82);EASEL.component.gcodePreview2d=EASEL.redux.connect({mapStateToProps:e=>({workArea:EASEL.machineSettingsSelectors.getWorkArea(e)}),component:createReactClass({canvasWidth(){return this.pixelRatio()*this.props.panelWidth},canvasHeight(){return this.pixelRatio()*this.props.panelHeight},pixelRatio:()=>Math.max(EASEL.PIXEL_RATIO,1),componentDidMount(){return this.visualizeGcode()},componentDidUpdate(e){if(e.gcode!==this.props.gcode||e.isCarvey!==this.props.isCarvey||e.panelHeight!==this.props.panelHeight||e.panelWidth!==this.props.panelWidth)return this.visualizeGcode()},visualizeGcode(){const e=a.withHeaderAndFooter(this.props.gcode),t=this.canvas.getContext("2d");return EASEL.gcode2dRenderer.renderGcodeToContext({pixelRatio:this.pixelRatio(),size:{width:this.props.panelWidth,height:this.props.panelHeight},isCarvey:this.props.isCarvey,gcode:e,ctx:t,workArea:{x:this.props.workArea.x,y:this.props.workArea.y},unit:EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState())})},render(){const e={width:this.props.panelWidth+"px",height:this.props.panelHeight+"px"};return React.createElement("canvas",{ref:e=>this.canvas=e,width:this.canvasWidth(),height:this.canvasHeight(),style:e})}})})},function(e,t,n){const a=n(82);EASEL.component.gcodePreview3d=createReactClass({props:{panelWidth:PropTypes.number.isRequired,panelHeight:PropTypes.number.isRequired,gcode:PropTypes.string.isRequired,currentFrame:PropTypes.number.isRequired,setFrameCount:PropTypes.func.isRequired,isCarvey:PropTypes.bool.isRequired},mesh:null,originalMeshVertices:null,material:null,smartClamp:null,visualizeGcode(e){const t=e.gcode;null!=this.mesh&&(this.previewPanel.removeMeshes([this.mesh]),this.mesh.geometry.dispose(),this.mesh.material.dispose()),null!=this.material&&(this.previewPanel.removeMeshes([this.material]),this.material.geometry.dispose(),this.material.material.dispose()),null!=this.smartClamp&&(this.previewPanel.removeMeshes([this.smartClamp]),this.smartClamp.geometry.dispose(),this.smartClamp.material.dispose());const n=a.withHeaderAndFooter(t);this.mesh=EASEL.toolpathVisualizer.createMesh(n),this.mesh.geometry.computeBoundingBox();const{boundingBox:r}=this.mesh.geometry;this.mesh.position.z=-r.min.z,this.originalMeshVertices=this.mesh.geometry.vertices.slice(0),this.previewPanel.addMeshes([this.mesh]);const o=this.mesh.geometry.vertices.length;this.props.setFrameCount(o);const s=new THREE.BoxGeometry(r.max.x,r.max.y,-r.min.z);this.material=new THREE.Mesh(s,new THREE.MeshNormalMaterial({transparent:!0,opacity:.1})),this.material.position.set(r.max.x/2,r.max.y/2,-r.min.z/2),this.previewPanel.add(this.material),e.isCarvey&&(this.smartClamp=EASEL.smartClampMesh(),this.smartClamp.position.set(0,0,-r.min.z),this.previewPanel.add(this.smartClamp)),this.previewPanel.render()},componentDidMount(){this.previewPanel=EASEL.threeDimensionalRenderer(),this.previewPanel.init(),this.previewPanel.add(EASEL.wasteboard().init(this.previewPanel.render).getMesh()),this.el.appendChild(this.previewPanel.getDOMElement()),this.previewPanel.setSize(this.props.panelWidth,this.props.panelHeight),this.visualizeGcode(this.props),this.props.startFrame&&(EASEL.toolpathVisualizer.animateToFrame([this.mesh],[],[this.originalMeshVertices],this.props.startFrame),this.previewPanel.render())},componentWillReceiveProps(e){e.panelHeight===this.props.panelHeight&&e.panelWidth===this.props.panelWidth||this.previewPanel.setSize(e.panelWidth,e.panelHeight),e.gcode===this.props.gcode&&e.isCarvey===this.props.isCarvey||this.visualizeGcode(e),e.currentFrame!==this.props.currentFrame&&(EASEL.toolpathVisualizer.animateToFrame([this.mesh],[],[this.originalMeshVertices],e.currentFrame),this.previewPanel.render())},render(){return React.createElement("div",{ref:e=>this.el=e})}})},function(e,t){EASEL.component.internalGcodeSender=EASEL.component.utils.withToolpathAnimationControls(createReactClass({getInitialState:()=>({frameCounts:{}}),props:{gcodePasses:PropTypes.array.isRequired,previewPanel:PropTypes.object.isRequired,setFrameCount:PropTypes.func.isRequired,onSetCurrentFrame:PropTypes.func,toolpathsVisible:PropTypes.bool},meshData:[],componentDidMount(){this.visualizeGcode(this.props.gcodePasses)},componentWillUnmount(){this.disposeMeshes()},componentWillReceiveProps(e){if(!e.toolpathsVisible)return this.disposeMeshes(),void this.props.previewPanel.render();if(this.visualizeGcode(e.gcodePasses),e.currentFrame!==this.props.currentFrame||!this.props.toolpathsVisible){const t=this.meshData.map((e=>e.mesh)),n=this.meshData.map((e=>e.toolMesh)),a=this.meshData.map((e=>e.originalMeshVertices));EASEL.toolpathVisualizer.animateToFrame(t,n,a,e.currentFrame),this.props.previewPanel.render(),this.props.onSetCurrentFrame&&this.props.onSetCurrentFrame(e.currentFrame)}},visualizeGcode(e){if(e.length==this.meshData.length&&this.meshData.every((({gcode:t},n)=>t===e[n].gcode)))return;this.disposeMeshes();let t=0;for(const n of e){const{gcode:e,jobSettings:{passType:a}}=n,r=EASEL.toolpathVisualizer.createMesh(n.gcode,a);r.geometry.translate(0,0,EASEL.materialStore.getCurrentDepth()+.003),t+=r.geometry.vertices.length;const o=EASEL.store.getState(),s="detail"===a?EASEL.bit(EASEL.bitSelectors.detailBit(o)):EASEL.bit(EASEL.bitSelectors.bit(o)),i=EASEL.toolpathVisualizer.createBitMesh(s);this.meshData.push({gcode:e,mesh:r,toolMesh:i,originalMeshVertices:r.geometry.vertices.slice(0)}),this.props.previewPanel.addMeshes([r,i])}this.props.setFrameCount(t),this.props.previewPanel.render()},disposeMeshes(){for(const e of this.meshData)this.disposeMesh(e.mesh),null!=e.toolMesh&&this.disposeMesh(e.toolMesh);this.meshData=[]},disposeMesh(e){e.geometry.dispose(),e.material.dispose(),this.props.previewPanel.removeMeshes([e])},render(){return React.createElement("div",null,this.props.toolpathAnimationControls)}}))},function(e,t){EASEL.component.singleColorMaterialThumbnail=createReactClass({propTypes:{colors:PropTypes.array.isRequired},color(){const e=this.props.colors[0];return`rgb(${e[0]},${e[1]},${e[2]})`},render(){return React.createElement("svg",{width:"80px",height:"40px",viewBox:"0 0 80 40",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},React.createElement("g",{stroke:"#bbb",strokeLinejoin:"round",strokeWidth:"0.5"},React.createElement("path",{fill:this.color(),d:"M 1,18 40,35 79,18 79,22 40,39 1,22 Z"}),React.createElement("path",{fill:this.color(),d:"M 1,18 40,1 79,18 40,35 Z"})))}})},function(e,t){EASEL.component.thumbnailRegistry=e=>({"2-Color Acrylic":EASEL.component.twoColorAcrylicThumbnail,"2-Color HDPE":EASEL.component.twoColorHdpeThumbnail,"2-Color HDPE White":EASEL.component.twoColorHdpeThumbnail,"Single Color":EASEL.component.singleColorMaterialThumbnail}[e])},function(e,t){EASEL.component.twoColorAcrylicThumbnail=createReactClass({propTypes:{colors:PropTypes.array.isRequired},topLayerColor(){const e=this.props.colors[0];return`rgb(${e[0]},${e[1]},${e[2]})`},bottomLayerColor(){const e=this.props.colors[1];return`rgb(${e[0]},${e[1]},${e[2]})`},render(){return React.createElement("svg",{width:"80px",height:"40px",viewBox:"0 0 80 40",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},React.createElement("g",{stroke:"#bbb",strokeLinejoin:"round",strokeWidth:"0.5"},React.createElement("path",{fill:this.bottomLayerColor(),d:"M 1,18 40,35 79,18 79,22 40,39 1,22 Z"}),React.createElement("path",{fill:this.topLayerColor(),d:"M 1,18 40,1 79,18 40,35 Z"})))}})},function(e,t){EASEL.component.twoColorHdpeThumbnail=createReactClass({propTypes:{colors:PropTypes.array.isRequired},outerLayerColor(){const e=this.props.colors[0];return`rgb(${e[0]},${e[1]},${e[2]})`},innerLayerColor(){const e=this.props.colors[1];return`rgb(${e[0]},${e[1]},${e[2]})`},render(){return React.createElement("svg",{width:"80px",height:"40px",viewBox:"0 0 80 40",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},React.createElement("g",{stroke:"#bbb",strokeLinejoin:"round",strokeWidth:"0.5"},React.createElement("path",{fill:this.outerLayerColor(),d:"M 1,16 40,1 79,16 79,24 40,39 1,24 Z"}),React.createElement("path",{fill:this.innerLayerColor(),d:"M 1,18 40,33 79,18 79,22 40,37 1,22 Z",stroke:"none"}),React.createElement("path",{fill:"none",d:"M 1,16 40,31 79,16 79,24 40,39 1,24 Z"})))}})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.advancedMachinePanelComponent=createReactClass({getInitialState:()=>({show:!1}),componentDidMount(){EASEL.flux.events.addListener("show-advanced-machine-panel",this.show),EASEL.flux.events.addListener("hide-advanced-machine-panel",this.hide)},openMachineSettings(){const e=this.props.profiles.find((e=>e.id===this.props.machineProfileId));null!=e&&(EASEL.events.trackEvent(EASEL.events.redirectedToMachineSettings),EASEL.flux.events.emit("open-machine-profile-modal",e),this.hide())},gcodeLocation:"General Settings",toggleRepeatCarving(e){const t=e.target.checked;EASEL.userAPI.updateRepeatCarvingEnabled(t),EASEL.store.dispatch(EASEL.userActionCreators.setRepeatCarvingEnabled(t))},downloadGcode(){EASEL.exportGCode(this.gcodeLocation)},useDetailBit:()=>EASEL.bitSelectors.useDetailBit(EASEL.store.getState()),downloadRoughingGcode(){EASEL.exportGCode(this.gcodeLocation,"roughing")},downloadDetailGcode(){EASEL.exportGCode(this.gcodeLocation,"detail")},show(){this.setState({show:!0})},hide(){this.setState({show:!1})},repeatCarve(){return{checked:this.props.repeatCarvingEnabled,onChange:this.toggleRepeatCarving,featureName:"Enable Repeat Carving",overlayComponent:React.createElement("p",null,"Allows repeating the prior carve with one click. Make sure to follow all safety procedures.")}},render(){const{isBetaTester:e}=this.props,t=React.createElement(ReactBootstrap.Popover,{id:"start-stop-saftey-height-info"},React.createElement("p",null,"Sets an alternative safety height for the first and last rapid movements without changing the normal safety height for the remainder of the carve."),React.createElement("p",null,"Note, if this value is smaller than the standard safety height this setting will be ignored in favor of the larger value.")),n=React.createElement(ReactBootstrap.Popover,{id:"accessory-commands"},React.createElement("p",null,"Add accessories like a vacuum or coolant blast can improve the quality of your carves. Enabling this will send a M7 and M8 at the start of a carve, and a M9 at the end."));return React.createElement(ReactBootstrap.Modal,{show:this.state.show,onHide:this.hide},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"General Settings")),React.createElement(ReactBootstrap.Modal.Body,{className:"advanced-machine-panel"},React.createElement(ReactBootstrap.Row,null,React.createElement(ReactBootstrap.Col,{sm:14},React.createElement("p",{className:"alert alert-danger"},React.createElement("strong",null,"Hold up! ")," Only modify these settings if you know what they mean. They apply to all machines used with Easel."))),React.createElement(ReactBootstrap.Row,null,React.createElement(ReactBootstrap.Col,{sm:5},React.createElement("div",{className:"settings-panel"},React.createElement("div",{className:"settings-panel__item"},React.createElement("label",{htmlFor:"safety-height"},"Safety Height"),React.createElement("div",null,React.createElement(EASEL.component.safetyHeightInput,{id:"safety-height"}))),React.createElement("div",{className:"settings-panel__item"},React.createElement("label",{htmlFor:"step-over"},"Step Over"),React.createElement("div",null,React.createElement(EASEL.component.stepOverInput,{id:"step-over"})))),EASEL.hasAccessGrant("profile_carving")&&React.createElement("div",{className:"settings-panel__item"},React.createElement("label",{htmlFor:"profile-step-over"},"Profile Step Over"),React.createElement("div",null,React.createElement(EASEL.component.profileStepOverInput,{id:"profile-step-over"})))),React.createElement(ReactBootstrap.Col,{sm:7},React.createElement("div",{className:"settings-panel__item"},React.createElement("label",{htmlFor:"origin-safety-height"},"Origin Safety Height",React.createElement(ReactBootstrap.OverlayTrigger,{rootClose:!0,trigger:["hover"],overlay:t,delayHide:1e3},React.createElement("i",{className:"fa fa-question-circle"}))),React.createElement("div",null,React.createElement(EASEL.component.startStopSafetyHeightInput,{id:"origin-safety-height"}))),React.createElement("div",{className:"settings-panel__item"},React.createElement("label",{htmlFor:"v-bit-detail-step-over"},"V-Bit Detail Step Over"),React.createElement("div",null,React.createElement(EASEL.component.vBitDetailStepOverInput,{id:"v-bit-detail-step-over"}))),React.createElement("div",{className:"settings-panel__item"},React.createElement("label",{htmlFor:"accessory-commands"},"Accessory Commands",React.createElement(ReactBootstrap.OverlayTrigger,{rootClose:!0,trigger:["hover"],overlay:n,delayHide:1e3},React.createElement("i",{className:"fa fa-question-circle"}))),React.createElement("div",null,React.createElement(EASEL.component.accessoryCommands,{id:"accessory-commands"}))))),React.createElement("hr",null),React.createElement("div",{className:"settings-panel__item"},React.createElement("label",null,"Spindle Control"),React.createElement("div",null,this.props.profiles&&this.props.profiles.length>0?React.createElement(EASEL.component.a,{onClick:this.openMachineSettings},"Go to Machine Settings"):React.createElement(EASEL.component.a,{href:"/setup/"},"Setup Machine"))),e&&React.createElement(EASEL.component.betaFeatureToggle,((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({},this.repeatCarve())),React.createElement("hr",null),React.createElement(ReactBootstrap.Row,null,React.createElement(ReactBootstrap.Col,{sm:7},"If you can\u2019t use the Easel Driver, you can download the g-code directly here. Also available under Project menu."),React.createElement(ReactBootstrap.Col,{sm:4},React.createElement(ReactBootstrap.Button,{bsStyle:"default",onClick:this.downloadGcode},this.useDetailBit()?"Download g-code (ZIP)":"Download g-code"),this.useDetailBit()&&React.createElement(ReactBootstrap.Button,{bsStyle:"default",onClick:this.downloadRoughingGcode},"Roughing pass g-code"),this.useDetailBit()&&React.createElement(ReactBootstrap.Button,{bsStyle:"default",onClick:this.downloadDetailGcode},"Detail pass g-code")))),React.createElement(ReactBootstrap.Modal.Footer,{className:"advanced-machine-footer"},React.createElement("div",null,React.createElement(EASEL.component.machineInspectorButton,null),EASEL.machineTypeHelper.currentIsInventablesMachine()&&React.createElement(EASEL.component.firmwareUploadButton,null)),EASEL.hasAccessGrant("xcp_testing")&&React.createElement(EASEL.component.xcpTestingButtons,null)))}}),EASEL.component.advancedMachinePanel=EASEL.redux.connect({component:EASEL.component.advancedMachinePanelComponent,mapStateToProps:e=>({automaticSpindleControl:EASEL.machineSettingsSelectors.getAutomaticSpindleControl(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e),spindleType:EASEL.machineSettingsSelectors.getSpindleType(e),spindleRPM:EASEL.machineSettingsSelectors.getSpindleRPM(e),repeatCarvingEnabled:EASEL.userSelectors.isRepeatCarvingEnabled(e),profiles:EASEL.userSelectors.getMachineProfiles(e),machineProfileId:EASEL.machineSettingsSelectors.getMachineProfileId(e),isBetaTester:EASEL.userSelectors.isBetaTester(e)}),mapDispatchToProps:e=>({setAutomaticSpindleControl(t){e(EASEL.machineSettingsActionCreators.setAutomaticSpindleControl(t))},setSpindleRPM(t){e(EASEL.machineSettingsActionCreators.setSpindleRPM(t))}})})},function(e,t){(()=>{const e="M 10 85 \n  v -42 \n  a 5 5 0 0 1 2 -5 \n  l 30 -30\n  a 5 5 0 0 1 6 0 \n  l 30 30 \n  a 5 5 0 0 1 2 5 \n  v 42 \n  a 5 5 0 0 1 -5 5 \n  h -60 \n  a 5 5 0 0 1 -5 -5",t=function(t,n,a){const{amount:r,transform:o,symbolPath:s,symbolText:i}={left:{amount:-1,transform:"translate(50 240) rotate(270)",symbolPath:"M 45 49 v 28"},right:{amount:1,transform:"translate(240 150) rotate(90)",symbolPath:"M 31 63 h 28 m -14 -14 v 28"},up:{amount:1,transform:"",symbolPath:"M 31 63 h 28 m -14 -14 v 28"},down:{amount:-1,transform:"translate(90 190) rotate(180)",symbolPath:"M 31 63 h 28"},zUp:{amount:1,transform:"",symbolText:{x:25,y:73,fontSize:32,transform:"",text:"UP"}},zDown:{amount:-1,transform:"translate(90 240) rotate(180)",symbolText:{x:105,y:430,fontSize:18,transform:"rotate(180) ",text:"DOWN"}}}[a];return React.createElement("g",{id:`${t}-${a}`,className:"jog-buttons__arrow",tabIndex:0,onClick:function(){return n(t,r)},onKeyPress:function(e){switch(e.key){case"Enter":case" ":return n(t,r)}}},React.createElement("path",{className:"jog-buttons__arrow__shadow",d:e,transform:"translate(5 5) "+o}),React.createElement("path",{className:"jog-buttons__arrow__button",d:e,transform:o}),s&&React.createElement("path",{className:"jog-buttons__arrow__symbol",d:s,transform:o}),i&&React.createElement("text",{className:"jog-buttons__arrow__text",x:i.x,y:i.y,fontSize:i.fontSize,transform:i.transform+o},i.text))};EASEL.component.jogXY=createReactClass({render(){return React.createElement("svg",{className:"jog-buttons jog-buttons__xy",viewBox:"-45 -30 305 330"},t("y",this.props.jog,"up"),t("y",this.props.jog,"down"),t("x",this.props.jog,"left"),t("x",this.props.jog,"right"),React.createElement("text",{x:"0",y:"15",className:"jog-buttons__labels"},"Y"),React.createElement("text",{x:"225",y:"260",className:"jog-buttons__labels"},"X"),this.props.homingEnabled&&(e=this.props.home,React.createElement("g",{id:"home-button",className:"jog-buttons__home",transform:"translate(17 168)",tabIndex:0,onClick:function(){return e()},onKeyPress:function(t){switch(t.key){case"Enter":case" ":return e()}}},React.createElement("rect",{className:"jog-buttons__home__frame",width:"90",height:"90",rx:"10",ry:"10",transform:"rotate(45)"}),React.createElement("path",{className:"jog-buttons__home__house",d:"M -20 78 v -17 l 20 -10 l 20 10 v 17 h -15 v -15 h -10 v 15 z"}),React.createElement("rect",{className:"jog-buttons__home__house",width:"5",height:"10",x:"10",y:"40"}),React.createElement("path",{className:"jog-buttons__home__roof",d:"M -25 57 l 25 -13 l 25 13"}))));var e}}),EASEL.component.jogZ=createReactClass({render(){return React.createElement("svg",{className:"jog-buttons jog-buttons__z",viewBox:"0 -20 90 330"},t("z",this.props.jog,"zUp"),React.createElement("text",{stroke:"none",textAnchor:"middle",y:"140",x:"45",className:"jog-buttons__labels"},"Z"),t("z",this.props.jog,"zDown"))}})})()},function(e,t){(()=>{const e=function(e,t,n){const{amount:a,transform:r}={left:{amount:-1,transform:"rotate(180)"},right:{amount:1,transform:""},up:{amount:1,transform:"rotate(270)"},down:{amount:-1,transform:"rotate(90)"}}[n];return React.createElement("g",{id:`${e}-${n}`,transform:r,className:"legacy-jog-buttons__arrow",tabIndex:0,onClick:function(){return t(e,a)},onKeyPress:function(n){switch(n.key){case"Enter":case" ":return t(e,a)}}},React.createElement("path",{d:"M 15.10674,13.10674 42.00000,40.00000     A 58,58 0 0 0 42.00000,-40.00000     L 15.10674,-13.10674     A 20,20 0 0 1 15.10674,13.10674     Z"}),React.createElement("polygon",{points:"47,0 37,12 37,-12",fill:"white",stroke:"none"}))};EASEL.component.legacyJogXY=createReactClass({render(){return React.createElement("svg",{className:"legacy-jog-buttons legacy-jog-buttons__xy",viewBox:"-60 -60 120 120"},React.createElement("text",{stroke:"none",textAnchor:"middle",dy:".4em"},"X/Y"),React.createElement("circle",{r:20,fill:"none",strokeWidth:2}),React.createElement("circle",{r:58,fill:"none",strokeWidth:2}),e("y",this.props.jog,"up"),e("x",this.props.jog,"left"),e("x",this.props.jog,"right"),e("y",this.props.jog,"down"))}}),EASEL.component.legacyJogZ=createReactClass({render(){return React.createElement("svg",{className:"legacy-jog-buttons legacy-jog-buttons__z",viewBox:"-60 -60 120 120"},React.createElement("text",{stroke:"none",textAnchor:"middle",dy:".4em"},"Z"),React.createElement("circle",{r:20,fill:"none",strokeWidth:2}),e("z",this.props.jog,"up"),e("z",this.props.jog,"down"))}})})()},function(e,t){EASEL.component.keyboardJogComponent=createReactClass({getInitialState:()=>({keyboardControlsVisible:!1}),componentWillMount(){null!=EASEL.flux&&EASEL.flux.events.addListener("jog-machine",this.maybeJog),null!=EASEL.keyboardController&&EASEL.keyboardController.use("walkthrough")},componentWillUnmount(){null!=EASEL.flux&&EASEL.flux.events.removeListener("jog-machine",this.maybeJog),null!=EASEL.keyboardController&&EASEL.keyboardController.use("default")},onToggle(e){EASEL.userAPI.updateKeyboardControlEnabled(e),EASEL.store.dispatch(EASEL.userActionCreators.setKeyboardControlEnabled(e))},maybeJog(e,t){this.props.enabled&&this.props.jog(e,t)},keyboardJogArrow:e=>React.createElement("div",{className:"keyboard-jog__arrow","data-dir":e},React.createElement("div",null)),keyboardJogXY(){return React.createElement("div",{className:"keyboard-jog__xy"},"X & Y Axis",this.keyboardJogArrow("up"),React.createElement("div",{style:{display:"flex"}},this.keyboardJogArrow("left"),this.keyboardJogArrow("down"),this.keyboardJogArrow("right")))},keyboardJogZ(){return React.createElement("div",{className:"keyboard-jog__z"},"Z Axis",React.createElement("div",{style:{display:"flex",alignItems:"center"}},React.createElement("div",{className:"keyboard-jog__shift"},"shift"),React.createElement("div",{style:{margin:"0 8px"}},"+"),React.createElement("div",null,this.keyboardJogArrow("up"),this.keyboardJogArrow("down"))))},visibilityIndicator(){return this.state.keyboardControlsVisible?React.createElement("i",{className:"fa fa-caret-down"}):React.createElement("i",{className:"fa fa-caret-up"})},toggleVisibility(){this.setState({keyboardControlsVisible:!this.state.keyboardControlsVisible})},keyboardJogControls(){const e=React.createElement("div",{className:"keyboard-jog__body"+(this.props.enabled?"":" keyboard-jog__body--off")},React.createElement("div",{className:"keyboard-jog__keys"},!this.props.hideXY&&this.keyboardJogXY(),this.keyboardJogZ()),React.createElement("label",{className:"keyboard-jog__toggle",onClick:function(e){if("INPUT"===(null!=e.target?e.target.tagName:void 0))return e.target.blur()}},"Off",React.createElement(EASEL.component.toggleSwitch,{enabled:this.props.enabled,onToggle:this.onToggle}),"On"));return React.createElement("div",{className:"keyboard-jog"},React.createElement("div",{className:"keyboard-jog__spacer"},React.createElement("div",{className:"keyboard-jog__container"+(this.state.keyboardControlsVisible?" keyboard-jog__container--expanded":"")},React.createElement("span",{onClick:this.toggleVisibility},React.createElement("span",{className:"keyboard-jog__header"},"Keyboard Controls"),this.visibilityIndicator()),this.state.keyboardControlsVisible&&e)))},legacyKeyboardJog(){return React.createElement("div",{className:"keyboard-jog"+(this.props.enabled?"":" keyboard-jog--off")},React.createElement("label",{className:"keyboard-jog__toggle",onClick:function(e){if("INPUT"===(null!=e.target?e.target.tagName:void 0))return e.target.blur()}},"Keyboard Controls",React.createElement(EASEL.component.toggleSwitch,{enabled:this.props.enabled,onToggle:this.onToggle})),React.createElement("div",{className:"keyboard-jog__keys"},!this.props.hideXY&&this.keyboardJogXY(),this.keyboardJogZ()))},render(){const{isBetaTester:e}=this.props;return e?this.keyboardJogControls():this.legacyKeyboardJog()}}),EASEL.component.keyboardJog=EASEL.redux.connect({mapStateToProps:e=>({enabled:EASEL.userSelectors.getKeyboardControlEnabled(e),isBetaTester:EASEL.userSelectors.isBetaTester(e)}),component:EASEL.component.keyboardJogComponent})},function(e,t){EASEL.component.lockMotors=createReactClass({render:()=>React.createElement("div",{className:"lock-motors"},React.createElement(EASEL.component.a,{className:"lock",onClick:EASEL.localSender.lockMotors},React.createElement("img",{src:EASEL.assets.images.lock})," Lock Motors"),React.createElement(EASEL.component.a,{className:"unlock",onClick:EASEL.localSender.unlockMotors},React.createElement("img",{src:EASEL.assets.images.unlock})," Unlock Motors"))})},function(e,t){EASEL.component.machineControlModalComponent=createReactClass({getState(){const e=EASEL.localSenderVersionStore.getRunningVersionNumber(),t=EASEL.localSenderVersionStore.getVersionInfo(e),n=EASEL.machineStateStore.isMachineReadyOrLocked();return{isDriverFirmwareMismatch:EASEL.localSenderVersionStore.isDriverFirmwareMismatch(),isSupportedDriverConnected:null!=e&&null!=t,isUnsupportedDriverConnected:null!=e&&null==t,isMachineConnected:n,isMachineLocked:EASEL.machineStateUtils.isLocked()}},getInitialState(){return EASEL.merge(this.getState(),{show:!1})},componentDidMount(){EASEL.flux.events.addListener("show-machine-controls",this.showModal),EASEL.machineStateStore.addChangeListener(this.updateMachineState),EASEL.localSenderVersionStore.addChangeListener(this.updateMachineState)},componentWillUnmount(){EASEL.flux.events.removeListener("show-machine-controls",this.showModal),EASEL.machineStateStore.removeChangeListener(this.updateMachineState),EASEL.localSenderVersionStore.removeChangeListener(this.updateMachineState)},showModal(){this.setState({show:!0}),EASEL.editorActions.deselect(),setTimeout((function(){const e=document.getElementsByClassName("modal-backdrop")[0],t=null!=e&&e.classList;t&&t.add("machine-control-backdrop")}),0)},hideModal(){const e=document.getElementsByClassName("modal-backdrop")[0],t=null!=e&&e.classList;t&&t.remove("machine-control-backdrop"),this.setState({show:!1})},troubleshoot(){this.hideModal();return this.state.isMachineConnected&&!this.props.isMachineSetupComplete?EASEL.connectionModalManager.showMachineSetupAlert():this.state.isDriverFirmwareMismatch?EASEL.connectionModalManager.showFirmwareMismatchModal():this.state.isUnsupportedDriverConnected?EASEL.connectionModalManager.showDriverUnsupportedModal():this.state.isSupportedDriverConnected?EASEL.connectionModalManager.showMachineNotFoundModal():EASEL.connectionModalManager.showDriverNotInstalledModal()},updateMachineState(){this.setState(this.getState())},render(){if(!this.state.show)return null;const{isMachineConnected:e,isMachineLocked:t}=this.state,n=!e||t?"machine-control-modal--disabled":"";return React.createElement(ReactBootstrap.Modal,{className:"machine-control-modal",show:!0,onHide:this.hideModal},!e&&React.createElement("div",{className:"machine-control-modal__overlay"},React.createElement("span",null,"Machine must be plugged in and turned on to jog"),React.createElement("div",null,React.createElement("button",{className:"btn btn-primary",onClick:this.troubleshoot},"Troubleshoot"))),t&&e&&React.createElement("div",{className:"machine-control-modal__overlay"},React.createElement("span",null,"Machine must be homed or unlocked to jog"),React.createElement("div",null,React.createElement("button",{className:"btn btn-primary",onClick:EASEL.localSender.unlock},"Unlock"))),React.createElement(ReactBootstrap.Modal.Header,{className:n},React.createElement(ReactBootstrap.Modal.Title,null,"Jog Machine")),React.createElement(ReactBootstrap.Modal.Body,{className:n},React.createElement(EASEL.component.machineControls,{context:"dropdown"})))}}),EASEL.component.machineControlModal=EASEL.redux.connect({mapStateToProps:e=>({isMachineSetupComplete:EASEL.machineSettingsSelectors.isMachineSetupComplete(e)}),component:EASEL.component.machineControlModalComponent})},function(e,t){EASEL.component.machineControlWidget=createReactClass({_onClick(){EASEL.stats.trackEventOnce("Opened Machine Controls"),EASEL.flux.events.emit("show-machine-controls")},render(){const{isMachineCarving:e,isMachineReadyOrLocked:t,disabled:n}=this.props,a=t?"machine-connected":"";return e?null:React.createElement("div",{className:"machine-control-widget dropdown"},React.createElement("button",{className:`machine-control-widget__button machine-status-indicator ${a}`,onClick:this._onClick,disabled:n},React.createElement("img",{src:EASEL.assets.images.machineControlsIcon})))}})},function(e,t){var n=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))i.call(t,n)&&l(e,n,t[n]);return e},p=(e,t)=>a(e,r(t));EASEL.component.machineControlsComponent=createReactClass({propTypes:{showLockButtons:PropTypes.bool,machineParking:PropTypes.element,hideXY:PropTypes.bool,intervalOptionsXY:PropTypes.object,intervalOptionsZ:PropTypes.object,context:PropTypes.oneOf(["walkthrough","dropdown","planing","job_status"])},componentDidMount(){EASEL.machineStateStore.addChangeListener(this.updateMachineState)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this.updateMachineState)},shouldComponentUpdate(e,t){return this.state.stepUnit!==t.stepUnit||this.state.stepIntervalXY!==t.stepIntervalXY||this.state.stepIntervalZ!==t.stepIntervalZ||this.state.machinePosition!==t.machinePosition||this.state.isMachineHomed!==t.isMachineHomed||this.state.isHomingEnabled!==t.isHomingEnabled},updateUnitState(e){this.setState({stepUnit:e,stepIntervalXY:"in"===e?.1:1,stepIntervalZ:"in"===e?.1:1})},updateMachineState(){const{machineType:e}=this.props,t=EASEL.machineStateStore.getHomingEnabledRegister(),n="1"===EASEL.machineRegisters.getValue(EASEL.machineStateStore.getSettings(),t)||e===EASEL.machineType.CARVEY,a=EASEL.machineStateStore.isMachineKnownToBeHomed(),r=EASEL.machineStateStore.getPosition().work;this.setState({isHomingEnabled:n,machinePosition:r,isMachineHomed:a})},getInitialState(){const{unit:e}=this.props;return{stepUnit:e,stepIntervalXY:"in"===e?.1:1,stepIntervalZ:"in"===e?.1:1,machinePosition:EASEL.machineStateStore.getPosition().machine,isMachineHomed:EASEL.machineStateStore.isMachineKnownToBeHomed()}},jog:function(){let e=Date.now();return function(t,n){if(EASEL.stats.trackEventOnce(`Jogged Machine - ${this.props.context}`),Date.now()-e>100){const a="z"===t?this.state.stepIntervalZ:this.state.stepIntervalXY,r=n*a*EASEL.units.inchesPerUnit(this.state.stepUnit);return"z"===t&&1===a&&"in"===this.state.stepUnit&&EASEL.stats.trackEventOnce('Jogged Machine - 1" Z-Interval Used'),EASEL.localSender.jog(t,r),e=Date.now()}}}(),setInterval(e,t,n){t=t?EASEL.units.normalizeUnitName(t):this.state.stepUnit,this.setState(p(c(c({},"xy"!==n&&{stepIntervalZ:parseFloat(e)}),"z"!==n&&{stepIntervalXY:parseFloat(e)}),{stepUnit:t}))},homeMachine(){EASEL.localSender.home()},workZero(){EASEL.localSender.home(),EASEL.localSender.moveToWorkZeroXY()},parkingHeader:()=>React.createElement("span",null,"Park Machine",React.createElement(EASEL.component.machineParkingProPopover,null)),showLockButtons(){const{useDetailBit:e,hasUsedDetailBit:t,context:n,machineType:a}=this.props;return!!EASEL.machineTypeHelper.supportsMotorLocking(a)&&("job_status"===n?t:e)},render(){const{isBetaTester:e,hideXY:t,intervalOptionsXY:n,intervalOptionsZ:a,hideKeyboard:r,context:o,machineParking:s}=this.props,{isMachineHomed:i,machinePosition:l,isHomingEnabled:u,stepUnit:d,stepIntervalXY:h,stepIntervalZ:E}=this.state;return React.createElement("div",{className:"jogging-controls "+(e?"new-machine-controls":"")},e&&React.createElement(EASEL.component.keyboardJog,{jog:this.jog,hideXY:t}),!t&&(e?React.createElement(EASEL.component.jogXY,{jog:this.jog,homingEnabled:u,home:this.homeMachine}):React.createElement(EASEL.component.legacyJogXY,{jog:this.jog})),i&&EASEL.hasAccessGrant("digital_readout")&&React.createElement(EASEL.component.position,c({},p(c({},l),{unit:d}))),e?React.createElement(EASEL.component.jogZ,{jog:this.jog}):React.createElement(EASEL.component.legacyJogZ,{jog:this.jog}),React.createElement(EASEL.component.stepInterval,{setInterval:this.setInterval,setUnit:this.updateUnitState,stepUnit:d,stepIntervalXY:h,stepIntervalZ:E,intervalOptionsXY:n,intervalOptionsZ:a}),!e&&!r&&React.createElement(EASEL.component.keyboardJog,{jog:this.jog,hideXY:t}),this.showLockButtons()&&React.createElement(EASEL.component.lockMotors,null),e&&["walkthrough","job_status"].includes(o)&&React.createElement(ReactBootstrap.Accordion,{className:"machine-panels",onSelect:this.panelSelect},React.createElement(ReactBootstrap.Panel,{header:"Preset Locations",eventKey:"presetLocations"},React.createElement(EASEL.component.presetLocations,{isHomingEnabled:u,homeMachine:this.homeMachine,workZero:this.workZero})),s&&React.createElement(ReactBootstrap.Panel,{header:this.parkingHeader(),eventKey:"parkMachine"},s)),e&&"dropdown"===o&&React.createElement("div",{className:"jogging-controls__presets"},React.createElement("label",null,"Preset Locations"),React.createElement(EASEL.component.presetLocations,{isHomingEnabled:u,homeMachine:this.homeMachine,workZero:this.workZero})))}}),EASEL.component.machineControls=EASEL.redux.connect({mapStateToProps:e=>({machineType:EASEL.machineSettingsSelectors.getMachineType(e),unit:EASEL.unitSelectors.getPreferredUnit(e),isBetaTester:EASEL.userSelectors.isBetaTester(e),useDetailBit:EASEL.bitSelectors.useDetailBit(e)}),component:EASEL.component.machineControlsComponent})},function(e,t){EASEL.component.machineParkingComponent=createReactClass({parkingDistance:e=>"behind"===e&&EASEL.carvingInfo.data().isUsingDustShoe?6:3,formattedParkingDistance(e){const t=this.parkingDistance(e);return`${EASEL.units.convertFromIn(t,this.props.unit).toFixed(0)} ${this.props.unit}`},invalidRoomForParking(e){if(null!=this.props.tile){return EASEL.tile(this.props.tile).getDimensions().y>this.props.workAreaY-this.parkingDistance(e)}return null==this.props.material||this.props.material.dimensions.y>this.props.workAreaY-this.parkingDistance(e)},parkBehind(){EASEL.stats.trackEvent("Park Machine",{direction:"behind"});const e=this.props.material.dimensions.y;EASEL.localSender.jog("Z",EASEL.constants.BIT_RAISE_HEIGHT),EASEL.localSender.jogTo("Y",e+this.parkingDistance("behind"))},parkInFront(){EASEL.stats.trackEvent("Park Machine",{direction:"in-front"});EASEL.localSender.jog("Z",EASEL.constants.BIT_RAISE_HEIGHT),EASEL.localSender.jogTo("Y",0-this.parkingDistance("in-front"))},getParkButton(e){const t="behind"===e?this.parkBehind:this.parkInFront;if(this.invalidRoomForParking(e)){const t=React.createElement(ReactBootstrap.Popover,{id:`disabled-parking-${e}-popover`,title:"Park Machine",className:"park-machine-tooltip"},React.createElement("span",null,"Easel needs ",React.createElement("strong",null,this.formattedParkingDistance(e))," between the material and the edge of the machine's work area to park."));return React.createElement(ReactBootstrap.OverlayTrigger,{trigger:["hover"],placement:"top",overlay:t},React.createElement("button",{className:"machine-parking__park-button machine-parking__park-button--invalid","data-id":`park-${e}`},"Park Here"))}return React.createElement("button",{className:"machine-parking__park-button machine-parking__park-button--valid","data-id":`park-${e}`,disabled:!this.props.isProUser,onClick:t},"Park Here")},render(){return React.createElement("div",{className:"machine-parking"},React.createElement("div",{className:"machine-parking__title"},React.createElement("span",null,"Park Machine"),React.createElement(EASEL.component.machineParkingProPopover,null)),React.createElement("div",{className:"machine-parking__subtitle"},"Your machine will move along the Y axis past the edge of your material."),React.createElement("div",{className:"machine-parking__buttons-container"},React.createElement("div",{className:"machine-parking__axis-container"},React.createElement("svg",{viewBox:"0 2 10 61",className:"machine-parking__y-axis"},React.createElement("text",{x:"-40",y:"6",fill:"black",fontSize:"5px",transform:"rotate(270)"},"Y Axis"),React.createElement("line",{x1:"8",y1:"5",x2:"8",y2:"60",strokeWidth:"0.5",stroke:"black"}),React.createElement("polygon",{points:"6,5 8,2 10,5",fill:"black"}),React.createElement("polygon",{points:"6,60 8,63 10,60",fill:"black"}))),React.createElement("div",null,this.getParkButton("behind"),React.createElement("div",{className:"machine-parking__image-container"},React.createElement("svg",{viewBox:"0 0 106 90",className:"machine-parking__material-image"},React.createElement("line",{x1:"40",y1:"2",x2:"60",y2:"2",stroke:"#eb6966"}),React.createElement("line",{x1:"50",y1:"2",x2:"50",y2:"88",stroke:"#eb6966"}),React.createElement("rect",{x:"3",y:"30",width:"98",height:"30",fill:"white"}),React.createElement("circle",{cx:"3",cy:"60",r:"3"}),React.createElement("line",{x1:"40",y1:"88",x2:"60",y2:"88",stroke:"#eb6966"})),React.createElement("span",{className:"machine-parking__distance-top"},this.formattedParkingDistance("behind")),React.createElement("div",{className:"machine-parking__image-text"},"Material"),React.createElement("span",{className:"machine-parking__distance-bottom"},this.formattedParkingDistance("in-front"))),this.getParkButton("in-front"))))}}),EASEL.component.machineParking=EASEL.redux.connect({mapStateToProps:e=>({isProUser:EASEL.userSelectors.isProEnabled(Date.now(),e),workAreaY:EASEL.machineSettingsSelectors.getWorkArea(e).y,unit:EASEL.unitSelectors.getPreferredUnit(e)}),component:EASEL.component.machineParkingComponent})},function(e,t){EASEL.component.machineParkingProPopover=function(){const e=React.createElement("span",null,"Parking your machine requires an Easel Pro subscription. ",React.createElement(EASEL.component.a,{href:"https://inventables.zendesk.com/hc/en-us/articles/360012849133-Easel-Pro-FAQ-and-Overview",target:"_blank"},"Learn more."));return React.createElement(EASEL.component.utils.hoverPopover,{id:"machine-parking-warning",className:"easel-pro-popover",placement:"bottom",popoverTitle:"Park Machine",popoverContent:e},React.createElement(EASEL.component.proLabel,null))}},function(e,t){EASEL.component.presetLocations=createReactClass({render(){const{isHomingEnabled:e,homeMachine:t,workZero:n}=this.props;return React.createElement(React.Fragment,null,e&&React.createElement(React.Fragment,null,React.createElement(ReactBootstrap.Button,{bsStyle:"default",onClick:t},"Home"),React.createElement(ReactBootstrap.Button,{bsStyle:"default",onClick:n},"Work Zero *"),React.createElement("em",null,"* Homes the machine first to ensure correct origin")),!e&&React.createElement("em",{className:"jogging-controls__presents--disabled"},"Machine homing must be enabled before preset locations can be safely used. (Send ",React.createElement("code",null,"$22=1")," from the Machine Inspector.)"))}})},function(e,t){EASEL.component.stepInterval=createReactClass({propTypes:{selectedTile:PropTypes.object,material:PropTypes.object,intervalOptionsXY:PropTypes.object,intervalOptionsZ:PropTypes.object},componentWillMount(){this.idStepInput="step-interval-"+Math.random().toString(36).substr(2)},updateUnit(e){this.props.setUnit(e?"mm":"in")},render(){const{stepIntervalXY:e,stepIntervalZ:t,stepUnit:n}=this.props,a=this.props.intervalOptionsXY||{mm:[.01,.1,1,10],in:[.001,.01,.1,1]},r=this.props.intervalOptionsZ||{mm:[.01,.1,1,10],in:[.001,.01,.1,1]};return React.createElement("div",{className:"step-interval"},React.createElement("div",{className:"step-interval__units"},React.createElement("label",null,"Interval"),React.createElement(EASEL.component.toggleSwitch,{offLabel:"in ",onLabel:" mm",enabled:"mm"===n,onToggle:this.updateUnit})),React.createElement("div",{className:"step-interval__presets xy_presets"},React.createElement("label",null,"X Y"),a[n].map((t=>React.createElement("button",{key:t,className:t===e?"btn-primary":"btn-default",onClick:()=>this.props.setInterval(t,n,"xy")},t)))),React.createElement("div",{className:"step-interval__presets z_presets"},React.createElement("label",null,"Z"),r[n].map((e=>React.createElement("button",{key:e,className:e===t?"btn-primary":"btn-default",onClick:()=>this.props.setInterval(e,n,"z")},e)))),React.createElement("div",{className:"step-interval__custom"},React.createElement("label",{htmlFor:this.idStepInput},"Custom XY"),React.createElement(EASEL.component.utils.dimensionalInput,{id:this.idStepInput,value:e,unit:n,showUnit:!0,onChange:(e,t)=>this.props.setInterval(e,t,"xy"),precision:4,increment:"mm"===n?1:.1})))}})},function(e,t){EASEL.component.disconnectedMachine=createReactClass({render:()=>React.createElement("div",null,React.createElement("ul",null,React.createElement("li",{className:"alert alert-info"},"Did you select the right machine profile?",React.createElement(EASEL.component.machineProfileSelector,null)),React.createElement("li",null,"Make sure your machine is connected to your USB port"),React.createElement("li",null,"Stop any programs that also are automatically using serial ports, like MakerWare"),React.createElement("li",null,"If you have Easel open in any other browser tabs or windows, try closing them"),React.createElement("li",null,"Try plugging the machine into a different USB port on your computer")))})},function(e,t){EASEL.component.driverDeprecatedModal=createReactClass({getInitialState:()=>({show:!1}),componentWillMount(){EASEL.flux.events.addListener("show-driver-deprecated-modal",this.show),EASEL.flux.events.addListener("hide-driver-deprecated-modal",this.hide)},componentWillUnmount(){EASEL.flux.events.removeListener("show-driver-deprecated-modal",this.show),EASEL.flux.events.removeListener("hide-driver-deprecated-modal",this.hide)},show(){this.setState({show:!0})},hide(){this.setState({show:!1})},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,onHide:this.hide},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,{className:"text-center"},"The Easel Driver is out of date")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("p",null,"An updated version of the Easel Driver is available."),React.createElement("p",null,"The version you have now will still work, but may be deactivated in the near future."),React.createElement("p",null,"Would you like to update to the most recent version?")),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement(EASEL.component.localSenderDownloadButton,null),React.createElement(ReactBootstrap.Button,{bsStyle:"default",style:{width:250},onClick:this.hide},"Not now")))}})},function(e,t){EASEL.component.driverNotInstalledModal=EASEL.redux.connect({mapStateToProps:e=>({machineType:EASEL.machineTypeHelper.description(EASEL.machineSettingsSelectors.getMachineType(e))}),component:createReactClass({getInitialState:()=>({show:!1}),componentWillMount(){EASEL.flux.events.addListener("show-driver-not-installed-modal",this.show),EASEL.flux.events.addListener("hide-driver-not-installed-modal",this.hide)},componentWillUnmount(){EASEL.flux.events.removeListener("show-driver-not-installed-modal",this.show),EASEL.flux.events.removeListener("hide-driver-not-installed-modal",this.hide)},show(){this.setState({show:!0})},hide(){this.setState({show:!1})},troubleshootDriver(){this.hide(),EASEL.troubleshooting.showProblemSymptom("driver_not_installed")},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,onHide:this.hide},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,{className:"text-center"},"Install the Easel Driver")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("p",null,"Before you carve, you\u2019ll need to install the Easel Driver, a small program that allows the browser to communicate with your ",this.props.machineType,"."),React.createElement("p",null,"No need to worry about configuration\u2014just run the installer and you\u2019ll be ready to carve."),React.createElement("p",null,React.createElement("small",null,React.createElement("i",null,"Technical note: The Easel Driver will connect with Carvey, and Grbl versions 0.8c or newer."))),React.createElement("p",null,React.createElement("small",null,"Already installed the Easel Driver? ",React.createElement(EASEL.component.a,{onClick:this.troubleshootDriver},"View troubleshooting info")))),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement(EASEL.component.localSenderDownloadButton,null)))}})})},function(e,t){EASEL.component.driverUnsupportedModal=createReactClass({getInitialState:()=>({show:!1}),componentWillMount(){EASEL.flux.events.addListener("show-driver-unsupported-modal",this.show),EASEL.flux.events.addListener("hide-driver-unsupported-modal",this.hide)},componentWillUnmount(){EASEL.flux.events.removeListener("show-driver-unsupported-modal",this.show),EASEL.flux.events.removeListener("hide-driver-unsupported-modal",this.hide)},show(){this.setState({show:!0})},hide(){this.setState({show:!1})},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,onHide:this.hide},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,{className:"text-center"},"The Easel Driver is out of date")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("p",null,"The version of the Easel Driver that\u2019s installed is no longer supported."),React.createElement("p",null,"Please update to the most recent version.")),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement(EASEL.component.localSenderDownloadButton,null)))}})},function(e,t){EASEL.component.feedRateOverrideComponent=createReactClass({getState:()=>({isMachineProbing:EASEL.machineStateStore.isProbing(),isMachineCarving:EASEL.machineStateStore.isMachineCarving()}),getInitialState(){return this.getState()},_onChange(){this.setState(this.getState())},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange),EASEL.projectMetadataStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange),EASEL.projectMetadataStore.removeChangeListener(this._onChange)},increaseFeedRate(e){e.preventDefault(),EASEL.localSender.increaseFeedRate()},decreaseFeedRate(e){e.preventDefault(),EASEL.localSender.decreaseFeedRate()},_openModal(){EASEL.flux.events.emit("show-feedrate-override-demo")},render(){return this.state.isMachineProbing?null:this.state.isMachineCarving&&EASEL.machineStateStore.getFeatures()&&EASEL.machineStateStore.getFeatures().feedRateOverrideEnabled?React.createElement("div",{className:"feed-rate-override"},React.createElement("div",{className:"feed-rate-override__button-container"},React.createElement(EASEL.component.a,{className:"feed-rate-override__decrease btn btn-default",onClick:this.decreaseFeedRate},"\u2212"),null!=this.props.currentFeedRatePercentage&&React.createElement("div",{className:"feed-rate-override__text-container"},React.createElement("p",{className:"feed-rate-override__text"},"Feed rate",React.createElement(EASEL.component.utils.hoverPopover,{id:"feed-rate-override-help",placement:"bottom",popoverContent:React.createElement("span",null,"Speeds up or slows down your CNC machine\u2019s movement while carving. Use with caution!"," ",React.createElement("a",{href:"https://inventables.zendesk.com/hc/en-us/articles/360012593473-Walkthrough-Tutorial-Feed-Rate-Override",target:"_blank",rel:"noreferrer"},"Learn More"))},React.createElement("i",{className:"fa fa-question-circle feed-rate-override__icon"}))),React.createElement("p",{className:"feed-rate-override__text--med"},null!=this.props.currentFeedRate?`${this.props.currentFeedRate} (${this.props.currentFeedRatePercentage}%)`:`${this.props.currentFeedRatePercentage}%`)),React.createElement(EASEL.component.a,{className:"feed-rate-override__increase btn btn-default",onClick:this.increaseFeedRate},"+"))):null}}),EASEL.component.feedRateOverride=EASEL.redux.connect({mapStateToProps:e=>({currentFeedRatePercentage:EASEL.jobStatusSelectors.getCurrentFeedRatePercentage(e),currentFeedRate:EASEL.jobStatusSelectors.getCurrentFeedRate(e)}),component:EASEL.component.feedRateOverrideComponent})},function(e,t){EASEL.component.firmwareUploadButton=createReactClass({getState:()=>({connectionState:EASEL.machineStateStore.getConnectionState()}),getInitialState(){return this.getState()},updateState(){return this.setState(this.getState())},componentDidMount(){EASEL.machineStateStore.addChangeListener(this.updateState)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this.updateState)},onClick(){EASEL.flux.events.emit("hide-advanced-machine-panel"),EASEL.flux.events.emit("show-firmware-upload-walkthrough")},render(){const e=null=={ready_idle:"ready_idle",alarm_lock:"alarm_lock"}[this.state.connectionState];return React.createElement(ReactBootstrap.Button,{bsStyle:"default",onClick:this.onClick,disabled:e},"Upload Firmware")}})},function(e,t){EASEL.component.homeButton=createReactClass({propTypes:{connectionState:PropTypes.string.isRequired,className:PropTypes.string},render(){const e=["ready_idle","alarm_lock"].includes(this.props.connectionState)?`btn btn-primary ${this.props.className}`:`btn btn-default disabled ${this.props.className}`;return React.createElement(EASEL.component.a,{onClick:()=>EASEL.localSender.home(),className:e},React.createElement("i",{className:"fa fa-home"})," Home Machine")}})},function(e,t){EASEL.component.legacyHomeButton=createReactClass({propTypes:{connectionState:PropTypes.string.isRequired},render(){return React.createElement(EASEL.component.a,{onClick:()=>EASEL.localSender.home(),className:null!={ready_idle:"ready_idle",alarm_lock:"alarm_lock"}[this.props.connectionState]?"btn btn-primary":"btn btn-default disabled"},"Home")}})},function(e,t){EASEL.component.jobStatusControlsComponent=createReactClass({propTypes:{isPaused:PropTypes.bool.isRequired},pauseCarving(){EASEL.stats.trackEvent("Job Paused"),EASEL.localSender.pause()},resumeCarving(){EASEL.stats.trackEvent("Job Resumed"),EASEL.localSender.resume()},stopCarving(){EASEL.stats.trackEvent("Job Stopped"),EASEL.localSender.stop()},render(){let e;const{isPaused:t,percentComplete:n,projectName:a,timeEstimate:r,currentFeedRatePercentage:o}=this.props;if(null==a||null==n)return null;e=r?`, (${EASEL.utility.timeFormatter.durationFromMinutes((1-n/100)*r/(o/100))} left)`:"";const s=`${n.toFixed(0)}%`,i=EASEL.string.truncate(this.props.projectName,25),l=this.props.isPaused?"Paused":"Carving";return React.createElement("div",{className:"job-status-controls"},React.createElement("div",{id:"machine-running"},React.createElement("div",{className:"machine-progress"},React.createElement("div",{className:"progress-container"},React.createElement("div",{className:"progress-label"},l," \u201c",i,"\u201d"),React.createElement("div",{className:"progress"},React.createElement("div",{className:"bar bar-info",style:{width:s}}),React.createElement("div",{className:"progress-text"},`${s}${e}`))))),React.createElement("div",{id:"control-buttons"},t?React.createElement("a",{id:"pause",className:"job-btn resume","data-action":"Resume",onClick:this.resumeCarving}):React.createElement("a",{id:"pause",className:"job-btn pause","data-action":"Pause",onClick:this.pauseCarving}),React.createElement("a",{id:"cancel",className:"job-btn","data-action":"Stop",onClick:this.stopCarving})))}}),EASEL.component.jobStatusControls=EASEL.redux.connect({mapStateToProps:e=>({percentComplete:EASEL.jobStatusSelectors.getPercentComplete(e),timeEstimate:EASEL.jobStatusSelectors.getTimeEstimate(e),projectName:EASEL.jobStatusSelectors.getProjectName(e),currentFeedRatePercentage:EASEL.jobStatusSelectors.getCurrentFeedRatePercentage(e)}),component:EASEL.component.jobStatusControlsComponent})},function(e,t){EASEL.component.machineConsole=createReactClass({propTypes:{messages:PropTypes.arrayOf(PropTypes.shape({action:PropTypes.string.isRequired,data:PropTypes.string})),showCommunicationWarning:PropTypes.bool.isRequired,showStatusMessages:PropTypes.bool.isRequired,onCheck:PropTypes.func.isRequired,onKeyDown:PropTypes.func.isRequired},logMessages(){const e=[];for(let t=0;t<this.props.messages.length;t++){const n=this.props.messages[t];let a="logger-entry";"read"!==n.action&&(a+=" logger-entry--alt"),e.push(React.createElement("li",{className:a,key:t},n.data||n.action))}return e},render(){return React.createElement("div",null,this.props.showCommunicationWarning&&React.createElement("div",{className:"alert alert-danger",role:"alert"},React.createElement("span",{className:"fa fa-exclamation-circle","aria-hidden":!0}),React.createElement("b",null," Detected errors communicating with the machine.")),React.createElement("div",{className:"logger-header"},React.createElement("div",{className:"logger-console"},React.createElement("input",{id:"console",name:"Console",className:"logger-console-input",type:"text",onKeyDown:this.props.onKeyDown,placeholder:"Press enter to send line"})),React.createElement("label",{className:"logger-filter"},React.createElement("input",{className:"logger-filter-input",type:"checkbox",value:this.props.showStatusMessages,onChange:this.props.onCheck}),React.createElement("span",{className:"logger-filter-name"},"Show status"))),React.createElement("div",{className:"logger-body"},React.createElement("ul",{className:"logger-list"},this.logMessages())))}})},function(e,t){EASEL.component.machineConsoleController=createReactClass({propTypes:{websocketMessages:PropTypes.array.isRequired,detectedGarbledMessage:PropTypes.bool.isRequired},getInitialState:()=>({showStatusMessages:!1}),onCheck(e){return this.setState({showStatusMessages:e.target.checked})},onKeyDown(e){if(13===e.keyCode)return EASEL.localSender.sendLine(e.target.value),e.target.value=""},render(){const e=this.props.websocketMessages.filter((e=>"echo"===e.event&&"receive"===e.direction)).map((e=>e.data[0])),t=this.state.showStatusMessages?e:e.filter((e=>!(null!=e.data&&e.data.match(/^\?$/)||null!=e.data&&e.data.match(/^<.*>$/))));return React.createElement(EASEL.component.machineConsole,{messages:t.slice(-100).reverse(),showCommunicationWarning:this.props.detectedGarbledMessage,showStatusMessages:this.state.showStatusMessages,onCheck:this.onCheck,onKeyDown:this.onKeyDown})}})},function(e,t){EASEL.component.machineEvents=createReactClass({getState:()=>({machineEvents:EASEL.machineStateStore.getEvents()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},events(){return this.state.machineEvents.map(((e,t)=>React.createElement("span",{key:t},e.type," - ",e.message,React.createElement("br",null))))},clear(){EASEL.machineStateActions.clearEvents()},render(){return React.createElement("div",null,React.createElement("h4",null,"Events",React.createElement("a",{href:"#",onClick:this.clear},React.createElement("i",{className:"fa fa-trash"}))),React.createElement("div",null,React.createElement("pre",null,this.events())))}})},function(e,t){EASEL.component.machineInspector=createReactClass({getState:()=>({isOpen:EASEL.machineStateStore.getInspectorOpen(),serialNumber:EASEL.machineStateStore.getSerialNumber(),firmwareVersion:EASEL.machineStateStore.getFirmwareVersion(),localSenderVersion:EASEL.localSenderVersionStore.getRunningVersionNumber()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange),EASEL.localSenderVersionStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange),EASEL.localSenderVersionStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},render(){return React.createElement(ReactBootstrap.Modal,{id:"machine-inspector",show:this.state.isOpen,onHide:EASEL.machineStateActions.closeInspector,bsSize:"large"},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"Machine Inspector")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("div",{id:"firmware-data"},null!=this.state.serialNumber&&React.createElement("span",null,`Serial Number: ${this.state.serialNumber}`),null!=this.state.firmwareVersion&&React.createElement("span",null,`Firmware Version: ${this.state.firmwareVersion}`),null!=this.state.localSenderVersion&&React.createElement("span",null,`Easel Driver Version: ${this.state.localSenderVersion}`)),React.createElement(EASEL.component.machineState,null),React.createElement("hr",null),React.createElement(EASEL.component.machineEvents,null),React.createElement("hr",null),React.createElement(EASEL.component.machineSettings,null)))}})},function(e,t){EASEL.component.machineInspectorButton=createReactClass({onClick(){EASEL.flux.events.emit("hide-advanced-machine-panel"),EASEL.machineStateActions.openInspector()},render(){return React.createElement(ReactBootstrap.Button,{onClick:this.onClick,"data-dismiss":"modal",bsStyle:"primary"},"Machine Inspector")}})},function(e,t){EASEL.component.machineNotFoundModalComponent=createReactClass({getInitialState:()=>({show:!1}),componentWillMount(){EASEL.flux.events.addListener("show-machine-not-found-modal",this.show),EASEL.flux.events.addListener("hide-machine-not-found-modal",this.hide)},show(){this.setState({show:!0})},hide(){this.setState({show:!1})},setPortNumber(e){EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setComPort(`COM${e}`))},submitDiagnosticInfo(e){e.preventDefault();const t=EASEL.websocketMessageStore.getWebsocketMessages().filter((({event:e,direction:t})=>"echo"===e&&"receive"===t)).map((({data:e})=>e[0]));return $.ajax({url:"/connection_diagnostics",type:"POST",dataType:"json",data:{easel_version:EASEL.VERSION,sender_version:EASEL.localSenderVersionStore.getRunningVersionNumber(),machine_type:this.props.machineType,devices:JSON.stringify(EASEL.machineStateStore.getAvailablePorts()),connection_log:JSON.stringify(t.slice(-100)),user_agent:navigator.userAgent}}).done((()=>{const e=[{text:"OK"},{action:()=>EASEL.troubleshooting.showModal(),text:"Open troubleshooter"}];EASEL.alert("Submitted diagnostic info","While we're reviewing your info you can try to fix the issue yourself with our troubleshooter.",e),this.hide()})).fail((()=>{EASEL.alert("Could not submit diagnostic info","Your internet connection may be offline.")}))},setManualConnectionPreference:e=>EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setManualConnectionPreference(e.target.checked)),manualConnectionInfo(){const e=React.createElement("label",null,React.createElement("input",{type:"checkbox",checked:this.props.manualConnectionPreference,onClick:this.setManualConnectionPreference},null)," Enter COM port manually"),t=this.props.manualConnectionPreference&&React.createElement(EASEL.component.manualConnectionPrompt,{portNumber:this.props.comPort,onSetPortNumber:this.setPortNumber});if(EASEL.info.isWindows())return React.createElement("div",null,e,t)},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,backdrop:!0,onHide:this.hide,id:"modal_machine-not-found"},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"We can\u2019t find your machine automatically")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("img",{src:EASEL.assets.images.sadEasel,className:"easel-face-icon"}),React.createElement("p",null,"Try the following steps to help us out:"),React.createElement(EASEL.component.disconnectedMachine,null),this.manualConnectionInfo(),React.createElement("p",null,"If we still aren\u2019t detecting your machine, submit diagnostic info with the button below, and then report a problem using the \u2018Help\u2019 menu. Please tell us your operating system, browser, and version of your machine control software.")),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement(ReactBootstrap.Button,{onClick:this.submitDiagnosticInfo,bsStyle:"default"},"Submit diagnostic info"),React.createElement(ReactBootstrap.Button,{onClick:this.hide,bsStyle:"primary"},"Ok")))}}),EASEL.component.machineNotFoundModal=EASEL.redux.connect({mapStateToProps:function(e){const t=EASEL.machineSettingsSelectors.getComPort(e);return{comPort:t?parseInt(t.replace("COM",""),10):"",manualConnectionPreference:EASEL.machineSettingsSelectors.getManualConnectionPreference(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e)}},component:EASEL.component.machineNotFoundModalComponent})},function(e,t){EASEL.component.machineProfileModalComponent=createReactClass({getInitialState:()=>({error:null,isOpen:!1,existingSettings:null,editedSettings:null,unit:"in",profileName:"",editingAccessories:!1}),componentDidMount(){EASEL.flux.events.addListener("open-machine-profile-modal",this._open),EASEL.flux.events.addListener("close-machine-profile-modal",this._close)},componentWillUnmount(){EASEL.flux.events.removeListener("open-machine-profile-modal",this._open),EASEL.flux.events.removeListener("close-machine-profile-modal",this._close)},onModalOpen(){this.nameInput.focus(),this.nameInput.select()},_setNameInputRef(e){return this.nameInput=e},_open(e){const t=EASEL.machineProfilesAPI.toSettings(e);this.setState({isOpen:!0,unit:this.props.unit,existingSettings:t,editedSettings:EASEL.merge(t),profileName:e.name,editingAccessories:!1})},_close(){return this.setState(this.getInitialState())},_submit(){const{editedSettings:e,profileName:t}=this.state,n=EASEL.machineProfilesAPI.fromSettings(e);let a;return EASEL.stats.trackEvent(EASEL.events.machineProfileEdited),a=EASEL.machineProfilesAPI.update(e.profileId,{name:t,settings:n}).then((e=>(this.props.updateMachineProfile(e),e))),a.then((e=>{const t=EASEL.machineProfilesAPI.toSettings(e);return this.props.updateCurrentSettings(t),this.props.setProfileId(e.id),this._close(),e})).catch((e=>{let t=`Error saving machine profile: ${EASEL.apiHelper.getErrorMessage(e)}.`;return 0===e.readyState&&(t="Error establishing a network connection. Your changes will be applied temporarily but not saved.",this.props.updateCurrentSettings(this.state.editedSettings)),this.setState({error:t})}))},_onKeyPress(e){"Enter"===e.key&&(e.preventDefault(),this._submit())},_nameChange(e){this.setState({profileName:e.target.value})},_setAutomaticSpindleControl(e){const t="true"===e.target.value;this.setState(EASEL.setIn(this.state,["editedSettings","automaticSpindleControl"],t))},_setSpindleType(e){this.setState(EASEL.setIn(this.state,["editedSettings","spindleType"],e.target.value))},_setWorkAreaX(e){const t=EASEL.units.convertToUnit(e,this.state.unit,"in");this.setState(EASEL.setIn(this.state,["editedSettings","workArea","x"],t))},_setWorkAreaY(e){const t=EASEL.units.convertToUnit(e,this.state.unit,"in");this.setState(EASEL.setIn(this.state,["editedSettings","workArea","y"],t))},_setAccessory(e){this.setState(EASEL.setIn(this.state,["editedSettings",e.currentTarget.value],e.currentTarget.checked))},_setSpindleRPM(e){this.setState(EASEL.setIn(this.state,["editedSettings","spindleRPM"],parseFloat(e)))},_formatDim:(e,t)=>(e=EASEL.units.convertToUnit(e,"in",t).toFixed(EASEL.units.defaultPrecision[t]),`${parseFloat(e)} ${t}`),_formatAccessories(e){const t={hasDustShoe:"Dust Shoe",accessoriesEnabled:"Coolant",probeEnabled:"Z Probe"},n=[];for(const a of Object.keys(t))!0===e[a]&&n.push(t[a]);return 0===n.length?"None":n.join(", ")},_machineDescription:e=>null==e?null:EASEL.machineTypeHelper.defaultName(e),_toggleEditingAccessories(){this.setState({editingAccessories:!this.state.editingAccessories})},render(){const{error:e,isOpen:t,editedSettings:n,editingAccessories:a,existingSettings:r,profileName:o,unit:s}=this.state;return t?React.createElement(ReactBootstrap.Modal,{show:t,onHide:this._close,onEnter:this.onModalOpen},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"Machine Settings")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("div",{className:"machine-profile-modal__attribute"},React.createElement("label",{htmlFor:"machine-profile-name"},"Name"),React.createElement("input",{ref:this._setNameInputRef,id:"machine-profile-name",className:"form-control",defaultValue:o,onChange:this._nameChange,onKeyPress:this._onKeyPress})),React.createElement("div",{className:"machine-profile-modal__attribute"},React.createElement("label",null," Machine "),React.createElement("div",null,React.createElement("span",{"data-machine-attr":"machine"},this._machineDescription(n)))),React.createElement("div",{className:"machine-profile-modal__attribute"},React.createElement("label",{htmlFor:"work-area"},"Work Area"),React.createElement("div",{className:"machine-profile-modal__work-area-container"},React.createElement("img",{src:EASEL.assets.images.workArea,className:"machine-profile-modal__img"}),React.createElement("div",{className:"machine-profile-modal__work-area-input-container"},React.createElement("div",null,React.createElement("label",{htmlFor:"work-area-x",className:"machine-profile-modal__work-area-label"},"X"),React.createElement(EASEL.component.utils.dimensionalInput,{id:"work-area-x",className:"machine-profile-modal__work-area-input form-control",value:n.workArea.x,unit:"in",displayUnit:s,showUnit:!0,onChange:this._setWorkAreaX,precision:EASEL.units.defaultPrecision[s]})),React.createElement("div",null,React.createElement("label",{htmlFor:"work-area-y",className:"machine-profile-modal__work-area-label"},"Y"),React.createElement(EASEL.component.utils.dimensionalInput,{id:"work-area-y",className:"machine-profile-modal__work-area-input form-control",value:n.workArea.y,unit:"in",displayUnit:s,showUnit:!0,onChange:this._setWorkAreaY,precision:EASEL.units.defaultPrecision[s]}))))),r.machineType!==EASEL.machineType.CARVEY&&React.createElement(React.Fragment,null,React.createElement("div",{key:"spindle-control",className:"machine-profile-modal__attribute"},React.createElement("label",{htmlFor:"spindle-control"},"Spindle Controlled by"),React.createElement("div",{"data-machine-attr":"spindle-control"},React.createElement("select",{id:"spindle-control",className:"form-control",value:n.automaticSpindleControl,onChange:this._setAutomaticSpindleControl},React.createElement("option",{value:"true"},"Hardware"),React.createElement("option",{value:"false"},"Manual")))),React.createElement("div",{key:"spindle",className:"machine-profile-modal__attribute"},React.createElement("label",{htmlFor:"spindle"},"Spindle"),r.machineType!==EASEL.machineType.XCARVE_PRO?React.createElement("select",{id:"router-selector",className:"form-control",value:n.spindleType,onChange:this._setSpindleType},React.createElement("option",{value:"makita"},"Makita"),React.createElement("option",{value:"dewalt-611"},"DeWalt 611"),React.createElement("option",{value:"dewalt-660"},"DeWalt 660"),React.createElement("option",{value:"bosch-colt"},"Bosch Colt"),React.createElement("option",{value:"24v"},"24V DC Spindle"),React.createElement("option",{value:"other"},"Other")):React.createElement("div",null,React.createElement("span",{"data-machine-attr":"spindle"},"2hp with pre-programmed VFD"))),React.createElement("div",{key:"spindle-rpm"},EASEL.machineTypeHelper.supportsSpindleSpeed(n.machineType,n.spindleType,n.automaticSpindleControl)&&React.createElement("div",{className:"machine-profile-modal__attribute"},React.createElement("label",{htmlFor:"default-spindle-rpm"},"Default Spindle RPM"),React.createElement("div",null,React.createElement(EASEL.component.textInput,{id:"default-spindle-rpm",initialValue:null!=n.spindleRPM?n.spindleRPM.toFixed():this.props.defaultSpindleRPM.toFixed(),submit:this._setSpindleRPM})))),React.createElement("div",{key:"belts"},n.belts&&React.createElement("div",{className:"machine-profile-modal__attribute"},React.createElement("label",null," Belts "),React.createElement("div",null,React.createElement("span",{"data-machine-attr":"belts"},n.belts)))),React.createElement("div",{key:"accessories",className:"machine-profile-modal__attribute"},React.createElement("label",{htmlFor:"accessories"},"Accessories"),React.createElement("span",null," (",React.createElement(EASEL.component.a,{onClick:this._toggleEditingAccessories},a?"Close Accessories":"Edit"),")"),a?React.createElement("div",null,React.createElement("div",null,React.createElement("input",{type:"checkbox",defaultChecked:n.hasDustShoe,onClick:this._setAccessory,value:"hasDustShoe",key:"hasDustShoe"}),React.createElement("span",null," Dust Shoe")),React.createElement("div",null,React.createElement("input",{type:"checkbox",defaultChecked:n.probeEnabled,onClick:this._setAccessory,value:"probeEnabled",key:"probeEnabled"}),React.createElement("span",null," Z Probe")),React.createElement("div",null,React.createElement("input",{type:"checkbox",defaultChecked:n.accessoriesEnabled,onClick:this._setAccessory,value:"accessoriesEnabled",key:"accessoriesEnabled"}),React.createElement("span",null," Coolant"))):React.createElement("div",{className:"machine-profile-modal__accessories-container"},React.createElement("span",{"data-machine-attr":"accessories"},this._formatAccessories(n))))),React.createElement("hr",null),React.createElement("div",{className:"text-center"},React.createElement(EASEL.component.uninstallMachineProfile,{profileId:r.profileId,profileName:o,setProfileId:this.props.setProfileId,deleteMachineProfile:this.props.deleteMachineProfile}))),React.createElement(ReactBootstrap.Modal.Footer,null,null!=e&&React.createElement("div",{className:"machine-profile-modal__error"},React.createElement("i",{className:"fa fa-warning"}),React.createElement("div",null,e),React.createElement("hr",null)),React.createElement("button",{className:"btn btn-default",onClick:this._close},"Cancel"),React.createElement("button",{className:"btn btn-primary",onClick:this._submit,disabled:0===o.length},"Save"))):null}}),EASEL.component.machineProfileModal=EASEL.redux.connect({mapDispatchToProps:e=>({updateMachineProfile(t){e(EASEL.userActionCreators.updateMachineProfile(t))},deleteMachineProfile(t){e(EASEL.userActionCreators.deleteMachineProfile(t))},setProfileId(t){e(EASEL.machineSettingsActionCreators.setProfileId(t))},updateCurrentSettings(t){e(EASEL.machineSettingsActionCreators.setLoadedMachineConfiguration(t)),e(EASEL.machineSettingsActionCreators.updateWorkArea(t.workArea))}}),mapStateToProps:e=>({unit:EASEL.unitSelectors.getPreferredUnit(e),defaultSpindleRPM:EASEL.machineSettingsSelectors.getSpindleRPM(e)}),component:EASEL.component.machineProfileModalComponent})},function(e,t){EASEL.component.machineProfileSelectorComponent=createReactClass({selectMachineProfile(e){const t=parseFloat(e.currentTarget.value),n=this.props.profiles.find((e=>e.id===t));if(EASEL.stats.trackEvent(EASEL.events.machineProfileSelected),this.requireNonProMachineProfileSelection()&&EASEL.machineProfilesAPI.update(t,{name:n.name,proRequired:!1}).then((e=>{this.props.updateMachineProfile(e)}),(e=>console.error(e.responseText))),t!==this.props.machineProfileId){const e=EASEL.machineProfilesAPI.toSettings(n);this.props.updateCurrentSettings(e)}},requireNonProMachineProfileSelection(){return!this.props.isProUser&&!this.props.profiles.some((e=>!e.proRequired))},requireUnpluggingMachine(){return null!=this.props.machineProfileId&&(this.props.isMachineReadyOrLocked||EASEL.machineStateStore.isMachineCarving())},isDisabled(e){return!this.props.isProUser&&e.proRequired&&!this.requireNonProMachineProfileSelection()||this.requireUnpluggingMachine()&&e.id!==this.props.machineProfileId},render(){const{machineProfileId:e,profiles:t}=this.props;return 0===t.length?null:React.createElement("div",null,React.createElement("label",{htmlFor:"machine-profile-selector"},"Machine",React.createElement(EASEL.component.utils.hoverPopover,{id:"machine-profile-pro-description",className:"machine-profile-selector__pro-machine-popover",placement:"right",popoverContent:React.createElement("span",null,"An Easel Pro subscription is required to install and use more than one machine profile.")},React.createElement(EASEL.component.proLabel,null))),this.requireNonProMachineProfileSelection()&&React.createElement("p",null,"Your Easel Pro subscription has expired. Please select one machine profile to use with your account."),this.requireUnpluggingMachine()&&(this.props.isProUser||this.requireNonProMachineProfileSelection())&&React.createElement("p",null,"Please unplug your machine to select a different profile."),React.createElement("select",{id:"machine-profile-selector",className:"form-control",value:e||"blank",onChange:this.selectMachineProfile,disabled:this.requireUnpluggingMachine()},React.createElement("option",{disabled:!0,value:"blank"},"- Select a machine profile -"),t.map((e=>React.createElement("option",{key:e.id,value:e.id,disabled:this.isDisabled(e)},e.name)))))}}),EASEL.component.machineProfileSelector=EASEL.redux.connect({mapStateToProps:e=>({profiles:EASEL.userSelectors.getMachineProfiles(e),machineProfileId:EASEL.machineSettingsSelectors.getMachineProfileId(e),isProUser:EASEL.userSelectors.isProEnabled(Date.now(),e)}),mapDispatchToProps:e=>({updateCurrentSettings:t=>{e(EASEL.machineSettingsActionCreators.setLoadedMachineConfiguration(t)),e(EASEL.machineSettingsActionCreators.updateWorkArea(t.workArea))},updateMachineProfile:t=>{e(EASEL.userActionCreators.updateMachineProfile(t))}}),component:EASEL.component.machineProfileSelectorComponent})},function(e,t){EASEL.component.machineSettings=createReactClass({getState:()=>({machineSettings:EASEL.machineStateStore.getSettings()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange)},refresh(){EASEL.machineStateActions.refreshSettings(),EASEL.localSender.getMachineSettings()},settings(){return this.state.machineSettings.map(((e,t)=>React.createElement("span",{key:t,className:"machine-setting"},e,React.createElement("br",null))))},_onChange(){this.setState(this.getState())},render(){return React.createElement("div",null,React.createElement("h4",null,"Settings",React.createElement("a",{href:"#",onClick:this.refresh},React.createElement("i",{className:"fa fa-refresh"}))),React.createElement("div",null,React.createElement("pre",null,this.settings())))}})},function(e,t){var n=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))i.call(t,n)&&l(e,n,t[n]);return e},p=(e,t)=>a(e,r(t));const u=createReactClass({getState:()=>({machineState:EASEL.machineStateStore.getState(),machinePosition:EASEL.machineStateStore.getPosition(),websocketMessages:EASEL.websocketMessageStore.getWebsocketMessages(),lastStatusMessage:EASEL.websocketMessageStore.getLastStatusMessage(),detectedGarbledMessage:EASEL.websocketMessageStore.hasDetectedGarbledMessage(),probeStatus:EASEL.machineStateStore.getProbeConnectionStatus()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange),EASEL.websocketMessageStore.addChangeListener(this._onChange),this.props.machineType===EASEL.machineType.CARVEY&&setTimeout((()=>EASEL.localSender.sendLine("$10=115")))},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange),EASEL.websocketMessageStore.removeChangeListener(this._onChange),this.props.machineType===EASEL.machineType.CARVEY&&setTimeout((()=>EASEL.localSender.sendLine("$10=3")))},_onChange(){this.setState(this.getState())},render(){const{machinePosition:{machine:e,work:t},lastStatusMessage:n,probeStatus:a}=this.state,{machineType:r,unit:o}=this.props;return React.createElement("div",null,React.createElement(ReactBootstrap.Row,null,React.createElement(ReactBootstrap.Col,{md:4},React.createElement("h4",null,"State"),React.createElement("pre",null,this.state.machineState)),React.createElement(ReactBootstrap.Col,{md:4},React.createElement("h4",null,`Machine position (${o})`),React.createElement(EASEL.component.position,c({},p(c({},e),{unit:o})))),React.createElement(ReactBootstrap.Col,{md:4},React.createElement("h4",null,`Work position (${o})`),React.createElement(EASEL.component.position,c({},p(c({},t),{unit:o}))))),React.createElement(EASEL.component.switchState,{statusMessage:n,machineType:r,probeStatus:a}),React.createElement(ReactBootstrap.Row,null,React.createElement(ReactBootstrap.Col,{md:12},React.createElement("hr",null),React.createElement("h4",null,"Console"),React.createElement(EASEL.component.machineConsoleController,{websocketMessages:this.state.websocketMessages,detectedGarbledMessage:this.state.detectedGarbledMessage}))))}});EASEL.component.machineState=EASEL.redux.connect({mapStateToProps:e=>({machineType:EASEL.machineSettingsSelectors.getMachineType(e),unit:EASEL.unitSelectors.getPreferredUnit(e)}),component:u})},function(e,t){EASEL.component.machineTabComponent=createReactClass({getInitialState:()=>({isMachineReadyOrLocked:EASEL.machineStateStore.isMachineReadyOrLocked(),connectionState:EASEL.machineStateStore.getConnectionState()}),componentDidMount(){EASEL.machineStateStore.addChangeListener(this.updateMachineConnectionState)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this.updateMachineConnectionState)},updateMachineConnectionState(){this.setState({isMachineReadyOrLocked:EASEL.machineStateStore.isMachineReadyOrLocked(),connectionState:EASEL.machineStateStore.getConnectionState()})},showMultipleProfileAlert(){EASEL.alert("New Machine","",[{text:"Upgrade",action:this.props.openAccountModal},{text:"Cancel"}],"<div>\n        <p>\n         Upgrade to Easel Pro to install as many machines as you need.\n        </p>\n        <p>\n         Not ready yet? Uninstall your current machine to set up another.\n        </p>\n      </div>")},getSetupButton(){return!this.props.isProUser&&this.props.profiles.length>=1?React.createElement(EASEL.component.a,{className:"btn btn-primary setup-link",onClick:this.showMultipleProfileAlert,"data-action":"setup"},"Set up new machine",React.createElement(EASEL.component.proLabel,null)):React.createElement("a",{href:"/setup/",className:"btn btn-primary setup-link","data-action":"setup"},React.createElement("i",{className:"fa fa-edit"})," Set up new machine")},getEditMachineButton(){const e=this.props.profiles.find((e=>e.id===this.props.machineProfileId));if(null!=e)return React.createElement("button",{className:"btn btn-primary setup-link",onClick:()=>EASEL.flux.events.emit("open-machine-profile-modal",e)},React.createElement("i",{className:"fa fa-edit"})," Edit your machine")},getHomingButton(){const e=EASEL.machineStateStore.getHomingEnabledRegister(),t="1"===EASEL.machineRegisters.getValue(EASEL.machineStateStore.getSettings(),e)||this.props.machineType===EASEL.machineType.CARVEY;return this.state.connectionState&&t?React.createElement(EASEL.component.homeButton,{connectionState:this.state.connectionState,className:"machine-tab__control-button"}):null},getParkingButton(){const e=this.props.machineType===EASEL.machineType.CARVEY&&null!=this.state.connectionState;return this.state.connectionState&&e?React.createElement(EASEL.component.parkButton,{machineType:this.props.machineType,connectionState:this.state.connectionState,className:"machine-tab__control-button"}):null},render(){const{isMachineReadyOrLocked:e}=this.state;return React.createElement("div",null,React.createElement(EASEL.component.machineProfileSelector,{isMachineReadyOrLocked:e}),React.createElement("div",{className:"machine-tab__controls-container"},this.getHomingButton(),this.getParkingButton()),this.getEditMachineButton(),React.createElement("button",{className:"btn btn-primary setup-link",onClick:()=>EASEL.flux.events.emit("show-advanced-machine-panel")},React.createElement("i",{className:"fa fa-gear"})," General Settings"),React.createElement("hr",null),this.getSetupButton(),React.createElement(EASEL.component.a,{href:"/downloads",target:"_blank",rel:"noreferrer",className:"btn btn-primary setup-link"},React.createElement("i",{className:"fa fa-cloud-download"})," Drivers and Post Processors"))}}),EASEL.component.machineTab=EASEL.redux.connect({mapStateToProps:e=>({machineType:EASEL.machineSettingsSelectors.getMachineType(e),profiles:EASEL.userSelectors.getMachineProfiles(e),machineProfileId:EASEL.machineSettingsSelectors.getMachineProfileId(e),isProUser:EASEL.userSelectors.isProEnabled(Date.now(),e)}),mapDispatchToProps:e=>({openAccountModal:()=>{e(EASEL.userModalActionCreators.showUserModalAccountTab())}}),component:EASEL.component.machineTabComponent})},function(e,t){EASEL.component.machineWidget=EASEL.redux.connect({mapStateToProps:function(e){const t=Date.now();return{proFeatureInUse:EASEL.proSelectors.getInUseCarvingProFeatures(e).length>0,easelProDayTimeLeft:EASEL.userSelectors.getEaselProDayTimeLeftDisplay(t,e),isMachineSetupComplete:EASEL.machineSettingsSelectors.isMachineSetupComplete(e),isCarvey:EASEL.machineSettingsSelectors.isCarvey(e),toolboxVisible:EASEL.toolboxSelectors.getVisible(e),machineProfileId:EASEL.machineSettingsSelectors.getMachineProfileId(e),authorizedToCarve:EASEL.userSelectors.authorizedToCarve(t,e)}},mapDispatchToProps:e=>({showProFeatureModal:()=>(e(EASEL.easelProActionCreators.setCarveOnModalExit()),EASEL.stats.trackEvent(EASEL.events.showedAccountModal,{proRequired:!0,source:"Machine Widget"}),EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalAccountTab()))}),component:createReactClass({getState(){const e=EASEL.localSenderVersionStore.getRunningVersionNumber(),t=EASEL.localSenderVersionStore.getVersionInfo(e),n=EASEL.machineStateStore.getConnectionState(),a=EASEL.machineStateStore.isMachineReadyOrLocked();return{isDriverFirmwareMismatch:EASEL.localSenderVersionStore.isDriverFirmwareMismatch(),isSupportedDriverConnected:null!=e&&null!=t,isUnsupportedDriverConnected:null!=e&&null==t,isMachineCarving:EASEL.machineStateStore.isMachineCarving(),isMachinePaused:"paused"===n,isMachineStopping:["stopping"].includes(n),isMachineReadyOrLocked:a}},getInitialState(){return this.getState()},componentDidMount(){EASEL.localSenderVersionStore.addChangeListener(this._onChange),EASEL.machineStateStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.localSenderVersionStore.removeChangeListener(this._onChange),EASEL.machineStateStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},openWalkthrough(e){e.preventDefault(),EASEL.walkthroughManager.openWalkthrough()},showProFeatureModal(e){e.preventDefault(),this.props.showProFeatureModal()},showMachineNotFoundModal(e){e.preventDefault(),EASEL.connectionModalManager.showMachineNotFoundModal()},showDriverUnsupportedModal(e){e.preventDefault(),EASEL.connectionModalManager.showDriverUnsupportedModal()},showFirmwareMismatchModal(e){e.preventDefault(),EASEL.connectionModalManager.showFirmwareMismatchModal()},showDriverNotInstalledModal(e){e.preventDefault(),EASEL.connectionModalManager.showDriverNotInstalledModal()},showMachineSettingsAlert(e){e.preventDefault(),EASEL.connectionModalManager.showMachineSetupAlert()},carveButton(e,t){null==t&&(t="");const n=this.props.proFeatureInUse?React.createElement(EASEL.component.proLabel,{showWarning:!this.props.authorizedToCarve,type:"carve"}):null,a=React.createElement("button",{className:`machine-status-indicator ${t}`,onClick:e,disabled:this.props.toolboxVisible},n,React.createElement("span",{className:"carve-button-label"},"Carve\u2026"));if(this.props.easelProDayTimeLeft){const e=React.createElement(ReactBootstrap.Tooltip,{id:"easel-pro-time-remaining-tooltip"},`You have ${this.props.easelProDayTimeLeft} left in your Easel Pro carve day. `);return React.createElement(ReactBootstrap.OverlayTrigger,{trigger:["hover","focus"],placement:"bottom",overlay:e},a)}return a},render(){let e;const{isDriverFirmwareMismatch:t,isMachineCarving:n,isMachinePaused:a,isMachineStopping:r,isMachineReadyOrLocked:o,isSupportedDriverConnected:s,isUnsupportedDriverConnected:i}=this.state,l=o&&!this.props.isMachineSetupComplete&&null==this.props.machineProfileId;return o&&(e="machine-connected"),n?React.createElement("div",{className:"machine-status-indicator machine-running-console"},React.createElement(EASEL.component.jobStatusControls,{isPaused:a})):r?React.createElement("div",{className:"machine-status-indicator"},"Machine stopping"):React.createElement("div",{className:"machine-widgets-container"},this.props.authorizedToCarve?t?this.carveButton(this.showFirmwareMismatchModal):l?this.carveButton(this.showMachineSettingsAlert,e):o?this.carveButton(this.openWalkthrough,e):i?this.carveButton(this.showDriverUnsupportedModal):s?this.carveButton(this.showMachineNotFoundModal):this.carveButton(this.showDriverNotInstalledModal):this.carveButton(this.showProFeatureModal,e),!this.props.isCarvey&&React.createElement(EASEL.component.machineControlWidget,{isMachineCarving:n,isMachineReadyOrLocked:o,disabled:this.props.toolboxVisible}))}})})},function(e,t){EASEL.component.manualConnectionPrompt=createReactClass({propTypes:{portNumber:PropTypes.number,onSetPortNumber:PropTypes.func},setPortNumber(e){const t=e.target.value.replace(/\D/,"")||"";null!=t&&this.props.onSetPortNumber(t)},render(){return React.createElement("div",null,React.createElement("div",{className:"input-group"},React.createElement("label",{htmlFor:"com-port",className:"input-group-addon"},"COM"),React.createElement("input",{id:"com-port",type:"number",size:"3",className:"form-control",onChange:this.setPortNumber,value:this.props.portNumber})),React.createElement("p",{className:"help-block"},"To find the port, open the Device Manager. Under Ports look for your machine (Arduino Uno, X-Controller, or Carvey) and the port like \u201cCOM<number>\u201d"))}})},function(e,t){EASEL.component.parkButton=createReactClass({propTypes:{connectionState:PropTypes.string.isRequired,className:PropTypes.string},onClick(){EASEL.localSender.presentMaterial()},render(){const e="ready_idle"===this.props.connectionState?`btn btn-primary ${this.props.className}`:`btn btn-default disabled ${this.props.className}`;return React.createElement(EASEL.component.a,{onClick:this.onClick,className:e},"Park")}})},function(e,t){EASEL.component.position=createReactClass({propTypes:{x:PropTypes.number.isRequired,y:PropTypes.number.isRequired,z:PropTypes.number.isRequired,unit:PropTypes.string.isRequired,precision:PropTypes.number},getDefaultProps:()=>({precision:3}),format(e){return EASEL.units.convertToUnit(e,"mm",this.props.unit).toFixed(this.props.precision)},render(){return React.createElement("div",{className:"position-reporter"},React.createElement("pre",{className:"react-pre"},React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",{className:"position-reporter__x-axis"},React.createElement("td",{className:"axis-label"},"X"),React.createElement("td",null,this.format(this.props.x))),React.createElement("tr",{className:"position-reporter__y-axis"},React.createElement("td",{className:"axis-label"},"Y"),React.createElement("td",null,this.format(this.props.y))),React.createElement("tr",{className:"position-reporter__z-axis"},React.createElement("td",{className:"axis-label"},"Z"),React.createElement("td",null,this.format(this.props.z)))))))}})},function(e,t){EASEL.component.spindleSpeedOverrideComponent=createReactClass({getState:()=>({isMachineProbing:EASEL.machineStateStore.isProbing(),isMachineCarving:EASEL.machineStateStore.isMachineCarving()}),getInitialState(){return this.getState()},_onChange(){this.setState(this.getState())},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange)},increaseSpindleSpeed(e){e.preventDefault(),EASEL.localSender.increaseSpindleSpeed()},decreaseSpindleSpeed(e){e.preventDefault(),EASEL.localSender.decreaseSpindleSpeed()},_formatSpindleSpeedValue:e=>`${parseFloat((e.value/1e3).toFixed(2)).toString()}k ${e.unit}`,render(){return EASEL.machineTypeHelper.supportsSpindleSpeed(this.props.machineType,this.props.spindleType,this.props.automaticSpindleControl)&&EASEL.localSenderVersionStore.getRunningVersionAbilities().spindleSpeedOverride?(null!=this.props.currentSpindleSpeed?this.props.currentSpindleSpeed.value:void 0)<=1||this.state.isMachineProbing?null:this.state.isMachineCarving?React.createElement("div",{className:"spindle-speed-override"},React.createElement("div",{className:"spindle-speed-override__button-container"},React.createElement("a",{href:"#",className:"spindle-speed-override__decrease btn btn-default",onClick:this.decreaseSpindleSpeed},"\u2212"),null!=this.props.currentSpindleSpeedPercentage&&React.createElement("div",{className:"spindle-speed-override__text-container"},React.createElement("p",{className:"spindle-speed-override__text"},"Spindle speed:"),React.createElement("p",{className:"spindle-speed-override__text--med"},null!=this.props.currentSpindleSpeed.value&&null!=this.props.currentSpindleSpeed.unit?`${this._formatSpindleSpeedValue(this.props.currentSpindleSpeed)} (${this.props.currentSpindleSpeedPercentage}%)`:`${this.props.currentSpindleSpeedPercentage}%`)),React.createElement("a",{href:"#",className:"spindle-speed-override__increase btn btn-default",onClick:this.increaseSpindleSpeed},"+"))):null:null}}),EASEL.component.spindleSpeedOverride=EASEL.redux.connect({mapStateToProps:e=>({currentSpindleSpeedPercentage:EASEL.jobStatusSelectors.getCurrentSpindleSpeedPercentage(e),currentSpindleSpeed:EASEL.jobStatusSelectors.getCurrentSpindleSpeed(e),automaticSpindleControl:EASEL.machineSettingsSelectors.getAutomaticSpindleControl(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e),spindleType:EASEL.machineSettingsSelectors.getSpindleType(e)}),component:EASEL.component.spindleSpeedOverrideComponent})},function(e,t){EASEL.component.startStopSafetyHeightInput=EASEL.redux.connect({mapStateToProps:e=>({unit:EASEL.unitSelectors.getPreferredUnit(e),safetyHeight:EASEL.userSelectors.getStartStopSafetyHeight(e)}),component:createReactClass({propTypes:{id:PropTypes.string},setSafetyHeight(e,t,n){EASEL.store.dispatch(EASEL.userActionCreators.setStartStopSafetyHeight(n)),EASEL.stats.trackEvent("Set Origin Safety Height",{"Height (in)":n}),EASEL.userAPI.updateStartStopSafetyHeight(n)},render(){return React.createElement(EASEL.component.utils.dimensionalInput,{id:this.props.id,value:this.props.safetyHeight,unit:"in",displayUnit:this.props.unit,showUnit:!0,onChange:this.setSafetyHeight})}})})},function(e,t){EASEL.component.switchState=createReactClass({propsTypes:{statusMessage:PropTypes.string,machineType:PropTypes.string,probeStatus:PropTypes.number},switchState(e,t,n){const a="fa fa-2x "+(t?"fa-circle fa-green":"fa-circle-thin fa-grey");return React.createElement(ReactBootstrap.OverlayTrigger,{placement:"top",overlay:React.createElement(ReactBootstrap.Tooltip,{id:`pin-state-tooltip-${e}`},n),key:e},React.createElement("div",{className:"pin-state","data-active":t,"data-label":e},React.createElement("i",{className:a}),React.createElement("p",null,e)))},getSwitchStateReportingElement(){let e;if(null!=this.props.statusMessage&&(e=EASEL.grblStatusParser.machineSwitchStates(this.props.statusMessage,this.props.machineType)),null!=e){const t=[this.switchState("X",e.x,"X Axis Homing Switch"),this.switchState("Y",e.y,"Y Axis Homing Switch"),this.switchState("Z",e.z,"Z Axis Homing Switch")];return this.props.machineType===EASEL.machineType.CARVEY?t.push([this.switchState("Button",e.button,"Front Panel Button State"),this.switchState("Door",e.door,"Door Closed"),this.switchState("Clamp",e.clamp,"Clamp Status")]):this.props.machineType===EASEL.machineType.XCARVE&&t.push([this.switchState("Pause",e.hold,"X Controller Pause Button"),this.switchState("Run",e.button,"X Controller Run (Play) Button"),this.switchState("Soft Reset",e.soft_reset,"X Controller Soft Reset (Soft Stop) Button")]),React.createElement("div",{className:"pin-state-container"},t)}return React.createElement("span",null,"No Switches Reporting")},render(){const e=EASEL.machineStateStore.getFeatures(),t=e&&e.zProbeEnabled;return React.createElement("div",null,React.createElement("h4",null,"Homing Switches"),React.createElement("p",null,React.createElement("small",null,"Check the switches & buttons status below. ",React.createElement("i",{className:"fa fa-circle fa-green"})," means switch or button is pressed, ",React.createElement("i",{className:"fa fa-circle-thin fa-grey"})," means switch or button is not pressed.")),this.getSwitchStateReportingElement(),null!=t&&React.createElement("div",null,React.createElement("h4",null,"Z-Probe Status"),React.createElement("div",{className:"col-md-3"},React.createElement(EASEL.component.probeStatus,{probeStatus:this.props.probeStatus})),React.createElement("div",{className:"col-md-9"},React.createElement("p",null,React.createElement("small",null,"Easel reports ",React.createElement("i",{className:"fa fa-circle fa-green"})," when the probe is not plugged in, ",React.createElement("em",null,"or")," when the probe has been plugged in and the leads are touching.")),React.createElement("p",null,React.createElement("small",null,"When the probe is plugged in but leads are not touching, Easel reports ",React.createElement("i",{className:"fa fa-circle-thin fa-grey"}),".")))))}})},function(e,t){EASEL.component.uninstallMachineProfile=createReactClass({propTypes:{profileId:PropTypes.number.isRequired,profileName:PropTypes.string.isRequired,setProfileId:PropTypes.func.isRequired,deleteMachineProfile:PropTypes.func.isRequired},getInitialState:()=>({uninstall:!1}),uninstallMachine(){this.setState({uninstall:!this.state.uninstall})},deleteProfile(){const e=this.props.profileId;EASEL.stats.trackEvent(EASEL.events.machineProfileUninstalled),EASEL.machineProfilesAPI.destroy(e).then((e=>{this.props.setProfileId(null),EASEL.flux.events.emit("close-machine-profile-modal"),this.props.deleteMachineProfile(e)})).catch((function(e){return console.error("todo: handle delete errors",e)}))},render(){return React.createElement("div",null,this.state.uninstall?React.createElement("div",null,React.createElement("p",null,"Are you sure you want to uninstall ",this.props.profileName,"?"),React.createElement("div",{className:"uninstall-machine__buttons"},React.createElement("button",{className:"btn",onClick:this.uninstallMachine},"Cancel"),React.createElement("button",{className:"btn btn-danger",onClick:this.deleteProfile},"Yes, uninstall"))):React.createElement("button",{className:"btn btn-large btn-danger uninstall-machine",onClick:this.uninstallMachine},"Uninstall this machine"))}})},function(e,t){EASEL.component.workAreaInputs=createReactClass({propTypes:{inchWorkAreaX:PropTypes.number.isRequired,inchWorkAreaY:PropTypes.number.isRequired,unit:PropTypes.string.isRequired},submitX(e,t,n){n>0?EASEL.store.dispatch(EASEL.machineSettingsActionCreators.updateWorkArea({x:n,y:this.props.inchWorkAreaY})):this.forceUpdate()},submitY(e,t,n){n>0?EASEL.store.dispatch(EASEL.machineSettingsActionCreators.updateWorkArea({x:this.props.inchWorkAreaX,y:n})):this.forceUpdate()},shouldComponentUpdate(e){return e.inchWorkAreaX!==this.props.inchWorkAreaX||e.inchWorkAreaY!==this.props.inchWorkAreaY||e.unit!==this.props.unit},render(){const e={mm:0,in:2}[this.props.unit];return React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-12"},React.createElement("label",null,"Work Area")),React.createElement("div",{className:"col-sm-3"},React.createElement("img",{src:EASEL.assets.images.workArea})),React.createElement("div",{className:"col-sm-6 form-horizontal"},React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"work-area-x",className:"col-sm-2 control-label"},"X"),React.createElement("div",{className:"col-sm-8"},React.createElement(EASEL.component.utils.dimensionalInput,{id:"work-area-x",value:this.props.inchWorkAreaX,unit:"in",displayUnit:this.props.unit,showUnit:!0,onChange:this.submitX,precision:e}))),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"work-area-y",className:"col-sm-2 control-label"},"Y"),React.createElement("div",{className:"col-sm-8"},React.createElement(EASEL.component.utils.dimensionalInput,{id:"work-area-y",value:this.props.inchWorkAreaY,unit:"in",displayUnit:this.props.unit,showUnit:!0,onChange:this.submitY,precision:e})))))}})},function(e,t){EASEL.component.adminMenuDropdown=EASEL.redux.connect({mapStateToProps:e=>({isAdmin:EASEL.userSelectors.isAdmin(e)}),component:createReactClass({render(){return this.props.isAdmin?React.createElement("li",{className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle light-on-dark","data-toggle":"dropdown"},"Admin"),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement("a",{href:"/dashboard"},"Dashboard")),React.createElement("li",null,React.createElement("a",{href:"/times"},"Run Times")),React.createElement("li",null,React.createElement("a",{href:"/admin/users"},"Users")),React.createElement("li",null,React.createElement("a",{href:"/admin/product_keys"},"Product Keys")),React.createElement("li",{className:"divider"},null),React.createElement("li",null,React.createElement("a",{href:"/admin/access_grants",target:"_blank"},"Access Grants")),React.createElement("li",null,React.createElement("a",{href:"/features",target:"_blank"},"Features")),React.createElement("li",null,React.createElement("a",{href:"/admin/fonts"},"Fonts")),React.createElement("li",null,React.createElement("a",{href:"/design_elements"},"Design Elements")),React.createElement("li",null,React.createElement("a",{href:"/sender_versions"},"Local Sender Downloads")),React.createElement("li",{className:"divider"},null),React.createElement("li",null,React.createElement("a",{href:"/connection_diagnostics"},"Connection Diagnostics")),React.createElement("li",null,React.createElement("a",{href:"/error_reports"},"Error Reports")),React.createElement("li",null,React.createElement("a",{href:"/troubleshooting"},"Troubleshooting")))):null}})})},function(e,t,n){const a=n(97);EASEL.component.answerbot=createReactClass({openSupportBot(){EASEL.stats.trackEvent(EASEL.events.answerbotOpened),"undefined"===typeof zE?this.loadSupportBot():zE.activate()},loadSupportBot(){a.loadScripts({src:"https://static.zdassets.com/ekr/snippet.js?key=cf286903-d4b2-4d38-9d08-56d08b7a6eda",id:"ze-snippet"}).then((()=>{zE((()=>{zE.activate(),zE.setHelpCenterSuggestions({labels:["answerbot"]})})),zE("webWidget:on","close",(()=>{zE.hide(),EASEL.stats.trackEvent(EASEL.events.answerbotClosed)}))})).catch((()=>{console.info("There was an error loading Zendesk Answerbot")}))},render(){return React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.openSupportBot},React.createElement("i",{className:"fa fa-search"})," Support"))}})},function(e,t){EASEL.component.easelLogo=createReactClass({propTypes:{isProUser:PropTypes.bool,onClick:PropTypes.func},render(){return React.createElement(EASEL.component.a,{id:"easel-logo",className:"easel-brand",onClick:this.props.onClick,alt:"Easel"},React.createElement("img",{src:this.props.isProUser?EASEL.assets.images.easelProInsert:EASEL.assets.images.easelInsert}))}})},function(e,t){EASEL.component.editMenuDropdown=EASEL.redux.connect({mapDispatchToProps:()=>({selectByType:()=>EASEL.mainMenu.trigger("select-by-type"),selectMatchingDepth:()=>EASEL.mainMenu.trigger("select-matching-depth"),flipHorizontal:()=>EASEL.mainMenu.trigger("flip-horizontal"),flipVertical:()=>EASEL.mainMenu.trigger("flip-vertical"),centerToMaterial:()=>EASEL.mainMenu.trigger("center-to-material")}),component:createReactClass({getState(){const e=EASEL.editorStore.getSelectedVolumeIds(),t=e.length>0,n=EASEL.volumeStore.getVolumes(e);return{isObjectSelected:t,allSelectedShapesMatchingCutDepth:EASEL.volumeHelper.allSelectedShapesMatchingCutDepth(n),isOneDrillHoleSelected:EASEL.volumeHelper.isOneDrillHoleSelected(n),areOnlyDrillHolesSelected:EASEL.volumeHelper.areOnlyDrillHolesSelected(n),multipleCombinableVolumes:EASEL.volumeHelper.combinableVolumes(EASEL.volumeStore.getVolumes(e)).length>1,canUndo:null!=EASEL.undoStore.getUndoTokens(),undoDescription:EASEL.undoStore.getUndoDescription(),canRedo:null!=EASEL.undoStore.getRedoTokens(),redoDescription:EASEL.undoStore.getRedoDescription()}},getInitialState(){return this.getState()},loadState(){return this.setState(this.getState())},closeDropdown:()=>$(".edit-menu-dropdown.open .dropdown-toggle").dropdown("toggle"),componentDidMount(){return EASEL.editorStore.addChangeListener(this.closeDropdown),EASEL.undoStore.addChangeListener(this.closeDropdown),$(".edit-menu-dropdown").on("show.bs.dropdown",this.loadState)},componentWillUnmount(){return EASEL.editorStore.removeChangeListener(this.closeDropdown),EASEL.undoStore.removeChangeListener(this.closeDropdown)},divider:e=>React.createElement("li",{className:"divider",key:e||"divider"}),cutAndCopyMenu(){const{isObjectSelected:e}=this.state;if(e)return[this.divider(),React.createElement("li",{key:"cut"},React.createElement("a",{"data-action":"cut",href:"#"},React.createElement(EASEL.component.modifierKey,{title:"Cut",shortcut:"X"}))),React.createElement("li",{key:"copy"},React.createElement("a",{"data-action":"copy",href:"#"},React.createElement(EASEL.component.modifierKey,{title:"Copy",shortcut:"C"})))]},removeMenu(){const{isObjectSelected:e}=this.state;if(e)return React.createElement("li",{key:"remove"},React.createElement("a",{"data-action":"remove",href:"#"},"Remove"))},flipMenu(){const{isObjectSelected:e,isOneDrillHoleSelected:t}=this.state;if(e&&!t)return[this.divider(),React.createElement("li",{key:"flipHorizontal"},React.createElement(EASEL.component.a,{className:"flip-icon",onClick:this.props.flipHorizontal},React.createElement("span",null,"Flip Horizontal"))),React.createElement("li",{key:"flipVertical"},React.createElement(EASEL.component.a,{id:"flip-vertical",className:"flip-icon",onClick:this.props.flipVertical},React.createElement("span",null,"Flip Vertical")))]},positionMenu(){const{isObjectSelected:e,isOneDrillHoleSelected:t}=this.state;if(e&&!t)return[this.divider(),React.createElement("li",{key:"backward"},React.createElement("a",{"data-action":"backward",href:"#"},React.createElement(EASEL.component.modifierKey,{title:"Send Backward",shortcut:"["}))),React.createElement("li",{key:"send-to-back"},React.createElement("a",{"data-action":"send-to-back",href:"#"},React.createElement(EASEL.component.modifierKey,{title:"Send to Back",shortcut:";"}))),React.createElement("li",{key:"forward"},React.createElement("a",{"data-action":"forward",href:"#"},React.createElement(EASEL.component.modifierKey,{title:"Bring Forward",shortcut:"]"}))),React.createElement("li",{key:"bring-to-front"},React.createElement("a",{"data-action":"bring-to-front",href:"#"},React.createElement(EASEL.component.modifierKey,{title:"Bring to Front",shortcut:"'"})))]},combineMenu(){const{multipleCombinableVolumes:e}=this.state;if(e)return[React.createElement("li",{key:"combine"},React.createElement("a",{"data-action":"combine",href:"#"},React.createElement(EASEL.component.modifierKey,{title:"Combine",shortcut:"J"}))),this.divider()]},render(){return React.createElement("li",{className:"edit-menu-dropdown dropdown"},React.createElement("a",{href:"#",className:this.props.disabled?"disabled":"dropdown-toggle","data-toggle":"dropdown"},"Edit"),React.createElement("ul",{className:"dropdown-menu"},this.state.canUndo&&React.createElement(EASEL.component.undoMenuItem,{description:this.state.undoDescription}),this.state.canRedo&&React.createElement(EASEL.component.redoMenuItem,{description:this.state.redoDescription}),(this.state.canUndo||this.state.canRedo)&&this.divider("undo-divider"),React.createElement("li",null,React.createElement("a",{"data-action":"select-all",href:"#"},React.createElement(EASEL.component.modifierKey,{title:"Select All",shortcut:"A"}))),React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.selectByType},"Select by Cut Type")),this.state.allSelectedShapesMatchingCutDepth&&React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.selectMatchingDepth},"Select by Matching Depth")),this.cutAndCopyMenu(),React.createElement("li",{className:"clipboard-contents"},React.createElement("a",{"data-action":"paste",href:"#"},React.createElement(EASEL.component.modifierKey,{title:"Paste",shortcut:"V"}))),this.removeMenu(),this.flipMenu(),this.positionMenu(),this.divider("position-divider"),this.combineMenu(),this.state.isObjectSelected&&React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.centerToMaterial},"Center to material"))))}})})},function(e,t,n){const a=n(35);EASEL.component.projectMenuDropdown=EASEL.redux.connect({mapStateToProps:e=>({isLoggedInUser:EASEL.userSelectors.isLoggedInUser(e),canEditProject:EASEL.userSelectors.canEditProject(e),unit:EASEL.unitSelectors.getPreferredUnit(e),useDetailBit:EASEL.bitSelectors.useDetailBit(e),authorizedToDownloadProject:EASEL.userSelectors.authorizedToCarve(Date.now(),e),isThreeD:EASEL.workpieceStore.getWorkpieces().some((e=>!0===e.isImportedMesh)),bitParams:EASEL.bitSelectors.getBitWorkpieceState(e)}),mapDispatchToProps(e){const t="Project Menu";return{openUserModal:()=>(e(EASEL.projectListActionCreators.setSearchQuery("")),EASEL.projectListActionCreators.reloadProjects({query:"",filters:{}},e),e(EASEL.userModalActionCreators.showUserModalProjectsTab())),renameProject:()=>EASEL.flux.events.emit("open-project-properties-modal"),importSVG:()=>$("#svg-file-input").trigger("click"),importGCode:()=>EASEL.flux.events.emit("import-gcode"),importSTL:()=>$("#stl-file-input").trigger("click"),downloadGcode(){EASEL.exportGCode(t)},downloadRoughingGcode(){EASEL.exportGCode(t,"roughing")},downloadDetailGcode(){EASEL.exportGCode(t,"detail")},showAccountModal(){EASEL.stats.trackEvent(EASEL.events.showedAccountModal,{proRequired:!0,source:"Download Project Zip"}),e(EASEL.userModalActionCreators.showUserModalAccountTab())},share:()=>EASEL.flux.events.emit("show-project-sharing-modal"),publish:()=>EASEL.publishProjectDialog.show(),goLive:()=>EASEL.flux.events.emit("show-easel-live-modal")}},component:createReactClass({saveAsDefault(){const{unit:e,bitParams:t}=this.props;EASEL.store.dispatch(EASEL.saveStatusActionCreators.setUnsavedWithSaveInProgress());const n={project:{material:a.projectMaterialAttributes(EASEL.materialStore.getActiveMaterial(EASEL.workpieceStore.getActiveID())),unit:e,bit_params:t.bitParams}};EASEL.userAPI.updateDefaults(n).catch((()=>{EASEL.store.dispatch(EASEL.saveStatusActionCreators.setUnsavedWithError("Could not save project settings defaults"))})).finally((()=>{EASEL.store.dispatch(EASEL.saveStatusActionCreators.setSaved()),EASEL.stats.trackEvent(EASEL.events.savedProjectDefaults,n.project)}))},handleDownloadProjectClick(){this.props.authorizedToDownloadProject?EASEL.flux.events.emit("show-download-zip"):this.props.showAccountModal()},render(){return React.createElement("li",{className:"dropdown",id:"project"},React.createElement("a",{href:"#",className:this.props.disabled?"disabled":"dropdown-toggle","data-toggle":"dropdown"},"Project"),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement("a",{href:"/projects","data-method":"post","data-action":"new",target:"_blank"},"New")),this.props.isLoggedInUser?React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.openUserModal,href:"#"},React.createElement(EASEL.component.modifierKey,{title:"Open",shortcut:"O"}))):void 0,this.props.canEditProject?React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.renameProject,href:"#"},"Properties")):void 0,React.createElement("li",null,React.createElement("a",{"data-action":"duplicate",href:"#"},"Make a copy")),React.createElement("li",{className:"divider"}),this.props.isLoggedInUser&&EASEL.hasAccessGrant("custom_project_defaults")&&[React.createElement("li",{key:"save-as-default"},React.createElement(EASEL.component.a,{onClick:this.saveAsDefault},"Save as default")),React.createElement("li",{key:"divider-save-as-default",className:"divider"})],React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.importSVG},"Import SVG")),React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.importGCode},"Import g-code")),EASEL.hasAccessGrant("three_d")&&React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.importSTL},"Import 3D STL")),EASEL.hasAccessGrant("app_development")&&[React.createElement("li",{key:"divider-apps",className:"divider"}),React.createElement("li",{key:"my-apps"},React.createElement("a",{href:"/apps"},"My Apps"))],React.createElement("li",{className:"divider"}),React.createElement("li",null,!this.props.useDetailBit&&React.createElement(EASEL.component.a,{onClick:this.props.downloadGcode},"Download g-code"),this.props.useDetailBit&&React.createElement(EASEL.component.a,{onClick:this.props.downloadGcode},"Download g-code (ZIP)")),this.props.useDetailBit&&React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.downloadRoughingGcode},"\xa0\xa0\xa0Roughing pass g-code")),this.props.useDetailBit&&React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.downloadDetailGcode},"\xa0\xa0\xa0Detail pass g-code")),React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.handleDownloadProjectClick},"Download project (ZIP)")),this.props.canEditProject&&!this.props.isThreeD&&React.createElement(React.Fragment,null,React.createElement("li",{className:"divider",key:"divider-share"}),React.createElement("li",{key:"share"},React.createElement(EASEL.component.a,{onClick:this.props.share},"Share")),React.createElement("li",{key:"publish"},React.createElement(EASEL.component.a,{onClick:this.props.publish},"Publish")),EASEL.hasAccessGrant("easel_live")&&React.createElement("li",{key:"live"},React.createElement(EASEL.component.a,{onClick:this.props.goLive},"Go Live")))))}})})},function(e,t){EASEL.component.helpMenuDropdown=EASEL.redux.connect({mapStateToProps:function(e){const{features:t}=e.features;return{features:t}},mapDispatchToProps:e=>({showFeaturesPage(){EASEL.stats.trackEvent("Feature modal opened"),e(EASEL.pageActionCreators.showPage({pageName:"features"}))}}),component:createReactClass({render(){const e=this.props.features&&this.props.features.map((e=>e.isNew)).includes(!0);return React.createElement("li",{className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle light-on-dark","data-toggle":"dropdown"},"Help ",e&&React.createElement("i",{className:"fa fa-circle features-container__indicator"})),React.createElement("ul",{className:"dropdown-menu"},React.createElement(EASEL.component.answerbot,null),this.props.features.length>0&&React.createElement("li",null,React.createElement(EASEL.component.a,{className:"help-link",onClick:this.props.showFeaturesPage},"Features & Tools ",e&&React.createElement("i",{className:"fa fa-circle features-container__indicator"}))),React.createElement("li",null,React.createElement("a",{href:"https://www.inventables.com/forum",target:"_blank",rel:"noreferrer"},"Community forum")),React.createElement("li",null,React.createElement("a",{href:"https://easel.inventables.com/#learn",target:"_blank",rel:"noreferrer"},"Learning")),React.createElement("li",null,React.createElement("a",{href:"https://www.youtube.com/playlist?list=PLFr1ntD6SYNTnIRPzquaPNgZpjCE3PSAz",target:"_blank",rel:"noreferrer",onClick:()=>EASEL.stats.trackEvent(EASEL.events.menuNavVideosClicked)},"Video Gallery")),React.createElement("li",null,React.createElement("a",{href:"#",className:"help-link","data-action":"troubleshooting"},"Troubleshooting"))))}})})},function(e,t){const n=()=>{EASEL.stats.trackEvent(EASEL.events.menuNavStoreClicked)},a=()=>{EASEL.stats.trackEvent(EASEL.events.menuNavInventablesClicked)},r=()=>React.createElement("a",{href:"https://www.inventables.com/projects/featured?utm_source=easel&utm_medium=nav&utm_campaign=projects%20link&utm_content=featured%20projects",target:"_blank",rel:"noreferrer",onClick:()=>{EASEL.stats.trackEvent(EASEL.events.menuNavProjectsClicked)}},"Project Ideas",React.createElement("div",{className:"inventables-menu-dropdown__sub-text"},"Thousands of Easel Projects to get inspired"));EASEL.component.inventablesMenuDropdown=createReactClass({propTypes:{userId:PropTypes.number},render:()=>React.createElement("li",{className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle menu-bar__link--orange","data-toggle":"dropdown",onClick:a},React.createElement("img",{className:"inventables-menu-dropdown__logo",src:EASEL.assets.images.inventablesLogo})," Inventables"),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,r()),React.createElement("li",null,React.createElement("a",{href:"https://www.inventables.com/categories?utm_source=easel&utm_medium=nav&utm_campaign=shop%20inventables&utm_content=shop%20inventables",target:"_blank",rel:"noreferrer",onClick:n},"Shop",React.createElement("div",{className:"inventables-menu-dropdown__sub-text"},"All you need to bring your ideas to life")))))})},function(e,t){EASEL.component.liveViewNav=createReactClass({propTypes:{onOpenUserModal:PropTypes.func.isRequired,onCopyProject:PropTypes.func.isRequired,ownerName:PropTypes.string,ownerProfilePermalink:PropTypes.string},render(){return React.createElement("div",{id:"live-view-nav",className:"live-view-nav action-menu"},React.createElement(EASEL.component.easelLogo,{isProUser:this.props.isProUser,onClick:this.props.onOpenUserModal}),React.createElement(EASEL.component.projectInfo,{projectName:this.props.projectName,ownerName:this.props.ownerName,ownerProfileURL:this.props.ownerProfilePermalink}),React.createElement("div",{className:"live-view-nav__description"},"You are viewing a live project"))}})},function(e,t){EASEL.component.machineSettingsDropdown=createReactClass({render(){return React.createElement("li",{className:"dropdown",id:"machine-settings"},React.createElement("a",{href:"#",className:this.props.disabled?"disabled":"dropdown-toggle","data-toggle":"dropdown",id:"machine-settings-menu-item"},"Machine"),React.createElement("div",{className:"dropdown-menu dropdown-menu-wide","data-dont-close-from-inside":!0},React.createElement(EASEL.component.machineTab,null)))}})},function(e,t){EASEL.component.menuBarComponent=createReactClass({render(){const{readonly:e,userId:t,fullPageVisible:n}=this.props;return React.createElement("div",{className:"navbar-menu"},React.createElement("div",{className:"menu-bar collapse navbar-collapse"},React.createElement("ul",{className:"menu-bar__nav nav navbar-nav"},React.createElement(EASEL.component.projectMenuDropdown,{disabled:n}),React.createElement(EASEL.component.editMenuDropdown,{disabled:n}),React.createElement(EASEL.component.machineSettingsDropdown,{disabled:n}),React.createElement(EASEL.component.toolboxMenuDropdown,null),React.createElement(EASEL.component.helpMenuDropdown,null),React.createElement(EASEL.component.adminMenuDropdown,null),!1===e&&React.createElement(EASEL.component.inventablesMenuDropdown,{userId:t}))))}}),EASEL.component.menuBar=EASEL.redux.connect({mapStateToProps:e=>({fullPageVisible:EASEL.pageSelectors.isAnyPageVisible(e),userId:EASEL.userSelectors.getUserId(e)}),component:EASEL.component.menuBarComponent})},function(e,t){EASEL.component.modifierKey=createReactClass({render(){let{title:e,shortcut:t,shift:n}=this.props;const a=EASEL.info.isMac()?EASEL.unicodeCharacters.macCommandKey+" ":"Ctrl ";return n&&(t=`${EASEL.unicodeCharacters.shiftKey} ${t}`),t?React.createElement("span",{className:"dropdown-menu-item"},e,React.createElement("span",{className:"dropdown-shortcut"},`${a} ${t}`)):e}})},function(e,t){EASEL.component.navWrapper=EASEL.redux.connect({mapStateToProps:e=>({isProUser:EASEL.userSelectors.isProEnabled(Date.now(),e)}),mapDispatchToProps:e=>({openUserModal(){e(EASEL.projectListActionCreators.setSearchQuery("")),EASEL.projectListActionCreators.reloadProjects({query:"",filters:{}},e),e(EASEL.userModalActionCreators.showUserModalProjectsTab())},setStarredProject(e){EASEL.projectMetadataActions.setStarred(e)}}),component:createReactClass({dataDontCloseFromInside:function(e){if(!$(e.target).data("bypass-dont-close"))return e.stopPropagation()},componentDidMount(){EASEL.projectMetadataStore.addChangeListener(this._updateState),$(document).on("click","[data-dont-close-from-inside]",this.dataDontCloseFromInside),EASEL.keyboardController.register({keyboard:"default",command:this.props.openUserModal,key:EASEL.keys.o,meta:!0})},componentWillUnmount(){EASEL.projectMetadataStore.removeChangeListener(this._updateState),$(document).off("click","[data-dont-close-from-inside]",this.dataDontCloseFromInside)},getState:()=>({publishURL:EASEL.projectMetadataStore.getInventablesURL(),projectName:EASEL.projectMetadataStore.getName(),projectStarred:EASEL.projectMetadataStore.isStarred(),readonly:EASEL.projectMetadataStore.isReadOnly(),ownerName:EASEL.projectMetadataStore.ownerName(),ownerProfilePermalink:EASEL.projectMetadataStore.ownerProfilePermalink(),isLive:EASEL.projectMetadataStore.isLive()}),getInitialState(){return this.getState()},_updateState(){this.setState(this.getState())},copyProject(){EASEL.projectActions.copyShared()},render(){return this.state.projectName&&this.props.openUserModal?this.state.isLive&&this.state.readonly?React.createElement(EASEL.component.liveViewNav,{onOpenUserModal:this.props.openUserModal,onCopyProject:this.copyProject,ownerName:this.state.ownerName,ownerProfilePermalink:this.state.ownerProfilePermalink,isProUser:this.props.isProUser,projectName:this.state.projectName}):this.state.readonly?React.createElement(EASEL.component.readonlyNav,{onOpenUserModal:this.props.openUserModal,onCopyProject:this.copyProject,ownerName:this.state.ownerName,ownerProfilePermalink:this.state.ownerProfilePermalink,isProUser:this.props.isProUser,projectName:this.state.projectName}):React.createElement(EASEL.component.primaryNav,{onOpenUserModal:this.props.openUserModal,onSetStarredProject:this.props.setStarredProject,isProUser:this.props.isProUser,projectName:this.state.projectName,publishURL:this.state.publishURL,projectStarred:this.state.projectStarred}):null}})})},function(e,t){EASEL.component.primaryNav=createReactClass({propTypes:{onOpenUserModal:PropTypes.func.isRequired,onSetStarredProject:PropTypes.func.isRequired,projectName:PropTypes.string.isRequired,projectStarred:PropTypes.bool.isRequired,isProUser:PropTypes.bool,publishURL:PropTypes.string},getState:()=>({isMachineCarving:EASEL.machineStateStore.isMachineCarving()}),getInitialState(){return this.getState()},_onChange(){this.setState(this.getState())},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange)},toggleStarred(){const e=!this.props.projectStarred;this.props.onSetStarredProject(e)},renameProject(){EASEL.flux.events.emit("open-project-properties-modal")},render(){const{isProUser:e,onOpenUserModal:t,projectName:n,projectStarred:a,publishURL:r}=this.props,{isMachineCarving:o}=this.state;return React.createElement("nav",{id:"main-menu",className:`action-menu primary-nav ${e?"primary-nav--pro":""} ${o?"primary-nav--carving":""}`,role:"navigation"},React.createElement(EASEL.component.easelLogo,{isProUser:e,onClick:t}),React.createElement(EASEL.component.projectInfo,{projectName:n,isStarred:a,publishURL:r,onRenameProject:this.renameProject,onToggleStarred:this.toggleStarred}),React.createElement(EASEL.component.menuBar,{readonly:!1}),React.createElement("div",{className:"navbar-controls"},React.createElement(EASEL.component.subscribeButton,null),React.createElement(EASEL.component.spindleSpeedOverride,null),React.createElement(EASEL.component.feedRateOverride,null),React.createElement(EASEL.component.machineWidget,null)),React.createElement("span",{id:"navbar-prompt"}))}})},function(e,t){EASEL.component.projectInfo=createReactClass({render(){const{projectName:e,ownerName:t,ownerProfileURL:n,publishURL:a,isStarred:r,onRenameProject:o,onToggleStarred:s}=this.props;return React.createElement("div",{className:"project-info"},React.createElement("div",{className:"project-info__row"},null!=a&&React.createElement("div",{className:"project-info__published-icon"},React.createElement(EASEL.component.a,{href:a,target:"_blank"},React.createElement("img",{src:EASEL.assets.images.published}))),null!=o?React.createElement(ReactBootstrap.OverlayTrigger,{placement:"bottom",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"project-properties"},"Project properties")},React.createElement(EASEL.component.a,{onClick:o},React.createElement("h1",{id:"project-name"}," ",e," "))):React.createElement("h1",{id:"project-name"}," ",e," "),null!=s&&React.createElement(EASEL.component.a,{onClick:s,className:"project-info__star-status"},React.createElement("i",{className:"fa fa-"+(r?"star":"star-o")})),React.createElement(EASEL.component.projectSaveStatus,null)),null!=t&&React.createElement("p",{className:"project-info__owner"},"by ",React.createElement(EASEL.component.a,{href:n,target:"_blank"},t)))}})},function(e,t){EASEL.component.projectSaveStatus=EASEL.redux.connect({mapStateToProps:e=>({isSaved:EASEL.saveStatusSelectors.isSaved(e),isUnsaved:EASEL.saveStatusSelectors.isUnsaved(e),isSaving:EASEL.saveStatusSelectors.isSaving(e),isError:null!=EASEL.saveStatusSelectors.getError(e)}),component:createReactClass({retrySave:()=>EASEL.projectAutosaver.scheduleAutosave(),render(){let e,t;const{isSaved:n,isUnsaved:a,isSaving:r,isError:o}=this.props;return n?(t="All changes saved",e=React.createElement("i",{className:"project-save-status__icon fa fa-check"})):r?(t="Saving...",e=React.createElement("span",null,React.createElement(EASEL.component.spinner,{className:"project-save-status__spinner",color:"white"}))):o?(t="Saving failed\u2014click to retry",e=React.createElement(EASEL.component.a,{onClick:this.retrySave},React.createElement("i",{className:"project-save-status__icon fa fa-warning"}))):a?(t="Changes not saved",e=React.createElement("i",{className:"project-save-status__icon fa fa-warning"})):t=e=null,React.createElement("span",{className:"project-save-status"},null!=t&&null!=e?React.createElement(ReactBootstrap.OverlayTrigger,{placement:"bottom",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"save-status-message"},t)},e):void 0)}})})},function(e,t){EASEL.component.readonlyNav=createReactClass({propTypes:{onOpenUserModal:PropTypes.func.isRequired,onCopyProject:PropTypes.func.isRequired,ownerName:PropTypes.string,ownerProfilePermalink:PropTypes.string},render(){return React.createElement("div",{className:"readonly-nav action-menu"},React.createElement(EASEL.component.easelLogo,{isProUser:this.props.isProUser,onClick:this.props.onOpenUserModal}),React.createElement(EASEL.component.projectInfo,{projectName:this.props.projectName,ownerName:this.props.ownerName,ownerProfileURL:this.props.ownerProfilePermalink}),React.createElement("div",{className:"navbar-menu"},React.createElement(EASEL.component.menuBar,{readonly:!0})),React.createElement(EASEL.component.a,{onClick:this.props.onCopyProject,className:"readonly-text btn btn-primary"},"Hey, you're playing in the Easel Sandbox. To save this project, make a copy",React.createElement("img",{src:EASEL.assets.images.copyEasel})))}})},function(e,t){EASEL.component.redoMenuItem=createReactClass({propTypes:{description:PropTypes.string},onRedo(){EASEL.undoActions.redo()},render(){const e=null!=this.props.description?`Redo ${this.props.description}`:"Redo";return React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.onRedo},React.createElement(EASEL.component.modifierKey,{title:e,shortcut:"Z",shift:!0})))}})},function(e,t){EASEL.component.subscribeButtonComponent=createReactClass({render(){const{isProSubscriber:e,isPromoUser:t,unactivatedEaselProProductKey:n,onShowProModal:a,trialExpirationDate:r,isTrialUser:o}=this.props,s=(new Date).getTime();if(o&&r>s){const e=EASEL.utility.timeFormatter.timeLeft(r);if(void 0===e)return null;const t=e.split(" ");return React.createElement("div",{className:"countdown"},React.createElement("div",{className:"countdown-time"},React.createElement("span",{className:"countdown-time-highlight"},t[0])," ",t[1]," left"),React.createElement(EASEL.component.a,{onClick:a},"Get Easel Pro"))}if(e&&!t)return null;{const e=null!=n?"Activate Easel Pro":"Get Easel Pro";return React.createElement(EASEL.component.a,{onClick:a,className:"btn btn-default primary-nav__btn"},e)}}}),EASEL.component.subscribeButton=EASEL.redux.connect({mapDispatchToProps:e=>({onShowProModal:()=>(EASEL.stats.trackEvent(EASEL.events.openUserModal,{action:"Primary Nav Subscribe CTA"}),e(EASEL.userModalActionCreators.showUserModalAccountTab()))}),mapStateToProps:e=>{const t=Date.now(),n=EASEL.userSelectors.unactivatedEaselProProductKeys(e);return{unactivatedEaselProProductKey:n&&n.length?n[0]:null,isProSubscriber:EASEL.userSelectors.isProSubscriber(t,e),isPromoUser:EASEL.userSelectors.isPromoUser(e),trialExpirationDate:EASEL.userSelectors.getTrialExpirationDate(e),isTrialUser:EASEL.userSelectors.isTrialUser(e)}},component:EASEL.component.subscribeButtonComponent})},function(e,t){EASEL.component.toolboxMenuDropdown=EASEL.redux.connect({mapStateToProps:e=>({toolboxVisible:EASEL.pageSelectors.isPageVisible(e,"toolbox")}),mapDispatchToProps:e=>({closeToolbox(){e(EASEL.pageActionCreators.hidePage())},viewToolboxMaterials(){e(EASEL.pageActionCreators.showPage({pageName:"toolbox"})),e(EASEL.toolboxActionCreators.showMaterialsToolboxSubTab())},viewToolboxBits(){e(EASEL.pageActionCreators.showPage({pageName:"toolbox"})),e(EASEL.toolboxActionCreators.showBitsToolboxSubTab())},viewToolboxCutSettings(){e(EASEL.pageActionCreators.showPage({pageName:"toolbox"})),e(EASEL.toolboxActionCreators.showCutSettingsToolboxSubTab())}}),component:createReactClass({render(){return React.createElement("li",{className:"toolbox-menu-dropdown dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown"},"Toolbox"),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.viewToolboxBits},"Bits")),React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.viewToolboxMaterials},"Materials")),React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.viewToolboxCutSettings},"Cut Settings")),this.props.toolboxVisible&&React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.props.closeToolbox},"Close"))))}})})},function(e,t){EASEL.component.undoMenuItem=createReactClass({propTypes:{description:PropTypes.string},onUndo(){EASEL.undoActions.undo()},render(){const e=null!=this.props.description?`Undo ${this.props.description}`:"Undo";return React.createElement("li",null,React.createElement(EASEL.component.a,{onClick:this.onUndo},React.createElement(EASEL.component.modifierKey,{title:e,shortcut:"Z"})))}})},function(e,t){EASEL.component.betaTestOptInComponent=createReactClass({getInitialState:()=>({updating:!1}),onToggleBetaTester(e){this.setState({updating:!0});const t=!this.props.isBetaTester;return EASEL.userAPI.updateBetaTester(t).then((()=>this.props.setIsBetaTester(t))).catch((()=>{EASEL.oops(`Unable to opt you ${t?"into":"out of"} beta testing new features.`)})).then((()=>{this.setState({updating:!1})})),e.preventDefault()},render(){const{isBetaTester:e}=this.props,{updating:t}=this.state;return React.createElement("div",{className:"beta-test-opt-in setting-block container-fluid"},React.createElement("h3",null,"Beta Testing"),React.createElement("div",{className:"content-row"},React.createElement("div",null,e?React.createElement("div",null,React.createElement("p",null,React.createElement("img",{className:"green-check",src:EASEL.assets.images.greenCheck}),"You are enrolled in beta testing")):React.createElement("span",null,"Are you interested in testing new Easel features?")),React.createElement("div",null,React.createElement(EASEL.component.a,{className:"btn btn-primary beta-test-opt-in__btn",onClick:this.onToggleBetaTester,disabled:t},e?"Opt out":"Enroll in beta testing"))))}}),EASEL.component.betaTestOptIn=EASEL.redux.connect({mapStateToProps:e=>({isBetaTester:EASEL.userSelectors.isBetaTester(e)}),mapDispatchToProps:e=>({setIsBetaTester:t=>e(EASEL.userActionCreators.setIsBetaTester(t))}),component:EASEL.component.betaTestOptInComponent})},function(e,t){EASEL.component.educatorSignupLink=createReactClass({render:()=>React.createElement("div",{className:"setting-block container-fluid"},React.createElement("h3",null,"Educator Account"),React.createElement("div",{className:"content-row"},React.createElement("div",null,React.createElement("span",null,"Easel Pro is free for educators and their students!")),React.createElement("div",null,React.createElement("a",{className:"btn btn-primary",href:"https://docs.google.com/forms/d/e/1FAIpQLSfOSazEt_BFu5x0-a67_M-KMuZV-AfWifG2APl_P_q_8CiqzQ/viewform",target:"_blank",rel:"noreferrer"},"Request an account"))))})},function(e,t){EASEL.component.optionsContainer=EASEL.redux.connect({mapStateToProps:e=>{const t=Date.now();return{isProUser:EASEL.userSelectors.isProEnabled(t,e),easelProDayTimeLeft:EASEL.userSelectors.getEaselProDayTimeLeftDisplay(t,e)}},component:createReactClass({render(){const{isProUser:e,easelProDayTimeLeft:t}=this.props;return React.createElement("div",{className:"options-container"},React.createElement(EASEL.component.easelProModalAlert,{isProUser:e,easelProDayTimeLeft:t}),React.createElement(EASEL.component.useDayPass,null),React.createElement(EASEL.component.betaTestOptIn,null),React.createElement(EASEL.component.educatorSignupLink,null),!EASEL.hasAccessGrant("thirty_day_trial")&&React.createElement(EASEL.component.useFreeDay,null),EASEL.hasAccessGrant("custom_project_defaults")&&React.createElement(EASEL.component.userDefaults,null))}})})},function(e,t){EASEL.component.useDayPass=EASEL.redux.connect({mapStateToProps:e=>{const t=Date.now();return{easelProDayTimeLeft:EASEL.userSelectors.getEaselProDayTimeLeftDisplay(t,e),loading:EASEL.proSelectors.isLoading(e),dayPassesRemaining:EASEL.userSelectors.getDayPassesRemaining(e),errorText:EASEL.proSelectors.getError(e),isPromoUser:EASEL.userSelectors.isPromoUser(e)}},mapDispatchToProps:EASEL.redux.dispatchActions(EASEL.easelProActions,["startEaselProPurchasedDay"]),component:createReactClass({onClick(){this.props.loading||null!=this.props.easelProDayTimeLeft||this.props.startEaselProPurchasedDay()},render(){const{dayPassesRemaining:e,errorText:t,easelProDayTimeLeft:n,loading:a,isPromoUser:r}=this.props;return r||e<=0?null:React.createElement("div",{className:"setting-block container-fluid"},React.createElement("h3",null,"Use a day pass"),t&&React.createElement("p",{className:"easel-pro-management--error"},t),React.createElement("div",{className:"content-row"},React.createElement("span",null,`You have ${e} purchased Easel Pro day ${EASEL.string.quantify(e,"pass","passes")} left. `),React.createElement("div",null,React.createElement(EASEL.component.a,{className:"btn btn-primary",disabled:a||null!=n,onClick:this.onClick},null!=n?"Using ":"Use "," Easel Pro day pass"))))}})})},function(e,t,n){const a=n(36);EASEL.component.useFreeDay=EASEL.redux.connect({mapStateToProps:e=>{const t=Date.now(),n=EASEL.userSelectors.getEaselProInfo(e),a=null!=n.easel_pro_expiration_date?new Date(n.easel_pro_expiration_date):void 0;return{proAccessType:EASEL.userSelectors.easelProAccessType(t,e),isProExpired:EASEL.userSelectors.isProExpired(t,e),isProUser:EASEL.userSelectors.isProSubscriber(t,e),proExpirationDate:a,isPromoUser:EASEL.userSelectors.isPromoUser(e),freeEaselProCarvingDaysRemaining:EASEL.userSelectors.getFreeProCarvingDaysRemaining(e),easelProDayTimeLeft:EASEL.userSelectors.getEaselProDayTimeLeftDisplay(t,e)}},mapDispatchToProps:EASEL.redux.dispatchActions(EASEL.easelProActions,["startEaselProFreeDay"]),component:createReactClass({onClick(){this.props.loading||null!=this.props.easelProDayTimeLeft||this.props.startEaselProFreeDay()},render(){const{proAccessType:e,easelProDayTimeLeft:t,freeEaselProCarvingDaysRemaining:n,isProExpired:r,isPromoUser:o,isProTrialExpired:s,isProUser:i,loading:l,proExpirationDate:c}=this.props;return i||"Day Pass"===e?null:React.createElement("div",{className:"setting-block container-fluid"},React.createElement("h3",null,"Use a free day"),React.createElement("div",{className:"content-row"},React.createElement("div",null,React.createElement("div",null,"Easel accounts created prior to Jul. 21st, 2020 include 4 carving days of Easel Pro every month."),null!=t&&React.createElement("div",null,"You have",React.createElement("span",{className:"use-free-day--purple-text"},` ${t} `),"remaining on your free day."),n>0&&React.createElement("div",null,"You have",React.createElement("span",{className:"use-free-day--purple-text use-free-day__days-counter"},` ${n} `),`carving ${EASEL.string.quantify(n,"day","days")} left.`),c&&s&&React.createElement("div",null,"Your Easel Pro trial expired on $",a.formatDate(c),"."),r&&o&&React.createElement("div",null,"Your Easel Pro product key has expired on $",a.formatDate(this.props.proExpirationDate),".")),React.createElement(EASEL.component.a,{className:"btn btn-primary",disabled:l||null!=t,onClick:this.onClick},null!=t?"Using ":"Use ","  a Free Day")))}})})},function(e,t){EASEL.component.userDefaults=EASEL.redux.connect({mapStateToProps:e=>({projectDefaults:EASEL.userSelectors.getProjectDefaults(e),projectDefaultsFallback:EASEL.userSelectors.getProjectDefaultsFallback(e),bits:EASEL.bitSelectors.bits(e)}),component:createReactClass({getInitialState:()=>({updating:!1}),resetProjectPreferences(){this.setState({updating:!0}),EASEL.userAPI.resetDefaults().catch((()=>EASEL.oops("Could not reset project to default."))).finally((()=>{this.setState({updating:!1}),EASEL.stats.trackEvent(EASEL.events.resetProjectDefaults)}))},getHumanReadableBitDescription(e){const t=this.props.bits.find((t=>t.id===e.id));return`${t&&t.name} ${EASEL.bitHelper.descriptionForBit(e)}`},userHasCustomProjectDefaults(){return Object.keys(this.props.projectDefaults).length>0},render(){const{updating:e}=this.state,{projectDefaults:t,projectDefaultsFallback:n}=this.props,a=this.userHasCustomProjectDefaults()?t:n,{material:r,bit_params:o,unit:s}=a;return React.createElement("div",{className:"setting-block container-fluid"},React.createElement("h3",null,"New Project Defaults"),!this.userHasCustomProjectDefaults()&&React.createElement(React.Fragment,null,React.createElement("p",null,"You are using default new project settings."),React.createElement("p",null,"To modify how your new projects are created, open a project and select ",React.createElement("em",null,"Set as default")," from the ",React.createElement("em",null,"File")," menu.")),React.createElement("div",{className:"content-row"},React.createElement("div",{key:"user-defaults-values"},React.createElement("table",{className:"table"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,React.createElement("strong",null,"Material")),React.createElement("td",null,React.createElement("p",null,r.name),React.createElement("small",null,EASEL.units.convertFromIn(r.dimensions.x,s)," \xd7 ",EASEL.units.convertFromIn(r.dimensions.y,s)," \xd7 ",EASEL.units.convertFromIn(r.dimensions.z,s),s))),React.createElement("tr",null,React.createElement("td",null,React.createElement("strong",null,"Bit")),React.createElement("td",null,this.getHumanReadableBitDescription(o.bit))),React.createElement("tr",null,React.createElement("td",null,React.createElement("strong",null,"Detail bit")),React.createElement("td",null,o.useDetailBit?this.getHumanReadableBitDescription(o.detailBit):"N/A"))))),React.createElement("div",{key:"user-defaults-reset"},this.userHasCustomProjectDefaults()&&React.createElement("button",{className:"btn btn-primary",onClick:this.resetProjectPreferences,disabled:e},React.createElement("i",{className:"fa fa-refresh"})," Reset to default"))))}})})},function(e,t){EASEL.component.accessoryCommands=EASEL.redux.connect({mapStateToProps:e=>({accessoriesEnabled:EASEL.machineSettingsSelectors.getAccessoriesEnabled(e)}),component:createReactClass({propTypes:{id:PropTypes.string},toggleAccessories:e=>EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setAccessoriesEnabled(e.target.checked)),render(){return React.createElement("input",{id:this.props.id,type:"checkbox",onChange:this.toggleAccessories,checked:this.props.accessoriesEnabled})}})})},function(e,t){EASEL.component.bitChooser=createReactClass({propTypes:{bits:PropTypes.arrayOf(EASEL.propTypes.bit).isRequired,bit:EASEL.propTypes.bit.isRequired,onChange:PropTypes.func.isRequired,isRoughing:PropTypes.bool.isRequired},increasingWidth:(e,t)=>EASEL.bitHelper.inchWidth(e)-EASEL.bitHelper.inchWidth(t),render(){let e;if(null==this.props.bit||!this.props.bit.width||null==this.props.bit||!this.props.bit.unit)return null;const t=[],n=[],a=this.props.bits.sort(this.increasingWidth);for(e of a){const a=e.id===this.props.bit.id,r=React.createElement(EASEL.component.bitDropdownOption,{key:e.id,bit:e,description:EASEL.bitHelper.descriptionForBit(e),selected:a,onClick:this.props.onChange});"V"===e.type?n.push(r):t.push(r)}return React.createElement("div",{className:"bit-chooser"},React.createElement("div",{className:"bit-chooser__bit-container"},React.createElement("div",{className:"bit-chooser__selected-container"},React.createElement("div",{className:"bit-chooser__title"},EASEL.bitHelper.descriptionForBit(this.props.bit)+" "+(null!=this.props.bit.groupName?this.props.bit.groupName:"")),React.createElement("div",{className:"bit-chooser__image-container"},React.createElement("img",{className:"bit-chooser__selected-bit",src:null!=this.props.bit.imageURL?this.props.bit.imageURL:EASEL.assets.images.otherBit}))),React.createElement("div",{className:"bit-chooser__change-bit"},React.createElement(EASEL.component.a,{className:"dropdown-toggle","data-toggle":"dropdown"},React.createElement("div",{className:"bit-chooser__dropdown-link"},React.createElement("span",null,"Change Bit",React.createElement("i",{className:"fa fa-chevron-down"})))),React.createElement("div",{className:"bit-chooser__dropdown dropdown-menu"},React.createElement("div",{className:"bit-chooser__category-title"},"End Mills"),t,React.createElement("div",null,React.createElement("div",{className:"bit-chooser__category-title"},React.createElement("span",null,"V-bits"),React.createElement(EASEL.component.proLabel,null)),n)))))}})},function(e,t){EASEL.component.bitDropdownOption=createReactClass({propTypes:{bit:EASEL.propTypes.bit.isRequired,onClick:PropTypes.func.isRequired,description:PropTypes.string,selected:PropTypes.bool},onClick(){if(null!=this.props.bit.error)return!1;this.props.onClick(this.props.bit)},render(){const{id:e,imageURL:t,type:n,width:a}=this.props.bit;let r="bit-dropdown-option__selector";this.props.selected&&(r+=" bit-dropdown-option--selected"),null!=this.props.bit.error&&(r+=" bit-dropdown-option--disabled");const o=this.props.description||a;return React.createElement("div",{key:e,className:"bit-dropdown-option","data-bit-id":e},React.createElement(EASEL.component.a,{className:r,onClick:this.onClick},React.createElement("div",{className:"bit-dropdown-option--col"},React.createElement("span",null,o+" "+n)),React.createElement("div",{className:"bit-dropdown-option__img-container bit-dropdown-option--col"},React.createElement("img",{src:t,className:"bit-dropdown-option__bit-img"}))))}})},function(e,t){EASEL.component.bitJobSettings=createReactClass({propTypes:{bit:PropTypes.object.isRequired,feedRate:PropTypes.number.isRequired,plungeRate:PropTypes.number.isRequired,depthPerPass:PropTypes.number.isRequired,spindleSpeed:PropTypes.number,unit:PropTypes.string.isRequired,useManual:PropTypes.bool.isRequired,untested:PropTypes.bool.isRequired,isUsingSaved:PropTypes.bool,onUseManual:PropTypes.func.isRequired,onUseAutomatic:PropTypes.func.isRequired,onChangeFeedRate:PropTypes.func.isRequired,onChangePlungeRate:PropTypes.func.isRequired,onChangeDepthPerPass:PropTypes.func.isRequired,onEditCutSettings:PropTypes.func,showSpindleSpeed:PropTypes.bool.isRequired,onSetFillAngle:PropTypes.func.isRequired,onSetRampingAngle:PropTypes.func.isRequired},getSettingsDescription(){const e=EASEL.materialStore.getActiveMaterial();return this.props.useManual?React.createElement("div",{className:"bit-job-settings__settings-description"},React.createElement("span",null,"Using custom manually entered values")):this.props.isUsingSaved?React.createElement("div",{className:"bit-job-settings__settings-description"},React.createElement("span",null,"Using your "),React.createElement(EASEL.component.a,{onClick:this.props.onEditCutSettings},EASEL.bit(this.props.bit).longDescription()," + ",e.name),React.createElement("span",null," saved cut settings")):this.props.untested?React.createElement("div",{className:"bit-job-settings__settings-description"},React.createElement("span",null,"Using conservative default values")):React.createElement("div",{className:"bit-job-settings__settings-description"},React.createElement("span",null,"Using Inventables recommended values"))},render(){const e=`${this.props.unit}/min`,t=this.props.unit,n=this.props.useManual?"active":"",a=this.props.useManual?"":"active",r=this.props.useManual?"custom-values":"recommended-values",o=!this.props.useManual,s=this.props.useManual?"fa fa-question-circle hide":"fa fa-question-circle",i=this.props.untested?React.createElement("i",{className:"alert fa fa-exclamation-circle"}):this.props.isUsingSaved?React.createElement("img",{src:EASEL.assets.images.savedCutSettings}):null,l=null!=this.props.title&&React.createElement("h3",null,this.props.title,React.createElement("span",{className:"bit-job-settings__icon"},i)),{showSpindleSpeed:c}=this.props;return React.createElement("div",{"data-cut-settings-bit":this.props.id,className:"bit-job-settings"},l,React.createElement("div",{className:"setting-toggle"},React.createElement("div",{className:a,onClick:this.props.onUseAutomatic},"Automatic"),React.createElement("div",{className:n,onClick:this.props.onUseManual},"Manual")),this.getSettingsDescription(),React.createElement("div",{className:r},React.createElement("label",{htmlFor:"feed-rate-input"},"Feed rate",React.createElement(ReactBootstrap.OverlayTrigger,{placement:"left",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"job-settings-tooltip"},"These are general values that work with a variety of different bits. We will be making them more precise over time by taking specific bit and material testing data into consideration.")},React.createElement("i",{className:s}))),React.createElement(EASEL.component.utils.dimensionalInput,{value:this.props.feedRate,unit:"in",displayUnit:e,showUnit:!0,className:"bit-job-settings__input",precision:1,id:"feed-rate-input",readonly:o,onChange:this.props.onChangeFeedRate}),React.createElement("label",{htmlFor:"plunge-rate-input"},"Plunge rate"),React.createElement(EASEL.component.utils.dimensionalInput,{value:this.props.plungeRate,unit:"in",displayUnit:e,showUnit:!0,className:"bit-job-settings__input",precision:1,id:"plunge-rate-input",readonly:o,onChange:this.props.onChangePlungeRate}),React.createElement("label",{htmlFor:"depth-per-pass-input"},"Depth per pass"),React.createElement(EASEL.component.utils.dimensionalInput,{value:this.props.depthPerPass,unit:"in",displayUnit:t,showUnit:!0,className:"bit-job-settings__input",id:"depth-per-pass-input",readonly:o,onChange:this.props.onChangeDepthPerPass}),c&&React.createElement("div",null,React.createElement("label",{htmlFor:"spindle-rpm-input"},"Spindle Speed (RPM)"),React.createElement("input",{value:this.props.spindleSpeed,id:"spindle-rpm-input",className:"bit-job-settings__input",type:"number",step:"100",readOnly:o,onChange:this.props.onChangeSpindleSpeed}))),React.createElement(EASEL.component.fillStrategy,{setFillAngle:this.props.onSetFillAngle,fillAngle:this.props.fillAngle}),React.createElement(EASEL.component.rampingSettings,{setRampingAngle:this.props.onSetRampingAngle,rampingAngle:this.props.rampingAngle}))}})},function(e,t){EASEL.component.cutStrategyOption=createReactClass({iconFromPath:e=>React.createElement("svg",{viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},React.createElement("path",{d:e})),render(){const{iconPath:e,label:t,active:n,onClick:a}=this.props;let r;null!=t&&(r=`cut-strategy-option--${t.toLowerCase().split(" ").join("-")}__button`);const[o,s]=n?["cut-strategy-option cut-strategy-option--active","btn btn-primary"]:["cut-strategy-option","btn btn-default"];return React.createElement("div",{className:o},React.createElement("button",{className:s,onClick:a,id:r},this.iconFromPath(e)),null!=t&&React.createElement("label",{htmlFor:r},t))}})},function(e,t){EASEL.component.detailBitListItem=EASEL.redux.connect({mapStateToProps:e=>({bit:EASEL.bitSelectors.bit(e),bits:EASEL.bitSelectors.bits(e),detailBit:EASEL.bitSelectors.detailBit(e)||{},useDetailBit:EASEL.bitSelectors.useDetailBit(e)}),mapDispatchToProps:e=>({setBitParams(t){e(EASEL.bitActionCreators.setBitParams(t))}}),component:createReactClass({getInitialState:()=>({}),bitsForDetailing(){return EASEL.bitSelectors.bitsForDetailing(this.props.useDetailBit,this.props.bit,this.props.bits)},vBitDetail(){const e=this.props.bit,t=EASEL.jobSettingsStore.settings();if(EASEL.undoActions.beginGroup("Use V Bit as Detail Bit"),this.props.setBitParams({bit:{id:"INVENTABLES_GRAY_BIT",width:.125,unit:"in",type:"Upcut",tipAngle:null},detailBit:e,useDetailBit:!0}),t.bit.useCustom){const{bitKeys:e}=EASEL.jobSettingsConstants;EASEL.jobSettingsActions.setFeedRate(e.detailBit,t.bit.feedRate),EASEL.jobSettingsActions.setPlungeRate(e.detailBit,t.bit.plungeRate),EASEL.jobSettingsActions.setDepthPerPass(e.detailBit,t.bit.depthPerPass),EASEL.jobSettingsActions.setUseCustom(e.detailBit,!0,t.bit),EASEL.jobSettingsActions.setUseCustom(e.bit,!1)}EASEL.undoActions.endGroup(),EASEL.flux.events.emit("toggle-main-bit-dropdown")},detailWithVBit(){const e={text:"Yes, use V-Bit for detailing",action:this.vBitDetail};EASEL.alert("Make V Bit Detail Bit?","In order to use a second bit in combination with a V Bit, you must make the V Bit the detail bit and choose a flat bit as the main bit. Would you like to use your current V Bit as the detail bit?",[{text:"Cancel"},e])},onSelectDetailBit(){"V"===this.props.bit.type?this.detailWithVBit():(this.setState({justActivatedDetailBit:!0}),this.props.setBitParams({useDetailBit:!0}))},render(){return this.props.useDetailBit?React.createElement("div",{id:"btn-bit-size",className:"dropdown"},React.createElement(EASEL.component.detailBitSelector,{open:this.state.justActivatedDetailBit,bit:this.props.detailBit,bits:this.bitsForDetailing()})):React.createElement(ReactBootstrap.OverlayTrigger,{placement:"bottom",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"detail-bit-tooltip"},"Use additional bit")},React.createElement(EASEL.component.a,{id:"btn-add-bit",onClick:this.onSelectDetailBit},"+"))}})})},function(e,t){EASEL.component.detailBitSelector=createReactClass({propTypes:{bit:EASEL.propTypes.bit.isRequired,bits:PropTypes.arrayOf(EASEL.propTypes.bit).isRequired,open:PropTypes.bool},selectBit(e,t,n,a,r,o){EASEL.store.dispatch(EASEL.bitActionCreators.setBitParams({detailBit:{id:e,width:t,unit:n,tipAngle:a,type:r,source:o}}))},deactivateDetailBit(){EASEL.store.dispatch(EASEL.bitActionCreators.deactivateDetailBit()),EASEL.store.dispatch(EASEL.walkthroughActionCreators.setPassType("roughing"))},toggleDropdown(){$("#detail-bit-link").dropdown("toggle")},openHelpWindow(){window.open("https://inventables.zendesk.com/hc/en-us/articles/360012453174-Walkthrough-Tutorial-Two-Stage-Carves-Roughing-and-Detail-Carves-","_blank")},render(){let e="detail-bit";return this.props.open&&(e+=" open"),React.createElement("div",{className:e},React.createElement("a",{id:"detail-bit-link",href:"#",className:"btn-setting dropdown-toggle","data-toggle":"dropdown"},React.createElement("label",null,"Detail bit:",React.createElement("span",{onClick:this.openHelpWindow},React.createElement("i",{className:"fa fa-question-circle"}))),React.createElement("span",{className:"current-setting"},EASEL.bitHelper.descriptionForBit(this.props.bit))),React.createElement(EASEL.component.a,{className:"remove-bit",onClick:this.deactivateDetailBit},"\xd7"),React.createElement("div",{className:"dropdown-menu bit-dropdown"},React.createElement(EASEL.component.bitAndMaterialRecommendationsLink,null),React.createElement(EASEL.component.openToolboxLink,{subtab:"bits"}),React.createElement("div",{"data-dont-close-from-inside":!0},React.createElement(EASEL.component.facetedBitSelector,{bit:this.props.bit,bits:this.props.bits,onChange:this.selectBit,isMain:!1,toggleDropdown:this.toggleDropdown})),React.createElement("p",{className:"center-text",style:{paddingBottom:0,paddingTop:20}},React.createElement("i",{className:"fa fa-exclamation-circle"})," Power off your machine before changing bits or collets.")))}})},function(e,t){EASEL.component.fillStrategy=createReactClass({setOffset(){this.props.setFillAngle(null)},setRasterX(){this.props.setFillAngle(0)},setRasterY(){this.props.setFillAngle(90)},offsetPath:()=>"M 33,3 33,26 10,26 10,10 26,10 26,19 17,19 17,17 24,17 24,12 12,12 12,24 31,24 31,5 5,5 5,31 30,31 30,28 35,32 30,36 30,33 3,33 3,3 Z",xRasterPath:()=>"M 30,3 30,0 35,4 30,8 30,5 5,5 5,10 33,10 33,19 5,19 5,24 33,24 33,33 3,33 3,31 31,31 31,26 3,26 3,17 31,17 31,12 3,12 3,3 Z",yRasterPath:()=>"M 5,3 5,31 10,31 10,3 19,3 19,31 24,31 24,3 33,3 33,30 36,30 32,35 28,30 31,30 31,5 26,5 26,33 17,33 17,5 12,5 12,33 3,33 3,3 Z",render(){const e=React.createElement("div",null,React.createElement("p",null,"The ",React.createElement("b",null,"offset ")," fill method starts at the center of an area and works its way around the edges of your design carving outward. ",React.createElement("b",null,"Raster"),"moves back and forth in a linear direction."),React.createElement("p",null,"Using raster along the wood grain helps hides tool marks and leaves a clean, smooth carved pocket."),React.createElement("p",null,"Learn more on our ",React.createElement("a",{href:"https://easel.inventables.com/features/raster-fill",target:"_blank",rel:"noreferrer"},"Raster overview page"),"."));return React.createElement("div",{className:"fill-strategy"},React.createElement("h5",{className:"fill-strategy__header"},"Fill Method",React.createElement(EASEL.component.utils.hoverPopover,{id:"offset-warning",placement:"top",popoverContent:e},React.createElement("i",{className:"fa fa-question-circle"}))),React.createElement("div",{className:"fill-strategy__option-groups"},React.createElement("div",{className:"fill-strategy__option-group fill-strategy__option-group--offset"},React.createElement("h5",{className:"fill-strategy__option-group-header"},"Offset"),React.createElement("div",{className:"fill-strategy__options"},React.createElement(EASEL.component.cutStrategyOption,{iconPath:this.offsetPath(),active:null==this.props.fillAngle,onClick:this.setOffset}))),React.createElement("div",{className:"fill-strategy__option-group fill-strategy__option-group--raster"},React.createElement("h5",{className:"fill-strategy__option-group-header"},"Raster",React.createElement(EASEL.component.utils.hoverPopover,{id:"raster-filling-warning",placement:"top",popoverTitle:"Raster Filling",popoverContent:React.createElement("span",null,"Carving with raster fill requires an",React.createElement("a",{href:"https://inventables.zendesk.com/hc/en-us/articles/360012849133-Easel-Pro-FAQ-and-Overview",target:"_blank",rel:"noreferrer"}," Easel Pro")," subscription.")},React.createElement(EASEL.component.proLabel,null))),React.createElement("div",{className:"fill-strategy__options"},React.createElement(EASEL.component.cutStrategyOption,{iconPath:this.xRasterPath(),label:"X axis",active:0===this.props.fillAngle,onClick:this.setRasterX}),React.createElement(EASEL.component.cutStrategyOption,{iconPath:this.yRasterPath(),label:"Y axis",active:90===this.props.fillAngle,onClick:this.setRasterY})))))}})},function(e,t,n){const a=n(36);EASEL.component.jobSettingsComponent=createReactClass({getInitialState(){const e=this.getState();return e.dismissedRestoreSavedPopover=!1,e},getJobSettingsForBit(e,t){const n=EASEL.jobSettingsStore.settings(),a=t===EASEL.jobSettingsConstants.bitKeys.bit?this.props.bit:this.props.detailBit,r=t===EASEL.jobSettingsConstants.bitKeys.bit?n.bit:n.detailBit,o=EASEL.utility.jobSettingsCalculator(t),s=o.isUsingLoadedSavedSettings(),i=o.deniedAccessToSavedSettings(),l=o.savedSettings(),c=EASEL.merge(r,o.getSettings());return EASEL.merge({bit:a,bitKey:t,untested:r.untested,deniedUsingSaved:i,isUsingSaved:s,savedCutSettings:l},c)},getState(){const e={material:EASEL.materialStore.getActiveMaterial()},t=[this.getJobSettingsForBit(e,EASEL.jobSettingsConstants.bitKeys.bit)];return this.props.useDetailBit&&t.push(this.getJobSettingsForBit(e,EASEL.jobSettingsConstants.bitKeys.detailBit)),e.settingsMappings=t.filter((e=>null!=e.bit)),e.untested=e.settingsMappings.some((e=>e.untested)),e.isUsingSaved=e.settingsMappings.some((e=>e.isUsingSaved)),e.deniedUsingSaved=e.settingsMappings.some((e=>e.deniedUsingSaved)),e.untestedWasUpdated=!1,e},updateState(){this.setState(this.getState())},componentDidUpdate(e){e.easelProAccessType===this.props.easelProAccessType&&(e.bit&&e.bit.id)===(this.props.bit&&this.props.bit.id)&&(e.detailBit&&e.detailBit.id)===(this.props.detailBit&&this.props.detailBit.id)&&e.useDetailBit===this.props.useDetailBit||this.updateUntested(),e.machineType===this.props.machineType&&e.machineProfileId===this.props.machineProfileId||this.updateState()},componentDidMount(){EASEL.materialStore.addChangeListener(this.updateState),EASEL.jobSettingsStore.addChangeListener(this.updateState),EASEL.store.subscribeWithSelector(EASEL.cutSettingsSelectors.getCutSettings,this.updateState),EASEL.flux.events.addListener("user-changed-job-settings",this.updateUntested)},componentWillUnmount(){EASEL.flux.events.removeListener("user-changed-job-settings",this.updateUntested)},updateUntested(){this.setState(EASEL.merge(this.getState(),{untestedWasUpdated:!0}))},setFeedRate(e,t,n,a){EASEL.stats.trackEventOnce("Cut Settings - changed setting",{value:t,source:"feed rate"}),EASEL.jobSettingsActions.setFeedRate(e,a)},setPlungeRate(e,t,n,a){EASEL.stats.trackEventOnce("Cut Settings - changed setting",{value:t,source:"plunge rate"}),EASEL.jobSettingsActions.setPlungeRate(e,a)},setDepthPerPass(e,t,n,a){EASEL.stats.trackEventOnce("Cut Settings - changed setting",{value:t,source:"depth per pass"}),EASEL.jobSettingsActions.setDepthPerPass(e,a)},setSpindleSpeed(e,t){const n=null!=t?parseInt(t.target.value):null;EASEL.stats.trackEventOnce("Cut Settings - changed setting",{value:n,source:"spindle speed"}),EASEL.jobSettingsActions.setSpindleSpeed(e,n)},useAutomatic(e){EASEL.stats.trackEventOnce("Cut Settings - chose automatic mode"),EASEL.jobSettingsActions.setUseCustom(e,!1)},setFillAngle(e,t){EASEL.jobSettingsActions.setFillAngle(e,t)},setRampingAngle(e,t){EASEL.stats.trackEvent("Cut Settings - set ramping angle",{"Ramping Angle (deg)":t,"Pass Type":e}),EASEL.jobSettingsActions.setRampingAngle(e,t)},useManual(e){EASEL.stats.trackEventOnce("Cut Settings - chose manual mode"),EASEL.jobSettingsActions.setUseCustom(e,!0)},bitStringFromKey:e=>e===EASEL.jobSettingsConstants.bitKeys.bit?"roughing":"detail",untestedBitsDescription(){if(this.state.untested){if(1===this.state.settingsMappings.length)return"bit";{const e=[];for(let{bitKey:t,untested:n}of this.state.settingsMappings)n&&e.push(this.bitStringFromKey(t));return 1===e.length?`${e[0]} bit`:`${e.join(" and ")} bits`}}},savedCutSettingsDateElements(){const e=[];for(let t=0;t<this.state.settingsMappings.length;t++){const{savedCutSettings:n,bitKey:r}=this.state.settingsMappings[t];if(null!=n&&n.updatedAt){const o=r===EASEL.jobSettingsConstants.bitKeys.bit?"roughing":"detail";e.push(React.createElement("span",{key:r},t>0&&React.createElement("span",null," and"),React.createElement("span",null," with the "),React.createElement("strong",null,`${o} bit`),React.createElement("span",null,` from ${a.formatDate(new Date(n.updatedAt))}`)))}}return e},dismissRestoreSavedPopover(){this.setState(EASEL.merge(this.getState(),{dismissedRestoreSavedPopover:!0}))},showUserModal(){EASEL.stats.trackEvent(EASEL.events.showedAccountModal,{proRequired:!0,source:"Job Settings"}),EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalAccountTab())},showCutSettings(){EASEL.store.dispatch(EASEL.toolboxActionCreators.showCutSettingsToolboxSubTab())},getPopover(){let e;return this.state.untested?(e=React.createElement("i",{className:"alert fa fa-exclamation-circle"}),React.createElement(EASEL.component.utils.clickPopover,{id:"bit-job-settings__untested-warning",className:"bit-job-settings__untested-warning",placement:"bottom",popoverClass:"popover__untested-bit",popoverTitle:React.createElement("span",{className:"bit-job-settings__popover-title"},e," CAUTION"),popoverContent:React.createElement("span",{},`Inventables hasn't tested this combination of material and ${this.untestedBitsDescription()}. You may need to experiment to find optimal settings.`),showOnMount:this.state.untestedWasUpdated},e)):this.state.isUsingSaved?(e=React.createElement("img",{src:EASEL.assets.images.savedCutSettings}),React.createElement(EASEL.component.utils.clickPopover,{id:"bit-job-settings__using-saved",className:"bit-job-settings__untested-warning",placement:"bottom",popoverClass:"popover__saved-cut-setting",popoverTitle:React.createElement("span",{className:"bit-job-settings__popover-title"},e," Loaded Saved Cut Settings"),popoverContent:React.createElement("div",{},React.createElement("span",null,"Loaded your saved cut settings for "),React.createElement("strong",null,`${EASEL.materialStore.getActiveMaterial().displayName}`),this.savedCutSettingsDateElements()),showOnMount:!1},e)):this.state.deniedUsingSaved?React.createElement(EASEL.component.utils.clickPopover,{id:"bit-job-settings__denied-saved",className:"bit-job-settings__untested-warning",placement:"bottom",popoverClass:"popover__denied-cut-setting",popoverTitle:React.createElement("span",{className:"bit-job-settings__popover-title"},React.createElement(EASEL.component.proLabel,{type:"left"}),"Upgrade Subscription"),popoverContent:React.createElement("div",{},React.createElement("span",null,"Easel has saved settings for "),React.createElement("strong",null,`${EASEL.materialStore.getActiveMaterial().displayName}`),this.savedCutSettingsDateElements(),React.createElement("span",null,". Do you want to apply your saved settings to this project?"),React.createElement("div",{className:"bit-job-settings__popover-link"},React.createElement(EASEL.component.a,{onClick:()=>this.showUserModal()},"Upgrade to Easel Pro"))),showOnMount:!1},React.createElement(EASEL.component.proLabel,null)):void 0},render(){if(!(this.state.settingsMappings.length>0))return null;const e=this.getPopover(),t=this.state.settingsMappings.length>1,n=EASEL.machineTypeHelper.supportsSpindleSpeed(this.props.machineType,this.props.spindleType,this.props.automaticSpindleControl);return React.createElement("div",null,React.createElement(EASEL.component.a,{href:"#",className:"dropdown-toggle job-settings__dropdown-toggle","data-toggle":"dropdown",onClick:function(){EASEL.stats.trackEventOnce("Cut Settings - open panel tab")}},"Cut Settings",e),React.createElement("div",{className:"dropdown-menu cut-dropdown","data-dont-close-from-inside":""},React.createElement("div",{className:"cut-dropdown__bits"},(()=>{const e=[];for(let{bit:a,bitKey:r,feedRate:o,plungeRate:s,depthPerPass:i,fillAngle:l,rampingAngle:c,isUsingSaved:p,spindleSpeed:u,useCustom:d,untested:h}of this.state.settingsMappings)e.push(React.createElement(EASEL.component.bitJobSettings,{bit:a,id:r,key:r,title:t?r===EASEL.jobSettingsConstants.bitKeys.bit?"Roughing":"Detail":void 0,feedRate:o,plungeRate:s,depthPerPass:i,spindleSpeed:null==u?this.props.defaultSpindleSpeed:u,unit:this.props.unit,fillAngle:l,rampingAngle:c,isUsingSaved:p,useManual:null!=d&&d,untested:null!=h&&h,onUseManual:this.useManual.bind(this,r),onUseAutomatic:this.useAutomatic.bind(this,r),onChangeFeedRate:this.setFeedRate.bind(this,r),onChangePlungeRate:this.setPlungeRate.bind(this,r),onChangeDepthPerPass:this.setDepthPerPass.bind(this,r),onChangeSpindleSpeed:this.setSpindleSpeed.bind(this,r),onSetFillAngle:this.setFillAngle.bind(this,r),onSetRampingAngle:this.setRampingAngle.bind(this,r),onEditCutSettings:this.showCutSettings,showSpindleSpeed:n}));return e})())))}}),EASEL.component.jobSettings=EASEL.redux.connect({component:EASEL.component.jobSettingsComponent,mapStateToProps:e=>({easelProAccessType:EASEL.userSelectors.easelProAccessType(Date.now(),e),spindleType:EASEL.machineSettingsSelectors.getSpindleType(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e),automaticSpindleControl:EASEL.machineSettingsSelectors.getAutomaticSpindleControl(e),machineProfileId:EASEL.machineSettingsSelectors.getMachineProfileId(e),bit:EASEL.bitSelectors.bit(e),detailBit:EASEL.bitSelectors.detailBit(e),useDetailBit:EASEL.bitSelectors.useDetailBit(e),unit:EASEL.unitSelectors.getPreferredUnit(e),defaultSpindleSpeed:EASEL.machineSettingsSelectors.getSpindleRPM(e)})})},function(e,t){EASEL.component.layerThickness=createReactClass({updateTopThickness(e,t,n){const a=this.props.materialDepth,r=EASEL.layerThickness.thicknessToDepths(a,this.props.layers.map((e=>e.relativeTo)),Number(n)),o=[];for(let s=0;s<r.length;s++){const e=r[s],{relativeTo:t}=this.props.layers[s];o.push({bottomZ:e,relativeTo:t})}if(EASEL.layerThickness.validate(a,o))return EASEL.materialActions.setLayerDepths(r)},layerCountClassName(){return 2===this.props.layers.length?"two-layer":"three-layer"},explanationText(){const e=2===this.props.layers.length;return`Input ${e?"upper":"outer"} layer thickness, and the ${e?"lower":"inner"} layer will auto populate based on the total thickness previously entered.`},render(){return React.createElement("div",{className:"layer-thickness"},React.createElement(EASEL.component.utils.collapsiblePanel,{initiallyExpanded:!1,header:React.createElement("span",{},"Set layer thickness")},React.createElement("div",{className:"layer-thickness__explanation"},React.createElement("i",{className:"fa fa-question-circle"}),React.createElement("div",{className:"layer-thickness__explanation-text"},this.explanationText())),React.createElement("div",{className:"layer-thickness__diagram"},React.createElement("div",{className:"left-pointers"},React.createElement("div",{className:this.layerCountClassName()},React.createElement("div",{className:"middle-layer-label"},"B"),React.createElement("div",{className:"middle-layer-pointer pointer-arrow"}))),React.createElement("div",{className:"layer-thickness__color-diagram"},React.createElement(EASEL.component.materialThumbnailIcon,{layers:this.props.layers})),React.createElement("div",{className:"right-pointers"},React.createElement("div",{className:`upper-layer ${this.layerCountClassName()}`},React.createElement("div",{className:"upper-layer-pointer pointer-arrow"}),React.createElement("div",{className:"upper-layer-label"},"A")),3===this.props.layers.length?React.createElement("div",{className:"lower-layer"},React.createElement("div",{className:"lower-layer-pointer pointer-arrow"}),React.createElement("div",{className:"lower-layer-label"},"A")):void 0)),React.createElement("div",null,React.createElement("div",{className:"layer-thickness__input"},React.createElement("label",null,"A"),React.createElement(EASEL.component.utils.dimensionalInput,{value:EASEL.layerThickness.outerLayerThickness(this.props.materialDepth,this.props.layers),id:"upper-layer-thickness-input",unit:"in",displayUnit:this.props.displayUnit,showUnit:!0,precision:EASEL.units.defaultPrecision[this.props.displayUnit],onChange:this.updateTopThickness})),React.createElement("div",{className:"layer-thickness__input"},React.createElement("label",null,"B"),React.createElement(EASEL.component.utils.dimensionalInput,{value:EASEL.layerThickness.innerLayerThickness(this.props.materialDepth,this.props.layers),id:"lower-layer-thickness-input",unit:"in",displayUnit:this.props.displayUnit,showUnit:!0,precision:EASEL.units.defaultPrecision[this.props.displayUnit],readonly:!0})))))}})},function(e,t){EASEL.component.mainBitSelector=EASEL.redux.connect({mapStateToProps:e=>({bits:EASEL.bitSelectors.bits(e),usingDetailBit:EASEL.bitSelectors.useDetailBit(e),currentDetailBit:EASEL.bitSelectors.detailBit(e),bit:EASEL.bitSelectors.bit(e)}),mapDispatchToProps:e=>({setBitParams(t){e(EASEL.bitActionCreators.setBitParams(t))}}),component:createReactClass({propTypes:{bit:EASEL.propTypes.bit,bits:PropTypes.arrayOf(EASEL.propTypes.bit).isRequired,setBitParams:PropTypes.func.isRequired},roughingBits(){return EASEL.bitSelectors.bitsForRoughing(this.props.usingDetailBit,this.props.currentDetailBit,this.props.bits)},componentDidMount(){EASEL.flux.events.addListener("toggle-main-bit-dropdown",(()=>{this.toggleDropdown()}))},selectBit(e,t,n,a,r,o){this.props.setBitParams({bit:{id:e,width:t,unit:n,tipAngle:a,type:r,source:o}})},toggleDropdown(){$("#main-bit-link").dropdown("toggle")},render(){const e=this.props.bit,t=null!=e?EASEL.bitHelper.descriptionForBit(e):null;return React.createElement("div",{className:"main-bit"},React.createElement("a",{id:"main-bit-link",href:"#",className:"btn-setting dropdown-toggle","data-toggle":"dropdown",onClick:this.rerender},React.createElement("label",null,"Bit:"),React.createElement("span",{className:"current-setting"},t)),React.createElement("div",{id:"main-bit-selector",className:"dropdown-menu bit-dropdown"},React.createElement(EASEL.component.bitAndMaterialRecommendationsLink,null),React.createElement(EASEL.component.openToolboxLink,{subtab:"bits"}),React.createElement("div",{"data-dont-close-from-inside":!0},React.createElement(EASEL.component.facetedBitSelector,{bit:this.props.bit,bits:this.roughingBits(),onChange:this.selectBit,isMain:!0,toggleDropdown:this.toggleDropdown}),React.createElement("p",{className:"bit-table__warning-text"},React.createElement("i",{className:"fa fa-exclamation-circle"})," Power off your machine before changing bits or collets."))))}})})},function(e,t,n){const a=n(16);EASEL.component.materialDimensionsComponent=createReactClass({propTypes:{x:PropTypes.number.isRequired,y:PropTypes.number.isRequired,z:PropTypes.number.isRequired,unit:PropTypes.string.isRequired,activeMaterialTextureUrl:PropTypes.string.isRequired,onDimensionChange:PropTypes.func.isRequired},getInitialState(){return{enableOverlap:this.props.overlapDistance>0||this.isUsingVbit()}},componentDidMount(){EASEL.materialStore.addChangeListener(this.handleChange),EASEL.editorStore.addChangeListener(this.handleChange)},componentWillUnmount(){EASEL.materialStore.removeChangeListener(this.handleChange),EASEL.editorStore.removeChangeListener(this.handleChange)},componentDidUpdate(){this.isUsingVbit()&&!this.state.enableOverlap&&this.props.setTileOverlap(!0)},handleChange(){this.forceUpdate()},onThicknessChange(e,t,n,a){const r=this.props.z,o=EASEL.materialStore.getActiveMaterial();if((null!=o.layerNames&&o.layerNames.length)>1&&!EASEL.layerThickness.validate(t,o.color.layers))return EASEL.stats.trackEvent("Material Thickness Error",{source:"xyz input, layer validation",newThickness:t,currentThickness:r}),EASEL.alert("Cannot change material thickness",`Your material layer thicknesses exceed ${n} ${a}.          Reduce the layer thicknesses first, and then adjust the material thickness.`),void this.forceUpdate();const s=EASEL.volumeStore.getVolumes().filter((e=>e.cut.depth!==r)).map((e=>e.cut.depth)),i=Math.max(...s);return t===i?(EASEL.stats.trackEvent("Material Thickness Error",{source:"xyz input",newThickness:t,currentThickness:r,maxPartialDepth:i}),EASEL.alert("Are you sure you want to change material thickness?",`Some objects in your design are set to carve at ${n} ${a}.         These objects will change from engravings to cutouts. Are you sure         you want to change the thickness?`,[{text:"Change Thickness",action:()=>this.props.onDimensionChange(e,t)},{text:"Cancel",action:()=>this.forceUpdate()}])):t<=i?(EASEL.stats.trackEvent("Material Thickness Error",{source:"xyz input",newThickness:t,currentThickness:r,maxPartialDepth:i}),EASEL.alert("Cannot change material thickness",`Some objects in your design are set to carve deeper than ${n} ${a}. Make the depths shallower first, and then adjust the thickness.`),this.forceUpdate()):this.props.onDimensionChange(e,t)},toggleOverlap(e){this.setState({enableOverlap:e}),new Promise((t=>{this.props.setTileOverlap(e),t()})).then((()=>{this.props.setTileSizes(null),this.props.setSelectedTile(this.props.firstTile.explode())}))},toggleTiling(e){e?this.props.setSelectedTile(this.props.firstTile.explode()):this.props.setSelectedTile(null)},isUsingVbit(){return this.props.bit.type===a.v||this.props.useDetailBit&&this.props.detailBit.type===a.v},selectNumTiles(e){const t=parseInt(e.target.value);new Promise((e=>{const{workArea:n,overlapDistance:a,unit:r}=this.props,o=EASEL.tilingCalculator.defaultTileSizes(n,a,r,t);this.props.setTileSizes(o),e()})).then((()=>{this.props.setSelectedTile(this.props.firstTile.explode())}))},getRequiredTooltip:(e,t)=>React.createElement(ReactBootstrap.OverlayTrigger,{trigger:["hover","focus"],placement:"right",overlay:React.createElement(ReactBootstrap.Popover,{id:"required-overlap-icon",title:e},React.createElement("span",null,t))},React.createElement("i",{className:"fa fa-exclamation-circle"})),render(){return React.createElement("div",null,React.createElement("div",{className:"panel-heading"},React.createElement("h4",{className:"panel-title"},"Material Dimensions")),React.createElement("div",{className:"panel-body"},React.createElement("div",{id:"dimensions"},React.createElement("div",null,React.createElement("div",null,React.createElement("strong",null,"Tiling - Oversize material carving"),React.createElement("p",null,"To carve pieces larger than the machine\u2019s work area, enter the desired length.",React.createElement(EASEL.component.proLabel,null)),React.createElement("a",{href:"/features/tiling/",target:"_blank"},"Learn More")),React.createElement("div",{className:"tiling__toggle","data-dont-close-from-inside":""},"Enable tiling",this.props.allTiles.length<=1&&this.getRequiredTooltip("Need larger material","Material must be larger than machine in the Y direction"),React.createElement(EASEL.component.toggleSwitch,{id:"enable-tiling-switch",enabled:null!==this.props.selectedTile,disabled:this.props.allTiles.length<=1,offLabel:"No",onLabel:"Yes",onToggle:this.toggleTiling})),this.props.selectedTile&&[React.createElement("div",{key:"num-tile-selector"},React.createElement("label",{htmlFor:"num-tile-selector"},"Number of tiles"),React.createElement("select",{id:"num-tile-selector",className:"form-control",value:null!=this.props.tileSizes?this.props.tileSizes.length:0,onChange:this.selectNumTiles},EASEL.tilingCalculator.numTileOptions(this.props.overlapDistance,this.props.workArea,this.props.y).map((e=>React.createElement("option",{key:e,value:e},e))))),React.createElement("div",{className:"tiling__toggle","data-dont-close-from-inside":"",key:"tile-overlap-toggle"},React.createElement("span",null,"Overlap tiles",this.isUsingVbit()&&this.getRequiredTooltip("Overlap required","Tiling with v-carve requires overlap to avoid 'ridges' on the material edges")),React.createElement(EASEL.component.toggleSwitch,{enabled:this.state.enableOverlap,disabled:this.isUsingVbit(),offLabel:"No",onLabel:"Yes",onToggle:this.toggleOverlap}))]),React.createElement("div",{id:"dimensions-inputs"},React.createElement("div",{id:"dimension-inputs-x"},React.createElement(EASEL.component.utils.materialDimensionInput,{name:"x",id:"material-x-input",value:this.props.x,displayUnit:this.props.unit,onDimensionChange:this.props.onDimensionChange,label:"Width (X)"})),React.createElement("div",{id:"dimension-inputs-y",className:null!==this.props.selectedTile?"tiling-border":""},React.createElement(EASEL.component.utils.materialDimensionInput,{name:"y",id:"material-y-input",value:this.props.y,displayUnit:this.props.unit,onDimensionChange:this.props.onDimensionChange,label:"Length (Y)"}),React.createElement(EASEL.component.tilingSettings,{selectedTile:this.props.selectedTile,allTiles:this.props.allTiles,workArea:this.props.workArea,setSelectedTile:this.props.setSelectedTile,tileSizes:this.props.tileSizes,setTileSizes:this.props.setTileSizes,unit:this.props.unit,tileOverlap:this.props.overlapDistance})),React.createElement("div",{id:"dimension-inputs-z"},React.createElement(EASEL.component.utils.materialDimensionInput,{name:"z",id:"material-z-input",value:this.props.z,displayUnit:this.props.unit,onDimensionChange:this.onThicknessChange,label:"Thickness (Z)"}))),React.createElement("div",null,React.createElement("div",{id:"dimension-graphic"},React.createElement("img",{src:EASEL.assets.images.materialDimensions})),null!==this.props.selectedTile&&React.createElement("div",{className:"material-dimensions__tiling-img-container"},React.createElement("img",{className:"material-dimensions__tiling-img",src:EASEL.assets.images.tilingNumbered}),React.createElement("div",null,"How to position your piece"))))))}}),EASEL.component.materialDimensions=EASEL.redux.connect({mapDispatchToProps:e=>({setSelectedTile(t){e(EASEL.tileActionCreators.setSelectedTile(t))},setTileOverlap(t){e(EASEL.tileActionCreators.setTileOverlap(t))},setTileSizes(t){e(EASEL.tileActionCreators.setTileSizes(t))}}),mapStateToProps:e=>({isBetaTester:EASEL.userSelectors.isBetaTester(e),isTileSelected:EASEL.tileSelectors.isTileSelected(e),selectedTile:EASEL.tileSelectors.getSelectedTile(e),allTiles:EASEL.tileSelectors.getAllTiles(e),overlapDistance:EASEL.tileSelectors.getTileOverlapDistance(e),workArea:EASEL.machineSettingsSelectors.getWorkArea(e),bit:EASEL.bitSelectors.bit(e),detailBit:EASEL.bitSelectors.detailBit(e),useDetailBit:EASEL.bitSelectors.useDetailBit(e),firstTile:EASEL.tileSelectors.getFirstTile(e),tileSizes:EASEL.tileSelectors.getTileSizes(e)}),component:EASEL.component.materialDimensionsComponent})},function(e,t){EASEL.component.materialLibrary=createReactClass({getInitialState:()=>({openDropdown:null}),closeDropdowns(){this.setState({openDropdown:null})},toggleDropdown(e){this.state.openDropdown===e?this.closeDropdowns():this.setState({openDropdown:e})},toggleMaterialTypesDropdown(e){e.stopPropagation(),this.toggleDropdown("material-types")},toggleColorsDropdown(e){e.stopPropagation(),this.toggleDropdown("colors")},toggleCustomColorsDropdown(e,t){t.stopPropagation(),this.toggleDropdown(`custom-color[${e+1}]`)},setMaterial(e){this.props.onSetMaterial(e)},setColor(e){this.props.onSetMaterialColor(e.name)},getClassNamesForDropdown(e){const t=e.split("[")[0];return this.state.openDropdown===e?`material-library__${t} open`:`material-library__${t}`},materialHasVariations(){return null!=this.props.activeMaterial.variations},materialIsUsingCustomColors(){if(null!=this.props.activeMaterial.variations){return!this.props.activeMaterial.variations.map((e=>e.name)).includes(this.props.activeMaterialVariation.name)}},thumbnailUrl:e=>e.thumbnailUrl?e.thumbnailUrl:e.category?EASEL.materialStore.imageForMaterialCategory(e.category):EASEL.assets.images.otherMaterial,layerColorPicker(e,t=null){null==e&&(e=0);const[n,a,r]=this.props.activeMaterial.color.layers[e].rgb;return React.createElement("div",{className:this.getClassNamesForDropdown(`custom-color[${e+1}]`),key:`custom-color[${e+1}]`},React.createElement(EASEL.component.a,{className:"material-library__dropdown-link",onClick:this.toggleCustomColorsDropdown.bind(this,e)},React.createElement("span",{className:"material-library__color-sample",style:{background:`rgb(${n}, ${a}, ${r})`}}),t&&React.createElement("label",null,t),React.createElement("i",{className:"fa fa-caret-down"})),React.createElement("div",{className:"material-library__dropdown dropdown-menu"},React.createElement(EASEL.component.utils.colorPicker,{onSetColor:(t,n,a)=>this.props.onSetLayerColor(e,t,n,a)})))},materialRow(e){const t=this.thumbnailUrl(e),n=e.widthX||e.lengthY||e.thicknessZ?EASEL.units.formatDimensions([e.widthX,e.lengthY,e.thicknessZ],this.props.unit):null;return React.createElement(EASEL.component.materialThumbnail,{key:e.id,name:e.displayName,variations:e.variations,dimensions:n,source:e.source,thumbnailUrl:t,storeUrl:e.storeUrl,onClick:this.setMaterial.bind(this,e),unit:this.props.unit})},materialHeaderRow(e){let t;switch(e){case"user_added_custom":t="My Toolbox";break;case"inventables":t="Inventables Toolbox";break;default:t="Easel"}return React.createElement("li",{key:`material-header-[${e}]`,className:"material-header-row"},React.createElement("h4",{className:"material-title"},t))},groupMaterial(){const{materialRow:e}=this,{activeMaterial:t}=this.props,n=[],a=this.props.materials.reduce((function(n,a){switch(a.id===t.id&&(n.active=[]),a.source){case"user_added_custom":n.custom.push(e(a));break;case"inventables":n.inventables.push(e(a));break;default:n.other.push(e(a))}return n}),{active:[e(t)],custom:[],inventables:[],other:[]}),r=[a.active,a.custom,a.inventables,a.other];for(let o of r.filter((e=>e.length>=1)))n.push(this.materialHeaderRow(o[0].props.source)),n.push(o);return n},render(){const e=this.groupMaterial();return React.createElement("div",{className:"material-library"},React.createElement("div",{className:"panel-heading"},React.createElement("h4",{className:"panel-title"},"Material Type")),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:this.getClassNamesForDropdown("material-types")},EASEL.component.DOM.a({className:"material-library__dropdown-link",onClick:this.toggleMaterialTypesDropdown},this.props.currentMaterialThumbnail,React.createElement("label",null,this.props.activeMaterial.displayName),React.createElement("i",{className:"fa fa-caret-down"})),React.createElement("ul",{className:"material-library__dropdown dropdown-menu"},e)),this.materialHasVariations()&&React.createElement("div",{className:this.getClassNamesForDropdown("colors")},EASEL.component.DOM.a({className:"material-library__dropdown-link",onClick:this.toggleColorsDropdown},React.createElement("label",null,null!=this.props.activeMaterialVariation&&this.props.activeMaterialVariation.name),React.createElement("i",{className:"fa fa-caret-down"})),React.createElement("div",{className:"material-library__dropdown dropdown-menu"},EASEL.component.DOM.a({className:"material-library__custom-color-option btn btn-sm btn-default",onClick:this.props.onUseCustomColor},React.createElement("i",{className:"fa fa-plus-circle",style:{marginRight:"5px"}}),React.createElement("span",null,null!=this.props.activeMaterial.layerNames?"Use custom colors":"Use custom color")),React.createElement("ul",{className:"material-library__color-thumbnails"},Array.from(this.props.activeMaterial.variations).map((e=>React.createElement(EASEL.component.materialColorThumbnail,{key:e.name,name:e.name,thumbnailUrl:e.thumbnailUrl,thumbnailName:e.thumbnailName,layerColors:Array.from(e.layers).map((e=>e.rgb)),storeUrl:e.storeUrl,onClick:this.setColor.bind(this,e)})))))),this.materialIsUsingCustomColors()&&React.createElement("div",{className:"material-library__custom-colors"},null!=this.props.activeMaterial.layerNames?Array.from(this.props.activeMaterial.layerNames).map(((e,t)=>this.layerColorPicker(t,e))):this.layerColorPicker())))}})},function(e,t){EASEL.component.materialSettings=EASEL.redux.connect({mapStateToProps:e=>({unit:EASEL.unitSelectors.getPreferredUnit(e),bit:EASEL.bitSelectors.bit(e),allTiles:EASEL.tileSelectors.getAllTiles(e),firstTile:EASEL.tileSelectors.getFirstTile(e)}),mapDispatchToProps:e=>({setSelectedTile:t=>e(EASEL.tileActionCreators.setSelectedTile(t)),setTileSizes:t=>e(EASEL.tileActionCreators.setTileSizes(t))}),component:createReactClass({getState:()=>({materials:EASEL.materialStore.getMaterials(),activeMaterial:EASEL.materialStore.getActiveMaterial()}),getInitialState(){return this.getState()},activeMaterialTextureUrl(){return this.state.activeMaterial.textureUrl?this.state.activeMaterial.textureUrl:this.state.activeMaterial.category?EASEL.materialStore.imageForMaterialCategory(this.state.activeMaterial.category):EASEL.assets.images.otherMaterial},componentDidMount(){$(this.materialSettings).on("hide.bs.dropdown",(()=>{this.closeDropdowns()})),EASEL.materialStore.addChangeListener(this._onChange)},componentDidUpdate(e){e.allTiles.length!==this.props.allTiles.length&&0===this.props.allTiles.length&&(this.props.setSelectedTile(null),console.log(e.allTiles.length,this.props.allTiles.length))},_onChange(){this.setState(this.getState())},getMaterials(){return this.state.materials.sort(((e,t)=>e.sortName.localeCompare(t.sortName)))},setMaterial(e){EASEL.stats.trackEventOnce("Material Selected",{id:e.id,name:e.name}),EASEL.materialActions.select(e.id,e.name),null!=e.widthX&&e.widthX>0&&this.onDimensionChange("x",e.widthX),null!=e.lengthY&&e.lengthY>0&&this.onDimensionChange("y",e.lengthY),null!=e.thicknessZ&&e.thicknessZ>0&&this.onDimensionChange("z",e.thicknessZ)},setColor(e){EASEL.stats.trackEventOnce("Material Color Selected",{name:e}),EASEL.materialActions.setColorName(e)},useCustomColor(){EASEL.stats.trackEventOnce("Material Color Selected",{name:"Custom"}),EASEL.materialActions.setColorToCustom()},setLayerColor(e,t,n,a){EASEL.materialActions.setLayerColor(e,[t,n,a])},format(e){return EASEL.units.convertFromIn(e,this.props.unit)},onDimensionChange(e,t){const n={};n[e]=t,new Promise((t=>{EASEL.materialActions.setDimensions(n),"y"===e&&this.props.allTiles.length>=1&&this.props.setTileSizes(null),t()})).then((()=>{"y"===e&&null!=this.props.firstTile&&this.props.setSelectedTile(this.props.firstTile.explode())}))},dimensionString(){return["x","y","z"].map((e=>this.format(this.state.activeMaterial.dimensions[e]))).join(" \xd7 ")+` ${this.props.unit}`},closeDropdowns(){null!=this.materialLibrary&&this.materialLibrary.closeDropdowns()},render(){const e=React.createElement(EASEL.component.materialThumbnailIcon,{layers:null!=this.state.activeMaterial.color?this.state.activeMaterial.color.layers:void 0,thumbnailUrl:this.activeMaterialTextureUrl()});return React.createElement("div",{className:"material-settings",ref:e=>this.materialSettings=e},React.createElement("a",{href:"#",id:"material",className:"btn-setting dropdown-toggle","data-toggle":"dropdown"},e,React.createElement("label",null,this.state.activeMaterial.displayName,React.createElement("span",{className:"current-setting"},this.dimensionString()))),React.createElement("div",{className:"material-settings__panel dropdown-menu",onClick:this.closeDropdowns},React.createElement(EASEL.component.bitAndMaterialRecommendationsLink,null),React.createElement(EASEL.component.openToolboxLink,{subtab:"materials"}),React.createElement("div",{className:"material-settings__panel-contents","data-dont-close-from-inside":""},React.createElement(EASEL.component.materialLibrary,{ref:e=>{this.materialLibrary=e},activeMaterial:this.state.activeMaterial,activeMaterialVariation:this.state.activeMaterial.color,currentMaterialThumbnail:e,onSetMaterial:this.setMaterial,onSetMaterialColor:this.setColor,onUseCustomColor:this.useCustomColor,onSetLayerColor:this.setLayerColor,materials:this.getMaterials(),unit:this.props.unit}),this.state.activeMaterial.layerNames&&this.state.activeMaterial.layerNames.length>1&&React.createElement(EASEL.component.layerThickness,{materialDepth:this.state.activeMaterial.dimensions.z,layers:this.state.activeMaterial.color.layers,displayUnit:this.props.unit}),React.createElement(EASEL.component.materialDimensions,{x:this.state.activeMaterial.dimensions.x,y:this.state.activeMaterial.dimensions.y,z:this.state.activeMaterial.dimensions.z,unit:this.props.unit,activeMaterialTextureUrl:this.activeMaterialTextureUrl(),onDimensionChange:this.onDimensionChange}))))}})})},function(e,t){EASEL.component.materialThicknessInput=createReactClass({propTypes:{id:PropTypes.string,material:PropTypes.object,preferredUnit:PropTypes.string,preferredUnitsPerInch:PropTypes.number},shouldComponentUpdate(e){return this.props.preferredUnit!==e.preferredUnit||this.props.material.dimensions.z!==e.material.dimensions.z},displayDepth(e){const t=this.props.preferredUnit,{preferredUnitsPerInch:n}=this.props;return`${(e*n).toFixed({mm:1,in:3}[t])} ${t}`},onSubmit(e){if(null==(e=EASEL.unitParser.parseInputToInches(e))||!(e>0))return void this.forceUpdate();const t=this.props.material.dimensions.z,n=EASEL.volumeStore.getVolumes();let a=0;for(const{cut:r}of n)r.depth!==t&&r.depth>a&&(a=r.depth);e===a?(EASEL.stats.trackEvent("Material Thickness Error",{source:"walkthrough",newThickness:e,currentThickness:t,maxPartialDepth:a}),EASEL.alert("Are you sure you want to change material thickness?",`Some objects in your design are set to carve at ${this.displayDepth(e)}. These objects will change from engravings to cutouts. Are you sure you want to change the thickness?`,[{text:"Change Thickness",action:()=>EASEL.materialActions.setDimensions({z:e})},{text:"Cancel",action:()=>this.forceUpdate()}])):e<=a?(EASEL.stats.trackEvent("Material Thickness Error",{source:"walkthrough",newThickness:e,currentThickness:t,maxPartialDepth:a}),EASEL.alert("Cannot change material thickness",`Some objects in your design are set to carve deeper than ${this.displayDepth(e)}. Make the depths shallower first, and then adjust the thickness.`),this.forceUpdate()):EASEL.materialActions.setDimensions({z:e})},render(){const e=this.props.material&&this.props.material.dimensions;return e&&e.z?React.createElement(EASEL.component.textInput,{id:this.props.id,size:"7",initialValue:this.displayDepth(this.props.material.dimensions.z),submit:this.onSubmit}):React.createElement("div",null)}})},function(e,t){EASEL.component.materialThumbnailIcon=createReactClass({propTypes:{thumbnailUrl:PropTypes.string,layers:PropTypes.array},render(){return null!=this.props.layers?React.createElement("div",{className:"material-thumbnail-icon__color"},this.props.layers.map((({rgb:e},t)=>React.createElement("div",{key:`color[${t}]`,style:{backgroundColor:`rgb(${e.join(", ")})`}})))):React.createElement(EASEL.component.crossOriginImg,{className:"material-thumbnail-icon__img",src:this.props.thumbnailUrl})}})},function(e,t){EASEL.component.profileStepOverInput=createReactClass({propTypes:{id:PropTypes.string},getState(){const{profileStepOver:e}=EASEL.jobSettingsStore.settings();return{profileStepOver:e}},getInitialState(){return this.getState()},updateState(){this.setState(this.getState())},componentDidMount(){EASEL.jobSettingsStore.addChangeListener(this.updateState)},componentWillUnmount(){EASEL.jobSettingsStore.removeChangeListener(this.updateState)},setProfileStepOver(e){EASEL.jobSettingsActions.setProfileStepOver(parseFloat(e)/100)},render(){return React.createElement(EASEL.component.textInput,{id:this.props.id,initialValue:`${(100*this.state.profileStepOver).toFixed(0)} %`,submit:this.setProfileStepOver})}})},function(e,t){EASEL.component.projectSettings=()=>React.createElement("div",{className:"project-settings"},React.createElement("div",{className:"dropdown btn-material"},React.createElement(EASEL.component.materialSettings,null)),React.createElement("div",{className:"dropdown btn-bit-size"},React.createElement(EASEL.component.mainBitSelector,null)),React.createElement(EASEL.component.detailBitListItem,null),React.createElement("div",{id:"btn-cut-settings",className:"dropdown"},React.createElement(EASEL.component.jobSettings,null)))},function(e,t){EASEL.component.rampingSettings=createReactClass({propTypes:{rampingAngle:PropTypes.number,setRampingAngle:PropTypes.func.isRequired},rampingVerticalPath:()=>"M 18.40,36.19 C 18.40,36.19 0.41,36.19 0.41,36.19 0.41,36.19 0.41,0.23 0.41,0.23 0.41,0.23 18.40,0.23 18.40,0.23 18.40,0.23 18.40,36.19 18.40,36.19 Z",ramping5DegPath:()=>"M 35.41,35.50 C 35.41,35.50 0.46,35.50 0.46,35.50 0.46,35.50 0.46,15.74 0.46,15.74 0.46,15.74 35.41,21.15 35.41,21.15 35.41,21.15 35.41,35.50 35.41,35.50 Z",ramping20DegPath:()=>"M 35.83,35.72 C 35.83,35.72 0.33,35.72 0.33,35.72 0.33,35.72 0.33,8.74 0.33,8.74 0.33,8.74 35.83,27.03 35.83,27.03 35.83,27.03 35.83,35.72 35.83,35.72 Z",render(){const e=React.createElement("div",null,React.createElement("p",null,"Ramping determines the angle at which to ease a bit into a cut, to reduce bit wear and heat build up. Use shallow angles for harder materials and steep angles for softer ones."));return React.createElement("div",{className:"ramping-settings"},React.createElement("h5",{className:"fill-strategy__header"},"Plunge",React.createElement(EASEL.component.utils.hoverPopover,{id:"offset-warning",placement:"top",popoverContent:e},React.createElement("i",{className:"fa fa-question-circle"}))),React.createElement("div",{className:"ramping-settings__option-groups"},React.createElement("div",{className:"ramping-settings__option-group ramping-settings__option-group--default"},React.createElement("h5",{className:"ramping-settings__option-group-header"},"Vertical"),React.createElement(EASEL.component.cutStrategyOption,{iconPath:this.rampingVerticalPath(),label:"",active:null==this.props.rampingAngle,onClick:()=>this.props.setRampingAngle(null)})),React.createElement("div",{className:"ramping-settings__option-group ramping-settings__option-group--pro"},React.createElement("h5",{className:"ramping-settings__option-group-header"},"Ramp",React.createElement(EASEL.component.proLabel,null)),React.createElement("div",{className:"ramping-settings__options"},React.createElement(EASEL.component.cutStrategyOption,{iconPath:this.ramping5DegPath(),label:"5\xb0",active:5===this.props.rampingAngle,onClick:()=>this.props.setRampingAngle(5)}),React.createElement(EASEL.component.cutStrategyOption,{iconPath:this.ramping20DegPath(),label:"20\xb0",active:20===this.props.rampingAngle,onClick:()=>this.props.setRampingAngle(20)})))))}})},function(e,t){EASEL.component.projectPropertiesModalComponent=createReactClass({mixins:[React.addons.PureRenderMixin],getInitialState:()=>({projectName:EASEL.projectMetadataStore.getName(),dateCreated:EASEL.projectMetadataStore.createdAt(),dateModified:EASEL.projectMetadataStore.updatedAt(),localLabelsList:EASEL.projectMetadataStore.assignedLabels(),originalLabelsList:EASEL.projectMetadataStore.assignedLabels(),userLabelsList:EASEL.labelStore.getLabels(),isOpen:!1,isInvalidProjectName:!1,error:""}),_getState(){this.setState({projectName:EASEL.projectMetadataStore.getName(),userLabelsList:EASEL.labelStore.getLabels()})},_open(){this.setState({isOpen:!0,localLabelsList:EASEL.projectMetadataStore.assignedLabels(),userLabelsList:EASEL.labelStore.getLabels()})},_close(){const e=this.projectInput.value.trim();this.state.projectName===e?this.setState({isOpen:!1,isInvalidProjectName:!1}):e.length<1?this.setState({isInvalidProjectName:!0,error:EASEL.constants.PROJECT_NAME_ERRORS.MIN}):e.length>EASEL.constants.PROJECT_NAME_MAX?this.setState({isInvalidProjectName:!0,error:EASEL.constants.PROJECT_NAME_ERRORS.MAX}):this.setState({isOpen:!1,isInvalidProjectName:!1},EASEL.projectMetadataActions.setName(e))},_onKeyPress(e){"Enter"===e.key&&(e.preventDefault(),this._close())},_nameChange(){this.state.isInvalidProjectName&&this.setState({isInvalidProjectName:!1,error:""})},addLabel(e){const{localLabelsList:t,userLabelsList:n}=this.state;if(!n.map((e=>e.name)).includes(e.label))return EASEL.labelActions.createLabel({name:e.label}).then((()=>{this.addLabel(e)})),EASEL.stats.trackEventOnce(EASEL.events.projectLabelCreated),void EASEL.stats.trackEventOnce(EASEL.events.projectLabelAssigned);if(!t.map((e=>e.name)).includes(e.label)){const n=EASEL.labelStore.getLabels().find((t=>t.name===e.label));EASEL.labelActions.assignLabels(n),t.push({id:n.id,name:n.name}),EASEL.stats.trackEventOnce(EASEL.events.projectLabelAssigned),this.setState({localLabelsList:[...t]})}},removeLabel(e){let{localLabelsList:t}=this.state;t=t.filter((t=>t.name!==e.name)),EASEL.labelActions.unassignLabels([e.id]),this.setState({localLabelsList:t})},validateNewOption(e){return e&&!this.state.userLabelsList.map((e=>e.name)).includes(e.trim())},onInputChange:e=>" "===e?e.trim():e.length>EASEL.constants.TAG_NAME_LENGTH?e.substring(0,EASEL.constants.TAG_NAME_LENGTH):e,filterOption:(e,t)=>e.label.includes(t.trim()),newOptionCreator:(e,t)=>({value:e,label:t}),openManageLabelsModal(){this._close(),EASEL.flux.events.emit("open-manage-labels-modal")},componentDidMount(){EASEL.flux.events.addListener("open-project-properties-modal",this._open),EASEL.projectMetadataStore.addChangeListener(this._getState)},componentWillUnmount(){EASEL.flux.events.removeListener("open-project-properties-modal",this._open)},onModalOpen(){this.projectInput.focus(),this.projectInput.select()},render(){const{isOpen:e,projectName:t,dateCreated:n,dateModified:a,localLabelsList:r,userLabelsList:o,isInvalidProjectName:s,error:i}=this.state,{isProUser:l}=this.props,c=r?r.map(((e,t)=>React.createElement("li",{key:`listgroup-item-${t}`,className:"label-list-item"},e.name,React.createElement("button",{onClick:()=>this.removeLabel(e),className:"label-delete-button"},React.createElement("i",{className:"fa fa-times"}))))):[];return React.createElement(ReactBootstrap.Modal,{show:e,onHide:this._close,onEnter:this.onModalOpen},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"Project Properties")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement(ReactBootstrap.Row,{className:"project-name-container"},React.createElement(ReactBootstrap.Col,{sm:12,xs:12},React.createElement("label",{htmlFor:"new-project-name"},"Name"),React.createElement("input",{ref:e=>this.projectInput=e,id:"new-project-name",className:"form-control",defaultValue:t,onChange:this._nameChange,onKeyPress:this._onKeyPress}),s&&React.createElement("p",{style:{color:"red"}}," ",`Invalid project name: ${i}`," "))),React.createElement(ReactBootstrap.Row,{className:"project-date-container"},React.createElement("hr",null),React.createElement(ReactBootstrap.Col,{xs:6},"Date created: ",new Date(n).toDateString()),React.createElement(ReactBootstrap.Col,{xs:6},"Date modified: ",new Date(a).toDateString())),React.createElement(ReactBootstrap.Row,{className:"labels-pro-label"},React.createElement("hr",null),React.createElement("label",null,"Labels"),React.createElement(EASEL.component.proLabel,null),React.createElement("span",{style:{fontSize:"0.8em",margin:"0 5px"}},"Project labels are available with an Easel PRO subscription")),l&&React.createElement(ReactBootstrap.Row,{className:"labels-controls-container"},React.createElement(ReactBootstrap.Col,{xs:6},React.createElement("div",{className:"labels-list-container minified"},c.length>0?c:"No labels applied to this project")),React.createElement(ReactBootstrap.Col,{xs:6},React.createElement(ReactSelect.Creatable,{name:"label-input-combined-field",className:"label-creatable-select",classNamePrefix:"label-creatable-select",options:o&&r?o.filter((e=>!r.map((e=>e.name)).includes(e.name))).map((e=>({value:e.id,label:e.name}))):[],onChange:this.addLabel,onInputChange:e=>this.onInputChange(e),formatCreateLabel:e=>`Create new label "${e}"`,noOptionsMessage:()=>"Label already assigned",isValidNewOption:this.validateNewOption,placeholder:"Select label or create new one\u2026",getNewOptionData:this.newOptionCreator,filterOption:this.filterOption}))),l&&React.createElement(ReactBootstrap.Row,{className:"d-flex justify-content-center manage-labels-button-container"},React.createElement(ReactBootstrap.Col,{xs:6},React.createElement("button",{className:"btn btn-primary",style:{margin:"10px 0"},onClick:this.openManageLabelsModal,id:"manage-labels-button"},"Manage Labels\u2026")))),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement(ReactBootstrap.Row,null,React.createElement(ReactBootstrap.Button,{bsStyle:"default",onClick:this._close},"Close"))))}}),EASEL.component.projectPropertiesModal=EASEL.redux.connect({mapStateToProps:e=>({isProUser:EASEL.userSelectors.isProEnabled(Date.now(),e)}),component:EASEL.component.projectPropertiesModalComponent})},function(e,t){EASEL.component.safetyHeightInput=EASEL.redux.connect({mapStateToProps:e=>({unit:EASEL.unitSelectors.getPreferredUnit(e)}),component:createReactClass({propTypes:{id:PropTypes.string},getState:()=>({safetyHeight:EASEL.jobSettingsStore.settings().safetyHeight}),getInitialState(){return this.getState()},updateState(){this.setState(this.getState())},componentDidMount(){EASEL.jobSettingsStore.addChangeListener(this.updateState)},componentWillUnmount(){EASEL.jobSettingsStore.removeChangeListener(this.updateState)},setSafetyHeight(e,t,n){EASEL.jobSettingsActions.setSafetyHeight(n)},render(){return React.createElement(EASEL.component.utils.dimensionalInput,{id:this.props.id,value:this.state.safetyHeight,unit:"in",displayUnit:this.props.unit,showUnit:!0,onChange:this.setSafetyHeight})}})})},function(e,t){EASEL.component.stepOverInput=createReactClass({propTypes:{id:PropTypes.string},getState(){const{stepOver:e}=EASEL.jobSettingsStore.settings();return{stepOver:e}},getInitialState(){return this.getState()},updateState(){this.setState(this.getState())},componentDidMount(){EASEL.jobSettingsStore.addChangeListener(this.updateState)},componentWillUnmount(){EASEL.jobSettingsStore.removeChangeListener(this.updateState)},setStepOver(e){EASEL.jobSettingsActions.setStepOver(parseFloat(e)/100)},render(){return React.createElement(EASEL.component.textInput,{id:this.props.id,initialValue:`${(100*this.state.stepOver).toFixed(0)} %`,submit:this.setStepOver})}})},function(e,t){EASEL.component.tilingSettings=createReactClass({componentDidMount(){EASEL.materialStore.addChangeListener(this.handleChange),EASEL.editorStore.addChangeListener(this.handleChange)},componentWillUnmount(){EASEL.materialStore.removeChangeListener(this.handleChange),EASEL.editorStore.removeChangeListener(this.handleChange)},handleChange(){this.forceUpdate()},componentDidUpdate(e){e.unit===this.props.unit&&e.workArea.x===this.props.workArea.x&&e.workArea.y===this.props.workArea.y||this.props.setSelectedTile(null)},getCurrentlySelectedTileIndex(){const{selectedTile:e,tileSizes:t,tileOverlap:n}=this.props;let a=0,r=0;return t.forEach((t=>{if(r>=e.getOffsetDistance())return a;r+=t-n,a+=1})),a},changeTileSize(e,t){const{tileSizes:n}=this.props;t>EASEL.tilingCalculator.maxTileSize(n)?t=EASEL.tilingCalculator.maxTileSize(n):t<EASEL.tilingCalculator.MIN_TILE_SIZE&&(t=EASEL.tilingCalculator.MIN_TILE_SIZE);const a=EASEL.tilingCalculator.rebalanceArray(n,e,t),r=this.getCurrentlySelectedTileIndex();new Promise((e=>{this.props.setTileSizes(a),e()})).then((()=>{if(null!=this.props.selectedTile){const e=this.props.allTiles[r].explode();this.props.setSelectedTile(e)}}))},tileOptions(e){return e.map(((e,t)=>{const n=EASEL.isEqual(e,this.props.selectedTile)?"selected":"";return React.createElement("div",{key:`tile-${t}`,className:"tile-item"},React.createElement("div",{className:"tile-item__click",onClick:()=>this.props.setSelectedTile(e.explode())},React.createElement(EASEL.component.utils.materialDimensionInput,{name:`tile ${t}`,id:`tile-${t}-input`,value:e.getDimensions().y,displayUnit:this.props.unit,onDimensionChange:(e,n)=>this.changeTileSize(t,n),label:`Tile ${t+1}`}),React.createElement("i",{className:"tile-item__icon fa "+(n?"fa-check-square-o tile-item__icon--selected":" fa-check")})))}))},render(){const{allTiles:e,selectedTile:t}=this.props;return 0===e.length?null:React.createElement("div",{id:"tiling"},null===t?React.createElement("div",{className:"tiling-options__disabled"},"Enable tiling to see tile sizes"):React.createElement("div",{className:"tiling-options"},this.tileOptions(e)))}})},function(e,t){EASEL.component.vBitDetailStepOverInput=createReactClass({propTypes:{id:PropTypes.string},getState(){const{vBitDetailStepOver:e}=EASEL.jobSettingsStore.settings();return{vBitDetailStepOver:e}},getInitialState(){return this.getState()},updateState(){this.setState(this.getState())},componentDidMount(){EASEL.jobSettingsStore.addChangeListener(this.updateState)},componentWillUnmount(){EASEL.jobSettingsStore.removeChangeListener(this.updateState)},setStepOver(e){EASEL.jobSettingsActions.setVBitDetailStepOver(parseFloat(e)/100)},render(){return React.createElement(EASEL.component.textInput,{id:this.props.id,initialValue:`${(100*this.state.vBitDetailStepOver).toFixed(0)} %`,submit:this.setStepOver})}})},function(e,t){EASEL.component.walkthroughDetailBitSelector=createReactClass({propTypes:{roughingBit:EASEL.propTypes.bit.isRequired,detailBit:EASEL.propTypes.bit.isRequired,roughingBits:PropTypes.arrayOf(EASEL.propTypes.bit).isRequired,bits:PropTypes.arrayOf(EASEL.propTypes.bit).isRequired,isPaywallVisible:PropTypes.bool},selectRoughingBit(e){EASEL.store.dispatch(EASEL.bitActionCreators.setBitParams({bit:e}))},selectDetailBit(e){EASEL.store.dispatch(EASEL.bitActionCreators.setBitParams({detailBit:e}))},render(){return React.createElement("div",{className:"walkthrough-detail-bit-selector"},React.createElement("div",{className:"walkthrough-detail-bit-selector__bit-chooser-container"},React.createElement("div",{className:"walkthrough-detail-bit-selector--split"},React.createElement("h3",null,"Roughing pass bit"),React.createElement(EASEL.component.bitChooser,{bit:this.props.roughingBit,bits:this.props.roughingBits,onChange:this.selectRoughingBit,isRoughing:!0}),this.props.isPaywallVisible&&React.createElement("div",null,React.createElement("p",null,React.createElement(EASEL.component.walkthroughProWarning,null)))),React.createElement("div",{className:"walkthrough-detail-bit-selector--split"},React.createElement("h3",{className:"walkthrough-detail-bit-selector__subtitle"},"Detail pass bit"),React.createElement(EASEL.component.bitChooser,{bit:this.props.detailBit,bits:this.props.bits,onChange:this.selectDetailBit,isRoughing:!1}),React.createElement("div",{className:"walkthrough-detail-bit-selector__explanation"},React.createElement("p",null,React.createElement("span",null,"**Easel will"),React.createElement("strong",null," only "),"cut portions of your design reachable by this size bit but not the other bit")))))}})},function(e,t){EASEL.component.walkthroughMainBitSelector=createReactClass({propTypes:{bit:EASEL.propTypes.bit.isRequired,bits:PropTypes.arrayOf(EASEL.propTypes.bit).isRequired},selectBit(e){EASEL.store.dispatch(EASEL.bitActionCreators.setBitParams({bit:e}))},render(){return React.createElement(EASEL.component.bitChooser,{bit:this.props.bit,bits:this.props.bits,onChange:this.selectBit,isRoughing:!0})}})},function(e,t){EASEL.component.walkthroughProWarning=createReactClass({showPaywall:()=>(EASEL.flux.events.emit("hide-walkthrough"),EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalAccountTab())),render(){return React.createElement("div",{className:"measure-bit-pro-warning"},React.createElement("div",{className:"measure-bit-pro-warning__text"},React.createElement("span",null,"Using V-Bits, Custom Bits or Custom Materials require an Easel Pro account. Go to your "),React.createElement(EASEL.component.a,{onClick:this.showPaywall},"account"),React.createElement("span",null," to sign up for Easel Pro.")))}})},function(e,t){EASEL.component.signInComponent=createReactClass({getInitialState(){return{selectedTab:"new"===this.props.showTab?"new":"returning",name:"",email:"",password:"",termsOfUseChecked:!1,privacyPolicyChecked:!1,errors:[],submitting:!1}},componentDidMount(){"new"===this.props.showTab&&this.renderRecaptcha()},setSelectedTab(e){e!==this.state.selectedTab&&this.setState({selectedTab:e},(()=>{"new"===e&&this.renderRecaptcha()}))},renderRecaptcha(){grecaptcha.render("recaptcha-container",{sitekey:this.props.siteKey})},toggleConsent(e){const t={};t[e.target.name]=e.target.checked,this.setState(t)},onKeyDown(e){e.keyCode===EASEL.keys.enter&&(e.preventDefault(),this.submit())},validateNewUserInputs(){const e=[];return this.state.privacyPolicyChecked||e.push("You must consent to the Inventables Privacy Policy"),this.state.termsOfUseChecked||e.push("You must consent to the Inventables Terms of Service"),0===this.state.email.length&&e.push("Email required"),0===this.state.name.length&&e.push("Full Name required"),0===this.state.password.length&&e.push("Password required"),this.setState({errors:e}),0===e.length},submit(){this.state.submitting||(this.setState({errors:[],submitting:!0}),"new"===this.state.selectedTab?this.validateNewUserInputs()?EASEL.userAPI.createUser({email:this.state.email,password:this.state.password,full_name:this.state.name,accepted_privacy_policy:1,accepted_terms_of_service:1,recaptcha_response:grecaptcha.getResponse()}).then((e=>{window.location.href=`${e.redirect||"/"}${window.location.hash}`}),(e=>{this.setState({errors:e.responseJSON.errors,submitting:!1}),grecaptcha.reset()})):this.setState({submitting:!1}):EASEL.userAPI.logInUser({email:this.state.email,password:this.state.password}).then((e=>{window.location.href=`${e.redirect||"/"}${window.location.hash}`}),(e=>{const t=null!=e.responseJSON?e.responseJSON.errors:["Error processing login"];this.setState({errors:t,submitting:!1})})))},getSubmitButtonText(){return this.state.submitting?React.createElement(EASEL.component.spinner,{color:"white"}):"new"===this.state.selectedTab?"Start Free Trial":"returning"===this.state.selectedTab?"Continue":void 0},render(){const{errors:e,selectedTab:t}=this.state;return React.createElement("div",{className:"sign-in-component fade in"},React.createElement("div",{className:"sign-in-component__sign-in-box"},React.createElement("div",{className:"sign-in-component__body"},React.createElement("section",{className:"sign-in-component__logo-container"},React.createElement("img",{src:EASEL.assets.images.signInLogo})),React.createElement("hr",{className:"sign-in-component__separator"}),React.createElement("section",null,React.createElement("div",{className:"sign-in-component__tab-container"},React.createElement("button",{className:"sign-in-component__tab "+("returning"===t?"sign-in-component__tab--selected":""),"data-customer-type":"returning",type:"button",onClick:()=>this.setSelectedTab("returning")},"Returning Users"),React.createElement("button",{className:"sign-in-component__tab "+("new"===t?"sign-in-component__tab--selected":""),"data-customer-type":"new",type:"button",onClick:()=>this.setSelectedTab("new")},"Create New Account")),e.length>0&&React.createElement("div",{className:"alert alert-danger"},React.createElement("ul",null,e.map((e=>React.createElement("li",{key:e},e))))),React.createElement("div",{className:"sign-in-component__form-container"},"returning"===t&&React.createElement("p",{className:"sign-in-component--center"},"Log in with your Inventables account"),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Email: "),React.createElement("input",{className:"sign-in-component__input",type:"text",name:"email",value:this.state.email,onChange:e=>this.setState({email:e.target.value}),onKeyDown:this.onKeyDown})),"new"===t&&React.createElement("div",{className:"form-group"},React.createElement("label",null,"Full Name: "),React.createElement("input",{className:"sign-in-component__input",type:"text",name:"full name",value:this.state.name,onChange:e=>this.setState({name:e.target.value}),onKeyDown:this.onKeyDown})),React.createElement("div",{className:"form-group"},React.createElement("label",null,"Password: "),React.createElement("input",{className:"sign-in-component__input",type:"password",name:"password",value:this.state.password,onChange:e=>this.setState({password:e.target.value}),onKeyDown:this.onKeyDown})),"new"===t?React.createElement("section",{className:"sign-in-component__checkbox-container"},React.createElement("div",{className:"sign-in-component__checkbox-row"},React.createElement("input",{id:"privacyPolicyChecked",type:"checkbox",name:"privacyPolicyChecked",className:"sign-in-component__checkbox",checked:this.state.privacyPolicyChecked,onChange:this.toggleConsent}),React.createElement("label",{className:"sign-in-component__checkbox-label",htmlFor:"privacyPolicyChecked"},"I consent to the inventables ",React.createElement("a",{href:"https://www.inventables.com/privacy_policy",target:"_blank",rel:"noreferrer"},"PRIVACY POLICY"))),React.createElement("div",{className:"sign-in-component__checkbox-row"},React.createElement("input",{id:"termsOfUseChecked",type:"checkbox",name:"termsOfUseChecked",className:"sign-in-component__checkbox",checked:this.state.termsOfUseChecked,onChange:this.toggleConsent}),React.createElement("label",{className:"sign-in-component__checkbox-label",htmlFor:"termsOfUseChecked"},"I consent to the inventables ",React.createElement("a",{href:"https://www.inventables.com/terms_of_use",target:"_blank",rel:"noreferrer"},"TERMS OF USE"))),React.createElement("div",{id:"recaptcha-container"})):React.createElement("a",{className:"sign-in-component__right-link",href:"https://www.inventables.com/password_reset_codes/new"},"Forgot password?"),React.createElement("button",{className:"sign-in-component__submit-btn",onClick:this.submit},this.getSubmitButtonText()))),React.createElement("section",{className:"sign-in-component--center"},"returning"===t&&React.createElement("div",null,React.createElement("p",null,"Have questions about how we use your data?"),React.createElement("a",{href:"https://www.inventables.com/privacy_policy",target:"_blank",rel:"noreferrer"},"LEARN MORE"))))))}})},function(e,t){EASEL.component.appsToolbarItem=createReactClass({onClick(e){EASEL.appActions.openAppList(EASEL.store.dispatch),e.preventDefault()},render(){return React.createElement(EASEL.component.toolbarItem,{id:"apps",onClick:this.onClick,tooltip:"Apps"})}})},function(e,t){EASEL.component.designElementsToolbarItem=EASEL.redux.connect({mapDispatchToProps:e=>({openElementsPanel(){EASEL.stats.trackEvent("Open Design Elements Panel",{source:"toolbar"}),e(EASEL.designElementsActionCreators.openElementsPanel())}}),mapStateToProps:e=>({isBetaTester:EASEL.userSelectors.isBetaTester(e)}),component:createReactClass({mixins:[React.addons.PureRenderMixin],render(){return React.createElement(EASEL.component.toolbarItem,{id:"pro-design-library",onClick:this.props.openElementsPanel,tooltip:"Pro Design Library"})}})})},function(e,t){EASEL.component.importToolbarItem=EASEL.redux.connect({mapStateToProps:e=>({apps:EASEL.appSelectors.getAppState(e).apps}),component:createReactClass({getInitialState:()=>({showMenu:!1}),closeImportMenu(){document.removeEventListener("click",this.closeImportMenu),this.setState({showMenu:!1})},showImportMenu(){document.addEventListener("click",this.closeImportMenu),this.setState({showMenu:!0})},loadApps(e){EASEL.webAPIUtils.loadApps(),this.showImportMenu(e)},importerApps(){return this.props.apps.filter((e=>e.importer))},importGcode(e){e.preventDefault(),EASEL.flux.events.emit("import-gcode")},importSVG(e){e.preventDefault(),$("#svg-file-input").trigger("click")},importSTL(e){e.preventDefault(),$("#stl-file-input").trigger("click")},getButton(){return React.createElement(EASEL.component.a,{id:"import",className:"shape-icon dropdown-toggle "+(this.state.showMenu?"":"menu-indicator"),"data-toggle":"dropdown",onClick:this.loadApps})},render(){let e=React.createElement("li",null,"Loading...");return this.props.apps.length>0&&(e=this.importerApps().map((e=>{return t=e,React.createElement(EASEL.component.toolbarItem,{id:t.id,onClick:function(e){return e.preventDefault(),EASEL.appActions.activateAppById(EASEL.store.dispatch,{id:t.id,name:t.name})},image:t.thumbnail,label:t.name});var t}))),React.createElement("li",{className:"dropdown "+(this.state.showMenu?"open":"")},this.state.showMenu?this.getButton():React.createElement(ReactBootstrap.OverlayTrigger,{placement:"right",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"import-toolbar-tooltip"},"Import"),delay:EASEL.constants.TOOLBAR_TOOLTIP_DELAY,rootClose:!0},this.getButton()),React.createElement("ul",{className:"dropdown-menu easel-dropdown easel-dropdown--left import-toolbar-item"},React.createElement(EASEL.component.toolbarItem,{id:"toolbar-import-svg",label:"SVG",onClick:this.importSVG}),React.createElement(EASEL.component.toolbarItem,{id:"toolbar-import-gcode",label:"G-code",onClick:this.importGcode}),EASEL.hasAccessGrant("three_d")&&React.createElement(EASEL.component.toolbarItem,{id:"toolbar-import-stl",label:"3D STL",onClick:this.importSTL}),e))}})})},function(e,t){EASEL.component.previewControls=createReactClass({getInitialState:()=>({toolpathsVisible:!1}),simulate(){EASEL.flux.events.emit("generate-toolpaths"),this.setState({toolpathsVisible:!0})},toggleToolpathsVisible(){this.setState({toolpathsVisible:!this.state.toolpathsVisible})},generateDesign(){EASEL.flux.events.emit("generate-design")},render(){const{toolpathsGenerated:e,designStatus:t,previewPanel:n,gcodePasses:a,materialVisible:r,setMaterialVisible:o,uncutAreasVisible:s,setUncutAreasVisible:i,wasteboardVisible:l,setWasteboardVisible:c,isVCarvingBitInUse:p}=this.props,{toolpathsVisible:u}=this.state;return React.createElement("div",{id:"preview-controls"},React.createElement(EASEL.component.previewStatusControls,{detailedDesignStatus:e?void 0:t,generateDesign:this.generateDesign,toolpathsGenerated:e,simulate:this.simulate}),e&&null!=n&&React.createElement("div",{className:"toolpath-option-controls"},React.createElement(EASEL.component.internalGcodeSender,{gcodePasses:a,previewPanel:n,toolpathsVisible:u,showTimeEstimates:e})),React.createElement(EASEL.component.previewVisibilityControls,{materialVisible:r,onSetMaterialVisible:o,toolpathsGenerated:e,toolpathsVisible:u,onSetToolpathsVisible:this.toggleToolpathsVisible,uncutAreasVisible:s,onSetUncutAreasVisible:i,wasteboardVisible:l,onSetWasteboardVisible:c,isVCarvingBitInUse:p}))}}),EASEL.component.previewControlsController=EASEL.redux.connect({mapStateToProps:e=>{const t=EASEL.internalGcodeSelectors.getGcodePasses(e)||[];return{designVisible:EASEL.previewSelectors.designVisible(e),designStatus:EASEL.previewSelectors.designStatus(e),gcodePasses:t,materialVisible:EASEL.previewSelectors.materialVisible(e),uncutAreasVisible:EASEL.previewSelectors.uncutAreasVisible(e),wasteboardVisible:EASEL.previewSelectors.wasteboardVisible(e),toolpathsGenerated:t.length>0,isVCarvingBitInUse:EASEL.bitSelectors.isVCarvingBitInUse(e)}},mapDispatchToProps:e=>({setDesignVisible:t=>e(EASEL.previewActionCreators.setDesignVisible(t)),setMaterialVisible:t=>e(EASEL.previewActionCreators.setMaterialVisible(t)),setUncutAreasVisible:t=>e(EASEL.previewActionCreators.setUncutAreasVisible(t)),setWasteboardVisible:t=>e(EASEL.previewActionCreators.setWasteboardVisible(t))}),component:EASEL.component.previewControls})},function(e,t){EASEL.component.previewStatusControls=createReactClass({render(){const{detailedDesignStatus:e,generateDesign:t,toolpathsGenerated:n,simulate:a}=this.props;return React.createElement("div",{id:"preview-controls__status"},e===EASEL.previewConstants.statuses.READY&&React.createElement("span",{className:"preview-visibility-controls__status"},React.createElement("i",{className:"fa fa-check preview-visibility-controls__status-indicator"}),"Detailed"),e===EASEL.previewConstants.statuses.WORKING&&React.createElement("span",{className:"preview-visibility-controls__status"},React.createElement(EASEL.component.spinner,{className:"preview-visibility-controls__status-indicator"}),"Generating\u2026"),e===EASEL.previewConstants.statuses.DISABLED&&React.createElement(EASEL.component.a,{onClick:t,className:"btn btn-default"},"Detailed view"),!n&&React.createElement(EASEL.component.a,{onClick:a,className:"btn btn-default"},"Simulate"))}})},function(e,t){EASEL.component.previewVisibilityControls=createReactClass({propTypes:{materialVisible:PropTypes.bool.isRequired,toolpathsVisible:PropTypes.bool.isRequired,toolpathsGenerated:PropTypes.bool.isRequired,uncutAreasVisible:PropTypes.bool.isRequired,wasteboardVisible:PropTypes.bool.isRequired,onSetMaterialVisible:PropTypes.func,onSetToolpathsVisible:PropTypes.func,onSetUncutAreasVisible:PropTypes.func,onSetWasteboardVisible:PropTypes.func},getInitialState:()=>({showOptions:!1}),toggleMaterialVisibility(){this.props.onSetMaterialVisible(!this.props.materialVisible)},toggleToolpathVisibility(){this.props.onSetToolpathsVisible()},toggleUncutAreasVisibility(){this.props.onSetUncutAreasVisible(!this.props.uncutAreasVisible)},toggleWasteboardVisibility(){this.props.onSetWasteboardVisible(!this.props.wasteboardVisible)},toggleOptionsMenu(){this.setState({showOptions:!this.state.showOptions})},render(){const{showOptions:e}=this.state,{materialVisible:t,toolpathsVisible:n,toolpathsGenerated:a,uncutAreasVisible:r,wasteboardVisible:o,isVCarvingBitInUse:s}=this.props;return React.createElement("div",{id:"preview-visibility-controls-wrapper",className:"preview-visibility-controls"},React.createElement(EASEL.component.a,{onClick:this.toggleOptionsMenu,className:"btn btn-default"},React.createElement("i",{className:"fa fa-ellipsis-v"})),e&&React.createElement("div",{className:"preview-visibility-controls__options-menu"},React.createElement("div",{className:"preview-visibility-controls__title"},"Show / Hide"),React.createElement("div",{className:"preview-visibility-controls__option",onClick:this.toggleWasteboardVisibility},"Wasteboard",React.createElement("i",{className:"fa fa-lg "+(o?"fa-check-square":"fa-square")})),React.createElement("div",{className:"preview-visibility-controls__option",onClick:this.toggleMaterialVisibility},"Material",React.createElement("i",{className:"fa fa-lg "+(t?"fa-check-square":"fa-square")})),a&&React.createElement("div",{className:"preview-visibility-controls__option",onClick:this.toggleToolpathVisibility},"Toolpaths",React.createElement("i",{className:"fa fa-lg "+(n?"fa-check-square":"fa-square")})),!s&&React.createElement("div",{className:"preview-visibility-controls__option",onClick:this.toggleUncutAreasVisibility},"Uncut Areas",React.createElement("i",{className:"fa fa-lg "+(r?"fa-check-square":"fa-square")}))))}})},function(e,t){EASEL.component.shapesMenu=createReactClass({getInitialState:()=>({showMenu:!1}),closeFlyout(e){e.preventDefault(),document.removeEventListener("click",this.closeFlyout),this.setState({showMenu:!1})},showMoreShapes(){document.addEventListener("click",this.closeFlyout),this.setState({showMenu:!0})},onClick(e){document.removeEventListener("click",this.closeFlyout),this.setState({showMenu:!1}),"close"!==e.currentTarget.getAttribute("id")&&this.props.insertShape(e)},getButton(){return React.createElement(EASEL.component.a,{className:"shape-icon "+(this.state.showMenu?"":"menu-indicator"),id:"shapes-menu-button",onClick:this.showMoreShapes})},render(){return React.createElement("li",{className:"shapes-menu-icon "+(this.state.showMenu?"open":"")},this.state.showMenu?this.getButton():React.createElement(ReactBootstrap.OverlayTrigger,{placement:"right",overlay:React.createElement(ReactBootstrap.Tooltip,{id:"shapes-toolbar-tooltip"},"Shapes"),delayShow:EASEL.constants.TOOLBAR_TOOLTIP_DELAY,rootClose:!0},this.getButton()),this.state.showMenu&&React.createElement("ul",{className:"shapes-menu"},React.createElement(EASEL.component.toolbarItem,{onClick:this.onClick,id:"square",key:"square",tooltip:"Square",tooltipPlacement:"bottom"}),React.createElement(EASEL.component.toolbarItem,{onClick:this.onClick,id:"circle",key:"circle",tooltip:"Circle",tooltipPlacement:"bottom"}),React.createElement(EASEL.component.toolbarItem,{onClick:this.onClick,id:"triangle",key:"triangle",tooltip:"Triangle",tooltipPlacement:"bottom"}),React.createElement(EASEL.component.toolbarItem,{onClick:this.onClick,id:"star",key:"star",tooltip:"Star",tooltipPlacement:"bottom"}),React.createElement("li",null,React.createElement("a",{className:"shape-close",onClick:this.onClick,id:"close"},React.createElement("i",{className:"fa fa-angle-left"})))))}})},function(e,t){EASEL.component.toolbarItem=createReactClass({propTypes:{id:PropTypes.oneOfType([PropTypes.string.isRequired,PropTypes.number.isRequired]),onClick:PropTypes.func.isRequired,label:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),image:PropTypes.string,listClass:PropTypes.string},render(){return React.createElement(ReactBootstrap.OverlayTrigger,{placement:this.props.tooltipPlacement||"right",overlay:this.props.tooltip?React.createElement(ReactBootstrap.Tooltip,{id:`${this.props.id}-toolbar-tooltip`},this.props.tooltip):React.createElement("span",null),delayShow:EASEL.constants.TOOLBAR_TOOLTIP_DELAY,rootClose:!0},React.createElement("li",{className:this.props.listClass},React.createElement(EASEL.component.a,{className:"shape-icon",onClick:this.props.onClick,id:this.props.id},this.props.image&&React.createElement("span",{className:"dynamic-image",style:{backgroundImage:`url(${this.props.image})`}},""),this.props.label,this.props.children)))}})},function(e,t){EASEL.component.toolboxBitCollection=createReactClass({getInitialState:()=>({bitCard:null}),addCustomBit(){this.setState({bitCard:"custom"})},addInventablesBit(){this.setState({bitCard:"inventables"})},editingBit(e,t){this.setState({bitCard:"editing",bit:e,bitGroupNames:t})},stopBitDetails(){this.setState({bitCard:null})},onUpdateBit(e){this.setState({bitCard:null}),this.props.updateBit(e)},render(){let{bitCard:e,bit:t}=this.state,{addBit:n,deleteBit:a,bitGroupNames:r,groupName:o,userBits:s}=this.props;switch(e){case"custom":return React.createElement("div",{className:"toolbox-container__scroller"},React.createElement(EASEL.component.toolboxNewBit,{key:"new",addBit:n,groupName:o,bitGroupNames:r,stopAddingBit:this.stopBitDetails}));case"inventables":return React.createElement(EASEL.component.toolboxNewInventablesBit,{addBit:n,stopAddingBit:this.stopBitDetails,userBits:s});case"editing":return React.createElement("div",{className:"toolbox-container__scroller"},React.createElement(EASEL.component.toolboxEditBit,{bit:t,key:t.id,updateBit:this.onUpdateBit,cancelEditing:this.stopBitDetails,bitGroupNames:r}));default:return React.createElement("div",{className:"toolbox-container__scroller toolbox-container__bits"},React.createElement(EASEL.component.toolboxAddDropdown,{key:"add-bit",componentName:"Bit",addCustom:this.addCustomBit,addInventables:this.addInventablesBit}),0===s.length&&React.createElement(EASEL.component.toolboxEmpty,{component:"bit",key:"empty"}),["End Mills","V Bits"].map(((e,t)=>[React.createElement("h4",{key:`toolboxBitGroup:${t}`},e),React.createElement(EASEL.component.toolboxBitGroup,{key:t,bits:s.filter((t=>EASEL.bitHelper.bitTypeInfo(t.type).supertype===e)),addBit:n,deleteBit:a,editingBit:this.editingBit,updateBit:this.updateBit,bitGroupNames:r,groupName:t})])))}}})},function(e,t){EASEL.component.toolboxEditBit=createReactClass({getInitialState(){return{errors:[],bitDetails:this.props.bit}},updateBit(){this.props.updateBit(this.state.bitDetails)},setBitState(e){this.setState({bitDetails:EASEL.merge(this.state.bitDetails,e)})},setNewBitValue(e){return t=>{this.setBitState({[e]:t.target.value})}},setWidthAndUnit(e,t){this.setBitState({unit:t,diameter:e})},render(){const{bitDetails:e,errors:t}=this.state,{cancelEditing:n}=this.props;return React.createElement("div",{className:"toolbox-form"},React.createElement("div",{className:"toolbox-form__details"},React.createElement("div",{className:"toolbox-form__header"},"Edit Custom Bit"),t.map((e=>React.createElement("div",{key:e,className:"toolbox-form__error"},e))),React.createElement("div",{className:"toolbox-form__controls"},[React.createElement("div",{key:"name"},React.createElement("label",null,"Name"),React.createElement("input",{id:"name",className:"form-control",value:e.name,autoComplete:"off",onChange:this.setNewBitValue("name")})),React.createElement("div",{key:"diameter"},React.createElement("label",null,"Cutting Diameter"),React.createElement(EASEL.component.utils.dimensionalInput,{id:"bit-diameter",value:e.diameter,unit:e.unit,displayUnit:e.unit,precision:"mm"===e.unit?2:null,onChange:this.setWidthAndUnit,showUnit:!0})),"V"===e.groupName&&React.createElement("div",{key:"tipAngle"},React.createElement("label",null,"Angle"),React.createElement("input",{className:"form-control",name:"tipAngle",type:"number",value:e.tipAngle,onChange:this.setNewBitValue("tipAngle")}))]),React.createElement("div",{className:"toolbox-form__footer-actions"},React.createElement("button",{type:"button",className:"btn btn-secondary",onClick:n},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.updateBit},"Save"))))}})},function(e,t){EASEL.component.toolboxBitGroup=createReactClass({getInitialState:()=>({editingBits:{}}),cancelEditing(e){return()=>{const t={};t[e.id]=!1,this.setState({editingBits:EASEL.merge(this.state.editingBits,t)})}},editBit(e){return()=>{this.props.editingBit(e)}},deleteBit(e){return()=>{this.props.deleteBit(e)}},render(){const{bits:e}=this.props;return React.createElement("div",{className:"toolbox-items-group"},e.map((function(e){return React.createElement(EASEL.component.toolboxBit,{bit:e,key:e.id,editBit:this.editBit(e),deleteBit:this.deleteBit(e)})}),this))}})},function(e,t){EASEL.component.toolboxInventablesBit=createReactClass({getInitialState:()=>({addingBit:!1}),userHasBit(e){for(let t of Array.from(this.props.userBits))if(t.storeId===e.storeId)return!0;return!1},onAddBit(){this.setState({addingBit:!0}),this.props.addBit(this.props.bit).then((()=>this.setState({addingBit:!1})))},addBitButton(){return this.userHasBit(this.props.bit)?React.createElement("div",{className:"toolbox-inventables-bit--added-to-toolbox"},React.createElement("img",{src:EASEL.assets.images.circledCheck}),React.createElement("div",null,"Added to Toolbox")):React.createElement("button",{className:"btn-primary toolbox-inventables-bit__btn--add",onClick:this.onAddBit,disabled:this.state.addingBit},this.state.addingBit?React.createElement(EASEL.component.spinner,{color:"white",size:12}):"Add Bit")},bitInfo(){const{bit:e}=this.props,t="V"===e.groupName?[{key:"Angle",val:EASEL.bitHelper.descriptionForBit(e)}]:[{key:"Type",val:e.groupName},{key:"Width",val:EASEL.bitHelper.descriptionForBit(e)}];return null!=e.color&&t.push({key:"Ring color",val:e.color}),React.createElement(EASEL.component.toolboxItemDetails,{details:t})},render(){const{bit:e}=this.props;return React.createElement("div",{className:"toolbox-inventables-bit__item toolbox-item","data-bit":e.name},React.createElement("div",{className:"toolbox-bit toolbox-item__icon",key:"toolbox-bit-add"},React.createElement("img",{src:e.imageURL})),React.createElement("div",{className:"toolbox-inventables-bit__name"},React.createElement("span",null,e.name)),this.bitInfo(),this.addBitButton())}})},function(e,t,n){const a=n(28);EASEL.component.toolboxNewBit=createReactClass({getInitialState:()=>({errors:[],bitDetails:{diameter:.125,groupName:null,unit:"in",source:a.USER_ADDED_CUSTOM}}),addBit(){this.props.addBit(this.state.bitDetails).then((()=>{this.props.stopAddingBit()})).catch((e=>{this.setState({errors:e})}))},onStopAddingBit(){this.props.stopAddingBit()},setBitState(e){this.setState({bitDetails:EASEL.merge(this.state.bitDetails,e)})},setNewBitValue(e){return t=>{this.setBitState({[e]:t.target.value})}},setWidthAndUnit(e,t){this.setBitState({unit:t,diameter:e})},render(){const{bitDetails:e,errors:t}=this.state,{bitGroupNames:n}=this.props;return React.createElement("div",{className:"toolbox-form"},React.createElement("div",{className:"toolbox-form__details"},React.createElement("div",{className:"toolbox-form__header"},"Add Custom Bit"),t.map((e=>React.createElement("div",{key:e,className:"toolbox-form__error"},e))),React.createElement("div",{className:"toolbox-form__controls"},[React.createElement("div",{key:"name"},React.createElement("label",null,"Name"),React.createElement("input",{id:"name",className:"form-control",value:e.name,autoComplete:"off",onChange:this.setNewBitValue("name")})),React.createElement("div",{key:"groupName"},React.createElement("label",{htmlFor:"bit-type"},"Bit Type"),React.createElement("select",{id:"bit-type",className:"form-control",name:"groupName",value:e.groupName,defaultValue:"",onChange:this.setNewBitValue("groupName")},React.createElement("option",{disabled:e.groupName,value:"",selected:!0},"Select bit type"),n.map((e=>React.createElement("option",{key:e,value:e},e))))),e.groupName&&React.createElement("div",{key:"diameter"},React.createElement("label",{htmlFor:"bit-diameter"},"Cutting Diameter"),React.createElement(EASEL.component.utils.dimensionalInput,{id:"bit-diameter",value:e.diameter||.125,unit:e.unit,displayUnit:e.unit,onChange:this.setWidthAndUnit,showUnit:!0})),"V"===e.groupName&&React.createElement("div",{key:"tipAngle"},React.createElement("label",{htmlFor:"bit-tip-angle"},"Angle"),React.createElement("input",{id:"bit-tip-angle",className:"form-control",name:"tipAngle",type:"number",value:e.tipAngle,onChange:this.setNewBitValue("tipAngle"),min:1,max:179}))]),React.createElement("div",{className:"toolbox-form__footer-actions"},React.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.onStopAddingBit},"Cancel"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.addBit},"Save"))))}})},function(e,t,n){const a=n(337);EASEL.component.toolboxNewInventablesBit=createReactClass({getInitialState:()=>({loading:!0,bits:[],showingDropdowns:{},filters:{}}),componentDidMount(){a.loadInventablesBits().then((e=>{this.setState({loading:!1,bits:e})}),(e=>{this.setState({loading:!1,error:e})}))},toggleDropdown(e){const t=EASEL.setIn(this.state.showingDropdowns,[e],!this.state.showingDropdowns[e]);this.setState({showingDropdowns:t})},dropdownOptions(e){const{bits:t}=this.state;let n=(e,t,n)=>n.indexOf(e)===t;switch(e){case"width":return t.filter((e=>"V"!==e.groupName)).map((e=>EASEL.bitHelper.descriptionForBit(e))).filter(n);case"tipAngle":return t.filter((e=>"V"===e.groupName)).map((e=>EASEL.bitHelper.descriptionForBit(e))).filter(n);default:return t.filter((t=>t[e])).map((t=>t[e])).filter(n)}},setFilter(e,t){let n;return n=this.state.filters[e]===t?EASEL.setIn(this.state.filters,[e],null):EASEL.setIn(this.state.filters,[e],t),this.setState({filters:n})},matchesFilter(e){for(let t in this.state.filters){const n=this.state.filters[t];if(null!=n){let a=e[t];if("width"===t){if("V"===e.groupName)return!1;a=EASEL.bitHelper.descriptionForBit(e)}else if("tipAngle"===t){if("V"!==e.groupName)return!1;a=EASEL.bitHelper.descriptionForBit(e)}if(a!==n)return!1}}return!0},getFilteredBits(){return this.state.bits.filter((e=>this.matchesFilter(e)))},render(){const{addBit:e,userBits:t,stopAddingBit:n}=this.props,{loading:a,error:r}=this.state,o=(e,t)=>React.createElement("div",{className:"toolbox-new-inventables-bit__filter-col"},React.createElement("button",{className:"toolbox-new-inventables-bit__filter-btn",onClick:()=>this.toggleDropdown(t)},null!=this.state.filters[t]?this.state.filters[t]:e,React.createElement("i",{className:"fa fa-angle-down action-icon"},""),this.state.showingDropdowns[t]&&React.createElement("div",null,React.createElement(EASEL.component.filterMenu,{items:this.dropdownOptions(t).map((e=>({key:`${e}`,title:`${e}`,action:()=>this.setFilter(t,e),checked:this.state.filters[t]===e})))}))));return React.createElement("div",{className:"toolbox-new-inventables-bit"},React.createElement("h4",null,React.createElement("span",null,"Add an Inventables Bit"),React.createElement("button",{className:"close","aria-label":"Close",onClick:n},React.createElement("span",{"aria-hidden":"true"},"\xd7"))),a&&React.createElement(EASEL.component.spinner,{size:25}),null!=r&&React.createElement(EASEL.component.toolboxError,{component:"bit"}),!a&&null==r&&[React.createElement("div",{key:"toolbox-filter-row",className:"toolbox-new-inventables-bit__filter-row"},React.createElement("div",{className:"toolbox-new-inventables-bit__filter-col"},"Filter by:"),o("Bit type","type"),o("Bit width","width"),o("Bit angle","tipAngle"),o("Ring color","color")),React.createElement("div",{key:"toolbox-bit-grid",className:"toolbox-items-group toolbox-items-group--add"},this.getFilteredBits().map((n=>React.createElement(EASEL.component.toolboxInventablesBit,{bit:n,key:n.storeId,addBit:e,userBits:t}))))])}})},function(e,t,n){const a=n(28);EASEL.component.toolboxBit=createReactClass({render(){const{bit:e,editBit:t,deleteBit:n}=this.props,r="V"===e.groupName?[{key:"Angle",val:EASEL.bitHelper.descriptionForBit(e)},{key:"Width",val:EASEL.bit(e).widthAndUnit(e)}]:[{key:"Type",val:e.groupName},{key:"Width",val:EASEL.bitHelper.descriptionForBit(e)}];return React.createElement("div",{className:"toolbox-item"},React.createElement(EASEL.component.toolboxItemCornerActions,{componentName:"bit",deleteAction:n,editAction:e.source===a.USER_ADDED_CUSTOM?t:null}),React.createElement("div",{className:"toolbox-bit toolbox-item__icon"},React.createElement("img",{src:e.imageURL})),React.createElement(EASEL.component.toolboxItemDetails,{name:e.name,details:r,editAction:t}))}})},function(e,t){EASEL.component.toolboxCutSettingForm=createReactClass({propTypes:{cutSetting:PropTypes.object.isRequired,adding:PropTypes.bool.isRequired,unit:PropTypes.string.isRequired,onSave:PropTypes.func.isRequired,onCancel:PropTypes.func.isRequired,bits:PropTypes.array,machineProfiles:PropTypes.array,materials:PropTypes.array},getInitialState(){return{editedCutSetting:EASEL.merge(this.props.cutSetting)}},selectBit(e){this.setState(EASEL.setIn(this.state,["editedCutSetting","bitId"],e.target.value))},selectMaterial(e){this.setState(EASEL.setIn(this.state,["editedCutSetting","materialId"],e.target.value))},selectMachineProfile(e){this.setState(EASEL.setIn(this.state,["editedCutSetting","machineProfileId"],e.target.value))},onSetCutSettingValue(e){return t=>{const n=EASEL.units.convertToUnit(t,this.props.unit,"in");this.setState(EASEL.setIn(this.state,["editedCutSetting",e],n))}},updateSpindleSpeed(e){this.setState(EASEL.setIn(this.state,["editedCutSetting","spindleSpeed"],e.target.value))},updateNote(e){this.setState(EASEL.setIn(this.state,["editedCutSetting","notes"],e.target.value))},save(){this.props.onSave(this.state.editedCutSetting)},render(){const{adding:e,bits:t,machineProfiles:n,materials:a,onCancel:r,unit:o}=this.props,{editedCutSetting:s}=this.state,i=`${o}/min`;return React.createElement("div",{className:"cut-settings-grid-row "+(e?"cut-settings-grid-row--adding":"cut-settings-grid-row--editing")},React.createElement("div",{className:"cut-settings-grid-item"},React.createElement("label",null,React.createElement("strong",null,"Machine"),React.createElement("select",{className:"form-control cut-setting-form__machine-type-select",name:"machine-type",value:s.machineProfileId?s.machineProfileId:"Select Machine",onChange:this.selectMachineProfile},React.createElement("option",{disabled:"true",value:"Select Machine"},"Select machine"),n.map((e=>React.createElement("option",{key:e.id,value:e.id},e.name)))))),React.createElement("div",{className:"cut-settings-grid-item"},React.createElement("label",null,React.createElement("strong",null,"Bit"),React.createElement("select",{className:"form-control",name:"bit",value:s.bitId?s.bitId:"Select bit",onChange:this.selectBit},React.createElement("option",{disabled:"true",value:"Select bit"},"Select bit"),t.map((e=>React.createElement("option",{key:e.id,value:e.id},e.name)))))),React.createElement("div",{className:"cut-settings-grid-item"},React.createElement("label",null,React.createElement("strong",null,"Material"),React.createElement("select",{className:"form-control",name:"material",value:s.materialId?s.materialId:"Select material",onChange:this.selectMaterial},React.createElement("option",{disabled:"true",value:"Select material"},"Select material"),a.map((e=>React.createElement("option",{key:e.id,value:e.id},e.name)))))),React.createElement("div",{className:"cut-settings-grid-item"},React.createElement("label",null,React.createElement("strong",null,"Feed Rate"),React.createElement(EASEL.component.utils.dimensionalInput,{value:s.feedRate,unit:"in",displayUnit:i,precision:1,onChange:this.onSetCutSettingValue("feedRate"),showUnit:!0}))),React.createElement("div",{className:"cut-settings-grid-item"},React.createElement("label",null,React.createElement("strong",null,"Plunge Rate"),React.createElement(EASEL.component.utils.dimensionalInput,{value:s.plungeRate,unit:"in",displayUnit:i,precision:1,onChange:this.onSetCutSettingValue("plungeRate"),showUnit:!0}))),React.createElement("div",{className:"cut-settings-grid-item"},React.createElement("label",null,React.createElement("strong",null,"Depth Per Pass"),React.createElement(EASEL.component.utils.dimensionalInput,{value:s.depthPerPass,unit:"in",displayUnit:o,onChange:this.onSetCutSettingValue("depthPerPass"),showUnit:!0}))),React.createElement("div",{className:"cut-settings-grid-item"},React.createElement("label",null,React.createElement("strong",null,"Spindle Speed"),React.createElement("input",{value:s.spindleSpeed||"",type:"number",step:"100",className:"form-control cut-setting-form__spindle-speed-input",onChange:this.updateSpindleSpeed}))),React.createElement("div",{className:"cut-settings-grid-item"},React.createElement("label",null,React.createElement("strong",null,"Notes"),React.createElement("textarea",{name:"notes",className:"form-control",rows:3,onChange:this.updateNote,value:s.notes||""}))),React.createElement("div",{className:"cut-settings-grid-row--edit-actions cut-settings-grid-item"},React.createElement("button",{type:"button",className:"btn btn-primary","data-action":"save",onClick:this.save},"Save"),React.createElement("button",{type:"button",className:"btn btn-secondary","data-action":"cancel",onClick:r},"Cancel")))}})},function(e,t,n){const a=n(96);EASEL.component.cutSettingRow=createReactClass({getInitialState:()=>({editing:!1}),deleteCutSetting(){const{cutSetting:e}=this.props;a.deleteCutSetting(e.id).fail((e=>EASEL.oops(`Error deleting cut settings: ${e.responseJSON.errors}`))).done((e=>EASEL.store.dispatch(EASEL.cutSettingsActionCreators.deleteCutSetting(e))))},updateCutSetting(e){if(this.setState({editing:!1}),!EASEL.isEqual(e,this.props.cutSetting))return a.updateCutSetting(e).fail((e=>EASEL.oops(`Error editing cut settings: ${e.responseJSON.errors}`))).done((e=>EASEL.store.dispatch(EASEL.cutSettingsActionCreators.updateCutSetting(e))))},toggleEditing(){this.setState({editing:!this.state.editing})},convertUnitDisplay:(e,t)=>`${EASEL.units.convertFromIn(e,t)} ${t}`,render(){const{editing:e}=this.state,{preSelected:t,bit:n,machineProfileName:a,material:r,unit:o,cutSetting:s,machineProfiles:i,bits:l,materials:c}=this.props;return this.state.editing?React.createElement(EASEL.component.toolboxCutSettingForm,{adding:!1,cutSetting:s,machineProfiles:i,bits:l,materials:c,onSave:this.updateCutSetting,onCancel:this.toggleEditing,unit:o}):React.createElement("div",{className:"cut-settings-grid-row "+(t?"cut-settings-grid-row--selected":"")},React.createElement("div",{className:"cut-settings-grid-item",key:"cut-settings-machine"},a),React.createElement("div",{className:"cut-settings-grid-item",key:"cut-settings-bit"},n),React.createElement("div",{className:"cut-settings-grid-item",key:"cut-settings-material"},r),React.createElement("div",{className:"cut-settings-grid-item",key:"cut-settings-feed-rate"},this.convertUnitDisplay(s.feedRate,o),"/min"),React.createElement("div",{className:"cut-settings-grid-item",key:"cut-settings-plunge-rate"},this.convertUnitDisplay(s.plungeRate,o),"/min"),React.createElement("div",{className:"cut-settings-grid-item",key:"cut-settings-depth-per-pass"},this.convertUnitDisplay(s.depthPerPass,o)),React.createElement("div",{className:"cut-settings-grid-item",key:"cut-settings-spindle-speed"},s.spindleSpeed?s.spindleSpeed+" RPM":"-"),React.createElement("div",{className:"cut-settings-grid-item",key:"cut-settings-notes"},s.notes?s.notes:"-"),React.createElement("div",{className:"cut-settings-grid-item",key:"cut-settings-corner-actions"},!e&&React.createElement(EASEL.component.toolboxItemCornerActions,{componentName:"cut setting",deleteAction:this.deleteCutSetting,editAction:this.toggleEditing})))}})},function(e,t,n){const a=n(96);EASEL.component.cutSettingsCollectionComponent=createReactClass({getInitialState(){const e=EASEL.utility.jobSettingsCalculator(EASEL.jobSettingsConstants.bitKeys.bit),t=EASEL.utility.jobSettingsCalculator(EASEL.jobSettingsConstants.bitKeys.detailBit);return{usingCutSettingIds:[e.getSettings().id,t.getSettings().id],addingCutSetting:!1}},getBitNameById(e){const t=this.props.bits.find((t=>t.id===e));return null!=t?t.name:"DELETED"},getMaterialNameById(e){const t=this.props.materials.find((t=>t.id===e));return null!=t?t.name:"DELETED"},getMachineProfileNameById(e){const t=this.props.machineProfiles.find((t=>t.id===e));return null!=t?t.name:null!=e?"DELETED":"N/A"},showAddCutSetting(){this.setState({addingCutSetting:!0})},hideAddCutSetting(){this.setState({addingCutSetting:!1})},saveCutSetting(e){EASEL.stats.trackEvent("Cut Settings - toolbox add setting"),a.addCutSetting(e).fail((e=>EASEL.oops(`Error adding cut setting: ${e.responseJSON.errors}`))).done((e=>(EASEL.store.dispatch(EASEL.cutSettingsActionCreators.addCutSetting(e)),this.hideAddCutSetting())))},render(){const{bits:e,machineProfiles:t,materials:n,unit:a,userCutSettings:r}=this.props,{addingCutSetting:o,usingCutSettingIds:s}=this.state;return o?React.createElement("div",{className:"toolbox-container__scroller"},React.createElement(EASEL.component.toolboxNewCutSetting,{machineProfiles:t,bits:e,materials:n,onSaveCutSetting:this.saveCutSetting,onCancelAddCutSetting:this.hideAddCutSetting,unit:a})):React.createElement("div",{className:"toolbox-container__scroller toolbox-container__cut_settings",key:"cut-settings-container"},React.createElement("div",{className:"toolbox-container__add-button-container"},React.createElement("div",{className:"toolbox__dropdown-add"},React.createElement("button",{className:"btn btn-primary",onClick:this.showAddCutSetting},"Add Cut Setting +"))),0===r.length?React.createElement(EASEL.component.toolboxEmpty,{component:"cut setting",key:"empty"}):React.createElement("div",{className:"cut-settings-grid"},React.createElement("div",{className:"cut-settings-grid-row"},React.createElement("div",{className:"cut-settings-grid-item cut-settings-grid-item--header"},"Machine"),React.createElement("div",{className:"cut-settings-grid-item cut-settings-grid-item--header"},"Bit"),React.createElement("div",{className:"cut-settings-grid-item cut-settings-grid-item--header"},"Material"),React.createElement("div",{className:"cut-settings-grid-item cut-settings-grid-item--header"},"Feed Rate"),React.createElement("div",{className:"cut-settings-grid-item cut-settings-grid-item--header"},"Plunge Rate"),React.createElement("div",{className:"cut-settings-grid-item cut-settings-grid-item--header"},"Depth Per Pass"),React.createElement("div",{className:"cut-settings-grid-item cut-settings-grid-item--header"},"Spindle Speed"),React.createElement("div",{className:"cut-settings-grid-item cut-settings-grid-item--header"},"Notes"),React.createElement("div",{className:"cut-settings-grid-item cut-settings-grid-item--header"})),r.map(((r,o)=>React.createElement(EASEL.component.cutSettingRow,{key:`cut-setting:${o}`,bit:this.getBitNameById(r.bitId),material:this.getMaterialNameById(r.materialId),machineProfileName:this.getMachineProfileNameById(r.machineProfileId),machineProfiles:t,bits:e,materials:n,cutSetting:r,unit:a,preSelected:s.includes(r.id)})))))}}),EASEL.component.cutSettingsCollection=EASEL.redux.connect({mapStateToProps:e=>({bits:e.bits,unit:EASEL.unitSelectors.getPreferredUnit(e),machineProfiles:EASEL.userSelectors.getMachineProfiles(e),machineProfileId:EASEL.machineSettingsSelectors.getMachineProfileId(e),materials:EASEL.materialStore.getMaterials()}),component:EASEL.component.cutSettingsCollectionComponent})},function(e,t){EASEL.component.toolboxNewCutSetting=createReactClass({propTypes:{bits:PropTypes.array.isRequired,materials:PropTypes.array.isRequired,machineProfiles:PropTypes.array.isRequired,onSaveCutSetting:PropTypes.func.isRequired,onCancelAddCutSetting:PropTypes.func.isRequired,unit:PropTypes.string.isRequired},getInitialState:()=>({errors:[]}),validateAndSave(e){const t=[];if(e.bitId||t.push("Bit is required"),e.materialId||t.push("Material is required"),e.machineProfileId||t.push("Machine profile is required"),(!e.feedRate||e.feedRate<=0)&&t.push("Feed Rate is invalid"),(!e.plungeRate||e.plungeRate<=0)&&t.push("Plunge Rate is invalid"),(!e.depthPerPass||e.depthPerPass<=0)&&t.push("Depth per Pass is invalid"),this.setState({errors:t}),t.length<=0){const{materials:t,bits:n}=this.props,a=t.find((t=>t.id===parseInt(e.materialId))),r=n.find((t=>t.id===e.bitId));EASEL.stats.trackEvent(EASEL.events.addCutSetting,{Source:"toolbox",Material:a.name,Bit:EASEL.bit(r).description()}),this.props.onSaveCutSetting(e)}},render(){const{bits:e,machineProfiles:t,materials:n,onCancelAddCutSetting:a,unit:r}=this.props,{errors:o}=this.state;return React.createElement("div",null,o.map((e=>React.createElement("div",{key:e,className:"toolbox-form__error"},e))),React.createElement("div",{className:"cut-settings-grid"},React.createElement(EASEL.component.toolboxCutSettingForm,{cutSetting:{bitId:null,materialId:null,machineProfileId:null,feedRate:0,plungeRate:0,depthPerPass:0,notes:""},adding:!0,machineProfiles:t,bits:e,materials:n,onSave:this.validateAndSave,onCancel:a,unit:r})))}})},function(e,t){EASEL.component.addToolboxMaterial=createReactClass({onAddMaterial(e){this.props.addMaterial(e)},onStopAddingMaterial(){this.props.stopAddingMaterial()},render(){const{categoryNames:e}=this.props;return React.createElement("div",{className:"toolbox-form"},React.createElement("div",{className:"toolbox-form__details"},React.createElement("div",{className:"toolbox-form__header"},"Add Custom Material"),React.createElement(EASEL.component.toolboxMaterialForm,{categoryNames:e,onSaveMaterial:this.onAddMaterial,onCancel:this.onStopAddingMaterial})))}})},function(e,t){EASEL.component.editToolboxMaterial=createReactClass({onSaveMaterial(e){this.props.onUpdateMaterial(e)},render(){const{material:e,categoryNames:t,onCancelEditMaterial:n}=this.props;return React.createElement("div",{className:"toolbox-form"},React.createElement("div",{className:"toolbox-form__details"},React.createElement("div",{className:"toolbox-form__header"},"Edit Custom Material"),React.createElement(EASEL.component.toolboxMaterialForm,{material:e,categoryNames:t,onSaveMaterial:this.onSaveMaterial,onCancel:n})))}})},function(e,t){EASEL.component.inventablesMaterial=createReactClass({getInitialState:()=>({addedMaterial:!1,addingMaterial:!1}),onAddMaterial(){this.setState({addingMaterial:!0}),this.props.addMaterial(this.props.material).then((()=>{this.setState({addingMaterial:!1,addedMaterial:!0})}))},render(){const{material:e}=this.props;return React.createElement("div",{className:"toolbox-inventables-material toolbox-item","data-material":e.name},React.createElement("div",{className:"toolbox-item__icon"},React.createElement("img",{src:e.imageUrl})),React.createElement(EASEL.component.toolboxItemDetails,{name:e.name,details:[{key:"Type",val:e.category}]}),e.inToolbox||this.state.addedMaterial?React.createElement("div",{className:"toolbox-inventables-bit--added-to-toolbox"},React.createElement("img",{src:EASEL.assets.images.circledCheck}),React.createElement("div",null,"Added to Toolbox")):React.createElement("button",{className:"btn-primary toolbox-inventables-bit__btn--add",onClick:this.onAddMaterial,disabled:this.state.addingMaterial},this.state.addingMaterial?React.createElement(EASEL.component.spinner,{color:"white",size:12}):"Add Material"))}})},function(e,t,n){const a=n(35);EASEL.component.materialCollection=createReactClass({componentDidMount(){EASEL.materialStore.addChangeListener(this.onChange)},componentWillUnmount(){EASEL.materialStore.removeChangeListener(this.onChange)},getInitialState(){return{materials:this.getMaterials(),materialCard:null,material:null,categoryNames:null}},onChange(){this.setState({materials:this.getMaterials()})},getMaterials:()=>EASEL.materialStore.materialCollection().sort(((e,t)=>e.id-t.id)),onAddMaterial:e=>EASEL.materialAPI.createMaterial(e).then((e=>{EASEL.dispatcher.dispatch({actionType:EASEL.materialConstants.actionTypes.ADD_MATERIAL,material:a.toCamelCase(e.material)})})),onDeleteMaterial(e){EASEL.materialAPI.deleteMaterial(e).then((()=>{EASEL.dispatcher.dispatch({actionType:EASEL.materialConstants.actionTypes.DELETE_MATERIAL,material:e})}))},onUpdateMaterial(e){this.setState({materialCard:null}),e.displayName!==e.name&&(e.displayName=e.name),EASEL.materialAPI.updateMaterial(e).then((e=>{EASEL.dispatcher.dispatch({actionType:EASEL.materialConstants.actionTypes.UPDATE_MATERIAL,material:a.toCamelCase(e.material)})}))},addCustomMaterial(){this.setState({materialCard:"addCustom"})},addInventablesMaterial(){this.setState({materialCard:"addInventables"})},stopMaterialDetails(){this.setState({materialCard:null})},onEditMaterial(e,t){this.setState({materialCard:"editing",material:e,categoryNames:t})},render(){let e,t,n,a;switch(({materials:n,materialCard:t,material:a,categoryNames:e}=this.state),t){case"addCustom":return React.createElement("div",{className:"toolbox-container__scroller"},React.createElement(EASEL.component.addToolboxMaterial,{addMaterial:e=>(this.onAddMaterial(e),this.stopMaterialDetails()),stopAddingMaterial:this.stopMaterialDetails,categoryNames:EASEL.materialStore.materialCategoryNames,thumbnailUrlForName:EASEL.materialStore.imageForMaterialCategory}));case"addInventables":return React.createElement(EASEL.component.toolboxNewInventablesMaterial,{addMaterial:this.onAddMaterial,stopAddingMaterial:this.stopMaterialDetails});case"editing":return React.createElement("div",{className:"toolbox-container__scroller"},React.createElement(EASEL.component.editToolboxMaterial,{material:a,categoryNames:e,onCancelEditMaterial:this.stopMaterialDetails,onUpdateMaterial:this.onUpdateMaterial}));default:return React.createElement("div",{className:"toolbox-container__scroller toolbox-container__materials"},React.createElement(EASEL.component.toolboxAddDropdown,{key:"add-material",componentName:"Material",addCustom:this.addCustomMaterial,addInventables:this.addInventablesMaterial}),0===n.length?React.createElement(EASEL.component.toolboxEmpty,{component:"material",key:"empty"}):React.createElement("div",{key:"materials-grid",className:"toolbox-items-group"},n.map((e=>React.createElement(EASEL.component.toolboxMaterial,{key:e.id,material:e,categoryNames:EASEL.materialStore.materialCategoryNames,materialThumbnailUrl:EASEL.materialStore.imageForMaterialCategory(e.category),onDeleteMaterial:this.onDeleteMaterial,onEditMaterial:this.onEditMaterial,onUpdateMaterial:this.onUpdateMaterial})))))}}})},function(e,t,n){const a=n(28);EASEL.component.toolboxMaterialFormComponent=createReactClass({getInitialState(){return{material:this.props.material||{name:"",category:this.props.categoryNames[0],source:a.USER_ADDED_CUSTOM,widthX:0,lengthY:0,thicknessZ:null}}},setMaterialState(e,t){this.setState(EASEL.setIn(this.state,["material",e],t))},setNewMaterialValue(e){return t=>this.setMaterialState(e,t.target.value)},setDimension(e,t){this.setMaterialState(e,t)},onSave(){this.props.onSaveMaterial(this.state.material)},render(){const{material:e}=this.state,{categoryNames:t,onCancel:n,unit:a}=this.props;return React.createElement("div",{className:"toolbox-form__custom_material"},React.createElement("div",{className:"toolbox-form__controls"},React.createElement("div",{key:"name"},React.createElement("label",{htmlFor:"material-name"},"Name *"),React.createElement("input",{id:"material-name",className:"form-control",value:e.name,autoComplete:"off",onChange:this.setNewMaterialValue("name")})),React.createElement("div",{key:"type"},React.createElement("label",{htmlFor:"material-type"},"Type *"),React.createElement("select",{id:"material-type",className:"form-control",value:e.category,onChange:this.setNewMaterialValue("category")},t.map((e=>React.createElement("option",{key:e,value:e},e))))),React.createElement("div",{className:"dimensions"},React.createElement("div",{className:"dimensions__inputs"},React.createElement(EASEL.component.utils.materialDimensionInput,{name:"widthX",id:"material-width",className:"form-control",value:null===e.widthX?0:e.widthX,displayUnit:a,onDimensionChange:this.setDimension,label:"Width (X)"}),React.createElement(EASEL.component.utils.materialDimensionInput,{name:"lengthY",id:"material-length",className:"form-control",value:null===e.lengthY?0:e.lengthY,unit:a,displayUnit:a,onDimensionChange:this.setDimension,label:"Length (Y)"}),React.createElement(EASEL.component.utils.materialDimensionInput,{name:"thicknessZ",id:"material-thickness",className:"form-control",value:null===e.thicknessZ?0:e.thicknessZ,unit:a,displayUnit:a,onDimensionChange:this.setDimension,label:"Thickness (Z)"})),React.createElement("div",{id:"dimension-graphic",className:"dimensions__image"},React.createElement("img",{src:EASEL.assets.images.materialDimensions}),React.createElement("i",null,"* Required")))),React.createElement("div",{className:"toolbox-form__footer-actions"},React.createElement("button",{onClick:n,className:"btn btn-secondary"},"Cancel"),React.createElement("button",{onClick:this.onSave,className:"btn btn-primary"},"Save")))}}),EASEL.component.toolboxMaterialForm=EASEL.redux.connect({mapStateToProps:e=>({unit:EASEL.unitSelectors.getPreferredUnit(e)}),component:EASEL.component.toolboxMaterialFormComponent})},function(e,t){EASEL.component.toolboxNewInventablesMaterial=createReactClass({getInitialState(){return EASEL.materialAPI.loadInventablesMaterials().then((e=>{this.setState({loading:!1,materials:e})}),(e=>{this.setState({loading:!1,error:e})})),{loading:!0,materials:[],showingDropdowns:{},filters:{}}},toggleDropdown(e){const t=EASEL.setIn(this.state.showingDropdowns,[e],!this.state.showingDropdowns[e]);this.setState({showingDropdowns:t})},dropdownOptions(e){let t=[];for(let n of this.state.materials)if(null!=n[e])switch(e){case"colors":t=t.concat(n[e]);break;default:t.push(n[e])}return Array.from(new Set(t)).sort()},setFilter(e,t){let n;n=this.state.filters[e]===t?EASEL.setIn(this.state.filters,[e],null):EASEL.setIn(this.state.filters,[e],t),this.setState({filters:n})},matchesFilter(e){for(let t in this.state.filters){const n=this.state.filters[t];if(null!=n)switch(t){case"colors":if(null==e[t]||!(e[t].indexOf(n)>=0))return!1;break;default:if(e[t]!==n)return!1}}return!0},getFilteredMaterials(){return this.state.materials.filter((e=>this.matchesFilter(e)))},render(){const{addMaterial:e,stopAddingMaterial:t}=this.props,n=(e,t)=>React.createElement("div",{className:"toolbox-new-inventables-material__filter-col"},React.createElement("button",{className:"toolbox-new-inventables-material__filter-btn",onClick:()=>this.toggleDropdown(t)},React.createElement("span",null,null!=this.state.filters[t]?this.state.filters[t]:e,React.createElement("i",{className:"fa fa-angle-down action-icon"}),this.state.showingDropdowns[t]&&React.createElement("div",null,React.createElement(EASEL.component.filterMenu,{items:this.dropdownOptions(t).map((e=>({key:`${e}`,title:`${e}`,action:()=>this.setFilter(t,e),checked:this.state.filters[t]===e})))})))));return React.createElement("div",{className:"toolbox-new-inventables-material"},React.createElement("h4",null,React.createElement("span",null,"Add an Inventables Material"),React.createElement("button",{className:"close","aria-label":"Close",onClick:t},React.createElement("span",{"aria-hidden":"true"},"\xd7"))),this.state.loading?React.createElement(EASEL.component.spinner,{size:25}):null!=this.state.error?React.createElement(EASEL.component.toolboxError,{component:"material"}):[React.createElement("div",{key:"toolbox-filter-row",className:"toolbox-new-inventables-material__filter-row"},React.createElement("div",{className:"toolbox-new-inventables-material__filter-col"},"Filter by:"),n("Material Type","category"),n("Material Color","colors")),React.createElement("div",{key:"toolbox-material-gid",className:"toolbox-items-group toolbox-items-group--add"},this.getFilteredMaterials().sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})).map((t=>React.createElement(EASEL.component.inventablesMaterial,{material:t,key:t.name,addMaterial:e}))))])}})},function(e,t,n){const a=n(28);EASEL.component.toolboxMaterial=createReactClass({onDeleteMaterial(){this.props.onDeleteMaterial(this.props.material)},onEditMaterial(){this.props.onEditMaterial(this.props.material,this.props.categoryNames)},render(){const{material:e,materialThumbnailUrl:t}=this.props,n=e.widthX||e.lengthY||e.thicknessZ?[{key:"Type",val:e.category},{key:"Size",val:[e.widthX,e.lengthY,e.thicknessZ]}]:[{key:"Type",val:e.category}];return React.createElement("div",{className:"toolbox-item"},React.createElement(EASEL.component.toolboxItemCornerActions,{componentName:"material",deleteAction:this.onDeleteMaterial,editAction:e.source===a.USER_ADDED_CUSTOM?this.onEditMaterial:null}),React.createElement("div",{className:"toolbox-item__icon"},React.createElement("img",{src:t})),React.createElement(EASEL.component.toolboxItemDetails,{name:e.name,details:n}))}})},function(e,t){EASEL.component.openToolboxLink=createReactClass({openToolbox(){const{subtab:e}=this.props;EASEL.store.dispatch(EASEL.pageActionCreators.showPage({pageName:"toolbox"})),"materials"===e?EASEL.store.dispatch(EASEL.toolboxActionCreators.showMaterialsToolboxSubTab()):EASEL.store.dispatch(EASEL.toolboxActionCreators.showBitsToolboxSubTab())},render(){const{subtab:e}=this.props;return React.createElement("div",{className:"open-toolbox-link"},React.createElement(EASEL.component.proLabel,null),React.createElement(EASEL.component.a,{onClick:this.openToolbox},"+ Add a "+("materials"===e?"Material":"Bit")))}})},function(e,t){EASEL.component.toolboxAddDropdown=createReactClass({getInitialState:()=>({menuVisible:!1}),toggleMenu(){this.setState({menuVisible:!this.state.menuVisible})},render(){const{addCustom:e,componentName:t,addInventables:n}=this.props,{menuVisible:a}=this.state;return React.createElement("div",{className:"toolbox-container__add-button-container"},React.createElement("div",{className:"toolbox__dropdown-add"},React.createElement("button",{className:"btn btn-primary",onClick:this.toggleMenu},`Add ${t} +`),a&&React.createElement("div",{className:"toolbox__dropdown-add__menu"},React.createElement(EASEL.component.dropdownMenu,{items:[{key:"add-inventables",title:"Inventables",action:n},{key:"add-custom",title:"Custom",action:e}]}))))}})},function(e,t,n){const a=n(16),r=n(337);EASEL.component.toolboxContainer=EASEL.redux.connect({mapStateToProps:function(e){const{activeSubTab:t}=e.toolbox;return{bits:EASEL.bitSelectors.bits(e),customCutSettings:EASEL.cutSettingsSelectors.getCutSettings(e),activeSubTab:t,visible:EASEL.pageSelectors.isPageVisible(e,"toolbox")}},mapDispatchToProps:e=>({addBit(t){e(EASEL.bitActionCreators.addBit(t))},updateBit(t){e(EASEL.bitActionCreators.updateBit(t))},deleteBit(t){e(EASEL.bitActionCreators.deleteBit(t))},closeToolbox(){e(EASEL.pageActionCreators.hidePage())},showToolboxPage(){e(EASEL.pageActionCreators.showPage({pageName:"toolbox"}))}}),component:createReactClass({addBit(e){return new Promise(((t,n)=>r.addBit(e).fail((e=>n(e.responseJSON.errors))).done((e=>(this.props.addBit(e),t())))))},deleteBit(e){return new Promise(((t,n)=>r.deleteBit(e.id).fail((e=>n(e.responseJSON.errors))).done((()=>(this.props.deleteBit(e.id),t())))))},updateBit(e){return new Promise(((t,n)=>r.updateBit(e.id,e).fail((e=>n(e.responseJSON.errors))).done((e=>(this.props.updateBit(e),t())))))},bitGroupNames:()=>Object.keys(a).map((e=>a[e])),activateBitTab(){this.props.showToolboxPage(),EASEL.store.dispatch(EASEL.toolboxActionCreators.showBitsToolboxSubTab())},activateMaterialTab(){this.props.showToolboxPage(),EASEL.store.dispatch(EASEL.toolboxActionCreators.showMaterialsToolboxSubTab())},activateCutSettingsTab(){this.props.showToolboxPage(),EASEL.stats.trackEvent("Cut Settings - view toolbox UI"),EASEL.store.dispatch(EASEL.toolboxActionCreators.showCutSettingsToolboxSubTab())},sortCutSettings:e=>e.sort(((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),render(){const{bits:e,activeSubTab:t,customCutSettings:n,visible:a}=this.props,r="bits"===t?"active":"",o="materials"===t?"active":"",s="cutSettings"===t?"active":"",i="bits"===t?"show active":"",l="materials"===t?"show active":"",c="cutSettings"===t?"show active":"";return a&&React.createElement("div",{className:"toolbox-container"},React.createElement("ul",{className:"nav nav-toolbox",style:{flexShrink:0}},React.createElement("li",{className:`nav-items ${r}`},React.createElement(EASEL.component.a,{className:"nav-link ",onClick:this.activateBitTab},"Bits")),React.createElement("li",{className:`nav-items ${o}`},React.createElement(EASEL.component.a,{className:"nav-link",onClick:this.activateMaterialTab},"Materials")),React.createElement("li",{className:`nav-items ${s}`},React.createElement(EASEL.component.a,{className:"nav-link",onClick:this.activateCutSettingsTab},"Cut Settings")),React.createElement("button",{className:"close","aria-label":"Close",onClick:this.props.closeToolbox},React.createElement("span",{"aria-hidden":"true"},"\xd7"))),React.createElement("div",{className:"tab-content"},React.createElement("div",{className:`tab-pane ${i}`},React.createElement(EASEL.component.toolboxBitCollection,{userBits:e,addBit:this.addBit,updateBit:this.updateBit,deleteBit:this.deleteBit,bitGroupNames:this.bitGroupNames()})),React.createElement("div",{className:`tab-pane ${l}`},React.createElement(EASEL.component.materialCollection,null)),React.createElement("div",{className:`tab-pane ${c}`},React.createElement(EASEL.component.cutSettingsCollection,{userCutSettings:this.sortCutSettings(n)}))))}})})},function(e,t){EASEL.component.toolboxEmpty=createReactClass({propTypes:{component:PropTypes.string.isRequired},render(){const e=this.props.component;return React.createElement("div",{className:"toolbox-empty-collection"},React.createElement("p",null,"You have no ",e,"s in your toolbox."),React.createElement("p",null,"Add a ",e," to get started."))}})},function(e,t){EASEL.component.toolboxError=createReactClass({propTypes:{component:PropTypes.string.isRequired},render(){return React.createElement("div",{className:"toolbox-error"},React.createElement("p",null,"There was an error loading Inventables ",this.props.component,"s."))}})},function(e,t){EASEL.component.toolboxItemCornerActions=createReactClass({getInitialState:()=>({menuVisible:!1}),toggleMenu(){this.setState({menuVisible:!this.state.menuVisible})},onDeleteAction(){const{deleteAction:e,componentName:t}=this.props;EASEL.confirm(`Delete ${t}?`,`This will permanently delete the ${t}.`,(()=>e()))},onEditAction(){this.props.editAction()},render(){return React.createElement("div",{className:"toolbox-item-corner-actions"},React.createElement("div",{className:"toolbox-item-corner-actions__menu"},this.props.editAction&&React.createElement(EASEL.component.a,{onClick:this.onEditAction},React.createElement("i",{className:"action-icon fa fa-edit"})),React.createElement(EASEL.component.a,{onClick:this.onDeleteAction},React.createElement("i",{className:"action-icon fa fa-trash"}))))}})},function(e,t){EASEL.component.toolboxItemDetails=createReactClass({propTypes:{name:PropTypes.string,details:PropTypes.array.isRequired},getDetailRow(e){const t=EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState());return"Size"===e.key?React.createElement("tr",{key:e.key},React.createElement("td",null,`${e.key}:`),React.createElement("td",null,EASEL.units.formatDimensions(e.val,t))):React.createElement("tr",{key:e.key},React.createElement("td",null,`${e.key}:`),React.createElement("td",null,e.val))},render(){const{name:e,details:t}=this.props;return React.createElement("table",null,null!=e&&React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"center-text",colSpan:2},EASEL.string.truncate(e,50)))),React.createElement("tbody",null,t.map((e=>this.getDetailRow(e)))))}})},function(e,t){EASEL.component.alignMaterial=EASEL.redux.connect({mapStateToProps:e=>({selectedTile:EASEL.tileSelectors.getSelectedTile(e),isFirstTileSelected:EASEL.tileSelectors.isFirstTileSelected(e)}),component:createReactClass({render(){const{isFirstTileSelected:e,selectedTile:t,onNext:n}=this.props;return React.createElement(EASEL.component.walkthroughStep,{title:"Align your material",nextCallback:n,nextText:"Confirm material alignment"},React.createElement("div",{className:"diagram"},React.createElement("img",{src:e?EASEL.assets.images.walkthroughTiling:EASEL.assets.images.walkthroughTilingShift}),!e&&React.createElement("div",{className:"tiling-shift-amount"},React.createElement("h3",null,t.getOffsetDisplayString()),React.createElement("i",{className:"fa fa-chevron-down"}))),React.createElement("div",{className:"explanation"},e?React.createElement("p",null,"You are carving the first tile."):React.createElement("p",null,"You are carving a tile. Double check you have",React.createElement("strong",null,` moved your entire piece down ${t.getOffsetDisplayString()} `),"from the original work zero.")))}})})},function(e,t){EASEL.component.carveInterrupted=createReactClass({propTypes:{onResume:PropTypes.func,onStartOver:PropTypes.func,onNext:PropTypes.func},render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Resume Carve?",nextCallback:this.props.onNext},React.createElement("div",{className:"row"},React.createElement("div",{className:"centered icon-holder col-sm-4 col-sm-offset-4"},React.createElement("img",{src:EASEL.assets.images.sadEasel}))),React.createElement("div",{className:"row"},React.createElement("div",{className:"centered col-sm-8 col-sm-offset-2"},React.createElement("h3",null,"It looks like your last carve was interrupted."),React.createElement("h4",null,"Do you want to pick up from where you left off?"))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 col-sm-offset-2"},React.createElement(ReactBootstrap.Button,{id:"resume-carve",bsStyle:"primary",bsSize:"large",onClick:this.props.onResume},"Resume carve")),React.createElement("div",{className:"col-sm-3 col-sm-offset-2"},React.createElement(ReactBootstrap.Button,{id:"start-carve-over",bsStyle:"default",bsSize:"large",onClick:this.props.onStartOver},"Start over"))))}})},function(e,t){EASEL.component.carveyFirstJobWalkthrough=createReactClass({propTypes:{onFinish:PropTypes.func.isRequired,onHide:PropTypes.func,machineState:PropTypes.string,isCarving:PropTypes.bool},render(){const e=[];return e.push({class:EASEL.component.confirmClamp,title:"Check the material"}),e.push({class:EASEL.component.insertBit,title:"Insert the bit"}),e.push({class:EASEL.component.startCarvingContainer,title:"Start carving",props:{isStarting:this.props.isCarving,machineState:this.props.machineState}}),React.createElement(EASEL.component.walkthrough,{onFinish:this.props.onFinish,onHide:this.props.onHide,steps:e,showProgress:!0})}})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.carveyFirstJobWalkthroughModal=createReactClass({props:{machineType:PropTypes.string,connectionState:PropTypes.string},getInitialState:()=>({show:!1,isCarving:!1}),componentDidMount(){EASEL.flux.events.addListener("show-carvey-first-job-walkthrough",this.show),EASEL.flux.events.addListener("hide-walkthrough",this.hide),EASEL.flux.events.addListener("door-error",this.onDoorError)},show(){EASEL.stats.trackEventOnServer(EASEL.events.startedTutorial),this.setState({show:!0,isCarving:!1})},hide(){this.setState({show:!1})},onDoorError(){this.setState({isCarving:!1})},startJobWithGcode(e){return this.setState({isCarving:!0}),EASEL.localSender.reset(),EASEL.localSender.home(),setTimeout((()=>{this.state.isCarving&&(EASEL.machineStateActions.resetProbeResult(),EASEL.localSender.startJob(e),this.hide())}),1e3)},startJob(){return EASEL.gcodeForVolumes.process({style:"all",done:e=>{if(null!=e.error){EASEL.errorReporter.submitNonUserReportedError({userNotes:"Please forward this to devhelp for review",error:{sender_note:e.error},gcode:e.gcode});const{title:t,message:n}=EASEL.stringConstants.alerts.invalidDepthError;EASEL.alert(t,n)}else this.startJobWithGcode(e)}})},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,bsSize:"large",backdrop:"static",className:"walkthrough-modal",onHide:this.hide},React.createElement(EASEL.component.carveyFirstJobWalkthrough,((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({onFinish:this.startJob,onHide:this.hide,isCarving:this.state.isCarving},this.props)))}})},function(e,t){EASEL.component.carveyPostWalkthrough=createReactClass({getInitialState:()=>({show:!1,activeIndex:Math.floor(6*Math.random()),direction:"next",authenticityToken:$('meta[name="csrf-token"]').attr("content")}),hide(){this.setState({show:!1})},show(){this.setState({show:!0})},componentDidMount(){EASEL.flux.events.addListener("show-carvey-first-job-walkthrough",(()=>{EASEL.flux.events.addListener("job-completed-success",this.show)}))},editThisProject(e){e.preventDefault(),EASEL.stats.trackEvent("Carvey Walkthrough - Edit Current"),this.hide()},handleSelect(e,t){this.setState({activeIndex:e,direction:t})},trackProjectInstructions(e){EASEL.stats.trackEvent("Carvey Walkthrough - Opened Project Instructions",{project:e.target.href})},trackProjectBrowsing(){EASEL.stats.trackEvent("Carvey Walkthrough - Opened Projects")},trackStartNewProject(){EASEL.stats.trackEvent("Carvey Walkthrough - Start New")},carousel(){const e=[{name:"Corian and Bamboo Vase",img:EASEL.assets.projects.vase,url:"https://www.inventables.com/projects/corian-and-bamboo-test-tube-vase"},{name:"Poker Card Box",img:EASEL.assets.projects.cardBox,url:"https://www.inventables.com/projects/poker-card-box"},{name:"Quadcopter",img:EASEL.assets.projects.quadcopter,url:"https://www.inventables.com/projects/cnc-fpv-quadcopter"},{name:"Jewelery Dish",img:EASEL.assets.projects.dish,url:"https://www.inventables.com/projects/rustic-arrow-dish"},{name:"Printed Circuit Board",img:EASEL.assets.projects.circuitBoard,url:"https://www.inventables.com/projects/how-to-mill-a-through-hole-pcb"},{name:"Number Puzzle",img:EASEL.assets.projects.puzzle,url:"https://www.inventables.com/projects/number-puzzle"}],t=e.map(((e,t)=>React.createElement(ReactBootstrap.CarouselItem,{key:`post-walkthrough-carousel-${t}`},React.createElement("div",{className:"post-walkthrough-carousel-caption"},React.createElement("h3",null,e.name)),React.createElement("img",{style:{margin:0},src:e.img})))),n=React.createElement("i",{className:"fa fa-chevron-right"}),a=React.createElement("i",{className:"fa fa-chevron-left"});return React.createElement("div",{className:"bordered-carousel"},React.createElement(ReactBootstrap.Carousel,{activeIndex:this.state.activeIndex,direction:this.state.direction,onSelect:this.handleSelect,indicators:!1,nextIcon:n,prevIcon:a},t),React.createElement("a",{className:"carousel-footer carousel-footer-primary",href:e[this.state.activeIndex].url,target:"_blank",rel:"noreferrer",onClick:this.trackProjectInstructions},"View instructions"),React.createElement("a",{className:"carousel-footer",href:"https://www.inventables.com/projects",target:"_blank",rel:"noreferrer",onClick:this.trackProjectBrowsing},"Find more projects"))},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,onHide:this.hide},React.createElement(ReactBootstrap.Modal.Body,{className:"walkthrough-step-container"},React.createElement("div",{className:"step walkthrough-step"},React.createElement("div",null,React.createElement("h1",{className:"walkthrough-step-header"},"What's next?"),React.createElement(ReactBootstrap.Row,null,React.createElement(ReactBootstrap.Col,{sm:12},React.createElement("h5",null,"Explore"),this.carousel())),React.createElement(ReactBootstrap.Row,null,React.createElement(ReactBootstrap.Col,{sm:12},React.createElement("h5",null,"Create"),React.createElement("form",{style:{display:"inline-block"},method:"POST",action:"/projects",target:"_blank"},React.createElement("input",{name:"authenticity_token",type:"hidden",value:this.state.authenticityToken}),React.createElement("button",{className:"btn btn-confirm btn-confirm-duo",onClick:this.trackStartNewProject},"Start a new project")),React.createElement("a",{style:{display:"inline-block"},className:"btn btn-confirm btn-confirm-duo",href:"#",onClick:this.editThisProject},"Edit current project")))))))}})},function(e,t,n){const a=n(994);EASEL.component.carveyWalkthrough=EASEL.redux.connect({mapStateToProps:e=>({supportedFirmwareVersions:EASEL.firmwareVersionSelectors.getSupportedVersionsForMachine(e)(EASEL.machineType.CARVEY)}),component:createReactClass({propTypes:{isExternalGcode:PropTypes.bool,isCarving:PropTypes.bool,useDetailBit:PropTypes.bool,onHide:PropTypes.func,onFinish:PropTypes.func.isRequired},getState(){const e=EASEL.materialStore.getActiveMaterial()&&EASEL.materialStore.getActiveMaterial().dimensions;return{clamp:e&&a.getLargestClampForMaterial(e.z)}},getInitialState(){let e;return EASEL.shallowMerge(this.getState(),{firmwareUpdateInitiallyRequired:this.props.supportedFirmwareVersions.length>0&&(e=EASEL.machineStateStore.getFirmwareVersion(),!this.props.supportedFirmwareVersions.includes(e))&&!EASEL.hasAccessGrant("firmware_testing")})},componentDidMount(){EASEL.materialStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.materialStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},render(){const e=[];return this.state.firmwareUpdateInitiallyRequired&&e.push({class:EASEL.component.updateFirmwareContainer,title:"Update firmware"}),this.props.isExternalGcode?e.push({class:EASEL.component.gcodeWarning,title:"Importing Gcode"}):e.push({class:EASEL.component.measureMaterialContainer,title:"Measure material"}),e.push({class:EASEL.component.removeSmartClamp,title:"Position material",props:{clamp:this.state.clamp}}),e.push({class:EASEL.component.secureSmartClamp,title:"Secure Smart Clamp",props:{clamp:this.state.clamp}}),e.push({class:EASEL.component.secureSideClamps,title:"Secure side clamps",props:{clamp:this.state.clamp}}),this.props.useDetailBit&&!this.props.isExternalGcode&&e.push({class:EASEL.component.choosePassType,title:"Choose pass type"}),this.props.isExternalGcode||e.push({class:EASEL.component.chooseBitContainer,title:"Confirm bit"}),e.push({class:EASEL.component.startCarvingContainer,title:"Start carving",props:{isStarting:this.props.isCarving}}),React.createElement(EASEL.component.walkthrough,{onFinish:this.props.onFinish,onHide:this.props.onHide,steps:e,showProgress:!0,machineType:this.props.machineType})}})})},function(e,t){const n={getLargestClampForMaterial:function(e){return[{maxThickness:.325,color:"green",liftSmartClampImage:EASEL.assets.images.liftSmartClampGreen,secureSmartClampImage:EASEL.assets.images.fastenSmartClampGreen,secureSideClampImage:EASEL.assets.images.secureSideClampsGreen},{maxThickness:.73,color:"blue",liftSmartClampImage:EASEL.assets.images.liftSmartClampBlue,secureSmartClampImage:EASEL.assets.images.fastenSmartClampBlue,secureSideClampImage:EASEL.assets.images.secureSideClampsBlue},{maxThickness:.9,color:"red",liftSmartClampImage:EASEL.assets.images.liftSmartClampRed,secureSmartClampImage:EASEL.assets.images.fastenSmartClampRed,secureSideClampImage:EASEL.assets.images.secureSideClampsRed}].find((t=>e<t.maxThickness))}};e.exports=n},function(e,t,n){var a=Object.defineProperty,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const l=n(82);EASEL.component.carveyWalkthroughModal=EASEL.redux.connect({mapStateToProps:e=>({gcode:EASEL.externalGcodeSelectors.getGcode(e),keepInRects:EASEL.machineSettingsSelectors.getKeepInRects(e),keepOutRects:EASEL.machineSettingsSelectors.getKeepOutRects(e),passType:EASEL.walkthroughSelectors.getPassType(e)}),component:createReactClass({propTypes:{isExternalGcode:PropTypes.bool,useDetailBit:PropTypes.bool},getInitialState:()=>({show:!1,isCarving:!1}),componentDidMount(){EASEL.flux.events.addListener("show-walkthrough",this.show),EASEL.flux.events.addListener("hide-walkthrough",this.hide),EASEL.flux.events.addListener("door-error",this.onDoorError)},show(){EASEL.localSender.presentMaterial(),this.setState({show:!0,isCarving:!1})},hide(){this.setState({show:!1})},onDoorError(){this.setState({isCarving:!1})},startJobWithGcode(e){return this.setState({isCarving:!0}),EASEL.localSender.reset(),setTimeout((()=>(EASEL.localSender.home(),setTimeout((()=>{this.state.isCarving&&(EASEL.machineStateActions.resetProbeResult(),EASEL.localSender.startJob(e),this.hide())}),1e3))),200)},startJob(){let e=this.props.gcode;if(e){const t=l.withHeaderAndFooter(e);return this.startJobWithGcode({gcode:t,isExternalGcode:!0,timeEstimate:l.getTime(t)})}return EASEL.gcodeForVolumes.process({style:this.props.useDetailBit?this.props.passType:"all",done:e=>{if(null==e.error)return EASEL.gcodeValidationLoader.validate({gcodeString:e.gcode,keepInRects:this.props.keepInRects,keepOutRects:this.props.keepOutRects,checkSyntax:!1,done:()=>this.startJobWithGcode(e)}).catch((e=>{if(null==e.title||null==e.message)return Promise.reject(e);this.hide(),EASEL.stats.trackEvent("Toolpath validation failed",{error:e.title,message:e.message}),EASEL.alert(e.title,e.message)}));{EASEL.errorReporter.submitNonUserReportedError({userNotes:"Please forward this to devhelp for review",error:{sender_note:e.error},gcode:e.gcode});const{title:t,message:n}=EASEL.stringConstants.alerts.invalidDepthError;EASEL.alert(t,n)}}})},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,bsSize:"large",backdrop:"static",className:"walkthrough-modal",onHide:this.hide},React.createElement(EASEL.component.a,{className:"close-modal",onClick:this.hide},"\xd7"),React.createElement(EASEL.component.carveyWalkthrough,((e,t)=>{for(var n in t||(t={}))o.call(t,n)&&i(e,n,t[n]);if(r)for(var n of r(t))s.call(t,n)&&i(e,n,t[n]);return e})({onFinish:this.startJob,onHide:this.hide,isCarving:this.state.isCarving},this.props)))}})})},function(e,t){EASEL.component.carveyWelcome=createReactClass({getInitialState:()=>({show:!1}),componentDidMount(){EASEL.flux.events.addListener("show-carvey-welcome",this.show)},show(){this.setState({show:!0})},hide(){this.setState({show:!1}),EASEL.flux.events.emit("show-carvey-first-job-walkthrough")},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,bsSize:"large",className:"walkthrough-modal",onHide:this.hide},React.createElement("div",null,React.createElement(EASEL.component.walkthroughStep,{title:"Test carving",nextCallback:this.hide,nextText:"Get Started!",backCallback:this.hide},React.createElement("div",{className:"diagram"},React.createElement("img",{src:EASEL.assets.images.firstProject,id:"carvey-first-job-splash-img"})),React.createElement("div",{className:"explanation"},React.createElement("p",null,"Let's get your Carvey up and running! As a test carving, we'll engrave the Easel logo in a piece of sample material."),React.createElement("p",null,"This project will walk you through the basics of how Carvey works."),React.createElement("p",{className:"alert"},React.createElement("b",null,React.createElement("i",{className:"fa fa-exclamation-circle alert"}))," Before using Carvey, make sure you've read and understand the ",React.createElement("a",{href:"http://carvey-instructions.inventables.com/safetymanual/",target:"_blank",rel:"noreferrer"},"safety manual"),".")))))}})},function(e,t){EASEL.component.clampMessage=createReactClass({props:{clamp:PropTypes.object},render(){return this.props.clamp?React.createElement("span",{style:{color:this.props.clamp.color}},this.props.clamp.color):null}})},function(e,t){EASEL.component.connectMachine=createReactClass({propTypes:{connectionState:PropTypes.string.isRequired},step(){switch(this.props.connectionState){case"connecting_to_local_sender":return React.createElement(EASEL.component.installLocalSender,null);case"local_sender_out_of_date":return React.createElement(EASEL.component.updateLocalSender,null);case"checking_connection_status":case"connecting_to_machine":case"checking_machine_status":return React.createElement(EASEL.component.searchingForMachine,null);case"alarm_lock":return React.createElement(EASEL.component.machineLocked,null);default:return React.createElement("pre",null,"Unknown connection state: ",this.props.connectionState+"")}},render(){return React.createElement("div",null,this.step())}})},function(e,t){EASEL.component.removeSmartClamp=createReactClass({propTypes:{onNext:PropTypes.func,onBack:PropTypes.func,clamp:PropTypes.object},render(){const e=null!=this.props.clamp&&this.props.clamp.liftSmartClampImage||EASEL.assets.images.liftSmartClamp;return React.createElement(EASEL.component.walkthroughStep,{title:"Position your material",nextCallback:this.props.onNext,backCallback:this.props.onBack,nextText:"Next",closeCallback:this.props.onClose},React.createElement("div",{className:"diagram"},React.createElement("div",{className:"clamp-img carvey-clamp-img"},React.createElement("img",{src:e})),React.createElement("div",{className:"explanation"},React.createElement("p",null,"First, lift the Smart Clamp and position your material flush against the L-shaped groove."))))}})},function(e,t){EASEL.component.secureSideClamps=createReactClass({propTypes:{onNext:PropTypes.func,onBack:PropTypes.func,clamp:PropTypes.object},render(){const e=null!=this.props.clamp&&this.props.clamp.secureSideClampImage||EASEL.assets.images.secureSideClamps;return React.createElement(EASEL.component.walkthroughStep,{title:"Secure side clamps",nextCallback:this.props.onNext,backCallback:this.props.onBack,nextText:"Material is secure",closeCallback:this.props.onClose},React.createElement("div",{className:"diagram"},React.createElement("div",{className:"clamp-img carvey-clamp-img"},React.createElement("img",{src:e})),React.createElement("div",{className:"explanation"},React.createElement("p",null,"Using the ",React.createElement(EASEL.component.clampMessage,{clamp:this.props.clamp})," screws, clamp the right side of the material, securing the clamp as shown above. Repeat on all sides until material is fully secured."),React.createElement("div",{className:"alert"},React.createElement("i",{className:"fa fa-exclamation-triangle"}),'\xa0Make sure the "lip" of the clamp base is flat against the waste board.'))))}})},function(e,t){EASEL.component.secureSmartClamp=createReactClass({propTypes:{onNext:PropTypes.func,onBack:PropTypes.func,clamp:PropTypes.object},render(){const e=null!=this.props.clamp&&this.props.clamp.secureSmartClampImage||EASEL.assets.images.fastenSmartClamp;return React.createElement(EASEL.component.walkthroughStep,{title:"Secure the Smart Clamp",nextCallback:this.props.onNext,backCallback:this.props.onBack,nextText:"Next",closeCallback:this.props.onClose},React.createElement("div",{className:"diagram"},React.createElement("div",{className:"clamp-img carvey-clamp-img"},React.createElement("img",{src:e})),React.createElement("div",{className:"explanation"},React.createElement("p",null,"Position the Smart Clamp over the corner of your material and screw it down tightly using the ",React.createElement(EASEL.component.clampMessage,{clamp:this.props.clamp})," screws."))))}})},function(e,t){EASEL.component.startCarving=createReactClass({propTypes:{onNext:PropTypes.func.isRequired,onClose:PropTypes.func.isRequired,connectionState:PropTypes.string.isRequired,machineConnected:PropTypes.bool,disabled:PropTypes.bool,progressLabel:PropTypes.string,onStartCarving:PropTypes.func.isRequired},render(){const e=this.props.progressLabel||"Carve!";return this.props.machineConnected?React.createElement(EASEL.component.walkthroughStep,{title:"Start carving",nextText:e,nextCallback:this.props.onStartCarving,closeCallback:this.props.onClose,disableNext:this.props.disabled},React.createElement("h3",null,"Make sure Carvey's interior is clear and close the door."),React.createElement("div",{className:"diagram"},React.createElement("div",{className:"clamp-img"},React.createElement("img",{src:EASEL.assets.images.carving})))):React.createElement(EASEL.component.connectMachine,{connectionState:this.props.connectionState})}})},function(e,t){EASEL.component.startCarvingContainer=createReactClass({propTypes:{onNext:PropTypes.func.isRequired,onClose:PropTypes.func.isRequired,isStarting:PropTypes.bool},machineConnected(){return!["connecting_to_local_sender","local_sender_out_of_date","checking_connection_status","connecting_to_machine","checking_machine_status"].includes(this.state.connectionState)},getState:()=>({connectionState:EASEL.machineStateStore.getConnectionState(),isDoorDefinitelyOpen:EASEL.machineStateUtils.isDoorDefinitelyOpen(),machineState:EASEL.machineStateStore.getState()}),getInitialState(){return EASEL.shallowMerge(this.getState(),{progressLabel:null,updating:!1})},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange),this.cancelUpdater()},_onChange(){this.setState(this.getState())},onSettingsUpdateStarting(){return this.setState({progressLabel:"Updating settings"})},onSettingsUpdateAlways(){this.setState({updating:!1,progressLabel:null}),this.props.onNext()},onStartCarving(){this.setState({updating:!0}),"hold"===this.state.machineState&&EASEL.localSender.reset(),this.cancelUpdater=EASEL.settingsUpdater({starting:this.onSettingsUpdateStarting,always:this.onSettingsUpdateAlways}).start()},render(){const e=this.props.isStarting||this.state.updating||this.state.isDoorDefinitelyOpen;return React.createElement(EASEL.component.startCarving,{onNext:this.props.onNext,onClose:this.props.onClose,connectionState:this.state.connectionState,progressLabel:this.state.progressLabel,disabled:e,machineConnected:this.machineConnected(),onStartCarving:this.onStartCarving})}})},function(e,t){EASEL.component.updateFirmware=createReactClass({propTypes:{machineDescription:PropTypes.string.isRequired,firmwareUploadProgress:PropTypes.number,firmwareIsUploading:PropTypes.bool,onNext:PropTypes.func},getInitialState:()=>({starting:!0}),componentWillReceiveProps(e){this.state.starting&&0<e.firmwareUploadProgress&&e.firmwareUploadProgress<100?this.setState({starting:!1}):100!==e.firmwareUploadProgress||e.firmwareIsUploading||this.props.onNext()},render(){const e=this.props.firmwareUploadProgress;return React.createElement(EASEL.component.walkthroughStep,{title:"Updating Firmware..."},React.createElement("div",{className:"explanation"},React.createElement("div",null,React.createElement("p",null,React.createElement("span",null,`Please do not disconnect or turn off your ${this.props.machineDescription}`))),this.state.starting?React.createElement("div",{className:"center-text"},React.createElement(EASEL.component.spinner,null),React.createElement("p",null,"Starting upload...")):React.createElement("div",{className:"progress firmware-upload-progress-bar"},React.createElement("div",{className:"progress-bar",id:"firmware-upload-progress",role:"progressbar","aria-valuenow":this.props.firmwareUploadProgress,"aria-valuemin":"0","aria-valuemax":"100",style:{width:`${e}%`}},React.createElement("span",null,`Upload in progress (${e}%)`)))))}})},function(e,t){EASEL.component.walkthroughNotice=createReactClass({render(){return React.createElement("div",{className:"notice"},React.createElement("span",null,this.props.body))}})},function(e,t){EASEL.component.chooseBit=createReactClass({propTypes:{onNext:PropTypes.func,bits:PropTypes.arrayOf(EASEL.propTypes.bit).isRequired,roughingBit:EASEL.propTypes.bit,detailBit:EASEL.propTypes.bit,useDetailBit:PropTypes.bool,passType:PropTypes.string,authorizedToCarve:PropTypes.bool,machineType:PropTypes.string},roughingBits(){return EASEL.bitSelectors.bitsForRoughing(this.props.useDetailBit,this.props.detailBit,this.props.bits)},render(){let{bits:e,detailBit:t,authorizedToCarve:n,onNext:a,passType:r,roughingBit:o,useDetailBit:s,machineType:i}=this.props;r=s?r:"all";const l=i===EASEL.machineType.XCARVE_PRO?React.createElement("div",{className:"bit-pass-type--notice"},React.createElement("p",null,"Mare sure you properly engage your bit into the collet with the proper amount of bit projection."),React.createElement("p",null,'The entire shaft of the tool should be engaged in the collet with less than 1/4" of length of exposed shaft before the cutting edge begins.'),React.createElement("p",null,"Properly tighten the collet nut with the provided wrenches to a tightness which will ensure the bit does not slip out of the collect when the machine is cutting, especially with downspiral bits.")):"";switch(r){case"roughing":case"all":return React.createElement(EASEL.component.walkthroughStep,{title:"Confirm your bit",nextCallback:a,nextText:n?"Confirm bit size":"Easel Pro required",disableNext:!n},React.createElement("div",{className:"measure-bit-pass-type measure-bit-pass-type-roughing"},React.createElement(EASEL.component.walkthroughMainBitSelector,{bit:o,bits:this.roughingBits()}),!n&&React.createElement(EASEL.component.walkthroughProWarning,null)),l);case"detail":return React.createElement(EASEL.component.walkthroughStep,{title:"Confirm your bits",nextCallback:a,nextText:n?"Both bit sizes are correct":"Easel Pro required",disableNext:!n},React.createElement("div",{className:"measure-bit-pass-type measure-bit-pass-type-detail"},React.createElement(EASEL.component.walkthroughDetailBitSelector,{bits:e,roughingBits:this.roughingBits(),roughingBit:o,detailBit:t,isPaywallVisible:!n})),l)}}})},function(e,t){EASEL.component.chooseBitContainer=EASEL.redux.connect({mapStateToProps:e=>({bits:EASEL.bitSelectors.bits(e),roughingBit:EASEL.bitSelectors.bit(e),detailBit:EASEL.bitSelectors.detailBit(e),useDetailBit:EASEL.bitSelectors.useDetailBit(e),authorizedToCarve:EASEL.userSelectors.authorizedToCarve(Date.now(),e),machineType:EASEL.machineSettingsSelectors.getMachineType(e),passType:EASEL.walkthroughSelectors.getPassType(e)}),component:createReactClass({render(){return React.createElement(EASEL.component.chooseBit,{bits:this.props.bits,authorizedToCarve:this.props.authorizedToCarve,roughingBit:this.props.roughingBit,detailBit:this.props.detailBit,useDetailBit:this.props.useDetailBit,passType:this.props.passType,machineType:this.props.machineType,onNext:this.props.onNext})}})})},function(e,t){EASEL.component.choosePassType=createReactClass({propTypes:{onNext:PropTypes.func.isRequired},getInitialState:()=>({passType:EASEL.walkthroughSelectors.getPassType(EASEL.store.getState())}),componentDidMount(){EASEL.bitSelectors.useDetailBit(EASEL.store.getState())||null!=EASEL.threeDPrototypeSelectors.getMesh(EASEL.store.getState())||this.props.onNext()},onSetPassType(e){EASEL.store.dispatch(EASEL.walkthroughActionCreators.setPassType(e.target.value)),this.setState({passType:e.target.value})},render(){const{passType:e}=this.state;return React.createElement(EASEL.component.walkthroughStep,{title:"Choose pass type",nextCallback:this.props.onNext,nextText:"Continue"},React.createElement("form",{className:"choose-pass-type"},React.createElement("div",{className:"choose-pass-type__row"},React.createElement("label",{htmlFor:"choose-pass-type--roughing",className:"roughing"===e?"choose-pass-type__label active":"choose-pass-type__label"},React.createElement("input",{id:"choose-pass-type--roughing",className:"choose-pass-type__input",type:"radio",name:"passType",value:"roughing",checked:"roughing"===e,onChange:this.onSetPassType}),React.createElement("i",{className:"fa fa-3x fa-dot-circle-o"}),React.createElement("span",{className:"choose-pass-type__title"},"Roughing pass")),React.createElement("p",null,"Carve as much of the design as possible")),React.createElement("div",{className:"choose-pass-type__row"},React.createElement("label",{htmlFor:"choose-pass-type--detail",className:"detail"===e?"choose-pass-type__label active":"choose-pass-type__label"},React.createElement("input",{id:"choose-pass-type--detail",className:"choose-pass-type__input",type:"radio",name:"passType",value:"detail",checked:"detail"===e,onChange:this.onSetPassType}),React.createElement("i",{className:"fa fa-3x fa-bullseye"}),React.createElement("span",{className:"choose-pass-type__title"},"Detail pass")),React.createElement("p",null,"Carve only areas of the design not reachable with a specified larger bit"))))}})},function(e,t){EASEL.component.chooseStartingPoint=createReactClass({propTypes:{onNext:PropTypes.func,setStartingPoint:PropTypes.func.isRequired,startFrame:PropTypes.number.isRequired,gcode:PropTypes.string.isRequired},getInitialState:()=>({previewPanel:null,resumeFrame:null}),setResumeFrame(e){this.setState({resumeFrame:e})},resumeFromHere(){const e=null!=this.state.resumeFrame?this.state.resumeFrame:this.props.startFrame;this.props.setStartingPoint(e),this.props.onNext()},componentDidMount(){const e=EASEL.threeDimensionalRenderer();e.init(),this.container.appendChild(e.getDOMElement()),e.setSize(600,400),e.add(EASEL.wasteboard().init(e.render).getMesh()),this.setState({previewPanel:e})},render(){const e=[{gcode:this.props.gcode,jobSettings:{passType:"all"}}];return React.createElement(EASEL.component.walkthroughStep,{title:"Confirm starting point",nextText:"Start from here",nextCallback:this.resumeFromHere},React.createElement("div",{className:"centered",ref:e=>{this.container=e}}),React.createElement("div",{className:"row"},this.state.previewPanel&&React.createElement(EASEL.component.internalGcodeSender,{onSetCurrentFrame:this.setResumeFrame,gcodePasses:e,startFrame:this.props.startFrame,previewPanel:this.state.previewPanel,toolpathsVisible:!0})))}})},function(e,t){EASEL.component.clampMaterial=createReactClass({propTypes:{machineType:PropTypes.string,onNext:PropTypes.func},render(){const{machineType:e,onNext:t}=this.props;let n;const a=e===EASEL.machineType.CARVEY?React.createElement("div",{className:"clamp-img",id:"carvey-clamping-img"},React.createElement("img",{src:EASEL.assets.images.carveyClampedMaterial,id:"carvey-clamp-img"})):React.createElement("div",{className:"clamp-img"},React.createElement("img",{src:EASEL.assets.images.xcarveClampedMaterial}));return e===EASEL.machineType.CARVEY?n=React.createElement("p",null,"Clamp your material under the Smart Clamp, and use clamps on the sides as shown above."):e===EASEL.machineType.XCARVE_PRO&&(n=React.createElement("strong",null,"Clamp or secure your material so that it does not move when higher feed rate and depth of cut settings are used.")),React.createElement(EASEL.component.walkthroughStep,{title:"Clamp down the material",nextCallback:t,nextText:"Material is secure"},React.createElement("div",{className:"diagram"},a,React.createElement("div",{className:"explanation"},n,React.createElement("p",null,"Make sure that your material is fully secure before continuing."))))}})},function(e,t){EASEL.component.clampMaterialContainer=EASEL.redux.connect({mapStateToProps:e=>({machineType:EASEL.machineSettingsSelectors.getMachineType(e)}),component:createReactClass({propTypes:{onNext:PropTypes.func},render(){return React.createElement(EASEL.component.clampMaterial,{machineType:this.props.machineType,onNext:this.props.onNext})}})})},function(e,t){EASEL.component.confirmClamp=createReactClass({propTypes:{onNext:PropTypes.func.isRequired},render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Check the material",nextCallback:this.props.onNext,nextText:"Material is secure"},React.createElement("div",{className:"diagram"},React.createElement("div",{className:"clamp-img",id:"carvey-clamping-img"},React.createElement("img",{src:EASEL.assets.images.carveyClampedMaterial})),React.createElement("div",{className:"explanation"},React.createElement("p",null,"We've already clamped a piece of material in Carvey for you. Please confirm that the piece is secure and unable to move."))))}})},function(e,t){EASEL.component.confirmMaterialType=createReactClass({propTypes:{material:PropTypes.object.isRequired,materialList:PropTypes.array},setMaterial(e){EASEL.undoActions.beginGroup("select material");const t=this.props.materialList[e];EASEL.materialActions.select(t.id,t.name),EASEL.undoActions.endGroup()},render(){const e=this.props.materialList.map(((e,t)=>{const n=e.name===this.props.material.name,a="material-"+e.name;return React.createElement(ReactBootstrap.MenuItem,{id:a,eventKey:t,key:t+e.name,active:n},React.createElement("img",{className:"dropdown-img",src:e.textureUrl}),e.name)}));return React.createElement(ReactBootstrap.Dropdown,{dropup:!0,id:"material-confirmation-dropdown",onSelect:this.setMaterial},React.createElement(ReactBootstrap.Dropdown.Toggle,null,React.createElement("img",{className:"dropdown-img",src:this.props.material.textureUrl}),this.props.material.name),React.createElement(ReactBootstrap.Dropdown.Menu,null,e))}})},function(e,t){EASEL.component.confirmWorkZeroComponent=createReactClass({propTypes:{onNext:PropTypes.func},onNext(){EASEL.localSender.setOrigin(),EASEL.store.dispatch(EASEL.walkthroughActionCreators.setUsingLastHome(!1)),this.props.onNext()},onAltNext(){EASEL.store.dispatch(EASEL.walkthroughActionCreators.setUsingLastHome(!0)),this.props.onNext()},useLastPositionAsPrimary(){const{isTileSelected:e,isFirstTileSelected:t}=this.props;return e&&!t},render(){const e=this.useLastPositionAsPrimary()?"btn-primary":"btn-default",t=this.useLastPositionAsPrimary()?"btn-default":"btn-primary";return React.createElement(EASEL.component.walkthroughStep,{title:"Confirm work zero",disableNext:!0},React.createElement("div",{className:"diagram zero-diagram"},React.createElement("p",{className:"explanation"},"Choose a new work zero"),React.createElement("div",{className:"explanation-row"},React.createElement("div",{className:"split"},React.createElement("img",{src:EASEL.assets.images.zeroXY}),React.createElement("div",{className:"explanation"},React.createElement("p",null,"Move the machine to the ",React.createElement("b",null,"front left corner")," of your material"))),React.createElement("div",{className:"split"},React.createElement("img",{src:EASEL.assets.images.zeroZ}),React.createElement("div",{className:"explanation"},React.createElement("p",null,"Lower the bit to ",React.createElement("b",null,"the surface")," of your material")))),React.createElement("div",{className:"explanation"},React.createElement("button",{className:t+" btn btn-lg",onClick:this.onNext},"Use new position")),React.createElement("hr",null),React.createElement("div",{className:"explanation"},React.createElement("p",null,"Or use the last work zero from the previous carve"),React.createElement("button",{className:e+" btn btn-lg",onClick:this.onAltNext},"Use last position"))))}}),EASEL.component.confirmWorkZero=EASEL.redux.connect({mapStateToProps:e=>({isBetaTester:EASEL.userSelectors.isBetaTester(e),isTileSelected:EASEL.tileSelectors.isTileSelected(e),isFirstTileSelected:EASEL.tileSelectors.isFirstTileSelected(e)}),component:EASEL.component.confirmWorkZeroComponent})},function(e,t){EASEL.component.firmwareNotice=createReactClass({doFirmwareUpload(){EASEL.flux.events.emit("hide-walkthrough"),EASEL.flux.events.emit("show-firmware-upload-walkthrough")},render(){const e=EASEL.machineTypeHelper.description(this.props.machineType);return React.createElement(EASEL.component.walkthroughNotice,{body:["A new firmware version is available for your "+e+". ",EASEL.component.DOM.a({onClick:this.doFirmwareUpload},"Click here")," to download it."]})}})},function(e,t){EASEL.component.firmwareUploadWalkthrough=EASEL.redux.connect({mapStateToProps:e=>({getCurrentVersionHexFileUrlForMachine:EASEL.firmwareVersionSelectors.getCurrentVersionHexFileUrlForMachine(e),getCurrentVersionNumberForMachine:EASEL.firmwareVersionSelectors.getCurrentVersionNumberForMachine(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e)}),component:createReactClass({props:{onHide:PropTypes.func.isRequired,onFinish:PropTypes.func.isRequired},getState:()=>({firmwareIsUploading:EASEL.machineStateStore.isFirmwareUploading(),firmwareUploadProgress:EASEL.machineStateStore.getFirmwareProgress()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._updateState)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._updateState)},_updateState(){this.setState(this.getState())},onReadHexData(e){this.setState({hexData:e})},onUseCurrentFirmware(){this.setState({hexData:null})},render(){const e=[],t=EASEL.machineStateStore.getFeatures(),n=this.props.getCurrentVersionNumberForMachine(this.props.machineType),a=EASEL.firmwareUtils.featuresForFirmware(n),r=(t?t.settingsVersion:null)!==(a?a.settingsVersion:null);return r&&e.push({class:EASEL.component.uploadFirmwareWarning,title:"Warning",props:{hide:this.props.onHide}}),e.push({class:EASEL.component.uploadFirmwarePrompt,title:"Select firmware",props:{onReadHexData:this.onReadHexData,onUseCurrentFirmware:this.onUseCurrentFirmware}}),e.push({class:EASEL.component.updateFirmwareContainer,title:"Update firmware",props:{firmwareHex:this.state.hexData}}),e.push({class:EASEL.component.uploadFirmwareFinish,title:"Finish",props:{needsToSetUp:r}}),React.createElement(EASEL.component.walkthrough,{onFinish:this.props.onFinish,onHide:this.props.onHide,steps:e,showProgress:!0,hideBackButton:!0})}})})},function(e,t){EASEL.component.firmwareUploadWalkthroughModal=createReactClass({getInitialState:()=>({show:!1}),componentDidMount(){EASEL.flux.events.addListener("show-firmware-upload-walkthrough",this.show),EASEL.flux.events.addListener("hide-walkthrough",this.hide)},show(){this.setState({show:!0})},hide(){this.setState({show:!1})},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,backdrop:"static",className:"firmware-upload-modal walkthrough-modal",onHide:this.hide},React.createElement("div",{style:{right:10},className:"close-modal",onClick:this.hide},"\xd7"),React.createElement(EASEL.component.firmwareUploadWalkthrough,{onFinish:this.hide,onHide:this.hide}))}})},function(e,t){EASEL.component.gcodeWarning=createReactClass({propTypes:{onNext:PropTypes.func,notice:PropTypes.func},getInitialState(){return{header:this.generateHeader(),footer:this.generateFooter()}},getMachineType:()=>EASEL.machineTypeHelper.currentPostProcessor(),formatGcode:e=>React.createElement("div",{className:"code-snippet"},e.map(((e,t)=>React.createElement("div",{key:t},e.gcode," ",e.comment?React.createElement("span",null,"; ",e.comment," "):"")))),generateHeader(){const e=EASEL.gcodeGenerator();return EASEL.postProcessor.addHeader(this.getMachineType(),e),EASEL.gcodeComments.explain(e)},generateFooter(){const e=EASEL.gcodeGenerator(),t=EASEL.userSelectors.getRapidRetractsEnabled(EASEL.store.getState());return EASEL.postProcessor.addFooter(this.getMachineType(),e,t),EASEL.gcodeComments.explain(e)},headerFooterMenu(){const e=this.formatGcode(this.state.header),t=this.formatGcode(this.state.footer);return React.createElement("div",null,React.createElement("hr",null),React.createElement("strong",null,"By default Easel will add the following header and footer to your g-code. \xa0",React.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://en.wikipedia.org/wiki/G-code#List_of_G-codes_commonly_found_on_FANUC_and_similarly_designed_controls_for_milling_and_turning"},React.createElement("i",{className:"fa fa-question-circle"}))),React.createElement("div",{className:"gcode-header-footer"},React.createElement("div",null,React.createElement("p",null,"Header"),e),React.createElement("div",null,React.createElement("p",null,"Footer"),t)),React.createElement("div",null,React.createElement("input",{type:"radio",id:"addGcodeHeaderFooter",value:"add",checked:"add"===this.props.gcodeHeaderFooter,onChange:this.props.handleChange}),React.createElement("label",{htmlFor:"addGcodeHeaderFooter"},"Add the header and footer to my g-code file")),React.createElement("div",null,React.createElement("input",{type:"radio",id:"removeGcodeHeaderFooter",value:"doNotAdd",checked:"doNotAdd"===this.props.gcodeHeaderFooter,onChange:this.props.handleChange}),React.createElement("label",{htmlFor:"removeGcodeHeaderFooter"},React.createElement("strong",null,"DO NOT")," make changes to my g-code file")))},render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Importing G-code",nextCallback:this.props.onNext,notice:this.props.notice,nextText:"I understand"},React.createElement("div",{className:"simple-diagram"},React.createElement("div",{id:"gcode-warning-image"},React.createElement("img",{src:EASEL.assets.images.gcodeEasel,id:"gcode-warning"})),React.createElement("div",{className:"explanation"},React.createElement("p",null,"As a reminder, Easel relies on the g-code file's settings for feed rate, depth per pass, safety height and material thickness. If you need to change these settings, you'll need to make the changes in your CAM software and upload the new g-code file."),void 0!==this.props.handleChange?this.headerFooterMenu():null)))}})},function(e,t){EASEL.component.insertBit=createReactClass({propTypes:{onNext:PropTypes.func},onNext(){EASEL.stats.trackEventOnServer(EASEL.events.completedTutorial),this.props.onNext()},render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Insert the bit",nextCallback:this.onNext,nextText:"Bit is secure"},React.createElement("div",{className:"diagram"},React.createElement("div",{id:"carvey-bit-img",className:"clamp-img"},React.createElement("img",{src:EASEL.assets.images.blueBit,style:{maxHeight:"200px",width:"50px",padding:"0px"}}),React.createElement("img",{src:EASEL.assets.images.securingBit})),React.createElement("div",{className:"explanation"},React.createElement("p",null,"Insert the ",React.createElement("strong",null,"blue bit")," (1/16\u2033 fishtail) and secure it using two wrenches."),React.createElement("p",null,"The larger wrench is used with the bottom part of the collet."))))}})},function(e,t){EASEL.component.installLocalSender=createReactClass({render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Install the Easel Driver",closeCallback:this.props.onClose},React.createElement("div",{className:"diagram"},React.createElement("div",{className:"explanation"},React.createElement("p",null,"Before you start carving, you\u2019ll need to install the Easel Driver. This is a small program that lets Easel connect to your Carvey.")),React.createElement(EASEL.component.localSenderDownloadButton,null)))}})},function(e,t){EASEL.component.machineLocked=createReactClass({propTypes:{homing:PropTypes.bool.isRequired,onHome:PropTypes.func.isRequired,onUnlock:PropTypes.func.isRequired,onNext:PropTypes.func.isRequired,notice:PropTypes.func},homingButton(){const e=this.props.homing?"Please wait\u2026":"Home the machine";return React.createElement(ReactBootstrap.Button,{bsStyle:"primary",onClick:this.props.onHome,disabled:this.props.homing,className:"confirm smaller"},e)},forceUnlockButton(){if(!this.props.homing)return React.createElement(ReactBootstrap.Button,{bsStyle:"default",onClick:this.props.onUnlock,className:"confirm smaller"},"Unlock without homing")},render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Home Machine",nextCallback:this.props.onNext,notice:this.props.notice},React.createElement("div",{className:"row"},React.createElement("div",{className:"centered icon-holder col-sm-5"},React.createElement("i",{className:"fa fa-home"})),React.createElement("div",{className:"col-sm-5"},React.createElement("p",null,"Make sure the machine is clear of any obstructions."),React.createElement("div",null,this.homingButton(),this.forceUnlockButton()))))}})},function(e,t){EASEL.component.machineLockedContainer=createReactClass({getInitialState:()=>({homing:!1}),home(){this.state.homing||(EASEL.localSender.home(),this.setState({homing:!0}))},unlock(){EASEL.localSender.unlock()},render(){return React.createElement(EASEL.component.machineLocked,{homing:this.state.homing,onHome:this.home,onUnlock:this.unlock,onNext:this.props.onNext})}})},function(e,t){EASEL.component.measureMaterial=createReactClass({propTypes:{material:PropTypes.object.isRequired,preferredUnit:PropTypes.string.isRequired,preferredUnitsPerInch:PropTypes.number.isRequired,materialList:PropTypes.array.isRequired,onNext:PropTypes.func,notice:PropTypes.func},render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Measure the material",nextCallback:this.props.onNext,nextText:"Confirm material thickness",notice:this.props.notice},React.createElement("div",{className:"diagram"},React.createElement("img",{src:EASEL.assets.images.measureMaterial,width:"500"})),React.createElement("div",{className:"explanation material-explanation"},React.createElement("p",{className:"form-inline"},"Enter the ",React.createElement("b",null,"exact thickness")," of the material:",React.createElement(EASEL.component.materialThicknessInput,{id:"carving-walkthrough-material-thickness",material:this.props.material,preferredUnit:this.props.preferredUnit,preferredUnitsPerInch:this.props.preferredUnitsPerInch})),React.createElement("div",{className:"form-inline"},"Confirm the type of the material:",React.createElement(EASEL.component.confirmMaterialType,{material:this.props.material,materialList:this.props.materialList}))))}})},function(e,t){EASEL.component.measureMaterialContainer=EASEL.redux.connect({mapStateToProps:e=>({preferredUnit:EASEL.unitSelectors.getPreferredUnit(e),preferredUnitsPerInch:EASEL.units.preferredUnitsPerInch()}),component:createReactClass({getState:()=>({material:EASEL.materialStore.getActiveMaterial(),materialList:EASEL.materialStore.getMaterials()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.materialStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.materialStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},render(){return React.createElement(EASEL.component.measureMaterial,{material:this.state.material,materialList:this.state.materialList,preferredUnit:this.props.preferredUnit,preferredUnitsPerInch:this.props.preferredUnitsPerInch,notice:this.props.notice,onNext:this.props.onNext})}})})},function(e,t){EASEL.component.planingInsertBit=createReactClass({propTypes:{onNext:PropTypes.func},render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Insert the bit",nextCallback:this.props.onNext,notice:this.props.notice,nextText:"Bit is secure"},React.createElement("div",{className:"diagram"},React.createElement("img",{src:EASEL.assets.images.insertPlaningBit}),React.createElement("div",{className:"explanation"},React.createElement("p",null,"Insert the included ",React.createElement("strong",null,'1.125" planing bit')," you got with your machine and secure it using the ",React.createElement("strong",null,"17mm")," and ",React.createElement("strong",null,"22mm wrenches.")),React.createElement("p",null,"The small ",React.createElement("strong",null,"17mm")," wrench is used to ",React.createElement("strong",null,"hold the spindle shaft in place")," while the large ",React.createElement("strong",null,"22mm wrench")," is used to tighten the collet nut."))))}})},function(e,t){EASEL.component.planingWalkthroughComponent=createReactClass({propTypes:{isExternalGcode:PropTypes.bool,useDetailBit:PropTypes.bool,onHide:PropTypes.func,onFinish:PropTypes.func.isRequired},getState:()=>({isLocked:EASEL.machineStateUtils.isLocked()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange)},_onChange(){const e=this.getState();e.isLocked!==this.state.isLocked&&this.setState(e)},getMachineDescription(){return this.props.thirdPartyModel||EASEL.machineTypeHelper.description(this.props.machineType)},render(){let e=!0;const{currentFirmwareVersion:t,machineType:n,onFinish:a,onHide:r,setIsUsingDustShoe:o}=this.props,s=[],i=EASEL.machineStateStore.getFirmwareVersion(),l=EASEL.machineTypeHelper.currentIsInventablesMachine();if(this.state.isLocked&&(s.push({class:EASEL.component.machineLockedContainer,title:"Home machine"}),e=!1),s.push({class:EASEL.component.planingInsertBit,title:"Insert bit"}),s.push({class:EASEL.component.planingWorkZero,title:"Confirm work zero"}),s.push({class:EASEL.component.xcarveStartCarvingContainer,title:"Start planing",props:{nextButtonText:"Plane!",setIsUsingDustShoe:o,requireDustShoe:!0,machineDescription:this.getMachineDescription()}}),l&&t&&t!==i){const e=React.createElement(EASEL.component.firmwareNotice,{machineType:n});s[0]=EASEL.setIn(s[0],["props","notice"],(()=>e))}return React.createElement(EASEL.component.walkthrough,{onFinish:a,onHide:r,steps:s,showProgress:e})}}),EASEL.component.planingWalkthrough=EASEL.redux.connect({mapStateToProps:e=>{const t=EASEL.machineSettingsSelectors.getMachineType(e);return{machineType:t,currentFirmwareVersion:EASEL.firmwareVersionSelectors.getCurrentVersionNumberForMachine(e)(t),thirdPartyModel:EASEL.machineSettingsSelectors.getThirdPartyModel(e)}},component:EASEL.component.planingWalkthroughComponent})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;EASEL.component.planingWalkthroughModalComponent=createReactClass({props:{machineType:PropTypes.string,connectionState:PropTypes.string},getInitialState:()=>({show:!1,isUsingDustShoe:!1}),componentDidMount(){EASEL.flux.events.addListener("show-planing-walkthrough",this.show),EASEL.flux.events.addListener("hide-walkthrough",this.hide)},show(){EASEL.stats.trackEventOnServer(EASEL.events.startedPlaning),this.setState({show:!0})},hide(){this.setState({show:!1})},onFinish(){this.setState({show:!1}),this.startJob()},setIsUsingDustShoe(e){this.setState({isUsingDustShoe:e})},startJob(){return EASEL.gcodeForVolumes.process({style:"all",done:e=>{if(null!=e.error){EASEL.errorReporter.submitNonUserReportedError({userNotes:"Please forward this to devhelp for review",error:{sender_note:e.error},gcode:e.gcode});const{title:t,message:n}=EASEL.stringConstants.alerts.invalidDepthError;EASEL.alert(t,n)}else e=EASEL.merge(e,{isExternalGcode:!1,isUsingDustShoe:this.state.isUsingDustShoe,postCarveModal:"planing"}),EASEL.localSender.startJob(e)}})},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,bsSize:"large",backdrop:"static",className:"walkthrough-modal",onHide:this.hide},React.createElement(EASEL.component.planingWalkthrough,((e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e})({onFinish:this.onFinish,onHide:this.hide,setIsUsingDustShoe:this.setIsUsingDustShoe},this.props)))}}),EASEL.component.planingWalkthroughModal=EASEL.redux.connect({mapStateToProps:e=>({hasDustShoe:EASEL.machineSettingsSelectors.getHasDustShoe(e)}),component:EASEL.component.planingWalkthroughModalComponent})},function(e,t){EASEL.component.planingWelcome=createReactClass({getInitialState:()=>({show:!1}),componentDidMount(){EASEL.flux.events.addListener("show-planing-welcome",this.show)},show(){this.setState({show:!0})},hide(){this.setState({show:!1}),EASEL.flux.events.emit("show-planing-walkthrough")},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,bsSize:"large",className:"walkthrough-modal",onHide:this.hide},React.createElement("div",null,React.createElement(EASEL.component.walkthroughStep,{title:"Easel Pro Planing Project",nextCallback:this.hide,nextText:"Get Started!",backCallback:this.hide},React.createElement("div",{className:"explanation"},React.createElement("p",null,"Let's plane your wasteboard."),React.createElement("p",null,"This project will help level your wasteboard to provide a machined level flat surface for you to carve on.")),React.createElement("div",{className:"planing-welcome__container"},React.createElement("div",{className:"col-md-8"},React.createElement("img",{className:"planing-welcome--full-width",src:EASEL.assets.images.planingDrawing})),React.createElement("div",{className:"col-md-4"},React.createElement("p",{className:"alert alert-info"},React.createElement("strong",null,"Why?")," Planing your wasteboard is a required step for the best carving results, especially with V-bits and fine detailed carves. Although the MDF wasteboard is manufactured to be flat, it can expand and contract with fluctuations in temperature and humidity. To ensure it is 100% level, we made the planing project."))))))}})},function(e,t){EASEL.component.planingWorkZero=createReactClass({propTypes:{onNext:PropTypes.func},onNext(){EASEL.localSender.setOrigin(),EASEL.store.dispatch(EASEL.walkthroughActionCreators.setUsingLastHome(!1)),this.props.onNext()},render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Move machine to start position",disableNext:!0},React.createElement("div",{className:"explanation"},React.createElement("div",null,"With the machine homed, the X and Y axes are already in their start positions"),React.createElement("b",null,"Now you will move the Z-axis to its start position"),React.createElement("div",null,"Use the arrow buttons to move the bit so it's positioned just above the surface of the wasteboard.")),React.createElement("div",{className:"col-md-6"},React.createElement("img",{className:"planing-work-zero__planing-img",src:EASEL.assets.images.lowerPlaningBit}),React.createElement("p",{className:"alert alert-info explanation"},React.createElement("strong",null,"NOTE:")," For the most accurate start position, adjust the move interval with the number below as you get closer to the wasteboard.")),React.createElement("div",{className:"col-md-3 col-md-offset-2 planing-work-zero__jog-container"},React.createElement(EASEL.component.machineControls,{hideXY:!0,hideKeyboard:!0,context:"planing",intervalOptionsXY:{mm:[.01,.1,1],in:[.001,.01,.1,1]},intervalOptionsZ:{mm:[.01,.1,1],in:[.001,.01,.1,1]}})),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"explanation"},React.createElement("button",{className:"btn-primary btn btn-lg",onClick:this.onNext},"Confirm")))}})},function(e,t){EASEL.component.postPlaningModal=createReactClass({render(){return React.createElement(ReactBootstrap.Modal,{show:this.props.open,bsSize:"large",backdrop:"static",className:"walkthrough-modal",onHide:this.props.close},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement("h3",null,"Plane Complete")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("p",{className:"explanation"},"Congrats! You finished planing your wasteboard!")))}})},function(e,t){EASEL.component.probe=createReactClass({propTypes:{onNext:PropTypes.func,machineType:PropTypes.string,probeStatus:PropTypes.number,probeResult:PropTypes.number},getState:()=>({readyToProbe:!1,probing:!1,probeFinished:!1,errorDetected:!1,probeCleanedUp:!1}),getInitialState(){return this.getState()},componentWillReceiveProps(e){this.state.probing&&0===e.probeResult?(EASEL.stats.trackEvent(EASEL.events.probeFailed),this.setState({probing:!1,errorDetected:!0})):this.state.probing&&1===e.probeResult&&(EASEL.stats.trackEvent(EASEL.events.probeSuccessful),this.setState({probing:!1,probeFinished:!0}))},onReadyToProbe(){this.setState({readyToProbe:!0})},startProbing(){EASEL.stats.trackEvent(EASEL.events.probeStarted),EASEL.machineStateActions.resetProbeResult(),this.setState({probing:!0,probeFinished:!1,errorDetected:!1,startPosition:EASEL.machineStateStore.getPosition().work}),EASEL.localSender.sendProbeRoutine()},setXYzero(){EASEL.localSender.setXYorigin(),EASEL.store.dispatch(EASEL.walkthroughActionCreators.setUsingLastHome(!0)),this.props.onNext()},restartProbe(){this.setState(this.getState())},stopProbe(){EASEL.stats.trackEvent(EASEL.events.probeCancelled),EASEL.localSender.pause(),setTimeout(EASEL.localSender.reset,100),setTimeout(EASEL.localSender.sendLine.bind(null,`G90 G0 Z${this.state.startPosition.z}`),125),this.setState(this.getState())},onProbeCleanedUp(){this.setState({probeCleanedUp:!0})},useLastXY(){EASEL.store.dispatch(EASEL.walkthroughActionCreators.setUsingLastHome(!0)),this.props.onNext()},render(){let e,t,n,a,r,o;this.state.errorDetected?(o="Z-Probe error!",a=this.restartProbe,r="Retry",t=null,e=null,n=React.createElement(EASEL.component.probeError,{restartProbe:this.restartProbe})):this.state.probeCleanedUp?(o="Set XY zero",a=this.setXYzero,r="Set XY zero",t="Use last XY zero",e=this.useLastXY,n=React.createElement(EASEL.component.probeXYZero,{setXYzero:this.setXYzero})):this.state.probeFinished?(o="Disconnect the Z-Probe",a=this.onProbeCleanedUp,r="Z-Probe is put away",t=null,e=null,n=React.createElement(EASEL.component.probeCleanup,null)):this.state.probing?(o="Probing the material",r="Probing...",a=this.props.onNext,t=null,e=null,n=React.createElement(EASEL.component.probing,{stopProbe:this.stopProbe})):(o="Set up the Z-Probe",r=this.state.readyToProbe&&1===this.props.probeStatus?"Separate plate and bit":"Start probing",a=this.startProbing,t=null,e=null,n=React.createElement(EASEL.component.probeZZero,{machineType:this.props.machineType,onReady:this.onReadyToProbe,probeStatus:this.props.probeStatus}));const s=!this.state.readyToProbe||this.state.probing||!this.state.probeFinished&&1===this.props.probeStatus;return React.createElement(EASEL.component.walkthroughStep,{title:o,nextCallback:a,nextText:r,altText:t,disableNext:s,altAction:e},React.createElement("div",null,n))}})},function(e,t){EASEL.component.repeatCarve=createReactClass({propTypes:{onToggleDisableAfterCarve:PropTypes.func,onNext:PropTypes.func,machineType:PropTypes.string},getInitialState:()=>({probingZ:!1,disableToggled:!1}),startZProbe(){this.setState({probingZ:!0})},toggleDisableRepeatCarving(e){const t=e.target.checked;this.setState({disableToggled:t}),this.props.onToggleDisableAfterCarve(t)},render(){return this.state.probingZ?React.createElement(EASEL.component.probeContainer,{machineType:this.props.machineType,onNext:this.props.onNext}):React.createElement(EASEL.component.walkthroughStep,{className:"repeat-carve-walkthrough-step",title:"Almost ready to cut!"},React.createElement("div",{className:"substep substep--warning"},React.createElement("i",{className:"fa fa-warning fa-3x substep--warning__icon"}),React.createElement("div",null,React.createElement("h2",null,"Important"),React.createElement("p",{className:"substep--warning__text"},"Turn off the spindle before changing the material. Make sure the material is securely clamped."))),React.createElement(EASEL.component.betaFeatureToggle,{checked:this.state.disableToggled,onChange:this.toggleDisableRepeatCarving,featureName:"Disable Repeat Carve after carving (you can enable it back at General Settings)"}),React.createElement("div",{className:"repeat-carve-walkthrough-step__buttons"},React.createElement("button",{className:"btn btn-primary btn-lg",onClick:this.startZProbe},"Probe Z"),React.createElement("button",{className:"btn btn-primary btn-lg",onClick:this.props.onNext},"Repeat Carve")),React.createElement("div",{className:"force-regular-carve",onClick:this.props.onForceRegularCarve},"< ",React.createElement("a",null,"Back to regular carve")))}})},function(e,t){EASEL.component.repeatCarveWalkthrough=createReactClass({propTypes:{useDetailBit:PropTypes.bool,onHide:PropTypes.func,onFinish:PropTypes.func.isRequired,onResume:PropTypes.func,setIsUsingDustShoe:PropTypes.func},getInitialState:()=>({disable:!1}),onToggleDisableAfterCarve(e){this.setState({disable:e})},onFinish(){this.state.disable&&(EASEL.userAPI.updateRepeatCarvingEnabled(!1),EASEL.store.dispatch(EASEL.userActionCreators.setRepeatCarvingEnabled(!1))),this.props.onFinish()},render(){const e=[];e.push({class:EASEL.component.repeatCarve,title:"",props:{onForceRegularCarve:this.props.onForceRegularCarve,onToggleDisableAfterCarve:this.onToggleDisableAfterCarve}}),e.push({class:EASEL.component.xcarveStartCarvingContainer,title:"Start carving",props:{setIsUsingDustShoe:this.props.setIsUsingDustShoe}});const t=React.createElement("div",null,React.createElement("h3",null,"Jog Machine"),React.createElement(EASEL.component.machineControls,{context:"walkthrough"}));return React.createElement(EASEL.component.walkthrough,{onFinish:this.onFinish,onHide:this.props.onHide,steps:e,showProgress:!1,sidebarContents:t})}})},function(e,t){EASEL.component.searchingForMachineComponent=createReactClass({setComPort(e){const t=e.target.value.replace(/\D/,"")||"";null!=t&&EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setComPort(`COM${t}`))},connectionInstructions(){if(!EASEL.info.shouldAutoDetectMachine())return React.createElement("div",null,React.createElement("hr",null),React.createElement("div",{className:"col-sm-6 text-left"},React.createElement("p",null,"Enter the COM port your machine is connected to."),React.createElement("p",null,'To find the port, open the Control Panel and click "View devices and printers". Your Carvey should be listed with the COM port.')),React.createElement("div",{className:"input-group col-sm-6"},React.createElement("span",{className:"input-group-addon"},"COM"),React.createElement("input",{className:"form-control",size:"3",type:"number",onChange:this.setComPort,defaultValue:this.props.comPort})))},render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Searching for Carvey"},React.createElement("div",{className:"text-center"},React.createElement("p",null,"Plug in your USB cable and turn on the machine.")),React.createElement("div",{className:"row"},this.connectionInstructions()))}}),EASEL.component.searchingForMachine=EASEL.redux.connect({mapStateToProps:e=>({comPort:EASEL.machineSettingsSelectors.getComPort(e)}),component:EASEL.component.searchingForMachineComponent})},function(e,t){EASEL.component.walkthroughSubstep=createReactClass({props:{instructionText:PropTypes.string.isRequired,buttonText:PropTypes.string.isRequired,buttonSubtext:PropTypes.string,buttonAction:PropTypes.func.isRequired,disableButton:PropTypes.bool.isRequired,skippable:PropTypes.bool,skipAction:PropTypes.func},render(){return React.createElement("div",{className:"substep"},React.createElement("p",{className:"substep-instruction"},this.props.instructionText),React.createElement("div",{className:"walkthrough__substep__button-container"},React.createElement(ReactBootstrap.Button,{bsStyle:"primary",className:`confirm confirm-substep ${this.props.buttonSubtext&&"confirm-substep--large"}`,onClick:this.props.buttonAction,disabled:this.props.disableButton},this.props.buttonText),this.props.buttonSubtext&&React.createElement("p",null,this.props.buttonSubtext),this.props.skippable&&React.createElement(ReactBootstrap.Button,{bsStyle:"default",className:"skip-substep",onClick:this.props.skipAction,disabled:this.props.disableButton},"Skip")))}})},function(e,t){EASEL.component.updateFirmwareContainer=EASEL.redux.connect({mapStateToProps:e=>({hexFileURLsByMachine:e.firmwareVersions.currentVersionHexFileURL,machineType:EASEL.machineSettingsSelectors.getMachineType(e)}),component:createReactClass({getState:()=>({firmwareUploadProgress:EASEL.machineStateStore.getFirmwareProgress(),firmwareIsUploading:EASEL.machineStateStore.isFirmwareUploading()}),getInitialState(){return this.getState()},componentDidMount(){if(EASEL.machineStateStore.addChangeListener(this._onChange),null!=this.props.firmwareHex)EASEL.localSender.updateFirmware(this.props.firmwareHex);else{const e=this.props.hexFileURLsByMachine[this.props.machineType];$.ajax({url:e,dataType:"text",cache:!1}).done((e=>EASEL.localSender.updateFirmware(e)))}},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},render(){const e=EASEL.machineTypeHelper.description(this.props.machineType);return React.createElement(EASEL.component.updateFirmware,{firmwareUploadProgress:this.state.firmwareUploadProgress,firmwareIsUploading:this.state.firmwareIsUploading,machineDescription:e,onNext:this.props.onNext})}})})},function(e,t){EASEL.component.updateLocalSender=createReactClass({render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Update the Easel Driver",closeCallback:this.props.onClose},React.createElement("p",null,"You are using an out-of-date version of the Easel Driver."),React.createElement(EASEL.component.localSenderDownloadButton,null))}})},function(e,t){EASEL.component.uploadFirmwareFinish=createReactClass({props:{needsToSetUp:PropTypes.bool.isRequired},componentDidMount(){if(this.props.needsToSetUp)return window.location.href="/setup"},render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Update successful",nextText:"Done",nextCallback:this.props.onNext},React.createElement("div",{style:{textAlign:"center",marginTop:50,fontSize:22}},React.createElement("p",null,"The firmware update was successful."),this.props.needsToSetUp&&React.createElement("p",null,"Navigating to machine setup...")))}})},function(e,t){EASEL.component.uploadFirmwarePrompt=EASEL.redux.connect({mapStateToProps:e=>({getCurrentVersionNumberForMachine:EASEL.firmwareVersionSelectors.getCurrentVersionNumberForMachine(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e)}),component:createReactClass({propTypes:{onReadHexData:PropTypes.func.isRequired,onUseCurrentFirmware:PropTypes.func.isRequired},getInitialState(){return{useCurrentFirmware:null!=this.props.getCurrentVersionNumberForMachine(this.props.machineType),hasAttachedFile:!1}},handleFile(){const e=this.firmware,t=new FileReader;t.onload=e=>{const t=e.target.result;return this.props.onReadHexData(t),this.setState({hasAttachedFile:!0})};const n=e.files[0];t.readAsText(n)},useCustomFirmware(){this.setState({useCurrentFirmware:!1})},useCurrentFirmware(){this.props.onUseCurrentFirmware(),this.setState({useCurrentFirmware:!0,hasAttachedFile:!1})},render(){const e=this.props.getCurrentVersionNumberForMachine(this.props.machineType);return React.createElement(EASEL.component.walkthroughStep,{title:"Select a hex file",nextCallback:this.props.onNext,nextText:"Upload firmware",disableNext:!(this.state.useCurrentFirmware||this.state.hasAttachedFile)},React.createElement("div",{className:"firmware-prompt-container"},null!=e&&React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"radio",name:"firmware-type",value:"current",checked:this.state.useCurrentFirmware,onChange:this.useCurrentFirmware}),` Version ${e}`)),EASEL.hasAccessGrant("firmware_testing")&&React.createElement("div",null,React.createElement("label",null,React.createElement("input",{type:"radio",name:"firmware-type",value:"custom",checked:!this.state.useCurrentFirmware,onChange:this.useCustomFirmware})," Use custom firmware"),!this.state.useCurrentFirmware&&React.createElement("input",{ref:e=>this.firmware=e,id:"firmware-file",type:"file",onChange:this.handleFile}))))}})})},function(e,t){EASEL.component.uploadFirmwareWarning=createReactClass({render(){return React.createElement(EASEL.component.walkthroughStep,{title:"Firmware Upload",nextText:"Continue",nextCallback:this.props.onNext,altText:"Cancel",altAction:this.props.hide},React.createElement("div",{className:"firmware-warning-container"},React.createElement("img",{className:"firmware-warning-image",src:EASEL.assets.images.warning}),React.createElement("p",null,"Uploading firmware will reset your machine\u2019s settings."),React.createElement("p",null,"When the upload completes, you will need to go through Easel Setup again before you carve.")))}})},function(e,t){EASEL.component.walkthrough=createReactClass({propTypes:{onFinish:PropTypes.func,onHide:PropTypes.func,steps:PropTypes.array.isRequired,showProgress:PropTypes.bool,sidebarContents:PropTypes.node,hideBackButton:PropTypes.bool},getInitialState(){return{currentStep:this.props.steps[0]}},findCurrentStepIndex(){const e=this.props.steps.map((e=>e.title)).indexOf(this.state.currentStep.title);return e>=0?e:0},onNext(){const e=this.findCurrentStepIndex();e===this.props.steps.length-1?"function"===typeof this.props.onFinish&&this.props.onFinish():this.setState({currentStep:this.props.steps[e+1]})},onBack(e){const t=this.findCurrentStepIndex();0===t?this.props.onHide():this.setState({currentStep:this.props.steps[t-1]}),e.preventDefault()},render(){let e,t,n;const a=this.findCurrentStepIndex(),r=this.props.steps[a],o=r.class;if(null==o)return null;let s=r.props||{};const i=Array.from(this.props.steps).map((e=>e.title));return s=EASEL.merge(s,{onNext:this.onNext,onBack:this.onBack,onClose:this.props.onHide}),null!=this.props.sidebarContents&&(n=React.createElement("div",{className:"walkthrough-sidebar"},this.props.sidebarContents)),this.props.showProgress&&(t=React.createElement(EASEL.component.walkthroughProgress,{titles:i,currentStepIndex:a}),a>0&&!this.props.hideBackButton&&(e=React.createElement(EASEL.component.a,{className:"navigable step-back",onClick:this.onBack},React.createElement("i",{className:"fa fa-chevron-left"}),"Back"))),React.createElement("div",null,t,e,React.createElement("div",null,React.createElement(o,s)),n)}})},function(e,t){EASEL.component.walkthrough3dComponent=createReactClass({propTypes:{firstScreenNotice:PropTypes.node,isTileSelected:PropTypes.bool,isMachineLocked:PropTypes.bool,onHide:PropTypes.func,onFinish:PropTypes.func.isRequired,setIsUsingDustShoe:PropTypes.func},render(){let e=!0;const{firstScreenNotice:t,onFinish:n,onHide:a,setIsUsingDustShoe:r}=this.props,o=[];this.props.isMachineLocked&&(o.push({class:EASEL.component.machineLockedContainer,title:"Home machine"}),e=!1),t&&(o[0]=EASEL.setIn(o[0],["props","notice"],(()=>t))),o.push({class:EASEL.component.clampMaterialContainer,title:"Secure material"}),o.push({class:EASEL.component.choosePassType,title:"Choose pass type"}),o.push({class:EASEL.component.workZeroContainer,title:"Work zero",props:{machineType:this.props.machineType}}),o.push({class:EASEL.component.xcarveStartCarvingContainer,title:"Start carving",props:{setIsUsingDustShoe:r}});const s=React.createElement("div",null,React.createElement("h3",null,"Jog Machine"),React.createElement(EASEL.component.machineControls,{context:"walkthrough"}));return React.createElement(EASEL.component.walkthrough,{onFinish:n,onHide:a,steps:o,showProgress:e,sidebarContents:s})}}),EASEL.component.walkthrough3d=EASEL.redux.connect({mapStateToProps:e=>({machineType:EASEL.machineSettingsSelectors.getMachineType(e),isBetaTester:EASEL.userSelectors.isBetaTester(e),isTileSelected:EASEL.tileSelectors.isTileSelected(e)}),component:EASEL.component.walkthrough3dComponent})},function(e,t){var n=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,i=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&s(e,n,t[n]);return e};EASEL.component.walkthroughContainer=EASEL.redux.connect({mapStateToProps:e=>({isExternalGcode:null!=EASEL.externalGcodeSelectors.getGcode(e),useDetailBit:EASEL.bitSelectors.useDetailBit(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e),canRepeatCarve:EASEL.userSelectors.isBetaTester(e)&&EASEL.walkthroughSelectors.getHasCompletedCarve(e)&&EASEL.userSelectors.isRepeatCarvingEnabled(e)}),component:createReactClass({render(){const e={useDetailBit:this.props.useDetailBit,isExternalGcode:this.props.isExternalGcode,canRepeatCarve:this.props.canRepeatCarve};return"carvey"===EASEL.machineTypeHelper.currentWalkthroughType(this.props.machineType)?React.createElement("div",null,React.createElement(EASEL.component.carveyWalkthroughModal,i({},e)),React.createElement(EASEL.component.carveyFirstJobWalkthroughModal,i({},e))):React.createElement(EASEL.component.xcarveWalkthroughModal,i({},e))}})})},function(e,t){EASEL.component.walkthroughProgress=createReactClass({propTypes:{titles:PropTypes.array.isRequired,currentStepIndex:PropTypes.number.isRequired},render(){const e=1/this.props.titles.length*100+"%",t=this.props.titles.map(((t,n)=>{let a="walkthrough-progress-step";return n===this.props.currentStepIndex&&(a+=" active"),n<this.props.currentStepIndex&&(a+=" complete"),React.createElement("div",{className:a,key:`progress-step-${n}`,style:{width:e}},React.createElement("span",{className:"step-title"},t))})),n=(this.props.currentStepIndex+.5)/this.props.titles.length*100+"%";return React.createElement("div",{className:"walkthrough-progress clearfix"},React.createElement("div",{className:"progress-bar"},React.createElement("div",{className:"progress-bar-completed",style:{width:n}})),t)}})},function(e,t){EASEL.component.workZeroContainerComponent=createReactClass({propTypes:{machineType:PropTypes.string,onNext:PropTypes.func},getZeroMethods:()=>({probe:"Z-Probe",manual:"Manual"}),getInitialState:()=>({methodChosen:null}),chooseProbeMethod(){this.chooseMethod(this.getZeroMethods().probe)},chooseManualMethod(){this.chooseMethod(this.getZeroMethods().manual)},chooseMethod(e){EASEL.stats.trackEvent(`Zero Method: ${e}`),this.setState({methodChosen:e})},render(){return this.props.probeEnabled&&this.state.methodChosen!==this.getZeroMethods().manual?this.state.methodChosen===this.getZeroMethods().probe?React.createElement(EASEL.component.probeContainer,{machineType:this.props.machineType,onNext:this.props.onNext}):React.createElement(EASEL.component.walkthroughStep,{title:"Work zero",disableNext:!0},React.createElement("div",{className:"diagram zero-diagram"},React.createElement("p",{className:"explanation"},"Please choose one of the following zeroing methods"),React.createElement("div",{className:"explanation-row"},React.createElement("div",{className:"split"},React.createElement("img",{src:this.props.machineType===EASEL.machineType.XCARVE_PRO?EASEL.assets.images.xcpProbeImage:EASEL.assets.images.probeImage}),React.createElement("div",{className:"explanation"},React.createElement("button",{className:"btn btn-primary btn-lg",onClick:this.chooseProbeMethod},"Probe"))),React.createElement("div",{className:"split"},React.createElement("img",{src:EASEL.assets.images.zeroXY}),React.createElement("div",{className:"explanation"},React.createElement("button",{className:"btn btn-primary btn-lg",onClick:this.chooseManualMethod},"Manual")))))):React.createElement(EASEL.component.confirmWorkZero,{onNext:this.props.onNext})}}),EASEL.component.workZeroContainer=EASEL.redux.connect({mapStateToProps:e=>({probeEnabled:EASEL.machineSettingsSelectors.getProbeEnabled(e)}),component:EASEL.component.workZeroContainerComponent})},function(e,t){EASEL.component.xcarveStartCarving=createReactClass({propTypes:{automaticSpindleControl:PropTypes.bool,usingLastHome:PropTypes.bool,hasDustShoe:PropTypes.bool,requireDustShoe:PropTypes.bool,onNext:PropTypes.func,setIsUsingDustShoe:PropTypes.func,nextButtonText:PropTypes.string,spindleType:PropTypes.string},getInitialState:()=>({clickedRaiseButton:!1,spindleOn:!1,spindleConfirmed:!1,dustShoeConfirmed:!1}),raiseBit(){this.setState({clickedRaiseButton:!0}),this.props.onRaiseBit()},turnOnSpindle(){this.setState({spindleOn:!0}),this.props.onTurnOnSpindle()},spindleConfirmed(){this.setState({spindleConfirmed:!0})},dustShoeConfirmed(e){this.props.setIsUsingDustShoe(e),this.setState({dustShoeConfirmed:!0})},render(){const e=!this.props.usingLastHome&&React.createElement(EASEL.component.walkthroughSubstep,{instructionText:"I'll raise the bit slightly before you turn on the spindle.",buttonText:"Raise the bit",buttonAction:this.raiseBit,disableButton:this.state.clickedRaiseButton}),t=this.state.clickedRaiseButton||this.props.usingLastHome,n=!t||this.state.dustShoeConfirmed,a=this.props.hasDustShoe&&React.createElement(EASEL.component.walkthroughSubstep,{instructionText:"Attach dust shoe?",buttonText:"Attached",skippable:!this.props.requireDustShoe,skipAction:()=>this.dustShoeConfirmed(!1),buttonAction:()=>this.dustShoeConfirmed(!0),disableButton:n}),r=this.state.spindleOn||!t||this.props.hasDustShoe&&(!n||!this.state.dustShoeConfirmed),o=this.props.automaticSpindleControl&&React.createElement(EASEL.component.walkthroughSubstep,{instructionText:"Verify automatic spindle control is working by turning it on now.",buttonText:"Turn on the spindle",buttonSubtext:"Keep hands clear",buttonAction:this.turnOnSpindle,disableButton:r}),s=!t||this.props.automaticSpindleControl&&!this.state.spindleOn||this.state.spindleConfirmed,i="dewalt-611"==this.props.spindleType||"makita"===this.props.spindleType?"Be sure your machine spindle dial is set to 1.":null,l=React.createElement(EASEL.component.walkthroughSubstep,{instructionText:"Confirm that your spindle is on.",buttonText:"The spindle is on",buttonSubtext:i,buttonAction:this.spindleConfirmed,disableButton:s}),c=!this.state.spindleConfirmed;return React.createElement(EASEL.component.walkthroughStep,{title:"Almost ready to cut!",nextCallback:this.props.onNext,nextText:this.props.nextButtonText||"Carve!",disableNext:c},e,a,o,l,React.createElement("div",{className:"substep substep--warning"},React.createElement("i",{className:"fa fa-warning fa-3x substep--warning__icon"}),React.createElement("p",{className:"substep--warning__text"},"Warning: Never leave the ",this.props.machineDescription," unattended while carving, always stay within sight of the machine and near the emergency stop button.")))}})},function(e,t){EASEL.component.xcarveStartCarvingContainerComponent=createReactClass({propTypes:{onNext:PropTypes.func,setIsUsingDustShoe:PropTypes.func},componentDidMount(){EASEL.jobSettingsStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.jobSettingsStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},raiseBit(){EASEL.localSender.raiseToSafety()},turnOnSpindle(){EASEL.localSender.startSpindle(this.props.spindleRPM),this.props.accessoriesEnabled&&EASEL.localSender.accessoriesOn()},getMachineDescription(){return this.props.thirdPartyModel||EASEL.machineTypeHelper.description(this.props.machineType)},render(){return React.createElement(EASEL.component.xcarveStartCarving,{automaticSpindleControl:this.props.automaticSpindleControl,usingLastHome:this.props.usingLastHome,hasDustShoe:this.props.hasDustShoe,requireDustShoe:this.props.requireDustShoe,setIsUsingDustShoe:this.props.setIsUsingDustShoe,onRaiseBit:this.raiseBit,onTurnOnSpindle:this.turnOnSpindle,onNext:this.props.onNext,nextButtonText:this.props.nextButtonText,machineDescription:this.getMachineDescription(),spindleType:this.props.spindleType})}}),EASEL.component.xcarveStartCarvingContainer=EASEL.redux.connect({mapStateToProps:function(e){const t=EASEL.walkthroughSelectors.getPassType(e);let n;return"detail"===t?n=EASEL.utility.jobSettingsCalculator(EASEL.jobSettingsConstants.bitKeys.detailBit):"roughing"===t&&(n=EASEL.utility.jobSettingsCalculator(EASEL.jobSettingsConstants.bitKeys.bit)),{automaticSpindleControl:EASEL.machineSettingsSelectors.getAutomaticSpindleControl(e),hasDustShoe:EASEL.machineSettingsSelectors.getHasDustShoe(e),spindleRPM:n.getSettings().spindleSpeed||EASEL.machineSettingsSelectors.getSpindleRPM(e),accessoriesEnabled:EASEL.machineSettingsSelectors.getAccessoriesEnabled(e),machineType:EASEL.machineSettingsSelectors.getMachineType(e),thirdPartyModel:EASEL.machineSettingsSelectors.getThirdPartyModel(e),usingLastHome:EASEL.walkthroughSelectors.getUsingLastHome(e),spindleType:EASEL.machineSettingsSelectors.getSpindleType(e)}},component:EASEL.component.xcarveStartCarvingContainerComponent})},function(e,t){EASEL.component.workpieceNotesModal=createReactClass({getInitialState:()=>({show:!1,name:"",note:null}),componentDidMount(){EASEL.flux.events.addListener("show-notes-workpiece",this.showModal),EASEL.flux.events.addListener("hide-notes-workpiece",this.hideModal)},componentWillUnmount(){EASEL.flux.events.removeListener("show-notes-workpiece"),EASEL.flux.events.removeListener("hide-notes-workpiece")},showModal(e,t,n){this.setState({show:!0,workpieceId:e,name:t,note:n})},hideModal(){this.setState({show:!1})},onModalOpen(){this.refs.input.focus(),this.refs.input.select()},updateNote(e){this.setState({note:e.target.value})},saveNote(e){e.preventDefault(),EASEL.workpieceActions.updateWorkpiece(this.state.workpieceId,{note:this.state.note}),this.hideModal()},render(){if(!this.state.show)return null;const e=this.state.name?`Notes for \u201c${this.state.name}\u201d`:"Notes";return React.createElement(ReactBootstrap.Modal,{show:this.state.show,onHide:this.hideModal,onEnter:this.onModalOpen},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,e)),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("textarea",{ref:"input",name:"workpiece-notes",className:"form-control",rows:5,onChange:this.updateNote,value:this.state.note})),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement("button",{className:"btn btn-default",onClick:this.hideModal},"Cancel"),React.createElement("button",{className:"btn btn-primary",onClick:this.saveNote},"Save Note")))}})},function(e,t){EASEL.component.workpieceRenameModal=createReactClass({getInitialState:()=>({show:!1,text:""}),componentDidMount(){EASEL.flux.events.addListener("show-rename-workpiece",this.showModal),EASEL.flux.events.addListener("hide-rename-workpiece",this.hideModal)},componentWillUnmount(){EASEL.flux.events.removeListener("show-rename-workpiece"),EASEL.flux.events.removeListener("hide-rename-workpiece")},showModal(e,t){this.setState({show:!0,workpieceId:e,text:t})},hideModal(){this.setState({show:!1})},onModalOpen(){this.refs.input.focus(),this.refs.input.select()},updateText(e){this.setState({text:e.target.value})},checkKey(e){"Enter"===e.key&&this.updateName(e)},updateName(e){e.preventDefault(),EASEL.workpieceActions.updateWorkpiece(this.state.workpieceId,{name:this.state.text}),this.hideModal()},render(){return this.state.show?React.createElement(ReactBootstrap.Modal,{show:this.state.show,onHide:this.hideModal,onEnter:this.onModalOpen},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"Rename workpiece")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("input",{ref:"input",id:"rename-workpiece",className:"form-control",onChange:this.updateText,onKeyPress:this.checkKey,value:this.state.text})),React.createElement(ReactBootstrap.Modal.Footer,null,React.createElement("button",{className:"btn btn-default",onClick:this.hideModal},"Cancel"),React.createElement("button",{className:"btn btn-primary",onClick:this.updateName},"Rename"))):null}})},function(e,t){EASEL.component.workpieceThumbnail=EASEL.redux.connect({mapStateToProps:(e,t)=>({imageData:EASEL.workpieceSelectors.getThumbnail(e,t.id)}),component:createReactClass({propTypes:{id:PropTypes.number.isRequired,imageData:PropTypes.string,active:PropTypes.bool.isRequired,onClick:PropTypes.func.isRequired,onDelete:PropTypes.func,onDuplicate:PropTypes.func.isRequired,onRename:PropTypes.func},getInitialState:()=>({showingContextMenu:!1}),componentDidMount(){document.getElementById("app-container").addEventListener("click",this.handleDocumentClick),EASEL.workpieceStore.addChangeListener(this.updateState)},componentWillUnmount(){document.getElementById("app-container").removeEventListener("click",this.handleDocumentClick),EASEL.workpieceStore.removeChangeListener(this.updateState)},handleDocumentClick(e){this.workpieceThumbnail.contains(e.target)||this.hideContextMenu()},updateState(){this.props.id!==EASEL.workpieceStore.getActiveID()&&this.setState({showingContextMenu:!1})},onClick(e){e.stopPropagation(),this.hideContextMenu(),this.props.onClick(this.props.id)},onClickDelete(){this.hideContextMenu(),null!==this.props.onDelete&&this.props.onDelete(this.props.id)},onClickRename(){this.hideContextMenu(),EASEL.flux.events.emit("show-rename-workpiece",this.props.id,this.props.name)},onClickToggle(e){e.stopPropagation(),this.setState({showingContextMenu:!this.state.showingContextMenu})},onClickDuplicate(e){e.stopPropagation(),this.props.onDuplicate(this.props.id)},onClickSetNote(e){e.stopPropagation(),this.hideContextMenu(),EASEL.flux.events.emit("show-notes-workpiece",this.props.id,this.props.name,this.props.note)},hideContextMenu(){this.setState({showingContextMenu:!1})},render(){const e=this.props.active?"workpiece-thumbnail workpiece-thumbnail--active":"workpiece-thumbnail",t=this.state.showingContextMenu?"workpiece-thumbnail__context workpiece-thumbnail__context--active":"workpiece-thumbnail__context",n=[];n.push({title:"Rename",action:this.onClickRename}),n.push({title:"Notes\u2026",action:this.onClickSetNote}),n.push({title:"Duplicate",action:this.onClickDuplicate}),null!=this.props.onDelete&&n.push({title:"Delete",action:this.onClickDelete});const a=this.state.showingContextMenu&&React.createElement("div",{className:"workpiece-thumbnail__context__menu context-menu"},React.createElement(EASEL.component.dropdownMenu,{items:n})),r=this.props.name&&React.createElement("div",{className:"workpiece-thumbnail__text-container"},React.createElement("span",{className:"workpiece-thumbnail__text"},this.props.name||"Workpiece "+(this.props.id-1))),o=null!=this.props.note&&React.createElement("div",{className:"workpiece-thumbnail__note"},React.createElement("i",{className:"fa fa-file-text-o",title:this.props.note,onClick:this.onClickSetNote}));return React.createElement("div",{className:e,onClick:this.onClick,"data-workpiece-index":this.props.index,ref:e=>{this.workpieceThumbnail=e},onDragOver:()=>this.props.onDragOver(this.props.index)},React.createElement("div",{className:"workpiece-thumbnail__inner",onDragEnd:this.props.onDragEnd,draggable:!0,onDragStart:e=>this.props.onDragStart(e,this.props.index)},r,React.createElement("div",{className:`workpiece-thumbnail__content ${this.props.dragging&&" workpiece-thumbnail__content--dragging"}`},React.createElement("img",{className:"workpiece-thumbnail__content__image",draggable:!1,src:this.props.imageData||this.props.thumbnailUrl})),o,React.createElement("div",{className:t},React.createElement("div",{className:"workpiece-thumbnail__context__toggle",onClick:this.onClickToggle},React.createElement("i",{className:"fa fa-chevron-down"})),a)))}})})},function(e,t){EASEL.component.workpiecesContainer=createReactClass({getState(){const e=EASEL.store.getState();return{projectName:EASEL.projectMetadataStore.getName(),workpieces:EASEL.workpieceStore.getWorkpieces(),showing:EASEL.viewportSelectors.getWorkpiecesVisible(e),activeID:EASEL.workpieceStore.getActiveID(),draggedWorkpiece:null,dragging:!1}},getInitialState(){return this.getState()},componentDidMount(){EASEL.store.subscribeWithSelector(EASEL.viewportSelectors.getWorkpiecesVisible,this.updateState),EASEL.workpieceStore.addChangeListener(this.updateState),EASEL.projectMetadataStore.addChangeListener(this.updateState)},updateState(){this.setState(this.getState())},onClickWorkpiece(e){EASEL.workpieceActions.showWorkpiece(e)},onAddWorkpiece(){const e=EASEL.workpieceStore.getNewID();EASEL.workpieceActions.createWorkpiece({id:e,name:"",thumbnailUrl:EASEL.assets.images.emptyThumbnail}).done((()=>EASEL.workpieceActions.showWorkpiece(e))).fail((function(e){const t=`Error creating workpiece: ${EASEL.apiHelper.getErrorMessage(e)}`;EASEL.oops(`Failed to add workpiece: ${t}`)}))},onDuplicateWorkpiece(e){const t=EASEL.workpieceStore.getNewID();EASEL.workpieceActions.showWorkpiece(e),EASEL.workpieceActions.duplicateWorkpiece({originalId:e,newId:t}),EASEL.workpieceActions.showWorkpiece(t)},onDeleteWorkpiece(e){EASEL.confirm("Delete workpiece?","This will permanently delete the workpiece.",(()=>EASEL.workpieceActions.deleteWorkpiece(e)))},toggleShowing(){EASEL.store.dispatch(EASEL.viewportActionCreators.setWorkpiecesVisible(!this.state.showing))},onDragStart:function(e,t){this.setState({draggedWorkpiece:this.state.workpieces[t],dragging:!0}),e.dataTransfer.setDragImage(document.createElement("img"),0,0)},onDragOver:function(e){const{draggedWorkpiece:t}=this.state,n=this.state.workpieces[e];if(t===n)return;const a=this.state.workpieces.filter((e=>e!==t));a.splice(e,0,t),this.setState({workpieces:a})},onDragEnd:function(){EASEL.workpieceActions.reorderWorkpieces(this.state.workpieces),this.setState({draggedWorkpiece:null,dragging:!1})},render(){const e=this.state.showing?"fa-angle-double-down":"fa-angle-double-up",t=this.state.showing?"fullsize":"smaller",n=this.state.projectName?`Workpieces for \u201c${this.state.projectName}\u201d`:"Workpieces",a=this.state.workpieces.length>1?this.onDeleteWorkpiece:null;let r=0;return React.createElement("div",{id:"workpieces-container",className:t},React.createElement("div",{className:"workpieces-container__toggle",onClick:this.toggleShowing},n,React.createElement("i",{className:`fa ${e} fa-6`}),React.createElement(EASEL.component.a,{target:"_blank",href:"https://inventables.zendesk.com/hc/en-us/articles/360012453294-Walkthrough-Tutorial-Workpieces"},React.createElement("i",{className:"fa fa-question-circle"}))),React.createElement("div",{className:"workpieces-container__workpieces"},this.state.workpieces.map((({id:e,thumbnailUrl:t,name:n,note:o})=>React.createElement(EASEL.component.workpieceThumbnail,{key:e,index:r++,id:e,thumbnailUrl:t,active:e===this.state.activeID,onClick:this.onClickWorkpiece,onDuplicate:this.onDuplicateWorkpiece,onDelete:a,name:n,note:o,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,dragging:this.state.dragging}))),React.createElement("div",{className:"workpiece-thumbnail workpiece-thumbnail--add-workpiece-button"},React.createElement("div",{className:"workpiece-thumbnail__inner"},React.createElement("div",{className:"workpiece-thumbnail__content",onClick:this.onAddWorkpiece},React.createElement("img",{src:EASEL.assets.images.addLayer}))))))}})},function(e,t){EASEL.component.connectProbe=createReactClass({render:()=>React.createElement("div",{className:"diagram"},React.createElement("div",{className:"explanation-row"},React.createElement("img",{src:EASEL.assets.images.probeImage,width:"450"}),React.createElement("div",{className:"explanation"},React.createElement("p",null,"Hook your probe up like you see ",React.createElement("b",null,"above")," and press the button to probe your material."))))})},function(e,t){EASEL.component.probeCleanup=createReactClass({render:()=>React.createElement("div",{className:"explanation-row"},React.createElement("div",{className:"diagram"},React.createElement("img",{src:EASEL.assets.images.probeRemoveLeads,style:{width:400,position:"relative",left:45}})),React.createElement("div",{className:"explanation"},React.createElement("p",{className:"substep-instruction"},"Unplug the leads from the carriage."),React.createElement("p",{className:"substep-instruction"},"Remove clip from collet."),React.createElement("p",{className:"substep-instruction"},"Remove puck from waste board area")))})},function(e,t){EASEL.component.probeContainer=createReactClass({propTypes:{onNext:PropTypes.func,machineType:PropTypes.string},getState:()=>({probeStatus:EASEL.machineStateStore.getProbeConnectionStatus(),probeResult:EASEL.machineStateStore.getProbeResult()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},render(){return React.createElement(EASEL.component.probe,{machineType:this.props.machineType,probeStatus:this.state.probeStatus,probeResult:this.state.probeResult,onNext:this.props.onNext})}})},function(e,t){EASEL.component.probeError=createReactClass({props:{restartProbe:PropTypes.func.isRequired},componentDidMount(){setTimeout(EASEL.localSender.unlock,100)},render:()=>React.createElement("div",{className:"diagram",style:{marginTop:40}},React.createElement("div",{className:"explanation-row"},React.createElement("div",null,React.createElement("div",{className:"row probe-error-list-item"},React.createElement("div",{className:"col-md-4 center-text"},React.createElement("img",{src:EASEL.assets.images.probeDistanceTooShort}),React.createElement("span",null,"Jog the spindle closer to the touch plate before starting the probe sequence.")),React.createElement("div",{className:"col-md-4 center-text"},React.createElement("img",{src:EASEL.assets.images.probePuckNotUnderBit}),React.createElement("span",null,"Ensure the touch plate is directly underneath the bit.")),React.createElement("div",{className:"col-md-4 center-text"},React.createElement("img",{src:EASEL.assets.images.probeClipNotOnCollet}),React.createElement("span",null,"Ensure the clip is properly attached to the spindle\u2018s collet."))),React.createElement("div",{className:"row center-text",style:{marginTop:75}},React.createElement("span",null,"Once you\u2018ve verified the above, click the Retry button. If you\u2018re still having problems, use the \u2018Help\u2018 menu to contact us.")))))})},function(e,t){EASEL.component.probeXYZero=createReactClass({propTypes:{onNext:PropTypes.func},render:()=>React.createElement("div",{className:"diagram"},React.createElement("div",{className:"explanation-row"},React.createElement("div",{className:"explanation"},React.createElement("p",null,"Z axis successfully zeroed, time to zero the X and Y axes.")),React.createElement("img",{style:{width:"600px"},src:EASEL.assets.images.zeroXY}),React.createElement("div",{className:"explanation"},React.createElement("p",null,"Jog the machine to the desired XY zeros."))))})},function(e,t){EASEL.component.probeZZero=createReactClass({props:{machineType:PropTypes.string.isRequired,onReady:PropTypes.func.isRequired,probeStatus:PropTypes.number.isRequired},getInitialState:()=>({confirmedLeadsPluggedIn:!1,confirmedProbeLocation:!1,confirmedClip:!1,confirmedConnectivity:!1,confirmedPlateIsInPlace:!1}),confirmProbeLocation(){this.setState({confirmedProbeLocation:!0})},confirmClip(){this.setState({confirmedClip:!0})},confirmPlateIsInPlace(){this.setState({confirmedPlateIsInPlace:!0}),this.props.onReady()},elementFullyVisible:e=>e?{opacity:.25}:{opacity:1},componentWillReceiveProps(e){0===e.probeStatus&&this.state.confirmedProbeLocation&&this.setState({confirmedLeadsPluggedIn:!0}),this.state.confirmedProbeLocation&&this.state.confirmedClip&&1===e.probeStatus&&this.setState({confirmedConnectivity:!0})},render(){let e,t,n;const{confirmedProbeLocation:a,confirmedLeadsPluggedIn:r,confirmedClip:o,confirmedConnectivity:s,confirmedPlateIsInPlace:i}=this.state,{probeStatus:l}=this.props,c=React.createElement("div",{className:"substep",style:this.elementFullyVisible(a)},React.createElement("p",{className:"substep-instruction"},"Jog the machine over the material."),React.createElement(ReactBootstrap.Button,{bsStyle:"primary",className:"confirm confirm-substep",onClick:this.confirmProbeLocation,disabled:a},"Confirm position")),p=r?"#49b975":"gray",u=r||!a;u||(e=React.createElement(EASEL.component.utils.imagePopoverHelper,{header:"Probe Plug",image:this.props.machineType===EASEL.machineType.XCARVE_PRO?EASEL.assets.images.xcpProbePlugDetail:EASEL.assets.images.probePlugDetail,width:232,height:280}));const d=React.createElement("div",{className:"substep",style:this.elementFullyVisible(u)},React.createElement("p",{className:"substep-instruction"},this.props.machineType===EASEL.machineType.XCARVE_PRO?"Plug the lead into the HMI.":"Plug the lead into the carriage.",e),React.createElement("i",{className:"fa fa-check-square step-checkmark pull-right",style:{color:p}})),h=o||!r||!a;h||(t=React.createElement(EASEL.component.utils.imagePopoverHelper,{header:"Collet Clip",image:this.props.machineType===EASEL.machineType.XCARVE_PRO?EASEL.assets.images.xcpClipDetail:EASEL.assets.images.clipDetail,width:232,height:280}));const E=React.createElement("div",{className:"substep",style:this.elementFullyVisible(h)},React.createElement("p",{className:"substep-instruction"},"Attach the clip to the collet.",t),React.createElement(ReactBootstrap.Button,{bsStyle:"primary",className:"confirm confirm-substep",onClick:this.confirmClip,disabled:h},"Clip is attached")),m=o&&!s?"confirm-substep":"confirm-substep disabled",S=React.createElement("div",{className:"substep",style:this.elementFullyVisible(s||!o)},React.createElement("p",{className:"substep-instruction"},"Touch the plate to the bit to check connectivity."),React.createElement("div",{className:m},React.createElement(EASEL.component.probeStatus,{probeStatus:l,disabled:!o}))),g=i||!s;g||(n=React.createElement(EASEL.component.utils.imagePopoverHelper,{header:"Touch Plate",image:this.props.machineType===EASEL.machineType.XCARVE_PRO?EASEL.assets.images.xcpTouchPlateDetail:EASEL.assets.images.touchPlateDetail,width:232,height:280}));const f=React.createElement("div",{className:"substep",style:this.elementFullyVisible(g)},React.createElement("p",{className:"substep-instruction"},"Place the touch plate on the material, under the bit.",n),React.createElement(ReactBootstrap.Button,{bsStyle:"primary",className:"confirm confirm-substep",onClick:this.confirmPlateIsInPlace,disabled:g},"Touch plate is in place"));return React.createElement("div",{className:"probe-z-instructions"},c,d,E,S,f)}})},function(e,t){EASEL.component.probing=createReactClass({props:{stopProbe:PropTypes.func},render(){return React.createElement("div",{className:"diagram text-center"},React.createElement("div",{className:"explanation-row"},React.createElement("div",{className:"explanation"},React.createElement("img",{src:EASEL.assets.images.probeAnimationBit,id:"probe-animation-bit"}),React.createElement("img",{src:EASEL.assets.images.probeAnimationMaterial})),React.createElement(ReactBootstrap.Button,{bsStyle:"danger",bsSize:"large",onClick:this.props.stopProbe,style:{marginTop:"40px"}},"Stop probing")))}})},function(e,t){EASEL.component.xcarveWalkthroughComponent=createReactClass({propTypes:{firstScreenNotice:PropTypes.node,isTileSelected:PropTypes.bool,useDetailBit:PropTypes.bool,gcodeHeaderFooter:PropTypes.string,handleChange:PropTypes.func,isExternalGcode:PropTypes.bool,isMachineLocked:PropTypes.bool,onHide:PropTypes.func,onFinish:PropTypes.func.isRequired,onResume:PropTypes.func.isRequired,onStartOver:PropTypes.func.isRequired,onSetStartingPoint:PropTypes.func.isRequired,startPoint:PropTypes.string,setIsUsingDustShoe:PropTypes.func},render(){let e=!0;const{startPoint:t,isTileSelected:n,firstScreenNotice:a,onResume:r,onStartOver:o,onFinish:s,onHide:i,onSetStartingPoint:l,isExternalGcode:c,gcodeHeaderFooter:p,handleChange:u,useDetailBit:d,setIsUsingDustShoe:h}=this.props,E=n,m=[];this.props.isMachineLocked&&(m.push({class:EASEL.component.machineLockedContainer,title:"Home machine"}),e=!1);const S=EASEL.hasAccessGrant("resume_carve");let{percentComplete:g,gcode:f,gcodeMetadata:A}=EASEL.carvingInfo.data();S&&(g>0&&null!=f&&null!=A)&&!t?(m.push({title:"Choose start point",class:EASEL.component.carveInterrupted,props:{onResume:r,onStartOver:o}}),e=!1):("RESUME"===t&&(f=EASEL.carvingInfo.data().parentGcode||EASEL.carvingInfo.data().gcode,m.push({title:"Confirm starting point",class:EASEL.component.chooseStartingPoint,props:{gcode:f,startFrame:Math.floor(EASEL.toolpathVisualizer.getFrameCount(f)*EASEL.carvingInfo.data().percentComplete/100),setStartingPoint:l}})),"RESUME"!==t&&E&&m.push({class:EASEL.component.alignMaterial,title:"Align material"}),c?m.push({class:EASEL.component.gcodeWarning,title:"Importing Gcode",props:{gcodeHeaderFooter:p,handleChange:u}}):"RESUME"!==t&&m.push({class:EASEL.component.measureMaterialContainer,title:"Measure material"}),a&&(m[0]=EASEL.setIn(m[0],["props","notice"],(()=>a))),"RESUME"!==t&&m.push({class:EASEL.component.clampMaterialContainer,title:"Secure material"}),c||"RESUME"===t||(d&&m.push({class:EASEL.component.choosePassType,title:"Choose pass type"}),m.push({class:EASEL.component.chooseBitContainer,title:"Confirm bit"})),m.push({class:EASEL.component.workZeroContainer,title:"Work zero",props:{machineType:this.props.machineType}}),m.push({class:EASEL.component.xcarveStartCarvingContainer,title:"Start carving",props:{setIsUsingDustShoe:h}}));const b=React.createElement("div",null,React.createElement("h3",null,"Jog Machine"),React.createElement(EASEL.component.machineControls,{context:"walkthrough"}));return React.createElement(EASEL.component.walkthrough,{onFinish:s,onHide:i,steps:m,showProgress:e,sidebarContents:b})}}),EASEL.component.xcarveWalkthrough=EASEL.redux.connect({mapStateToProps:e=>({machineType:EASEL.machineSettingsSelectors.getMachineType(e),isBetaTester:EASEL.userSelectors.isBetaTester(e),isTileSelected:EASEL.tileSelectors.isTileSelected(e)}),component:EASEL.component.xcarveWalkthroughComponent})},function(e,t,n){var a=Object.defineProperty,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&i(e,n,t[n]);if(r)for(var n of r(t))s.call(t,n)&&i(e,n,t[n]);return e};const c=n(82);EASEL.component.xcarveWalkthroughModal=EASEL.redux.connect({mapStateToProps:e=>{const t=EASEL.machineSettingsSelectors.getMachineType(e),n=EASEL.firmwareVersionSelectors.getCurrentVersionNumberForMachine(e)(t);return{gcode:EASEL.externalGcodeSelectors.getGcode(e),passType:EASEL.walkthroughSelectors.getPassType(e),useDetailBit:EASEL.bitSelectors.useDetailBit(e),mesh:EASEL.threeDPrototypeSelectors.getMesh(e),machineType:t,currentFirmwareVersion:n}},component:createReactClass({propTypes:{isExternalGcode:PropTypes.bool,useDetailBit:PropTypes.bool,canRepeatCarve:PropTypes.bool},getInitialState:()=>({show:!1,isMachineLocked:EASEL.machineStateUtils.isLocked(),isUsingDustShoe:!1,gcodeHeaderFooter:"add",startPoint:null,startFrame:null,forceRegularCarve:!1}),onMachineStateChange(){const e=EASEL.machineStateUtils.isLocked();e!==this.state.isMachineLocked&&this.setState({isMachineLocked:e})},componentDidMount(){EASEL.flux.events.addListener("show-walkthrough",this.show),EASEL.flux.events.addListener("hide-walkthrough",this.hide),EASEL.machineStateStore.addChangeListener(this.onMachineStateChange)},componentWillUnmount(){EASEL.flux.events.removeListener("show-walkthrough",this.show),EASEL.flux.events.removeListener("hide-walkthrough",this.hide),EASEL.machineStateStore.removeChangeListener(this.onMachineStateChange)},forceRegularCarve(){this.setState({forceRegularCarve:!0})},show(){this.setState({show:!0,startPoint:null,startFrame:null})},hide(){this.state.show&&(EASEL.localSender.stopSpindle(),EASEL.localSender.accessoriesOff()),this.setState({show:!1})},handleChange(e){this.setState({gcodeHeaderFooter:e.target.value})},gcodeFromStartPoint(e,t){const n=e.split("\n"),a=EASEL.toolpathVisualizer.indexOfFrameNumber(n,this.state.startFrame);if(a<=t.gcodeBodyStartLineIndex)return e;if(a>t.gcodeBodyEndLineIndex)return null;const r=EASEL.gcodeParser(),o=n.slice(0,a);let s=null;for(let p of Array.from(o))s=r.positionFromLine(r.format(p));const i=EASEL.gcodeGenerator(),l=n.slice(0,t.gcodeBodyStartLineIndex).join("\n");i.external(l),"inches"===t.gcodeUnits?i.inches():i.millimeters(),i.fastXY(s.x,s.y),i.plungeRate(9),i.z(s.z);const c=n.slice(a).join("\n");return i.external(c),i.string()},startJob(){const{gcode:e}=this.props;if(e){let t;return t="add"===this.state.gcodeHeaderFooter?c.withHeaderAndFooter(e):e,EASEL.localSender.startJob({gcode:t,isUsingDustShoe:this.state.isUsingDustShoe,isExternalGcode:!0,timeEstimate:c.getTime(t)})}if("RESUME"===this.state.startPoint){const e=EASEL.carvingInfo.data(),t=this.gcodeFromStartPoint(e.parentGcode||e.gcode,e.gcodeMetadata);EASEL.localSender.startJob({gcode:t,gcodeMetadata:e.gcodeMetadata,parentGcode:e.parentGcode||e.gcode,jobSettings:e.jobSettings,isUsingDustShoe:e.isUsingDustShoe,isExternalGcode:!1})}else{const e=EASEL.store.getState(),t=EASEL.internalGcodeSelectors.getGcodePasses(e),n=this.props.useDetailBit||null!=this.props.mesh?this.props.passType:"all",a=t.find((e=>e.jobSettings.passType===n)),r=e=>{if(null!=(e=EASEL.merge(e,{isUsingDustShoe:this.state.isUsingDustShoe,isExternalGcode:!1})).error){EASEL.errorReporter.submitNonUserReportedError({userNotes:"Please forward this to devhelp for review",error:{sender_note:e.error},gcode:e.gcode});const{title:t,message:n}=EASEL.stringConstants.alerts.invalidDepthError;EASEL.alert(t,n)}else EASEL.localSender.startJob(e)};null==a?null!=this.props.mesh?EASEL.flux.events.emit("generate-3d-toolpaths",this.props.passType,(e=>{EASEL.localSender.startJob({gcode:e.gcode,isUsingDustShoe:this.state.isUsingDustShoe,isExternalGcode:!0,timeEstimate:c.getTime(e.gcode)})})):EASEL.gcodeForVolumes.process({style:n,done:r}):r(a)}},onFinish(){this.setState({show:!1}),this.startJob()},onResume(){this.setState({startPoint:"RESUME"})},onStartOver(){EASEL.carvingInfo.percentComplete(0),this.setState({startPoint:"START_OVER"})},onSetStartingPoint(e){console.log(`Setting starting point frame: ${e}`),this.setState({startFrame:e})},setIsUsingDustShoe(e){this.setState({isUsingDustShoe:e})},repeatLastCarve(){return this.props.canRepeatCarve&&!this.props.useDetailBit&&!this.state.forceRegularCarve&&!this.state.isMachineLocked},getWalkthroughComponent(){let e;const t=EASEL.machineTypeHelper.currentIsInventablesMachine(),n=EASEL.machineStateStore.getFirmwareVersion();return e=t&&this.props.currentFirmwareVersion&&this.props.currentFirmwareVersion!==n?React.createElement(EASEL.component.firmwareNotice,{machineType:this.props.machineType}):null,this.repeatLastCarve()?React.createElement(EASEL.component.repeatCarveWalkthrough,l({onFinish:this.onFinish,onHide:this.hide,startPoint:this.state.startPoint,onSetStartingPoint:this.onSetStartingPoint,gcodeHeaderFooter:this.state.gcodeHeaderFooter,handleChange:this.handleChange,setIsUsingDustShoe:this.setIsUsingDustShoe,onForceRegularCarve:this.forceRegularCarve},this.props)):null!=this.props.mesh?React.createElement(EASEL.component.walkthrough3d,{onFinish:this.onFinish,onHide:this.hide,isMachineLocked:this.state.isMachineLocked,setIsUsingDustShoe:this.setIsUsingDustShoe,firstScreenNotice:e}):React.createElement(EASEL.component.xcarveWalkthrough,l({onFinish:this.onFinish,onHide:this.hide,startPoint:this.state.startPoint,onResume:this.onResume,onStartOver:this.onStartOver,onSetStartingPoint:this.onSetStartingPoint,gcodeHeaderFooter:this.state.gcodeHeaderFooter,handleChange:this.handleChange,isMachineLocked:this.state.isMachineLocked,setIsUsingDustShoe:this.setIsUsingDustShoe,firstScreenNotice:e},this.props))},render(){return React.createElement(ReactBootstrap.Modal,{show:this.state.show,bsSize:"large",backdrop:"static",className:"walkthrough-modal walkthrough-modal--has-sidebar",onHide:this.hide},React.createElement(EASEL.component.a,{className:"close-modal",onClick:this.hide},"\xd7"),this.getWalkthroughComponent())}})})},function(e,t){var n=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,c=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))i.call(t,n)&&l(e,n,t[n]);return e};EASEL.component.linearAccuracyTest=createReactClass({getInitialState:()=>({axis:"X",feedRate:500,items:new Array(25).fill(0)}),sendGcode(e){const t=`$J = G53 ${e} F${this.state.feedRate}`;EASEL.localSender.sendLine(t)},setValue(e,t){this.setState((n=>{return{items:(o=c({},n.items),s={[t]:e},a(o,r(s)))};var o,s}))},getAxisInfo(e){switch(e){case"X":return[{label:0,offset:"X -919.273"},{label:45,offset:"X -874.273"},{label:98.455,offset:"X -820.818"},{label:150.909,offset:"X -768.364"},{label:207.364,offset:"X -711.909"},{label:256.818,offset:"X -662.455"},{label:306.273,offset:"X -613.000"},{label:367.727,offset:"X -551.545"},{label:431.182,offset:"X -488.091"},{label:485.636,offset:"X -433.636"},{label:528.091,offset:"X -391.182"},{label:586.545,offset:"X -332.727"},{label:0,offset:"X -287.727"}];case"Y24":return[{label:0,offset:"Y -562.000"},{label:45,offset:"Y -517.000"},{label:88,offset:"Y -474.000"},{label:130,offset:"Y -432.000"},{label:176,offset:"Y -386.000"},{label:215,offset:"Y -347.000"},{label:254,offset:"Y -308.000"},{label:305,offset:"Y -257.000"},{label:358,offset:"Y -204.000"},{label:402,offset:"Y -160.000"},{label:434,offset:"Y -128.000"},{label:482,offset:"Y -80.000"},{label:0,offset:"Y -35.000"}];case"Y48":return[{label:0,offset:"Y -919.273"},{label:45,offset:"Y  -874.273"},{label:98.455,offset:"Y -820.818"},{label:150.909,offset:"Y -768.364"},{label:207.364,offset:"Y -711.909"},{label:256.818,offset:"Y -662.455"},{label:306.273,offset:"Y -613.000"},{label:367.727,offset:"Y -551.545"},{label:431.182,offset:"Y -488.091"},{label:485.636,offset:"Y -433.636"},{label:528.091,offset:"Y -391.182"},{label:586.545,offset:"Y -332.727"},{label:0,offset:"Y -287.727"}];case"Z":return[{label:0,offset:"Z -24.354"},{label:15,offset:"Z -39.354"},{label:20.96951,offset:"Z -45.323"},{label:30.69235,offset:"Z -55.046"},{label:37.09257,offset:"Z -61.446"},{label:45.70787,offset:"Z -70.062"},{label:53.40022,offset:"Z -77.754"},{label:61.52328,offset:"Z -85.877"},{label:68.41574,offset:"Z -92.769"},{label:78.44623,offset:"Z -102.800"},{label:84.10809,offset:"Z -108.462"},{label:93.27716,offset:"Z -117.631"},{label:0,offset:"Z -132.631"}]}},axisButtonColumn(e){let t=this.getAxisInfo(e);return t.map(((e,n)=>{let a=0==n||n==t.length-1;return React.createElement("div",{className:"linear-accuracy-test__button-row",key:n},React.createElement("button",{className:"btn btn-primary",key:n,onClick:()=>this.sendGcode(e.offset)},n,a&&" - Space"),React.createElement("input",{value:this.state.items[n]||"",onChange:e=>this.setValue(e.target.value,n),disabled:a}),React.createElement("input",{value:this.state.items[n+t.length]||"",onChange:e=>this.setValue(e.target.value,n+t.length)}))}))},createTable(){let e=[],t=[],n=this.getAxisInfo(this.state.axis),a=[],r=[],o=[];t.push(React.createElement("th",{key:"header-column-1"},"i")),a.push(React.createElement("th",{key:"header-column-2"},"Machine Position")),r.push(React.createElement("td",{key:"header-column-3"},React.createElement("i",{className:"fa fa-arrow-up"}))),o.push(React.createElement("td",{key:"header-column-4"},React.createElement("i",{className:"fa fa-arrow-down"})));for(let s=1;s<n.length-1;s++)t.push(React.createElement("th",{key:s},s)),a.push(React.createElement("th",{key:s},n[s].label)),r.push(React.createElement("td",{key:s},this.state.items[s]||"")),o.push(React.createElement("td",{key:s+n.length},this.state.items[s+n.length]||""));return e.push(React.createElement("tr",{key:"head"},t),React.createElement("tr",{key:"head2"},a),React.createElement("tr",{key:"row1"},r),React.createElement("tr",{key:"row2"},o)),e},render(){return React.createElement("div",{className:"linear-accuracy-test"},React.createElement("div",null,React.createElement("div",{className:"linear-accuracy-test__button-head"},React.createElement("h4",null,"Results"),React.createElement("button",{className:"btn btn-danger",onClick:()=>this.setState({items:new Array(25).fill(0)})},"Clear results")),React.createElement("table",{className:"linear-accuracy-test__results"},React.createElement("tbody",null,this.createTable()))),React.createElement("div",{className:"linear-accuracy-test__button-row"},React.createElement("div",{key:"feed-rate",className:"linear-accuracy-test__button-column"},React.createElement("h4",null,"Axis"),["X","Y24","Y48","Z"].map((e=>React.createElement("button",{key:e,className:`btn btn-primary ${e==this.state.axis&&"active"}`,onClick:()=>this.setState({axis:e})},e))),React.createElement("h4",null,"Feed Rate"),[500,2540,7620].map(((e,t)=>React.createElement("button",{className:`btn btn-primary ${e==this.state.feedRate&&"active"}`,key:t,onClick:()=>this.setState({feedRate:e})},e)))),React.createElement("div",{className:"linear-accuracy-test__button-column"},React.createElement("h4",null,"Gcode"),React.createElement("div",{className:"linear-accuracy-test__button-row"},React.createElement("div",null),React.createElement("div",null,React.createElement("i",{className:"fa fa-arrow-up"})),React.createElement("div",null,React.createElement("i",{className:"fa fa-arrow-down"}))),this.axisButtonColumn(this.state.axis))))}})},function(e,t){EASEL.component.machineInspectorTest=createReactClass({getState:()=>({isOpen:EASEL.xcpTestingStore.getInspectorTest().isOpen,test:EASEL.xcpTestingStore.getInspectorTest().test,serialNumber:EASEL.machineStateStore.getSerialNumber(),firmwareVersion:EASEL.machineStateStore.getFirmwareVersion(),localSenderVersion:EASEL.localSenderVersionStore.getRunningVersionNumber()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.xcpTestingStore.addChangeListener(this._onChange),EASEL.localSenderVersionStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.xcpTestingStore.removeChangeListener(this._onChange),EASEL.localSenderVersionStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},render(){return React.createElement(ReactBootstrap.Modal,{id:"machine-inspector-test",className:"linear-accuracy",show:this.state.isOpen,onHide:EASEL.xcpTestingActions.closeInspectorTest},React.createElement(ReactBootstrap.Modal.Header,{closeButton:!0},React.createElement(ReactBootstrap.Modal.Title,null,"linear"===this.state.test?"Linear Accuracy":"PCB Test")),React.createElement(ReactBootstrap.Modal.Body,null,React.createElement("div",{className:"machine-inspector__info"},"linear"===this.state.test&&React.createElement("div",{id:"firmware-data"},null!=this.state.serialNumber&&React.createElement("span",null,`Serial Number: ${this.state.serialNumber}`),null!=this.state.firmwareVersion&&React.createElement("span",null,`Firmware Version: ${this.state.firmwareVersion}`)),React.createElement(EASEL.component.machineState,null),React.createElement("hr",null),React.createElement(EASEL.component.machineEvents,null)),"linear"===this.state.test?React.createElement(EASEL.component.linearAccuracyTest,null):React.createElement(EASEL.component.pcbTest,null)))}})},function(e,t){EASEL.component.machineStateSimplified=EASEL.redux.connect({mapStateToProps:e=>({machineType:EASEL.machineSettingsSelectors.getMachineType(e)}),component:createReactClass({getState:()=>({machineState:EASEL.machineStateStore.getState(),websocketMessages:EASEL.websocketMessageStore.getWebsocketMessages(),lastStatusMessage:EASEL.websocketMessageStore.getLastStatusMessage(),detectedGarbledMessage:EASEL.websocketMessageStore.hasDetectedGarbledMessage()}),getInitialState(){return this.getState()},componentDidMount(){EASEL.machineStateStore.addChangeListener(this._onChange),EASEL.websocketMessageStore.addChangeListener(this._onChange)},componentWillUnmount(){EASEL.machineStateStore.removeChangeListener(this._onChange),EASEL.websocketMessageStore.removeChangeListener(this._onChange)},_onChange(){this.setState(this.getState())},switchState(e,t){const n="fa fa-2x "+(t?"fa-circle fa-green":"fa-circle-thin fa-grey");return React.createElement("div",{key:e,className:"xcp-test__flex xcp-test__flex-column","data-active":t,"data-label":e},React.createElement("i",{className:n}),React.createElement("p",null,e),React.createElement("input",{className:"xcp-test__checkbox",type:"checkbox",name:e}))},render(){let e,t=[],n=[];return null!=this.state.lastStatusMessage&&(e=EASEL.grblStatusParser.machineSwitchStates(this.state.lastStatusMessage,this.props.machineType)),null!=e&&(t=[this.switchState("X",e.x),this.switchState("Y",e.y),this.switchState("Z",e.z)],n=[this.switchState("Enclo",e.door),this.switchState("Pause",e.hold),this.switchState("Run",e.button),this.switchState("Reset",e.soft_reset)]),React.createElement("div",null,React.createElement("div",{className:"xcp-test__flex xcp-test__flex-row"},React.createElement("div",{className:"xcp-test__flex xcp-test__flex-column"},React.createElement("h4",null,"State"),React.createElement("pre",null,this.state.machineState)),React.createElement("button",{className:"btn btn-primary",onClick:EASEL.localSender.unlock},"Unlock")),null!=e?React.createElement("div",null,React.createElement("div",{className:"pin-state-container"},n),React.createElement("hr",null),React.createElement("h4",null,"Homing Switches"),React.createElement("div",{className:"pin-state-container"},t)):React.createElement("span",null,"No Switches Reporting"),React.createElement(ReactBootstrap.Row,null,React.createElement(ReactBootstrap.Col,{md:12},React.createElement("hr",null),React.createElement("h4",null,"Console"),React.createElement(EASEL.component.machineConsoleController,{websocketMessages:this.state.websocketMessages,detectedGarbledMessage:this.state.detectedGarbledMessage}))))}})})},function(e,t){EASEL.component.pcbTest=createReactClass({clearInputs(){let e=document.querySelectorAll("input[type=checkbox].xcp-test__checkbox");for(let t=0;t<e.length;t++)e[t].checked=!1;e=document.querySelectorAll("input[type=text]");for(let t=0;t<e.length;t++)e[t].value=""},buttonsAndInputs(e,t,n){const a="Z"===e?[25,500,2540]:[25,500,7620],r="Y"===e&&"Y1",o=n?"Clockwise":"Counterclockwise";return React.createElement("div",{className:""},React.createElement("div",{className:"xcp-test__flex xcp-test__flex-row"},React.createElement("h4",{className:"xcp-test__label"},e,"-Axis"),a.map((n=>React.createElement("button",{key:`button${n}`,className:"btn btn-primary",onClick:()=>this.sendJogCommand(e,n,t)},e,"-",n)))),React.createElement("div",{className:"xcp-test__flex xcp-test__flex-row"},React.createElement("label",{className:"xcp-test__label"},r," ",o,"? "),a.map((e=>React.createElement("input",{key:`clock${e}`,className:"xcp-test__checkbox",type:"checkbox",name:`clock${e}`})))),React.createElement("div",{className:"xcp-test__flex xcp-test__flex-row"},React.createElement("label",{className:"xcp-test__label"}," ",r," Smooth?"),a.map((e=>React.createElement("input",{key:`smooth${e}`,className:"xcp-test__checkbox",type:"checkbox",name:`smooth${e}`})))),r&&React.createElement("div",{className:"xcp-test__flex xcp-test__flex-row"},React.createElement("label",{className:"xcp-test__label"},"Y2 ",o,"?"),a.map((e=>React.createElement("input",{key:`clock${e}`,className:"xcp-test__checkbox",type:"checkbox",name:`clock${e}`})))),r&&React.createElement("div",{className:"xcp-test__flex xcp-test__flex-row"},React.createElement("label",{className:"xcp-test__label"},"Y2 Smooth?"),a.map((e=>React.createElement("input",{key:`smooth${e}`,className:"xcp-test__checkbox",type:"checkbox",name:`smooth${e}`})))))},sendJogCommand(e,t,n){const a=`G21G91 G1 ${e}${!0===n?10:-10} F${t}`;EASEL.localSender.sendLine(a)},sendSpindleCommand(e){const t=`M3 S${e}`;EASEL.localSender.sendLine(t)},spindleTest(){return React.createElement("div",{className:""},[0,500,1e4,15e3,2e4,24e3].map((e=>React.createElement("div",{key:`button${e}`,className:"xcp-test__flex xcp-test__flex-row"},React.createElement("button",{className:"btn btn-primary xcp-test__spindle-button",onClick:()=>this.sendSpindleCommand(e)},"RPM ",e,0===e&&" (Stop)"),React.createElement("input",{className:"xcp-test__text",type:"text",name:`rpm${e}`}),"V"))))},render(){return React.createElement("div",{className:"xcp-test"},React.createElement("div",{className:"xcp-test__flex xcp-test__flex-row"},React.createElement("div",{className:"xcp-test__flex xcp-test__flex-column"},React.createElement("label",{htmlFor:"part"},"Part Number"),React.createElement("input",{className:"xcp-test__machine-text",type:"text",name:"part"})),React.createElement("div",{className:"xcp-test__flex xcp-test__flex-column"},React.createElement("label",{htmlFor:"rev"},"Revision Number"),React.createElement("input",{className:"xcp-test__machine-text",type:"text",name:"rev"})),React.createElement("div",{className:"xcp-test__flex xcp-test__flex-column"},React.createElement("label",{htmlFor:"dc"},"Date Code"),React.createElement("input",{className:"xcp-test__machine-text",type:"text",name:"dc"})),React.createElement("div",{className:"xcp-test__flex xcp-test__flex-column"},React.createElement("label",{htmlFor:"date"},"Test Date"),React.createElement("input",{type:"date",name:"date"})),React.createElement("div",{className:"xcp-test__flex xcp-test__flex-column"},React.createElement("label",{htmlFor:"testloc"},"Test Location"),React.createElement("input",{className:"xcp-test__machine-text",type:"text",name:"testloc"})),React.createElement("button",{className:"btn btn-danger",onClick:this.clearInputs},"Clear All")),React.createElement("hr",null),React.createElement("div",{className:"xcp-test__flex"},React.createElement("div",{className:"xcp-test__step"},React.createElement("div",null,React.createElement("strong",null,"Voltage via Multimeter"),React.createElement("div",{className:"xcp-test__flex xcp-test__flex-row"},React.createElement("div",null,React.createElement("label",null,"5V"),React.createElement("input",{className:"xcp-test__checkbox",type:"checkbox",name:"5v"})),React.createElement("div",null,React.createElement("label",null,"12V"),React.createElement("input",{className:"xcp-test__checkbox",type:"checkbox",name:"12v"})),React.createElement("div",null,React.createElement("label",null,"48V"),React.createElement("input",{className:"xcp-test__checkbox",type:"checkbox",name:"48v"})))),React.createElement("hr",null),React.createElement("div",null,React.createElement("strong",null,"Flood & Mist"),React.createElement("div",{className:"xcp-test__flex xcp-test__flex-row"},React.createElement("div",{className:"xcp-test__flex xcp-test__flex-column"},React.createElement("button",{className:"btn btn-primary",onClick:()=>EASEL.localSender.sendLine("M8")},"Flood"),React.createElement("input",{className:"xcp-test__checkbox",type:"checkbox",name:"flood"})),React.createElement("div",{className:"xcp-test__flex xcp-test__flex-column"},React.createElement("button",{className:"btn btn-primary",onClick:()=>EASEL.localSender.sendLine("M7")},"Mist"),React.createElement("input",{className:"xcp-test__checkbox",type:"checkbox",name:"mist"})),React.createElement("div",{className:"xcp-test__flex xcp-test__flex-column"},React.createElement("button",{className:"btn btn-primary",onClick:()=>EASEL.localSender.sendLine("M9")},"M9"),React.createElement("input",{className:"xcp-test__checkbox",type:"checkbox",name:"m9"})))),React.createElement("hr",null),React.createElement(EASEL.component.machineStateSimplified,null),React.createElement("hr",null)),React.createElement("div",{className:"xcp-test__step"},React.createElement("strong",null,"Clockwise Stepper Motor"),this.buttonsAndInputs("X",!0,!0),this.buttonsAndInputs("Y",!1,!0),this.buttonsAndInputs("Z",!1,!0)),React.createElement("div",{className:"xcp-test__step"},React.createElement("strong",null,"Counterclockwise Stepper Motor"),this.buttonsAndInputs("X",!1,!1),this.buttonsAndInputs("Y",!0,!1),this.buttonsAndInputs("Z",!0,!1)),React.createElement("div",{className:"xcp-test__step"},React.createElement("strong",null,"Spindle RPM/Voltage"),this.spindleTest(!0))))}})},function(e,t){EASEL.component.xcpTestingButtons=createReactClass({onClick(e){EASEL.flux.events.emit("hide-advanced-machine-panel"),EASEL.xcpTestingActions.openInspectorTest(e)},render(){return React.createElement("div",{className:"xcp-testing__buttons"},React.createElement(ReactBootstrap.Button,{onClick:()=>this.onClick("linear"),"data-dismiss":"modal",bsStyle:"primary"},"Linear Accuracy"),React.createElement(ReactBootstrap.Button,{onClick:()=>this.onClick("pcb"),"data-dismiss":"modal",bsStyle:"primary"},"PCB Testing"))}})},function(e,t){!function(){let e=[],t=(...t)=>e.push(t);const n=window.onerror;window.onerror=function(...e){console.error(...e||[]),"function"===typeof n&&n(...e||[]),t(...e||[])},EASEL.errors={enableTracking(){window.addEventListener("unhandledrejection",(e=>window.onerror(e.reason.toString(),"Unhandled promise rejection",0,0,e.reason)));const n={};t=function(e,t,a,r,o){const s=`${a}:${r}`;null==n[s]&&(EASEL.stats.trackEvent("Uncaught Error",{message:e,url:t,lineNumber:a,column:r,object:null!=o?o.stack:"(no error object)"}),n[s]=!0)};for(let a of e)t(a||[]);e=null}}}()},function(e,t,n){EASEL.service||(EASEL.service={}),EASEL.service.realCutSettingService=function(){let e=[],t={},n={};const a=function(t){let n,a=0;return e.forEach((e=>{const r=function(e,t){let n=0;for(let a in e){const r=e[a];if(t[a]!==r)return 0;n+=1}return n}(e.configuration,t);r>a&&(a=r,n=e)})),a>0?n:null};var r=function(e,t,n){const a=EASEL.cutSettingsSelectors.getCutSettings(EASEL.store.getState());let r=null;for(let o of a){if(o.materialId===e.id&&o.bitId===t.id&&o.machineProfileId===n)return o;o.materialId!==e.id||o.bitId!==t.id||o.machineProfileId||(r=o)}return r};const o=()=>n;return{recommend:function(e,n,r){let s;const i=e?function(e){const t=a(e);return t&&t.settings}(e):null;return e&&r&&i&&i[r.technologyId]&&i[r.technologyId][n.name]&&(s=EASEL.merge({spindleSpeed:e.spindleRPM},i[r.technologyId][n.name])),s||function(e){const t=a(e);return t&&t.manufacturerOverrideSettings}(e)||function(e,n){let a;if(null!=e&&(a=t[e.name]))return EASEL.merge(a,{spindleSpeed:n,untested:!0})}(n,null!=e?e.spindleRPM:void 0)||(e=>{const t=a(e);return t&&t.failSafeSettings})(e)||o()},getCutSettingsForJob:function(e){return"all"===e.passType||"roughing"===e.passType?e.bit:e.detailBit},setDefaultSettings:e=>t=e,addMachineSettings:t=>e=e.concat([t]),setFailSafeSettings:e=>n=e,getFailSafeSettings:o,findSavedCustomSettings:r,usingSavedCustomSettings:function(e,t,n){if(null==e||null==t)return!1;const a="detail"===e.passType?e.detailBit:e.bit,o=r(t,a,n);return null!=o?e.useCustom&&EASEL.isEqual(o,e):void 0}}}(),EASEL.stubCutSettingService=function(){const{findSavedCustomSettings:e,getCutSettingsForJob:t,usingSavedCustomSettings:n}=EASEL.service.realCutSettingService;return{recommend:function(e,t,n){let a;return a=null!=n&&n.width<=.0625?{feedRate:9,depthPerPass:.01,plungeRate:2}:{feedRate:12,depthPerPass:.04,plungeRate:7},null!=n&&"other-bit"===n.id&&(a.untested=!0),a},findSavedCustomSettings:e,getCutSettingsForJob:t,usingSavedCustomSettings:n}}(),EASEL.service.cutSettingService=EASEL.service.realCutSettingService},function(e,t,n){n(1069),n(1070),n(1071),n(1072),n(1073),n(1074),n(1075),n(1076),n(1077),n(339),n(1078),n(1079),n(1080)},function(e,t){EASEL.currentProject={loadData:function(e){return EASEL.projectMetadataActions.setID(e.project.id),EASEL.projectMetadataActions.setAssignedLabels(e.project.labels),EASEL.projectMetadataActions.setCreatedAt(e.project.created_at),EASEL.projectMetadataActions.setUpdatedAt(e.project.updated_at),EASEL.projectMetadataActions.setLinkToken(e.project.link_token),EASEL.projectMetadataActions.setLive(e.project.live),EASEL.projectMetadataActions.setName(e.project.name),EASEL.projectMetadataActions.setShared(e.project.shared),EASEL.projectMetadataActions.setStarred(e.project.starred),EASEL.projectMetadataActions.setInventablesURL(e.project.inventables_url),EASEL.projectMetadataActions.setContainsImportedSVG(e.project.contains_imported_svg),EASEL.projectMetadataActions.setCarveCount(e.project.carve_count),EASEL.projectAutosaver.setProjectSaveParams(e.project),EASEL.projectMetadataActions.setReadOnly(e.readonly),EASEL.projectDataInitializer.initialize(e.project),null!=EASEL.projectMetadataStore.getInventablesURL()&&$("#inventables-project-published").show(),EASEL.projectMetadataStore.isReadOnly()&&(EASEL.stats.trackEvent("Opened Shared Project",{Name:EASEL.projectMetadataStore.getName(),"Link Token":EASEL.projectLinkToken}),EASEL.stats.trackEventOnServer("Opened Shared Project",{"Link Token":EASEL.projectLinkToken})),e.project}}},function(e,t){(()=>{const e={configuration:{machineType:EASEL.machineType.CARVEY},settings:{30818:{ABS:{feedRate:30,depthPerPass:.015,plungeRate:12},Aluminum:{feedRate:5,depthPerPass:.002,plungeRate:2},Bamboo:{feedRate:30,depthPerPass:.015,plungeRate:12},"Birch Plywood":{feedRate:30,depthPerPass:.015,plungeRate:12},Bubinga:{feedRate:30,depthPerPass:.015,plungeRate:12},"Cast Acrylic":{feedRate:30,depthPerPass:.01,plungeRate:12},"Cherry Plywood":{feedRate:30,depthPerPass:.015,plungeRate:12},Corian:{feedRate:20,depthPerPass:.01,plungeRate:6},"Expanded PVC":{feedRate:40,depthPerPass:.015,plungeRate:12},"Hard Maple":{feedRate:30,depthPerPass:.015,plungeRate:12},Linoleum:{feedRate:30,depthPerPass:.015,plungeRate:12},MDF:{feedRate:30,depthPerPass:.015,plungeRate:12},"One-Color HDPE":{feedRate:30,depthPerPass:.015,plungeRate:12},PCB:{feedRate:30,depthPerPass:.015,plungeRate:10},Pine:{feedRate:30,depthPerPass:.015,plungeRate:12},"Soft Maple":{feedRate:30,depthPerPass:.015,plungeRate:12},"Two-Color Acrylic":{feedRate:30,depthPerPass:.01,plungeRate:10},"Two-Color HDPE":{feedRate:30,depthPerPass:.015,plungeRate:12},Walnut:{feedRate:30,depthPerPass:.015,plungeRate:12}},30817:{ABS:{feedRate:40,depthPerPass:.03,plungeRate:12},Aluminum:{feedRate:20,depthPerPass:.002,plungeRate:5},Bamboo:{feedRate:40,depthPerPass:.03,plungeRate:12},"Birch Plywood":{feedRate:40,depthPerPass:.03,plungeRate:12},Bubinga:{feedRate:40,depthPerPass:.03,plungeRate:12},"Cast Acrylic":{feedRate:40,depthPerPass:.03,plungeRate:12},"Cherry Plywood":{feedRate:40,depthPerPass:.03,plungeRate:12},Corian:{feedRate:30,depthPerPass:.02,plungeRate:8},"Expanded PVC":{feedRate:60,depthPerPass:.03,plungeRate:12},"Hard Maple":{feedRate:40,depthPerPass:.03,plungeRate:12},Linoleum:{feedRate:50,depthPerPass:.03,plungeRate:12},MDF:{feedRate:40,depthPerPass:.03,plungeRate:12},"One-Color HDPE":{feedRate:40,depthPerPass:.03,plungeRate:12},PCB:{feedRate:40,depthPerPass:.02,plungeRate:10},Pine:{feedRate:40,depthPerPass:.03,plungeRate:12},"Soft Maple":{feedRate:40,depthPerPass:.03,plungeRate:12},"Two-Color Acrylic":{feedRate:30,depthPerPass:.03,plungeRate:12},"Two-Color HDPE":{feedRate:40,depthPerPass:.03,plungeRate:12},Walnut:{feedRate:40,depthPerPass:.03,plungeRate:12}},30238:{ABS:{feedRate:40,depthPerPass:.03,plungeRate:12},Aluminum:{feedRate:12,depthPerPass:.005,plungeRate:3},Bamboo:{feedRate:40,depthPerPass:.03,plungeRate:12},"Birch Plywood":{feedRate:40,depthPerPass:.03,plungeRate:12},Bubinga:{feedRate:40,depthPerPass:.03,plungeRate:12},"Cast Acrylic":{feedRate:40,depthPerPass:.03,plungeRate:12},"Cherry Plywood":{feedRate:40,depthPerPass:.03,plungeRate:12},Corian:{feedRate:24,depthPerPass:.03,plungeRate:9},"Expanded PVC":{feedRate:60,depthPerPass:.03,plungeRate:12},"Hard Maple":{feedRate:40,depthPerPass:.03,plungeRate:12},Linoleum:{feedRate:80,depthPerPass:.06,plungeRate:9},MDF:{feedRate:40,depthPerPass:.03,plungeRate:12},"One-Color HDPE":{feedRate:40,depthPerPass:.03,plungeRate:12},PCB:{feedRate:10,depthPerPass:.015,plungeRate:9},Pine:{feedRate:40,depthPerPass:.03,plungeRate:12},"Soft Maple":{feedRate:40,depthPerPass:.03,plungeRate:12},"Two-Color Acrylic":{feedRate:30,depthPerPass:.02,plungeRate:6},"Two-Color HDPE":{feedRate:40,depthPerPass:.03,plungeRate:12},Walnut:{feedRate:40,depthPerPass:.03,plungeRate:12}},30237:{ABS:{feedRate:40,depthPerPass:.03,plungeRate:12},Aluminum:{feedRate:10,depthPerPass:.002,plungeRate:3},Bamboo:{feedRate:40,depthPerPass:.03,plungeRate:12},"Birch Plywood":{feedRate:40,depthPerPass:.03,plungeRate:12},Bubinga:{feedRate:40,depthPerPass:.03,plungeRate:12},"Cast Acrylic":{feedRate:40,depthPerPass:.03,plungeRate:12},"Cherry Plywood":{feedRate:40,depthPerPass:.03,plungeRate:12},Corian:{feedRate:40,depthPerPass:.03,plungeRate:10},"Expanded PVC":{feedRate:60,depthPerPass:.03,plungeRate:12},"Hard Maple":{feedRate:40,depthPerPass:.03,plungeRate:12},Linoleum:{feedRate:60,depthPerPass:.06,plungeRate:12},MDF:{feedRate:40,depthPerPass:.03,plungeRate:12},"One-Color HDPE":{feedRate:40,depthPerPass:.03,plungeRate:12},PCB:{feedRate:40,depthPerPass:.02,plungeRate:10},Pine:{feedRate:40,depthPerPass:.03,plungeRate:12},"Soft Maple":{feedRate:40,depthPerPass:.03,plungeRate:12},"Two-Color Acrylic":{feedRate:30,depthPerPass:.03,plungeRate:6},"Two-Color HDPE":{feedRate:40,depthPerPass:.03,plungeRate:12},Walnut:{feedRate:40,depthPerPass:.03,plungeRate:12}},30808:{ABS:{feedRate:20,depthPerPass:.02,plungeRate:10},Bamboo:{feedRate:30,depthPerPass:.03,plungeRate:10},"Birch Plywood":{feedRate:30,depthPerPass:.03,plungeRate:10},Bubinga:{feedRate:30,depthPerPass:.03,plungeRate:10},"Cast Acrylic":{feedRate:20,depthPerPass:.02,plungeRate:10},"Cherry Plywood":{feedRate:30,depthPerPass:.03,plungeRate:10},Corian:{feedRate:20,depthPerPass:.02,plungeRate:10},"Expanded PVC":{feedRate:40,depthPerPass:.03,plungeRate:10},"Hard Maple":{feedRate:30,depthPerPass:.03,plungeRate:10},MDF:{feedRate:30,depthPerPass:.03,plungeRate:10},"One-Color HDPE":{feedRate:30,depthPerPass:.03,plungeRate:10},Pine:{feedRate:30,depthPerPass:.03,plungeRate:10},"Soft Maple":{feedRate:30,depthPerPass:.03,plungeRate:10},"Two-Color Acrylic":{feedRate:30,depthPerPass:.02,plungeRate:6},"Two-Color HDPE":{feedRate:30,depthPerPass:.03,plungeRate:10},Walnut:{feedRate:30,depthPerPass:.03,plungeRate:10}},30809:{ABS:{feedRate:20,depthPerPass:.02,plungeRate:20},Bamboo:{feedRate:30,depthPerPass:.03,plungeRate:10},"Birch Plywood":{feedRate:30,depthPerPass:.03,plungeRate:10},Bubinga:{feedRate:30,depthPerPass:.03,plungeRate:10},"Cast Acrylic":{feedRate:20,depthPerPass:.02,plungeRate:10},"Cherry Plywood":{feedRate:30,depthPerPass:.03,plungeRate:10},Corian:{feedRate:20,depthPerPass:.02,plungeRate:10},"Expanded PVC":{feedRate:40,depthPerPass:.03,plungeRate:10},"Hard Maple":{feedRate:30,depthPerPass:.03,plungeRate:10},MDF:{feedRate:30,depthPerPass:.03,plungeRate:10},"One-Color HDPE":{feedRate:30,depthPerPass:.03,plungeRate:10},Pine:{feedRate:30,depthPerPass:.03,plungeRate:10},"Soft Maple":{feedRate:30,depthPerPass:.03,plungeRate:10},"Two-Color Acrylic":{feedRate:30,depthPerPass:.02,plungeRate:6},"Two-Color HDPE":{feedRate:30,depthPerPass:.03,plungeRate:10},Walnut:{feedRate:30,depthPerPass:.03,plungeRate:10}},30810:{ABS:{feedRate:20,depthPerPass:.02,plungeRate:10},Bamboo:{feedRate:30,depthPerPass:.03,plungeRate:10},"Birch Plywood":{feedRate:30,depthPerPass:.03,plungeRate:10},Bubinga:{feedRate:30,depthPerPass:.03,plungeRate:10},"Cast Acrylic":{feedRate:20,depthPerPass:.02,plungeRate:10},"Cherry Plywood":{feedRate:30,depthPerPass:.03,plungeRate:10},Corian:{feedRate:20,depthPerPass:.02,plungeRate:10},"Expanded PVC":{feedRate:40,depthPerPass:.03,plungeRate:10},"Hard Maple":{feedRate:30,depthPerPass:.03,plungeRate:10},MDF:{feedRate:30,depthPerPass:.03,plungeRate:10},"One-Color HDPE":{feedRate:30,depthPerPass:.03,plungeRate:10},Pine:{feedRate:30,depthPerPass:.03,plungeRate:10},"Soft Maple":{feedRate:30,depthPerPass:.03,plungeRate:10},"Two-Color Acrylic":{feedRate:30,depthPerPass:.03,plungeRate:6},"Two-Color HDPE":{feedRate:30,depthPerPass:.03,plungeRate:10},Walnut:{feedRate:30,depthPerPass:.03,plungeRate:10}},30811:{ABS:{feedRate:20,depthPerPass:.02,plungeRate:20},Bamboo:{feedRate:30,depthPerPass:.03,plungeRate:10},"Birch Plywood":{feedRate:30,depthPerPass:.03,plungeRate:10},Bubinga:{feedRate:30,depthPerPass:.03,plungeRate:10},"Cast Acrylic":{feedRate:20,depthPerPass:.02,plungeRate:10},"Cherry Plywood":{feedRate:30,depthPerPass:.03,plungeRate:10},Corian:{feedRate:20,depthPerPass:.02,plungeRate:10},"Expanded PVC":{feedRate:40,depthPerPass:.03,plungeRate:10},"Hard Maple":{feedRate:30,depthPerPass:.03,plungeRate:10},MDF:{feedRate:30,depthPerPass:.03,plungeRate:10},"One-Color HDPE":{feedRate:30,depthPerPass:.03,plungeRate:10},Pine:{feedRate:30,depthPerPass:.03,plungeRate:10},"Soft Maple":{feedRate:30,depthPerPass:.03,plungeRate:10},"Two-Color Acrylic":{feedRate:30,depthPerPass:.03,plungeRate:6},"Two-Color HDPE":{feedRate:30,depthPerPass:.03,plungeRate:10},Walnut:{feedRate:30,depthPerPass:.03,plungeRate:10}}},failSafeSettings:{feedRate:10,depthPerPass:.015,plungeRate:9,spindleSpeed:12e3,untested:!0}};EASEL.service.realCutSettingService.addMachineSettings(e)})()},function(e,t){EASEL.service.realCutSettingService.setDefaultSettings({ABS:{feedRate:24,depthPerPass:.04,plungeRate:9},Aluminum:{depthPerPass:.003,feedRate:5,plungeRate:3},Bamboo:{depthPerPass:.028,feedRate:30,plungeRate:9},"Birch Plywood":{depthPerPass:.028,feedRate:30,plungeRate:9},Bubinga:{depthPerPass:.045,feedRate:28,plungeRate:9},"Cast Acrylic":{depthPerPass:.02,feedRate:25,plungeRate:9},"Cherry Plywood":{feedRate:24,depthPerPass:.03,plungeRate:9},Corian:{feedRate:24,depthPerPass:.01,plungeRate:9},"Expanded PVC":{depthPerPass:.05,feedRate:30,plungeRate:9},"Hard Maple":{depthPerPass:.028,feedRate:28,plungeRate:9},Linoleum:{depthPerPass:.05,feedRate:30,plungeRate:9},MDF:{depthPerPass:.0625,feedRate:40,plungeRate:9},"One-Color HDPE":{depthPerPass:.04,feedRate:15,plungeRate:9},PCB:{depthPerPass:.015,feedRate:10,plungeRate:9},Pine:{depthPerPass:.0625,feedRate:40,plungeRate:9},"Soft Maple":{depthPerPass:.028,feedRate:28,plungeRate:9},"Two-Color Acrylic":{depthPerPass:.02,feedRate:25,plungeRate:9},"Two-Color HDPE":{depthPerPass:.04,feedRate:15,plungeRate:9},Walnut:{depthPerPass:.04,feedRate:32,plungeRate:9}})},function(e,t){EASEL.service.realCutSettingService.setFailSafeSettings({feedRate:10,depthPerPass:.015,plungeRate:9,spindleSpeed:12e3,untested:!0})},function(e,t){(()=>{const e={configuration:{machineType:EASEL.machineType.XCARVE},settings:{30818:{ABS:{feedRate:30,depthPerPass:.015,plungeRate:12},Aluminum:{feedRate:5,depthPerPass:.002,plungeRate:2},Bamboo:{feedRate:30,depthPerPass:.015,plungeRate:12},"Birch Plywood":{feedRate:30,depthPerPass:.015,plungeRate:12},Bubinga:{feedRate:30,depthPerPass:.015,plungeRate:12},"Cast Acrylic":{feedRate:30,depthPerPass:.01,plungeRate:12},"Cherry Plywood":{feedRate:30,depthPerPass:.015,plungeRate:12},Corian:{feedRate:20,depthPerPass:.01,plungeRate:6},"Expanded PVC":{feedRate:40,depthPerPass:.015,plungeRate:12},"Hard Maple":{feedRate:30,depthPerPass:.015,plungeRate:12},Linoleum:{feedRate:30,depthPerPass:.015,plungeRate:12},MDF:{feedRate:30,depthPerPass:.015,plungeRate:12},"One-Color HDPE":{feedRate:30,depthPerPass:.015,plungeRate:12},PCB:{feedRate:30,depthPerPass:.015,plungeRate:10,note:"Depth only needs to be deep enough to get through the cladding."},Pine:{feedRate:30,depthPerPass:.015,plungeRate:12},"Soft Maple":{feedRate:30,depthPerPass:.015,plungeRate:12},"Two-Color Acrylic":{feedRate:30,depthPerPass:.01,plungeRate:10},"Two-Color HDPE":{feedRate:30,depthPerPass:.015,plungeRate:12},Walnut:{feedRate:30,depthPerPass:.015,plungeRate:12}},30817:{ABS:{feedRate:40,depthPerPass:.03,plungeRate:12},Aluminum:{feedRate:10,depthPerPass:.002,plungeRate:5},Bamboo:{feedRate:40,depthPerPass:.03,plungeRate:12},"Birch Plywood":{feedRate:40,depthPerPass:.03,plungeRate:12},Bubinga:{feedRate:40,depthPerPass:.03,plungeRate:12},"Cast Acrylic":{feedRate:40,depthPerPass:.03,plungeRate:12},"Cherry Plywood":{feedRate:40,depthPerPass:.03,plungeRate:12},Corian:{feedRate:30,depthPerPass:.02,plungeRate:8},"Expanded PVC":{feedRate:60,depthPerPass:.03,plungeRate:12},"Hard Maple":{feedRate:40,depthPerPass:.03,plungeRate:12},Linoleum:{feedRate:50,depthPerPass:.03,plungeRate:12},MDF:{feedRate:40,depthPerPass:.03,plungeRate:12},"One-Color HDPE":{feedRate:40,depthPerPass:.03,plungeRate:12},PCB:{feedRate:40,depthPerPass:.02,plungeRate:10},Pine:{feedRate:40,depthPerPass:.03,plungeRate:12},"Soft Maple":{feedRate:40,depthPerPass:.03,plungeRate:12},"Two-Color Acrylic":{feedRate:40,depthPerPass:.03,plungeRate:12},"Two-Color HDPE":{feedRate:40,depthPerPass:.03,plungeRate:12},Walnut:{feedRate:40,depthPerPass:.03,plungeRate:12}},30238:{ABS:{feedRate:40,depthPerPass:.05,plungeRate:12},Bamboo:{feedRate:40,depthPerPass:.05,plungeRate:12,note:"expect tear-out"},"Birch Plywood":{feedRate:40,depthPerPass:.05,plungeRate:12,note:"expect tear-out"},Bubinga:{feedRate:40,depthPerPass:.05,plungeRate:12},"Cast Acrylic":{feedRate:40,depthPerPass:.03,plungeRate:12},"Cherry Plywood":{feedRate:40,depthPerPass:.05,plungeRate:12,note:"expect tear-out"},"Expanded PVC":{feedRate:80,depthPerPass:.06,plungeRate:12},"Hard Maple":{feedRate:40,depthPerPass:.05,plungeRate:12},MDF:{feedRate:40,depthPerPass:.05,plungeRate:12},"One-Color HDPE":{feedRate:40,depthPerPass:.06,plungeRate:12},Pine:{feedRate:40,depthPerPass:.05,plungeRate:12},"Soft Maple":{feedRate:40,depthPerPass:.05,plungeRate:12},"Two-Color Acrylic":{feedRate:40,depthPerPass:.03,plungeRate:12},"Two-Color HDPE":{feedRate:40,depthPerPass:.06,plungeRate:12},Walnut:{feedRate:40,depthPerPass:.05,plungeRate:12}},30237:{ABS:{feedRate:40,depthPerPass:.06,plungeRate:12},Aluminum:{feedRate:10,depthPerPass:.002,plungeRate:3,note:"poor results"},Bamboo:{feedRate:40,depthPerPass:.05,plungeRate:12},"Birch Plywood":{feedRate:40,depthPerPass:.05,plungeRate:12},Bubinga:{feedRate:40,depthPerPass:.05,plungeRate:12},"Cast Acrylic":{feedRate:40,depthPerPass:.04,plungeRate:12},"Cherry Plywood":{feedRate:40,depthPerPass:.05,plungeRate:12},Corian:{feedRate:40,depthPerPass:.03,plungeRate:10},"Expanded PVC":{feedRate:80,depthPerPass:.06,plungeRate:12},"Hard Maple":{feedRate:40,depthPerPass:.06,plungeRate:12},Linoleum:{feedRate:60,depthPerPass:.06,plungeRate:12},MDF:{feedRate:40,depthPerPass:.06,plungeRate:12},"One-Color HDPE":{feedRate:40,depthPerPass:.06,plungeRate:12},PCB:{feedRate:40,depthPerPass:.02,plungeRate:10},Pine:{feedRate:40,depthPerPass:.06,plungeRate:12},"Soft Maple":{feedRate:40,depthPerPass:.06,plungeRate:12},"Two-Color Acrylic":{feedRate:40,depthPerPass:.04,plungeRate:12},"Two-Color HDPE":{feedRate:40,depthPerPass:.06,plungeRate:12},Walnut:{feedRate:40,depthPerPass:.06,plungeRate:12}},30808:{ABS:{feedRate:40,depthPerPass:.04,plungeRate:20},Bamboo:{feedRate:50,depthPerPass:.05,plungeRate:20},"Birch Plywood":{feedRate:50,depthPerPass:.06,plungeRate:20},Bubinga:{feedRate:50,depthPerPass:.05,plungeRate:20},"Cast Acrylic":{feedRate:40,depthPerPass:.04,plungeRate:20},"Cherry Plywood":{feedRate:50,depthPerPass:.06,plungeRate:20},Corian:{feedRate:40,depthPerPass:.04,plungeRate:20},"Expanded PVC":{feedRate:60,depthPerPass:.06,plungeRate:20},"Hard Maple":{feedRate:50,depthPerPass:.05,plungeRate:20},MDF:{feedRate:50,depthPerPass:.05,plungeRate:20},"One-Color HDPE":{feedRate:50,depthPerPass:.06,plungeRate:20},Pine:{feedRate:50,depthPerPass:.05,plungeRate:20},"Soft Maple":{feedRate:50,depthPerPass:.06,plungeRate:20},"Two-Color Acrylic":{feedRate:40,depthPerPass:.04,plungeRate:12},"Two-Color HDPE":{feedRate:50,depthPerPass:.06,plungeRate:20},Walnut:{feedRate:50,depthPerPass:.05,plungeRate:20}},30809:{ABS:{feedRate:40,depthPerPass:.04,plungeRate:20},Bamboo:{feedRate:50,depthPerPass:.05,plungeRate:20},"Birch Plywood":{feedRate:50,depthPerPass:.06,plungeRate:20},Bubinga:{feedRate:50,depthPerPass:.05,plungeRate:20},"Cast Acrylic":{feedRate:40,depthPerPass:.04,plungeRate:20},"Cherry Plywood":{feedRate:50,depthPerPass:.06,plungeRate:20},Corian:{feedRate:40,depthPerPass:.04,plungeRate:20},"Expanded PVC":{feedRate:60,depthPerPass:.06,plungeRate:20},"Hard Maple":{feedRate:50,depthPerPass:.05,plungeRate:20},MDF:{feedRate:50,depthPerPass:.05,plungeRate:20},"One-Color HDPE":{feedRate:50,depthPerPass:.06,plungeRate:20},Pine:{feedRate:50,depthPerPass:.05,plungeRate:20},"Soft Maple":{feedRate:50,depthPerPass:.06,plungeRate:20},"Two-Color Acrylic":{feedRate:40,depthPerPass:.04,plungeRate:12},"Two-Color HDPE":{feedRate:50,depthPerPass:.06,plungeRate:20},Walnut:{feedRate:50,depthPerPass:.05,plungeRate:20}},30811:{ABS:{feedRate:40,depthPerPass:.04,plungeRate:20},Bamboo:{feedRate:50,depthPerPass:.05,plungeRate:20},"Birch Plywood":{feedRate:50,depthPerPass:.06,plungeRate:20},Bubinga:{feedRate:50,depthPerPass:.05,plungeRate:20},"Cast Acrylic":{feedRate:40,depthPerPass:.04,plungeRate:20},"Cherry Plywood":{feedRate:50,depthPerPass:.06,plungeRate:20},Corian:{feedRate:40,depthPerPass:.04,plungeRate:20},"Expanded PVC":{feedRate:60,depthPerPass:.06,plungeRate:20},"Hard Maple":{feedRate:50,depthPerPass:.05,plungeRate:20},MDF:{feedRate:50,depthPerPass:.05,plungeRate:20},"One-Color HDPE":{feedRate:50,depthPerPass:.06,plungeRate:20},Pine:{feedRate:50,depthPerPass:.05,plungeRate:20},"Soft Maple":{feedRate:50,depthPerPass:.06,plungeRate:20},"Two-Color Acrylic":{feedRate:40,depthPerPass:.04,plungeRate:12},"Two-Color HDPE":{feedRate:50,depthPerPass:.06,plungeRate:20},Walnut:{feedRate:50,depthPerPass:.05,plungeRate:20}},30810:{ABS:{feedRate:40,depthPerPass:.04,plungeRate:20},Bamboo:{feedRate:50,depthPerPass:.05,plungeRate:20},"Birch Plywood":{feedRate:50,depthPerPass:.06,plungeRate:20},Bubinga:{feedRate:50,depthPerPass:.05,plungeRate:20},"Cast Acrylic":{feedRate:40,depthPerPass:.04,plungeRate:20},"Cherry Plywood":{feedRate:50,depthPerPass:.06,plungeRate:20},Corian:{feedRate:40,depthPerPass:.04,plungeRate:20},"Expanded PVC":{feedRate:60,depthPerPass:.06,plungeRate:20},"Hard Maple":{feedRate:50,depthPerPass:.05,plungeRate:20},MDF:{feedRate:50,depthPerPass:.05,plungeRate:20},"One-Color HDPE":{feedRate:50,depthPerPass:.06,plungeRate:20},Pine:{feedRate:50,depthPerPass:.05,plungeRate:20},"Soft Maple":{feedRate:50,depthPerPass:.06,plungeRate:20},"Two-Color Acrylic":{feedRate:40,depthPerPass:.04,plungeRate:12},"Two-Color HDPE":{feedRate:50,depthPerPass:.06,plungeRate:20},Walnut:{feedRate:50,depthPerPass:.05,plungeRate:20}}},failSafeSettings:{feedRate:72,depthPerPass:.032,plungeRate:24,spindleSpeed:12e3,untested:!0}};EASEL.service.realCutSettingService.addMachineSettings(e)})()},function(e,t){EASEL.service.realCutSettingService.addMachineSettings({configuration:{thirdPartyMake:"YoraHome",thirdPartyModel:"Yora CNC Carving Machine 3018-Pro"},manufacturerOverrideSettings:{feedRate:5.90551,depthPerPass:.00787402,plungeRate:3.93701,spindleSpeed:1e4,untested:!0}}),EASEL.service.realCutSettingService.addMachineSettings({configuration:{thirdPartyMake:"YoraHome",thirdPartyModel:"YoraHome Mandrill CNC Router 3036"},manufacturerOverrideSettings:{feedRate:30,depthPerPass:.05,plungeRate:9,spindleSpeed:1e4,untested:!0}}),EASEL.service.realCutSettingService.addMachineSettings({configuration:{thirdPartyMake:"YoraHome",thirdPartyModel:"Yora SilverBack Benchtop CNC 6060"},manufacturerOverrideSettings:{feedRate:30,depthPerPass:.028,plungeRate:9,spindleSpeed:1e4,untested:!0}})},function(e,t){(()=>{const e={configuration:{machineType:EASEL.machineType.XCARVE_PRO},settings:{26009:{ABS:{feedRate:216,depthPerPass:.25,plungeRate:65,spindleSpeed:18e3},"Expanded PVC":{feedRate:216,depthPerPass:.25,plungeRate:65,spindleSpeed:18e3},"One-Color HDPE":{feedRate:216,depthPerPass:.25,plungeRate:65,spindleSpeed:18e3},"Two-Color HDPE":{feedRate:216,depthPerPass:.25,plungeRate:65,spindleSpeed:18e3},"Cast Acrylic":{feedRate:216,depthPerPass:.25,plungeRate:65,spindleSpeed:18e3},Corian:{feedRate:216,depthPerPass:.25,plungeRate:65,spindleSpeed:18e3},"Two-Color Acrylic":{feedRate:216,depthPerPass:.25,plungeRate:65,spindleSpeed:18e3},Aluminum:{feedRate:72,depthPerPass:.0625,plungeRate:22,spindleSpeed:12e3}},30856:{Bamboo:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Bubinga:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},"Hard Maple":{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},"Soft Maple":{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Walnut:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Pine:{feedRate:352,depthPerPass:.25,plungeRate:106,spindleSpeed:22e3},"Birch Plywood":{feedRate:128,depthPerPass:.25,plungeRate:38,spindleSpeed:16e3},"Cherry Plywood":{feedRate:128,depthPerPass:.25,plungeRate:38,spindleSpeed:16e3},MDF:{feedRate:168,depthPerPass:.25,plungeRate:50,spindleSpeed:12e3}},26040:{Bamboo:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Bubinga:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},"Hard Maple":{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},"Soft Maple":{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Walnut:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Pine:{feedRate:352,depthPerPass:.25,plungeRate:106,spindleSpeed:22e3},"Birch Plywood":{feedRate:128,depthPerPass:.25,plungeRate:38,spindleSpeed:16e3},"Cherry Plywood":{feedRate:128,depthPerPass:.25,plungeRate:38,spindleSpeed:16e3},MDF:{feedRate:168,depthPerPass:.25,plungeRate:50,spindleSpeed:12e3}},26013:{Bamboo:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Bubinga:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},"Hard Maple":{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},"Soft Maple":{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Walnut:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Pine:{feedRate:352,depthPerPass:.25,plungeRate:106,spindleSpeed:22e3},"Birch Plywood":{feedRate:128,depthPerPass:.25,plungeRate:38,spindleSpeed:16e3},"Cherry Plywood":{feedRate:128,depthPerPass:.25,plungeRate:38,spindleSpeed:16e3},MDF:{feedRate:168,depthPerPass:.25,plungeRate:50,spindleSpeed:12e3}},26011:{Bamboo:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Bubinga:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},"Hard Maple":{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},"Soft Maple":{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Walnut:{feedRate:160,depthPerPass:.25,plungeRate:48,spindleSpeed:16e3},Pine:{feedRate:352,depthPerPass:.25,plungeRate:106,spindleSpeed:22e3},"Birch Plywood":{feedRate:128,depthPerPass:.25,plungeRate:38,spindleSpeed:16e3},"Cherry Plywood":{feedRate:128,depthPerPass:.25,plungeRate:38,spindleSpeed:16e3},MDF:{feedRate:168,depthPerPass:.25,plungeRate:50,spindleSpeed:12e3}},26005:{ABS:{feedRate:140,depthPerPass:.25,plungeRate:42,spindleSpeed:1e4},"Expanded PVC":{feedRate:140,depthPerPass:.25,plungeRate:42,spindleSpeed:1e4},"One-Color HDPE":{feedRate:140,depthPerPass:.25,plungeRate:42,spindleSpeed:1e4},"Two-Color HDPE":{feedRate:140,depthPerPass:.25,plungeRate:42,spindleSpeed:1e4}},26006:{Bamboo:{feedRate:84,depthPerPass:.25,plungeRate:25,spindleSpeed:6e3},Bubinga:{feedRate:84,depthPerPass:.25,plungeRate:25,spindleSpeed:6e3},"Hard Maple":{feedRate:84,depthPerPass:.25,plungeRate:25,spindleSpeed:6e3},"Soft Maple":{feedRate:84,depthPerPass:.25,plungeRate:25,spindleSpeed:6e3},Walnut:{feedRate:84,depthPerPass:.25,plungeRate:25,spindleSpeed:6e3},Pine:{feedRate:96,depthPerPass:.25,plungeRate:29,spindleSpeed:6e3}},26e3:{"Birch Plywood":{feedRate:70,depthPerPass:.25,plungeRate:21,spindleSpeed:1e4},"Cherry Plywood":{feedRate:70,depthPerPass:.25,plungeRate:21,spindleSpeed:1e4}},30238:{ABS:{feedRate:120,depthPerPass:.125,plungeRate:36,spindleSpeed:24e3},"Expanded PVC":{feedRate:120,depthPerPass:.125,plungeRate:36,spindleSpeed:24e3},"One-Color HDPE":{feedRate:120,depthPerPass:.125,plungeRate:36,spindleSpeed:24e3},"Two-Color HDPE":{feedRate:120,depthPerPass:.125,plungeRate:36,spindleSpeed:24e3},"Cast Acrylic":{feedRate:120,depthPerPass:.125,plungeRate:36,spindleSpeed:24e3},Corian:{feedRate:120,depthPerPass:.125,plungeRate:36,spindleSpeed:24e3},"Two-Color Acrylic":{feedRate:120,depthPerPass:.125,plungeRate:36,spindleSpeed:24e3}},30815:{Bamboo:{feedRate:162,depthPerPass:.125,plungeRate:49,spindleSpeed:18e3},Bubinga:{feedRate:162,depthPerPass:.125,plungeRate:49,spindleSpeed:18e3},"Hard Maple":{feedRate:162,depthPerPass:.125,plungeRate:49,spindleSpeed:18e3},"Soft Maple":{feedRate:162,depthPerPass:.125,plungeRate:49,spindleSpeed:18e3},Walnut:{feedRate:162,depthPerPass:.125,plungeRate:49,spindleSpeed:18e3},Pine:{feedRate:162,depthPerPass:.125,plungeRate:49,spindleSpeed:18e3},"Birch Plywood":{feedRate:162,depthPerPass:.125,plungeRate:49,spindleSpeed:18e3},"Cherry Plywood":{feedRate:162,depthPerPass:.125,plungeRate:49,spindleSpeed:18e3}},30237:{MDF:{feedRate:220,depthPerPass:.125,plungeRate:66,spindleSpeed:22e3},Bamboo:{feedRate:128,depthPerPass:.125,plungeRate:38,spindleSpeed:16e3},Bubinga:{feedRate:128,depthPerPass:.125,plungeRate:38,spindleSpeed:16e3},"Hard Maple":{feedRate:128,depthPerPass:.125,plungeRate:38,spindleSpeed:16e3},"Soft Maple":{feedRate:128,depthPerPass:.125,plungeRate:38,spindleSpeed:16e3},Walnut:{feedRate:128,depthPerPass:.125,plungeRate:38,spindleSpeed:16e3},"Birch Plywood":{feedRate:128,depthPerPass:.125,plungeRate:38,spindleSpeed:16e3},"Cherry Plywood":{feedRate:128,depthPerPass:.125,plungeRate:38,spindleSpeed:16e3},Pine:{feedRate:176,depthPerPass:.125,plungeRate:53,spindleSpeed:22e3}},30809:{ABS:{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},"Expanded PVC":{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},"One-Color HDPE":{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},"Two-Color HDPE":{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},Bamboo:{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},Bubinga:{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},"Hard Maple":{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},"Soft Maple":{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},Walnut:{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},Pine:{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},"Birch Plywood":{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},"Cherry Plywood":{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},"Cast Acrylic":{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},Corian:{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},"Two-Color Acrylic":{feedRate:72,depthPerPass:.1875,plungeRate:22,spindleSpeed:18e3},MDF:{feedRate:162,depthPerPass:.1875,plungeRate:49,spindleSpeed:18e3}},30808:{ABS:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Expanded PVC":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"One-Color HDPE":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Two-Color HDPE":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},Bamboo:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},Bubinga:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Hard Maple":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Soft Maple":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},Walnut:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},Pine:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Birch Plywood":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Cherry Plywood":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Cast Acrylic":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},Corian:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Two-Color Acrylic":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},MDF:{feedRate:172.8,depthPerPass:.1875,plungeRate:52,spindleSpeed:18e3}},30854:{ABS:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Expanded PVC":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"One-Color HDPE":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Two-Color HDPE":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},Bamboo:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},Bubinga:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Hard Maple":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Soft Maple":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},Walnut:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},Pine:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Birch Plywood":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Cherry Plywood":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Cast Acrylic":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},Corian:{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},"Two-Color Acrylic":{feedRate:79.2,depthPerPass:.1875,plungeRate:24,spindleSpeed:18e3},MDF:{feedRate:172.8,depthPerPass:.1875,plungeRate:52,spindleSpeed:18e3}},30814:{Bamboo:{feedRate:80,depthPerPass:.0625,plungeRate:24,spindleSpeed:2e4},Bubinga:{feedRate:80,depthPerPass:.0625,plungeRate:24,spindleSpeed:2e4},"Hard Maple":{feedRate:80,depthPerPass:.0625,plungeRate:24,spindleSpeed:2e4},"Soft Maple":{feedRate:80,depthPerPass:.0625,plungeRate:24,spindleSpeed:2e4},Walnut:{feedRate:80,depthPerPass:.0625,plungeRate:24,spindleSpeed:2e4},Pine:{feedRate:144,depthPerPass:.0625,plungeRate:43,spindleSpeed:24e3},"Birch Plywood":{feedRate:144,depthPerPass:.0625,plungeRate:43,spindleSpeed:24e3},"Cherry Plywood":{feedRate:144,depthPerPass:.0625,plungeRate:43,spindleSpeed:24e3},MDF:{feedRate:144,depthPerPass:.0625,plungeRate:43,spindleSpeed:24e3}}},failSafeSettings:{feedRate:140,depthPerPass:.125,plungeRate:36,spindleSpeed:12e3,untested:!0}};EASEL.service.realCutSettingService.addMachineSettings(e)})()},function(e,t){(()=>{const e={configuration:{machineType:EASEL.machineType.XCARVE,leadScrewType:"direct-drive",belts:"3gt"},settings:{26009:{ABS:{feedRate:96,depthPerPass:.125,plungeRate:29},"Expanded PVC":{feedRate:96,depthPerPass:.125,plungeRate:29},"One-Color HDPE":{feedRate:96,depthPerPass:.125,plungeRate:29},"Two-Color HDPE":{feedRate:96,depthPerPass:.125,plungeRate:29},"Cast Acrylic":{feedRate:96,depthPerPass:.06,plungeRate:29},Corian:{feedRate:96,depthPerPass:.06,plungeRate:29},"Two-Color Acrylic":{feedRate:96,depthPerPass:.06,plungeRate:29}},30856:{Bamboo:{feedRate:96,depthPerPass:.125,plungeRate:29},Bubinga:{feedRate:96,depthPerPass:.125,plungeRate:29},"Hard Maple":{feedRate:96,depthPerPass:.125,plungeRate:29},"Soft Maple":{feedRate:96,depthPerPass:.125,plungeRate:29},Walnut:{feedRate:96,depthPerPass:.125,plungeRate:29},Pine:{feedRate:96,depthPerPass:.125,plungeRate:29},"Birch Plywood":{feedRate:96,depthPerPass:.125,plungeRate:29},"Cherry Plywood":{feedRate:96,depthPerPass:.125,plungeRate:29},MDF:{feedRate:96,depthPerPass:.125,plungeRate:29}},26040:{Bamboo:{feedRate:96,depthPerPass:.125,plungeRate:29},Bubinga:{feedRate:96,depthPerPass:.125,plungeRate:29},"Hard Maple":{feedRate:96,depthPerPass:.125,plungeRate:29},"Soft Maple":{feedRate:96,depthPerPass:.125,plungeRate:29},Walnut:{feedRate:96,depthPerPass:.125,plungeRate:29},Pine:{feedRate:96,depthPerPass:.125,plungeRate:29},"Birch Plywood":{feedRate:96,depthPerPass:.125,plungeRate:29},"Cherry Plywood":{feedRate:96,depthPerPass:.125,plungeRate:29},MDF:{feedRate:96,depthPerPass:.125,plungeRate:29}},26013:{Bamboo:{feedRate:96,depthPerPass:.125,plungeRate:29},Bubinga:{feedRate:96,depthPerPass:.125,plungeRate:29},"Hard Maple":{feedRate:96,depthPerPass:.125,plungeRate:29},"Soft Maple":{feedRate:96,depthPerPass:.125,plungeRate:29},Walnut:{feedRate:96,depthPerPass:.125,plungeRate:29},Pine:{feedRate:96,depthPerPass:.125,plungeRate:29},"Birch Plywood":{feedRate:96,depthPerPass:.125,plungeRate:29},"Cherry Plywood":{feedRate:96,depthPerPass:.125,plungeRate:29},MDF:{feedRate:96,depthPerPass:.125,plungeRate:29}},26011:{Bamboo:{feedRate:96,depthPerPass:.125,plungeRate:29},Bubinga:{feedRate:96,depthPerPass:.125,plungeRate:29},"Hard Maple":{feedRate:96,depthPerPass:.125,plungeRate:29},"Soft Maple":{feedRate:96,depthPerPass:.125,plungeRate:29},Walnut:{feedRate:96,depthPerPass:.125,plungeRate:29},Pine:{feedRate:96,depthPerPass:.125,plungeRate:29},"Birch Plywood":{feedRate:96,depthPerPass:.125,plungeRate:29},"Cherry Plywood":{feedRate:96,depthPerPass:.125,plungeRate:29},MDF:{feedRate:96,depthPerPass:.125,plungeRate:29}},30238:{ABS:{feedRate:120,depthPerPass:.0625,plungeRate:36},"Expanded PVC":{feedRate:120,depthPerPass:.0625,plungeRate:36},"One-Color HDPE":{feedRate:120,depthPerPass:.0625,plungeRate:36},"Two-Color HDPE":{feedRate:120,depthPerPass:.0625,plungeRate:36},"Cast Acrylic":{feedRate:80,depthPerPass:.0313,plungeRate:20},Corian:{feedRate:80,depthPerPass:.0313,plungeRate:20},"Two-Color Acrylic":{feedRate:80,depthPerPass:.0313,plungeRate:20}},30815:{Bamboo:{feedRate:120,depthPerPass:.0625,plungeRate:36},Bubinga:{feedRate:120,depthPerPass:.0625,plungeRate:36},"Hard Maple":{feedRate:120,depthPerPass:.0625,plungeRate:36},"Soft Maple":{feedRate:120,depthPerPass:.0625,plungeRate:36},Walnut:{feedRate:120,depthPerPass:.0625,plungeRate:36},Pine:{feedRate:120,depthPerPass:.0625,plungeRate:36},"Birch Plywood":{feedRate:120,depthPerPass:.0625,plungeRate:36},"Cherry Plywood":{feedRate:120,depthPerPass:.0625,plungeRate:36}},30237:{MDF:{feedRate:120,depthPerPass:.0625,plungeRate:36},Bamboo:{feedRate:120,depthPerPass:.0625,plungeRate:36},Bubinga:{feedRate:120,depthPerPass:.0625,plungeRate:36},"Hard Maple":{feedRate:120,depthPerPass:.0625,plungeRate:36},"Soft Maple":{feedRate:120,depthPerPass:.0625,plungeRate:36},Walnut:{feedRate:120,depthPerPass:.0625,plungeRate:36},"Birch Plywood":{feedRate:120,depthPerPass:.0625,plungeRate:36},"Cherry Plywood":{feedRate:120,depthPerPass:.0625,plungeRate:36},Pine:{feedRate:120,depthPerPass:.0625,plungeRate:36}},30809:{ABS:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Expanded PVC":{feedRate:96,depthPerPass:.0625,plungeRate:29},"One-Color HDPE":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Two-Color HDPE":{feedRate:96,depthPerPass:.0625,plungeRate:29},Bamboo:{feedRate:96,depthPerPass:.0625,plungeRate:29},Bubinga:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Hard Maple":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Soft Maple":{feedRate:96,depthPerPass:.0625,plungeRate:29},Walnut:{feedRate:96,depthPerPass:.0625,plungeRate:29},Pine:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Birch Plywood":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Cherry Plywood":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Cast Acrylic":{feedRate:96,depthPerPass:.0625,plungeRate:29},Corian:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Two-Color Acrylic":{feedRate:96,depthPerPass:.0625,plungeRate:29},MDF:{feedRate:96,depthPerPass:.0625,plungeRate:29}},30808:{ABS:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Expanded PVC":{feedRate:96,depthPerPass:.0625,plungeRate:29},"One-Color HDPE":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Two-Color HDPE":{feedRate:96,depthPerPass:.0625,plungeRate:29},Bamboo:{feedRate:96,depthPerPass:.0625,plungeRate:29},Bubinga:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Hard Maple":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Soft Maple":{feedRate:96,depthPerPass:.0625,plungeRate:29},Walnut:{feedRate:96,depthPerPass:.0625,plungeRate:29},Pine:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Birch Plywood":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Cherry Plywood":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Cast Acrylic":{feedRate:96,depthPerPass:.0625,plungeRate:29},Corian:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Two-Color Acrylic":{feedRate:96,depthPerPass:.0625,plungeRate:29},MDF:{feedRate:96,depthPerPass:.0625,plungeRate:29}},30854:{ABS:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Expanded PVC":{feedRate:96,depthPerPass:.0625,plungeRate:29},"One-Color HDPE":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Two-Color HDPE":{feedRate:96,depthPerPass:.0625,plungeRate:29},Bamboo:{feedRate:96,depthPerPass:.0625,plungeRate:29},Bubinga:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Hard Maple":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Soft Maple":{feedRate:96,depthPerPass:.0625,plungeRate:29},Walnut:{feedRate:96,depthPerPass:.0625,plungeRate:29},Pine:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Birch Plywood":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Cherry Plywood":{feedRate:96,depthPerPass:.0625,plungeRate:29},"Cast Acrylic":{feedRate:96,depthPerPass:.0625,plungeRate:29},Corian:{feedRate:96,depthPerPass:.0625,plungeRate:29},"Two-Color Acrylic":{feedRate:96,depthPerPass:.0625,plungeRate:29},MDF:{feedRate:96,depthPerPass:.0625,plungeRate:29}},30423:{ABS:{feedRate:96,depthPerPass:.0313,plungeRate:29},"Expanded PVC":{feedRate:96,depthPerPass:.0313,plungeRate:29},"One-Color HDPE":{feedRate:96,depthPerPass:.0313,plungeRate:29},"Two-Color HDPE":{feedRate:96,depthPerPass:.0313,plungeRate:29},Bamboo:{feedRate:96,depthPerPass:.0313,plungeRate:29},Bubinga:{feedRate:96,depthPerPass:.0313,plungeRate:29},"Hard Maple":{feedRate:96,depthPerPass:.0313,plungeRate:29},"Soft Maple":{feedRate:96,depthPerPass:.0313,plungeRate:29},Walnut:{feedRate:96,depthPerPass:.0313,plungeRate:29},Pine:{feedRate:96,depthPerPass:.0313,plungeRate:29},"Birch Plywood":{feedRate:96,depthPerPass:.0313,plungeRate:29},"Cherry Plywood":{feedRate:96,depthPerPass:.0313,plungeRate:29},"Cast Acrylic":{feedRate:96,depthPerPass:.0313,plungeRate:29},Corian:{feedRate:96,depthPerPass:.0313,plungeRate:29},"Two-Color Acrylic":{feedRate:96,depthPerPass:.0313,plungeRate:29},MDF:{feedRate:96,depthPerPass:.0313,plungeRate:29}},30818:{ABS:{feedRate:48,depthPerPass:.0156,plungeRate:14},"Expanded PVC":{feedRate:48,depthPerPass:.0156,plungeRate:14},"One-Color HDPE":{feedRate:48,depthPerPass:.0156,plungeRate:14},"Two-Color HDPE":{feedRate:48,depthPerPass:.0156,plungeRate:14},Bamboo:{feedRate:48,depthPerPass:.0156,plungeRate:14},Bubinga:{feedRate:48,depthPerPass:.0156,plungeRate:14},"Hard Maple":{feedRate:48,depthPerPass:.0156,plungeRate:14},"Soft Maple":{feedRate:48,depthPerPass:.0156,plungeRate:14},Walnut:{feedRate:48,depthPerPass:.0156,plungeRate:14},Pine:{feedRate:48,depthPerPass:.0156,plungeRate:14},"Birch Plywood":{feedRate:48,depthPerPass:.0156,plungeRate:14},"Cherry Plywood":{feedRate:48,depthPerPass:.0156,plungeRate:14},"Cast Acrylic":{feedRate:48,depthPerPass:.0156,plungeRate:14},Corian:{feedRate:48,depthPerPass:.0156,plungeRate:14},"Two-Color Acrylic":{feedRate:48,depthPerPass:.0156,plungeRate:14},MDF:{feedRate:48,depthPerPass:.0156,plungeRate:14}}},failSafeSettings:{feedRate:72,depthPerPass:.032,plungeRate:24,spindleSpeed:12e3,untested:!0}};EASEL.service.realCutSettingService.addMachineSettings(e)})()},function(e,t){window.DISABLE_3D=document.body.clientWidth<700||!(()=>{try{return window.WebGLRenderingContext&&document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}})()},function(e,t){EASEL.IllustratorConfigs={ppi:72}},function(e,t){EASEL.keyboardController=function(){let e=null;const t=function(){const e={},t=function(e,t,n,a){return null==n&&(n=!1),null==a&&(a=!1),`${e}:${t}:${n}:${a}`};return{get:function(n,a,r,o){return e[t(n,a,r,o)]},put:(n,a,r,o,s)=>e[t(n,a,r,o)]=s}}(),n=function(e){if(e.metaKey||e.ctrlKey)return;const t=EASEL.volumeStore.getVolumes(EASEL.editorStore.getSelectedVolumeIds());if(1===t.length&&"text"===t[0].shape.type){const t=String.fromCharCode(e.charCode);if(t){EASEL.fabricVolumeActions.setText(EASEL.canvas,t);const e=EASEL.canvas.getActiveObject();e.enterEditing(),e.setSelectionStart(1),e.setSelectionEnd(1)}}return e},a=e=>["input","textarea"].includes(e.target.tagName.toLowerCase());return{use:t=>e=t,handle:function(n){let r;if(a(n))return n;if(n.altKey)return n;const o=n.which,s=n.metaKey||n.ctrlKey,i=n.shiftKey;return r=t.get(e,o,s,i),r&&(r(n),n.preventDefault()),n},handleChar:function(e){return a(e)||n(e),e},register:function(e){const{keyboard:n,command:a,key:r,meta:o,shift:s}=e;return t.put(n,r,o,s,a)}}}()},function(e,t){EASEL.mainMenu={commands:{},register:(e,t)=>EASEL.mainMenu.commands[e]=t,trigger:function(e){const[t,n]=Array.from(e.split(":"));null!=EASEL.mainMenu.commands[t]&&EASEL.mainMenu.commands[t](n)}},$(document).on("click",".action-menu a[data-action]",(function(e){"#"===$(this).attr("href")&&e.preventDefault(),EASEL.mainMenu.trigger($(this).data("action"))}))},function(e,t,n){const a=n(97);!function(){const e=e=>e.load({serial:!1}),t=(e,t)=>EASEL.loader(e).register(e,t),n=function(e){const n=EASEL.splashScreen(),{userName:a,showIntro:r,showCarveyIntro:o,showPlaningProjectParams:s,showUserModal:i}=e;return t("launch-app",(function(e){return $(window).on("beforeunload",(function(){if(EASEL.projectAutosaver.isDirty())return"You have unsaved changes."})),setTimeout((function(){return n.finished(),r?EASEL.interfaceWalkthrough.start(a):o?EASEL.carveyTour.start(a):s.show?EASEL.planingProjectWalkthrough.start(s):i&&(EASEL.stats.trackEvent(EASEL.events.showedAccountModal,{proRequired:!1}),EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalAccountTab())),e()}),100)}))},r=function(e){return EASEL.alert("An error occurred loading Easel",e.message||e),window.onerror(e.toString(),"app initialization",0,0,e)};EASEL.init=function(o){const{newUser:s,showIntro:i,showCarveyIntro:l,showPlaningProjectParams:c,showUserModal:p,userEmail:u}=o,d=o.currentUserName,h=new Promise((function(e){if(null!=EASEL.projectLinkToken)return e(EASEL.projectLinkToken);var t=function(n){EASEL.projectLinkToken=n,e(n),EASEL.flux.events.removeListener("project-token-set",t)};EASEL.flux.events.addListener("project-token-set",t)})),E=n({newUser:s,userName:d,showIntro:i,showCarveyIntro:l,showPlaningProjectParams:c,showUserModal:p}),m=function(e){const n=[EASEL.assets.javascripts.vendor];return e&&n.push(EASEL.assets.javascripts.tour),t("project-components-loader",((e,t)=>a.loadScripts(...n).then(e,t)))}(i),S=function(e){const n=e.then(EASEL.projectAPI.get);return t("project-data-loader",((e,t)=>n.then(EASEL.currentProject.loadData).then(EASEL.externalFontLoader.loadFontsInSavedProjectData).then(EASEL.projectManager.load).then(EASEL.projectAutosaver.setupAutosave).then(e).catch(t)))}(h),g=EASEL.loader.group("project-list"),f=EASEL.loader.group("init"),A=EASEL.loader.group("post-init"),b=EASEL.loader.group("post-launch");return EASEL.store.dispatch(EASEL.userActionCreators.setUserId(o.userId)),EASEL.store.dispatch(EASEL.userActionCreators.setProfileData({name:d})),e(g).then((()=>function(e){const t=document.getElementById("easel-mount-pre-project-point");ReactDOM.render(React.createElement(EASEL.component.preProjectWrapper,{email:e}),t)}(u))).then((()=>e(m))).then((()=>e(f))).then((()=>e(A))).then((()=>h)).then((()=>e(S))).then((()=>function(){const e=document.getElementById("easel-mount-point");ReactDOM.render(React.createElement(EASEL.component.wrapper),e)}())).then((()=>e(E))).then((()=>e(b))).catch(r)}}()},function(e,t,n){const a=n(81);EASEL.jobTracker=function(){const e={};let t=null;const n=e=>new Date(e).toString();return e.start=function({projectName:e,gcode:r,volumes:o,material:s,settings:i,bitData:l,rampingAngle:c,passType:p}){t=Date.now();const u=EASEL.store.getState();EASEL.stats.trackEventOnServer(EASEL.events.startedJob,{Name:e}),EASEL.stats.trackEvent(EASEL.events.startedJob,{Name:e,"Lines of g-code":r.split("\n").length,"Shapes on canvas":o.length,"Drill holes":o.filter((e=>"drill"===e.cut.type)).length,Material:null!=s?s.name:"Unknown","Material source":null!=s?s.source:"Unknown",Bit:EASEL.bit(l)?EASEL.bit(l).description():"Unknown","Bit source":null!=l?l.source:"Unknown","Machine Settings":i.join(", "),"Easel Pro Content":EASEL.proSelectors.getInUseCarvingProFeatures(u).map((e=>e.label)),"Easel Pro Access Type":EASEL.userSelectors.easelProAccessType(t,u),Tiling:EASEL.tileSelectors.isTileSelected(u),"Ramping Angle (Deg)":null!=c?parseInt(180*c/Math.PI).toFixed(0):void 0,"Pass Type":p}),a.submit({gcode:r,startTime:n(t),firmwareVersion:EASEL.machineStateStore.getFirmwareVersion(),serialNumber:EASEL.machineStateStore.getSerialNumber()})},e.finish=function(){if(null!=t){const e=Date.now(),r=(e-t)/1e3/60;EASEL.stats.trackEventOnServer(EASEL.events.completedJob),EASEL.stats.trackEvent(EASEL.events.completedJob,{"Duration (minutes)":r,"Machine Settings":EASEL.machineStateStore.getSettings(),"Max Spindle Current":EASEL.machineStateStore.getMaxSpindleCurrent()}),t=null,a.update({end_time:n(e)})}},e}()},function(e,t,n){n(1084),n(1085),n(1086),n(1087),n(1089),n(1090),n(1091),n(1092),n(1093),n(1094),n(1095),n(1096),n(1097),n(1098),n(1099),n(1100),n(1101),n(1102),n(1103),n(1104),n(1106),n(1107),n(1108),n(1109),n(1110),n(1111),n(1112),n(1113),n(1114),n(1115),n(1117)},function(e,t){EASEL.clipboard=function({read:e,write:t}){const n=[];let a=0,r=0,o=null;const s=function(e){a=1,e=EASEL.merge(e);for(let t of e)delete t.id;r=Date.now(),o=EASEL.workpieceStore.getActiveID(),t({volumes:e,id:r})},i=function(){const e=EASEL.editorStore.getSelectedVolumeIds();if(e.length>0){const t=EASEL.volumeStore.getVolumes(e);s(t)}n.forEach((e=>e()))};return{cut:function(){i(),EASEL.volumeActions.remove(EASEL.editorStore.getSelectedVolumeIds())},copy:i,onCopy:e=>n.push(e),paste:function(){const t=e();if(!t)return;const{volumes:n,id:i}=t;r===i&&o===EASEL.workpieceStore.getActiveID()||(a=0,r=i,o=EASEL.workpieceStore.getActiveID());const l=EASEL.volumeHelper.boundingBoxLeft(n),c=(EASEL.volumeHelper.boundingBoxTop(n),EASEL.volumeHelper.boundingBoxRight(n)),p=(EASEL.volumeHelper.boundingBoxBottom(n),{x:a*(c-l||1),y:0});a++;const u=n.map((e=>{const t=EASEL.merge(e);return t.id=EASEL.volumeStore.newId(),t.shape=EASEL.shapeUpdater.setLocked(t.shape,!1),t.cut.depth=Math.min(e.cut.depth,EASEL.materialStore.getCurrentDepth()),t})),d=u.map((e=>e.id));EASEL.undoActions.beginGroup(),EASEL.volumeActions.add(...u),EASEL.volumeActions.translate(d,p.x,p.y);const h=EASEL.volumeStore.getVolumes(d),E={x:EASEL.volumeHelper.boundingBoxHorizontalCenter(h),y:EASEL.volumeHelper.boundingBoxVerticalCenter(h)},m=EASEL.store.getState();if(EASEL.viewportHelper.pointIsNotInView(m,E)){const e=EASEL.viewportHelper.getOffsetToCenter(m,E);EASEL.volumeActions.translate(d,e.x,e.y),s(EASEL.volumeStore.getVolumes(d))}EASEL.undoActions.endGroup(),EASEL.editorActions.select(...d)},hasContents:()=>null!=e()}}},function(e,t){!function(){const e=function(){EASEL.stats.trackEvent(EASEL.events.layeringTool,{action:"Move forward"}),EASEL.volumeActions.moveForward(EASEL.editorStore.getSelectedVolumeIds())};EASEL.mainMenu.register("forward",e),EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.rightSquareBracket,meta:!0});const t=function(){EASEL.stats.trackEvent(EASEL.events.layeringTool,{action:"Bring to front"}),EASEL.volumeActions.bringToFront(EASEL.editorStore.getSelectedVolumeIds())};EASEL.mainMenu.register("bring-to-front",t),EASEL.keyboardController.register({keyboard:"default",command:t,key:EASEL.keys.quote,meta:!0})}()},function(e,t){EASEL.mainMenu.register("center-to-material",(function(){const e=EASEL.materialStore.getActiveMaterial().dimensions,t=e.x/2,n=e.y/2,a=EASEL.editorStore.getSelectedVolumeIds(),r=EASEL.volumeStore.getVolumes(a),o=EASEL.volumeHelper.boundingBoxHorizontalCenter(r),s=EASEL.volumeHelper.boundingBoxVerticalCenter(r);EASEL.volumeActions.translate(a,t-o,n-s)}))},function(e,t,n){const a=n(1088);!function(){const e=function(){return EASEL.stats.trackEventOnce("Combine Tool"),a.combine()};EASEL.mainMenu.register("combine",e),EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.j,meta:!0})}()},function(e,t){const n={combine(){const e=EASEL.editorStore.getSelectedVolumeIds(),t=EASEL.volumeHelper.combinableVolumes(EASEL.volumeStore.getVolumes(e));if(t.length<=1)return;let n=0,a=!1,r=EASEL.paths(),o=[];for(const{cut:s,shape:i}of t){const e=EASEL.polylineGenerator.process(i).simplify();0===s.depth?r=r.exclusion(e):(r=r.union(e),s.depth>n&&(n=s.depth)),"fill"===s.type&&(a=!0),o=o.concat(EASEL.shapeUtils.proFeatures(i))}return r.toPromise().then((function(e){if(0===e.length)return;const r=Array.from(e).map((e=>e.close().points)),s=EASEL.shapeBuilder.pathPointsToShape(r);s.combinedProFeatures=o;const i={shape:s,cut:{type:a?"fill":"outline",depth:n}};EASEL.undoActions.beginGroup("Combine"),EASEL.volumeActions.remove(t.map((e=>e.id))),EASEL.volumeActions.add(i),EASEL.editorActions.select(i.id),EASEL.undoActions.endGroup()}))}};e.exports=n},function(e,t){EASEL.mainMenu.register("copy-changes",EASEL.projectActions.copyShared),EASEL.mainMenu.register("duplicate",EASEL.projectActions.duplicate)},function(e,t){!function(){const e=function(){if(null!=EASEL.editorStore.getEditingVolumeId())EASEL.editorActions.cancelEditing();else{const e=EASEL.editorStore.getSelectedVolumeIds();e.length>0&&EASEL.editorActions.startEditing(e[0])}};EASEL.mainMenu.register("edit-volume",e),EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.e})}()},function(e,t){EASEL.keyboardController.register({keyboard:"default",command:function(){if(null!=EASEL.editorStore.getEditingVolumeId())EASEL.editorActions.cancelEditing();else{const e=EASEL.editorStore.getNewPathPoints();null!=e&&EASEL.editorActions.submitNewPathPoints(e)}},key:EASEL.keys.esc})},function(e,t){!function(){const e=function(e,t,n){const a=EASEL.editorStore.getSelectedVolumeIds(),r=EASEL.volumeStore.getVolumes(a),o=EASEL.volumeHelper.boundingBoxHorizontalCenter(r),s=EASEL.volumeHelper.boundingBoxVerticalCenter(r);EASEL.volumeActions.flip(a,e,t,o,s,`Flip ${n}`)};EASEL.mainMenu.register("flip-horizontal",(()=>e(!0,!1,"Horizontal"))),EASEL.mainMenu.register("flip-vertical",(()=>e(!1,!0,"Vertical")))}()},function(e,t,n){const a=n(344);!function(){const e=(e,t)=>EASEL.gcodeValidationLoader.validate({gcodeString:e,keepInRects:EASEL.machineSettingsSelectors.getKeepInRects(EASEL.store.getState()),keepOutRects:EASEL.machineSettingsSelectors.getKeepOutRects(EASEL.store.getState()),checkSyntax:!1}).catch(t),t=function(){return EASEL.previewSelectors.designStatus(EASEL.store.getState())===EASEL.previewConstants.statuses.READY?Promise.resolve():(a.initialize(),a.setTotal(1),a.setText("Generating detailed preview"),EASEL.previewScheduler.generateDetailedPreview(1/0,a.setValue).then(a.close))};let n=!1;const r=function(){if(0!==EASEL.volumeStore.getVolumes().length){if(!n)return n=!0,t().then((function(){return EASEL.gcodeForVolumes.process({style:"all",done(t,a){let r,o;if(n=!1,null!=t.error||null!=a&&a.error)EASEL.errorReporter.submitNonUserReportedError({userNotes:"Please forward this to devhelp for review",error:{sender_note:t.error||a.error},gcode:t.gcode||a.gcode}),({title:o,message:r}=EASEL.stringConstants.alerts.invalidDepthError),EASEL.alert(o,r);else if(null!=t.gcode||null!=a&&null!=a.gcode){if(EASEL.machineSettingsSelectors.isCarvey(EASEL.store.getState())){const n=function(){let e=!1;return function(t){e||(e=!0,EASEL.alert(t.title,t.message))}}();null!=t.gcode&&e(t.gcode,n),null!=a&&a.gcode&&e(a.gcode,n)}}else{const e=EASEL.stringConstants.alerts.nothingCarvable;EASEL.alert(e.title,e.message)}if(EASEL.hasAccessGrant("pair_programming_exercise")){const e=EASEL.bit(t.jobSettings.bit),a=EASEL.simulator.process(EASEL.cutAreaGenerator({paths:t.paths,bit:e})),r=EASEL.materialStore.getActiveMaterial().dimensions,o=new THREE.Geometry;for(const t of a)o.vertices.push(new THREE.Vector3(t.x,t.y,t.z+r.z+.005));const s=EASEL.previewElement([new THREE.Points(o,new THREE.PointsMaterial({size:.05,color:16711680}))]);EASEL.designPreview.setAccurateElement(s),s.release(),n=!1}},error(e){n=!1,EASEL.alert("An error occurred generating toolpaths",e.message),window.onerror(e)}})}))}else{const e=EASEL.stringConstants.alerts.noObjectsToCarve;EASEL.alert(e.title,e.message)}};EASEL.flux.events.addListener("generate-design",t),EASEL.flux.events.addListener("generate-toolpaths",r),EASEL.keyboardController.register({keyboard:"default",command:r,key:EASEL.keys.p,meta:!0,shift:!0})}()},function(e,t){!function(){const e=(e,t)=>EASEL.flux.events.emit("jog-machine",e,t);EASEL.keyboardController.register({keyboard:"walkthrough",command(){e("x",1)},key:EASEL.keys.right}),EASEL.keyboardController.register({keyboard:"walkthrough",command(){e("x",-1)},key:EASEL.keys.left}),EASEL.keyboardController.register({keyboard:"walkthrough",command(){e("y",1)},key:EASEL.keys.up}),EASEL.keyboardController.register({keyboard:"walkthrough",command(){e("y",-1)},key:EASEL.keys.down}),EASEL.keyboardController.register({keyboard:"walkthrough",command(){e("z",1)},key:EASEL.keys.up,shift:!0}),EASEL.keyboardController.register({keyboard:"walkthrough",command(){e("z",-1)},key:EASEL.keys.down,shift:!0})}()},function(e,t){EASEL.mainMenu.register("select-matching-depth",(()=>function(){const e=EASEL.volumeStore.getVolumes(EASEL.editorStore.getSelectedVolumeIds());if(EASEL.volumeHelper.allSelectedShapesMatchingCutDepth(e)){const t=EASEL.volumeStore.getVolumes().filter((t=>t.cut.depth===e[0].cut.depth)).map((e=>e.id));EASEL.editorActions.select(...t)}}()))},function(e,t){EASEL.mainMenu.register("new",(()=>EASEL.stats.trackEvent("New Project")))},function(e,t){!function(){const e=function(e){EASEL.editorStore.getSelectedVolumeIds().length>0?r(e):a(e)};var{keys:t}=EASEL;const n=function(e,n,a){switch(e){case t.up:return{deltaX:0,deltaY:n*a};case t.down:return{deltaX:0,deltaY:-n*a};case t.left:return{deltaX:-n,deltaY:0};case t.right:return{deltaX:n,deltaY:0}}},a=function(e){const t=(e.shiftKey?1:.25)*EASEL.constants.PIXELS_PER_INCH;EASEL.viewportActions.pan(n(e.which,t,-1))},r=function(e){let t;switch(EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState())){case"in":t=e.shiftKey?.125:.01;break;case"mm":t=(e.shiftKey?5:1)*EASEL.units.inchesPerPreferredUnit()}const{deltaX:a,deltaY:r}=n(e.which,t,1);return EASEL.volumeActions.translate(EASEL.editorStore.getSelectedVolumeIds(),a,r)};for(const o of[t.up,t.down,t.left,t.right])EASEL.keyboardController.register({keyboard:"default",command:e,key:o}),EASEL.keyboardController.register({keyboard:"default",command:e,key:o,shift:!0})}()},function(e,t){EASEL.keyboardController.register({keyboard:"default",command:EASEL.machineStateActions.openInspector,key:EASEL.keys.d,meta:!0,shift:!0})},function(e,t){EASEL.keyboardController.register({keyboard:"default",command:function(){const e=EASEL.editorStore.getSelectedVolumeIds(),t=EASEL.volumeStore.getVolumes(e);e.length>0&&EASEL.volumeActions.setLocked(e,t.any((e=>e.shape.anchored)))},key:EASEL.keys.i,meta:!0})},function(e,t){!function(){const e=function(){null!=EASEL.undoStore.getRedoTokens()&&EASEL.undoActions.redo()};EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.z,meta:!0,shift:!0}),EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.y,meta:!0})}()},function(e,t){!function(){const e=()=>EASEL.volumeActions.removeAll();EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.backspace,meta:!0}),EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.delete,meta:!0})}()},function(e,t){!function(){const e=function(){let e=EASEL.editorStore.getEditingVolumeId(),t=EASEL.editorStore.getSelectedPointIndex(),n=EASEL.editorStore.getSelectedSubpathIndex();if(null!=e&&null!=t&&null!=n){const a=EASEL.volumeStore.getVolumes([e])[0],r=EASEL.shapeUtils.pathWithRemovedPoint({shape:EASEL.shapeUtils.pathifyShape(a.shape),pointIndex:t,subpathIndex:n});r?(EASEL.volumeActions.setShapeParams([e],r,"Remove Point"),n>=r.points.length?(n=r.points.length-1,t=r.points[n].length-1):t>=r.points[n].length&&(t=r.points[n].length-1),EASEL.editorActions.selectPathPoint(n,t)):EASEL.volumeActions.remove([e])}else EASEL.volumeActions.remove(EASEL.editorStore.getSelectedVolumeIds())};EASEL.mainMenu.register("remove",e),EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.backspace,meta:!1}),EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.delete,meta:!1})}()},function(e,t){EASEL.mainMenu.register("properties",(()=>EASEL.flux.events.emit("open-project-properties-modal")))},function(e,t,n){const a=n(1105);!function(){const e=()=>a.selectAll();EASEL.mainMenu.register("select-all",e),EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.a,meta:!0})}()},function(e,t){const n={selectAll(){const e=EASEL.volumeStore.getVolumes();return EASEL.editorActions.select(...e.map((e=>e.id)))},selectObject:e=>EASEL.editorActions.select(e.easel.id),selectObjects:e=>EASEL.editorActions.select(...e.map((e=>e.easel.id)))};e.exports=n},function(e,t){!function(){const e=function(e){const t=EASEL.volumeStore.getVolumes().filter((t=>t.cut.type===e)).map((e=>e.id));EASEL.editorActions.select(...t),EASEL.flux.events.emit("hide-action")},t=()=>e("outline"),n=()=>e("fill"),a=()=>e("drill");EASEL.mainMenu.register("select-by-type",(()=>EASEL.flux.events.emit("show-action",{title:"Select by Cut Type",message:"",buttons:[{text:"Outline",action:t},{text:"Fill",action:n},{text:"Drill",action:a}]})))}()},function(e,t){!function(){const e=function(){EASEL.stats.trackEvent(EASEL.events.layeringTool,{action:"Move backward"}),EASEL.volumeActions.moveBackward(EASEL.editorStore.getSelectedVolumeIds())};EASEL.mainMenu.register("backward",e),EASEL.keyboardController.register({keyboard:"default",command:e,key:EASEL.keys.leftSquareBracket,meta:!0});const t=function(){EASEL.stats.trackEvent(EASEL.events.layeringTool,{action:"Send to back"}),EASEL.volumeActions.sendToBack(EASEL.editorStore.getSelectedVolumeIds())};EASEL.mainMenu.register("send-to-back",t),EASEL.keyboardController.register({keyboard:"default",command:t,key:EASEL.keys.semicolon,meta:!0})}()},function(e,t){EASEL.mainMenu.register("troubleshooting",(()=>EASEL.troubleshooting.showModal({fromMenu:!0})))},function(e,t){EASEL.keyboardController.register({keyboard:"default",command:function(){null!=EASEL.undoStore.getUndoTokens()&&EASEL.undoActions.undo()},key:EASEL.keys.z,meta:!0})},function(e,t){EASEL.keyboardController.register({keyboard:"default",command:EASEL.viewportActions.zoomIn,key:EASEL.keys.plus,meta:!0}),EASEL.keyboardController.register({keyboard:"default",command:EASEL.viewportActions.zoomOut,key:EASEL.keys.minus,meta:!0}),EASEL.keyboardController.register({keyboard:"default",command:EASEL.viewportActions.homeViewport,key:EASEL.keys.zero,meta:!0})},function(e,t){EASEL.shape=function(e,t){null==t&&(t={x:2,y:2});let n={center:t,flipping:{}};switch("drill"!=e&&(n.width=2,n.height=2,n.rotation=0),e){case"circle":n.type="ellipse";break;case"square":n.type="rectangle";break;case"star":{n.type="polygon";const e=[],t=10;for(let n=0;n<t;n++){const a=n%2===0?1:.5,r=2*Math.PI*(n/t)+Math.PI/2;e.push({x:a*Math.cos(r),y:a*Math.sin(r)})}n.points=e}break;case"triangle":{n.type="polygon";const e=[],t=3;for(let n=0;n<t;n++){const a=2*Math.PI*(n/t)+Math.PI/2;e.push({x:Math.cos(a),y:Math.sin(a)})}n.points=e}break;case"text":n.type="text",n.text="Text",n.font="Bemio";break;case"drill":n.type="drill"}return n}},function(e,t){EASEL.shapeUpdater=function(){const e=function(e){return"text"===e.type?EASEL.shallowMerge(e,{fontPath:EASEL.textHelper.textShapeToPathShape(e)}):e},t=(e,t)=>EASEL.shallowMerge(e,{font:t}),n=function(e,t){return"line"===(e=EASEL.shallowMerge(e)).type?(e.point1=t(e.point1),e.point2=t(e.point2)):e.center=t(e.center),e},a=function(e){return(e%=2*Math.PI)>Math.PI&&(e-=2*Math.PI),e<-Math.PI&&(e+=2*Math.PI),e},r={buildText:function(e){let n=EASEL.shape("text");const a=EASEL.textHelper.measure({text:n.text,font:e}),r=n.height*(a.width/a.height);return n.center.x+=(r-n.width)/2,n.width=r,n.fontSize=80,n.rotation=0,n.flipping={},n=t(n,e),n},setText:(e,t)=>EASEL.shallowMerge(e,{text:t}),setFont:t,shiftShape:(e,t)=>EASEL.shallowMerge(e,{center:{x:e.center.x+t.x,y:e.center.y+t.y}}),translate:(e,t,a)=>n(e,(e=>({x:e.x+t,y:e.y+a}))),rotate:function(e,t,r,o){return null!=(e=n(e,(function(e){const n=Math.atan2(e.y-o,e.x-r),a=Math.hypot(e.y-o,e.x-r);return{x:r+a*Math.cos(n+t),y:o+a*Math.sin(n+t)}}))).rotation&&(e.rotation=a(e.rotation+t)),e},flip:function(e,t,r,o,s){const i=t!==r;var l;return null!=(e=n(e,(e=>({x:t?e.x+2*(o-e.x):e.x,y:r?e.y+2*(s-e.y):e.y})))).rotation&&(e.rotation=a((l=e.rotation,(i?-l:l)+(r?Math.PI:0)))),null!=e.width&&i&&(e.flipping.horizontal=!e.flipping.horizontal),e},scale:function(e,t,a,r){return null!=(e=n(e,t.transformedPoint)).width&&(e.width*=a,e.width<0&&(e.width=-e.width,e.flipping=EASEL.shallowMerge(e.flipping,{horizontal:!e.flipping.horizontal}))),null!=e.height&&(e.height*=r,e.height<0&&(e.height=-e.height,e.flipping=EASEL.shallowMerge(e.flipping,{vertical:!e.flipping.vertical}))),e},setParams:function(e,t){e=EASEL.shallowMerge(e);for(let n in t){const a=t[n];e[n]=a}return e},setLocked:(e,t)=>EASEL.shallowMerge(e,{anchored:t}),setProportionLock:(e,t)=>EASEL.shallowMerge(e,{isProportionLocked:t})},o={};for(const s of Object.keys(r))o[s]=(...t)=>e(r[s](...t));return o.fallbackToPath=e=>e.fontPath,o.ensurePath=e,o}()},function(e,t){!function(){const e=$("#svg-file-input"),t=function(){const t=this.result;EASEL.svgLoader().load(t),e.val("")};$((()=>e.on("change",(function(e){EASEL.projectMetadataActions.setContainsImportedSVG(!0),EASEL.stats.trackEvent("Imported SVG");const n=e.target.files[0],a=new FileReader;a.onload=t,a.readAsText(n);const r=$(this).parent("form");r.find("#svg-file-project-link-token").val(EASEL.projectMetadataStore.getLinkToken()),$.ajax({url:"/imported_files",method:"POST",data:new FormData(r.get(0)),processData:!1,contentType:!1})}))))}()},function(e,t,n){const a=n(34),r=n(520);EASEL.svgImporter=function(){const e=function(e,n){return e=e.map((e=>r.fixProperties(e))).filter((e=>r.validateObject(e))).map((e=>r.normalizeObject(e))),r.scaleObjects(e,1/n),r.moveToOffset(e,t()),(e=r.scaleToMinimumSize(e)).map((e=>a.fabricJsonToVolume(e.toJSON(),{originY:0,pixelsPerInch:1,materialThickness:EASEL.materialStore.getCurrentDepth()})))},t=()=>EASEL.machineSettingsSelectors.isCarvey(EASEL.store.getState())?{x:1,y:1}:{x:0,y:0};return{svgStringToVolumes:function(t){const n=EASEL.svgObject(t).detectPPI();return fabric.DPI=n,new Promise((a=>{fabric.loadSVGFromString(t,(t=>a(e(t,n))))}))}}}()},function(e,t,n){const a=n(34),r=n(344),o=n(1116),s=n(520);EASEL.svgLoader=function(e={}){e=EASEL.merge({pro:!1,name:"",minimumScale:!1,done:()=>{},cutType:"fill"},e);const t={NO_OBJECTS:"no-objects",TEXT:"text",IMAGE:"image",CLIP_PATH:"clip-path",UNKNOWN_SHAPE:"unknown-shape",FABRIC:"unknown"},n={rect:!0,ellipse:!0,circle:!0,path:!0,polygon:!0,polyline:!0,line:!0};let i=null,l=!1,c=null,p=[],u=null;const d=function(e,n){if(l)return;const a={type:e,svg:i},r=EASEL.component.svgImportError.showGeneric;switch(e){case t.NO_OBJECTS:r("The file does not contain any objects.",n);break;case t.TEXT:EASEL.component.svgImportError.showText(n);break;case t.IMAGE:r("The file contains embedded images.",n);break;case t.UNKNOWN_SHAPE:r("The file contains an invalid shape.",n);break;case t.CLIP_PATH:r("Cannot import shapes with clipping paths (clip-path attributes).",n);break;case t.FABRIC:r("An unknown error occurred.",n)}EASEL.stats.trackEvent("SVG Import Error",a),l=!0},h=function(){return EASEL.machineSettingsSelectors.isCarvey(EASEL.store.getState())?{x:1,y:1}:{x:0,y:0}},E=function(e){if(null!=e.attributes.getNamedItem("clip-path"))return u=u||t.CLIP_PATH},m=function(e){const n=function(){r.close(),o.unbind()},a=e.length,s=EASEL.loader("svg-import");for(let t=0;t<e.length;t+=20){const n=e.slice(t,t+20);s.register("object",(function(e){for(const t of n)g(t);e()}))}a>0?(r.setText("Loading SVG Objects"),r.setTotal(a,!0),s.load({done(){null!=u?d(u,S):S()},always:n,serial:!0})):(d(t.NO_OBJECTS),n())},S=function(){f(p),A(p,(function(){e.minimumScale&&(p=s.scaleToMinimumSize(p)),s.moveToOffset(p,h()),b(p),e.done()}))},g=e=>{if(r.increment(),!L(e))return!1;e=s.fixProperties(e),s.validateObject(e)&&p.push(s.normalizeObject(e))},f=e=>s.scaleObjects(e,1/c),A=function(e,t){const{inchWidth:n,inchHeight:a}=s.getSizeProperties(e),r=EASEL.machineSettingsSelectors.getWorkArea(EASEL.store.getState()),o=r.x-h().x,i=r.y-h().y,l=n/o,c=a/i;if(l>1||c>1){const r=e=>EASEL.stats.trackEvent("Oversized SVG",{resolution:e}),o=function(){r("Scale down to fit"),s.scaleObjects(e,1/Math.max(l,c)),t()},i=function(){r("Leave original size"),t()};EASEL.alert("Design is larger than the work area",`The imported design is ${function(e,t){const n=e*EASEL.units.preferredUnitsPerInch(),a=t*EASEL.units.preferredUnitsPerInch();switch(EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState())){case"in":return`${n.toFixed(2)}\u2033 \xd7 ${a.toFixed(2)}\u2033`;case"mm":return`${n.toFixed(0)}mm \xd7 ${a.toFixed(0)}mm`}}(n,a)}. Do you want to scale down the design to fit your work area?`,[{text:"Scale down to fit",action:o},{text:"Leave original size",action:i}])}else t()},b=function(t){const n=t.map((t=>{const n=t.toJSON();n.pro=e.pro;const r=a.fabricJsonToVolume(n,{originY:0,pixelsPerInch:1,materialThickness:EASEL.materialStore.getCurrentDepth()});return e.pro&&(r.shape.icon={pro:e.pro,name:e.name}),r}));EASEL.volumeActions.add(...n),EASEL.editorActions.select(...n.map((e=>e.id)))},L=function(e){return!(e=>!n[e.type])(e)||([t.TEXT,t.IMAGE].includes(e.type)?u||(u=e.type):u||(u=t.UNKNOWN_SHAPE),!1)};return{load:function(e){i=e,r.initialize(0),r.setText("Loading SVG Objects..."),c=EASEL.svgObject(i).detectPPI(),fabric.DPI=c,o.once((function(){d(t.FABRIC),r.close()})),fabric.loadSVGFromString(i,m,E)}}}},function(e,t){const n=function(){let e=null;const t=function(t){e=fabric.log,fabric.log=function(n){t(n),e(n)}},n=()=>fabric.log=e;return{once:e=>t((function(t){e(t),n()})),bind:t,unbind:n}}();e.exports=n},function(e,t){EASEL.svgObject=e=>({detectPPI:()=>{if(-1!==e.indexOf("Generator: Adobe Illustrator"))return 72;if(-1!==e.indexOf("Created with Inkscape")){const t=e.match(/inkscape:version="(\d+\.\d+)/);return null!=t&&parseFloat(t[1])>=.91?96:90}return 96}})},function(e,t,n){n(1119),n(1121),n(1122),n(1123),n(1124),n(1125),n(1126),n(1127),n(1128),n(1129),n(1130),n(1131),n(1132),n(1133),n(1134),n(99),n(345)},function(e,t,n){const a=n(1120);EASEL.accuratePreviewer=function(e){const t={};let n,r;const o=function(){e.setAccurateElement(null),e.setHighlightElement(null)};return t.clearPreview=o,t.renderPreview=function(t,n,s,i){return o(),EASEL.toolpathsWorker.generatePreview(n,s,i).then((function({material:n,highlight:o}){n=EASEL.previewElement(a(n,t,r)),e.setAccurateElement(n),n.release(),o=EASEL.previewElement(a(o,r)),e.setHighlightElement(o),o.release()}))},t.initTileTexture=function(){n=document.createElement("canvas"),r=new THREE.CanvasTexture(n),r.magFilter=THREE.NearestFilter,r.minFilter=THREE.NearestFilter},t.updateTileTexture=function(){const e=n.getContext("2d"),{dimensions:t}=EASEL.materialStore.getActiveMaterial(),a=EASEL.constants.MATERIAL_TEXTURE_SIZE/t.x,o=EASEL.constants.MATERIAL_TEXTURE_SIZE/t.y;n.width=t.x*a,n.height=t.y*o,e.fillStyle="#ffffff",e.fillRect(0,0,n.width,n.height);const s=EASEL.tileSelectors.getSelectedTile(EASEL.store.getState());if(null!=s){const t=s.getDimensions(),r=s.getOffsetDistance();e.fillStyle="#e6e6e6",e.fillRect(0,(n.height/o-t.y-r)*o,t.x*a,t.y*o)}r.needsUpdate=!0},t}},function(e,t,n){const{store:a}=n(95),r=n(94);e.exports=function({x:e,y:t,z:n,meshes:o},s,i){null==s&&(s=[]);const l=n;let c=r.getSelectedTile(a.getState());const p=(null!=c?c.getOffsetDistance():void 0)||0,u=[new THREE.Plane(new THREE.Vector3(1,0,0),0),new THREE.Plane(new THREE.Vector3(0,1,0),p),new THREE.Plane(new THREE.Vector3(0,0,1),0),new THREE.Plane(new THREE.Vector3(-1,0,0),e),new THREE.Plane(new THREE.Vector3(0,-1,0),t-p)];return o.map((function(e){const{position:a,uv:r,options:o}=e,c=function(e,t){const n=new THREE.BufferGeometry;return n.addAttribute("position",new THREE.BufferAttribute(e,3)),n.addAttribute("uv",new THREE.BufferAttribute(t,2)),n.computeFaceNormals(),n.computeVertexNormals(),n}(a,r);let d=function({texture:e,color:t,depth:n=0,opacity:a=1,clip:r=!0}){let o;null==t&&(t=65793*Math.round(255*(1-.5*n/l)));const c=r?{color:t,clippingPlanes:u}:{color:t};return null!=e?(o=new THREE.MeshLambertMaterial(c),o.map=s[e]):o=new THREE.MeshBasicMaterial(c),a<1&&(o.transparent=!0,o.opacity=a),o.alphaMap=i,o}(o);return d=function(e,t,n){null!=e.map&&(e.map.offset.y=t/n);return e}(d,p,t),function(e,t,n,a){null==a&&(a=0);const r=new THREE.Mesh(e,t);return r.position.z+=n-a,r}(c,d,n,o.depth)}))}},function(e,t){EASEL.designPreview=function(){const e={};let t={},n=null;const a=function(){const e=EASEL.store.getState(),a=EASEL.previewSelectors.uncutAreasVisible(e),r=EASEL.previewSelectors.materialVisible(e),o=EASEL.previewSelectors.wasteboardVisible(e);null!=t.accurateGraphic&&t.accurateGraphic.setVisible(r),null!=t.highlightGraphic&&t.highlightGraphic.setVisible(a),null!=t.wasteboardGraphic&&t.wasteboardGraphic.setVisible(o),null!=t.inaccurateGraphic&&t.inaccurateGraphic.setVisible(null==t.accurateGraphic&&r),n.render()},r=function(e,r){const o=t[e];null!=r&&r.retain(),null!=o&&(n.removeMeshes(o.getMeshes()),o.release()),t[e]=r,null!=r&&n.addMeshes(r.getMeshes()),a()};return e.init=r=>(n=r,t={wasteboardGraphic:null,inaccurateGraphic:null,accurateGraphic:null,highlightGraphic:null},EASEL.store.subscribeWithSelector(EASEL.previewSelectors.materialVisible,a),EASEL.store.subscribeWithSelector(EASEL.previewSelectors.uncutAreasVisible,a),EASEL.store.subscribeWithSelector(EASEL.previewSelectors.wasteboardVisible,a),e),e.setInaccurateElement=e=>r("inaccurateGraphic",e),e.setAccurateElement=e=>r("accurateGraphic",e),e.setHighlightElement=e=>r("highlightGraphic",e),e.setWasteboardElement=e=>r("wasteboardGraphic",e),e}()},function(e,t){EASEL.fastPreviewer=function(e,t){const n={};return n.renderPreview=function(n){let a,r;const{dimensions:o,volumes:s}=n;t.needsUpdate();const i=t.getFabricCanvas();a=EASEL.merge(n,{originY:o.y});const l=EASEL.volumeRenderer.getJSON(a,EASEL.volumeRenderer.renderType.TEXT_AS_PATH_SHAPE);i.loadFromJSON(l);const c={};s.forEach((e=>c[e.id]=e));const p=i.getWidth()/(o.x*EASEL.constants.PIXELS_PER_INCH);for(let e of i.getObjects()){r=c[e.easel.id];let{depth:t}=r.cut;"tab"===e.easel.type&&(t-=r.cut.tabHeight);const n=(255*(1-t/o.z)).toFixed(0),a=`rgb(${n}, ${n}, ${n})`;"transparent"!==e.fill&&(e.fill=a),"transparent"!==e.stroke&&(e.stroke=a),"drill"===e.easel.cut.type&&(e.strokeWidth=0),e.left*=p,e.top*=p,e.scaleX*=p,e.scaleY*=p}i.backgroundColor="#FFFFFF",i.doRenderAll(),e.render()},n}},function(e,t){EASEL.materialHeightMap=function(){const e={};let t=null,n=null,a=null,r=null,o=null,s=null,i=null;const l=EASEL.constants.MATERIAL_TEXTURE_SIZE,c=function(){const e=EASEL.materialStore.getActiveMaterial(),t=EASEL.machineSettingsSelectors.getWorkArea(EASEL.store.getState());return(null!=e?e.dimensions:void 0)||{x:t.x,y:t.y,z:.5}},p=function(){const e=EASEL.tileSelectors.getSelectedTile(EASEL.store.getState()),n=null!=e?e.getOffsetDistance():0,a=c();s.scale.x=a.x,s.scale.y=a.y,s.position.x=a.x/2,s.position.y=a.y/2-n,t.setWidth(60*a.x),t.setHeight(60*a.y),u("maxDepth",a.z),u("fullWidth",a.x),u("fullHeight",a.y)};var u=(e,t)=>a[e].value=t;return e.initialize=function(e){t=e;const u=c();t.setWidth(60*u.x),t.setHeight(60*u.y),n=t.getElement(),o=new THREE.Texture(n),EASEL.textureUtils.setNonPowerOfTwoSettings(o),o.needsUpdate=!0,a={heightTex:{type:"t",value:o},colorTex:{type:"t",value:null},colorTex2:{type:"t",value:null},width:{type:"f",value:l},maxDepth:{type:"f",value:.5},tex2Depth:{type:"f",value:0},fullWidth:{type:"f",value:c().x},fullHeight:{type:"f",value:c().y}},r=new THREE.ShaderMaterial({uniforms:a,vertexShader:'    uniform float fullWidth;\n    uniform float fullHeight;\n    uniform sampler2D heightTex;\n    uniform sampler2D colorTex;\n    uniform sampler2D colorTex2;\n    uniform float maxDepth;\n    uniform float tex2Depth;\n    uniform float width;\n    varying vec4 vColor;\n    varying float height;\n    void main() {\n      float step = 1.0/width;\n      vec2 vUv = vec2(position.x + 0.5, position.y + 0.5);\n\n      vec4 disp_avg = texture2D(heightTex, vUv.xy+vec2(step, 0)) +\n        texture2D(heightTex, vUv.xy+vec2(-step, 0)) +\n        texture2D(heightTex, vUv.xy+vec2(0, -step)) +\n        texture2D(heightTex, vUv.xy+vec2(0, step)) +\n        texture2D(heightTex, vUv.xy+vec2(-step, -step)) +\n        texture2D(heightTex, vUv.xy+vec2(step, -step)) +\n        texture2D(heightTex, vUv.xy+vec2(step, step)) +\n        texture2D(heightTex, vUv.xy+vec2(-step, step));\n      disp_avg /= 8.0;\n      vec4 disp = texture2D(heightTex, vUv.xy);\n      disp = (disp + disp_avg) / 2.0;\n\n      /* Drop the material below the floor if it is at the edges of the work area */\n      if (vUv.x>0.9999 || vUv.x<0.0001 || vUv.y<0.0001 || vUv.y>0.9999){\n        disp = vec4(-0.25,0.0,0.0,0.0);\n      }\n\n      /* Make anything that is close to being at 0 height be below 0 to prevent "sawdust" */\n      if (disp.r < 0.005) {\n        disp.r = -0.25;\n      }\n      /* Read the depth from the red channel for accurate preview */\n      vec3 pos = vec3(position.x, position.y, maxDepth * disp.r);\n\n      if (pos.z < tex2Depth || pos.z >= maxDepth - tex2Depth) {\n        vColor = texture2D(colorTex, vUv.xy);\n      } else {\n        vColor = texture2D(colorTex2, vUv.xy);\n      }\n\n      height = disp.r;\n      gl_Position = projectionMatrix*modelViewMatrix*vec4(pos,1.0);\n    }  ',fragmentShader:"    varying vec4 vColor;\n    varying float height;\n\n\n    void main() {\n      /* Scale brightness to within a range of about 0.49-0.98 times the input texture color. */\n      /* (1.0 + height) / 2 (i.e. 0.5-1.0) would match the scale in previewMeshDeserializer, */\n      /* but we use a different coefficient here to visually match that other preview, which  */\n      /* (unlike this shader) is affected by scene lighting.                                  */\n      float dark = (1.0 + height) / 2.1;\n\n      vec4 col = vec4(vColor.r * dark, vColor.g * dark, vColor.b * dark, vColor.a);\n\n      /* hide the material that is below the floor by setting the color to white */\n      if (height <= 0.0) {\n        col = vec4(1.0, 1.0, 1.0, 1.0);\n      }\n\n      gl_FragColor = col;\n    }  ",transparent:!0}),function(){const e=EASEL.unitSquareBufferGeometry(l);s=new THREE.Mesh(e,r),p(),i=EASEL.previewElement([s]),EASEL.store.subscribeWithSelector(EASEL.tileSelectors.getSelectedTile,p),EASEL.materialStore.addChangeListener(p)}()},e.getFabricCanvas=()=>t,e.updateDimensions=p,e.needsUpdate=()=>o.needsUpdate=!0,e.getGraphic=()=>i,e.setTextures=function(e){u("colorTex",e[0].texture),e.length>1?(u("tex2Depth",-e[0].bottomZ),u("colorTex2",e[1].texture)):(u("tex2Depth",0),u("colorTex2",e[0].texture))},e}},function(e,t){EASEL.previewElement=function(e){let t=1;const n=e=>function(...n){if(0===t)throw new Error("Calling method on disposed EASEL.previewElement instance! (Did you forget to call `retain` or hold a reference after calling `release`?)");return e(...n||[])};return{getMeshes:n((()=>e)),retain:n((function(){t++})),release:n((function(){t--,0===t&&function(){for(let t of e)t.geometry.dispose(),t.material.dispose();e=[]}()})),setVisible:n((function(t){for(let n of e)n.visible=t}))}}},function(e,t){EASEL.previewScheduler=function(){let e=!1,t=!1,n=!1,a=1/0,r=!1,o=null,s=null,i=null,l=null;const c=function(e){let t;t=null!=e.color?e.color.layers.map((t=>{let{rgb:n,bottomZ:a,relativeTo:r}=t;return"bottom"===r&&(a-=e.dimensions.z),{texture:i.loadColoredMaterial(e,...n),bottomZ:a}}),i):[{texture:i.loadMaterial(e),bottomZ:-e.dimensions.z}];const n=t.map((e=>{const{texture:t,bottomZ:n}=e;return t.then((e=>({texture:e,bottomZ:n})))}));return Promise.all(n)},p=function(){return!t&&(!n||!(EASEL.volumeStore.getVolumes().length>=.5*a))},u=EASEL.debounce((function(){!e&&p()&&E(2500)}),250),d=EASEL.debounce((function(){c(EASEL.materialStore.getActiveMaterial()).then((function(e){l.setTextures(e),o.clearPreview();const t={volumes:EASEL.volumeStore.getVolumes(),dimensions:EASEL.materialStore.getActiveMaterial().dimensions,strokeBit:EASEL.bit(EASEL.bitSelectors.strokeBit(EASEL.store.getState()))};s.renderPreview(t)}))}),200),h=function(){if(!r)return;const e=EASEL.store.getState();null==EASEL.externalGcodeSelectors.getGcode(e)&&(d(),p()?(EASEL.store.dispatch(EASEL.previewActionCreators.invalidatePreview(EASEL.previewConstants.statuses.WORKING)),u()):EASEL.store.dispatch(EASEL.previewActionCreators.invalidatePreview(EASEL.previewConstants.statuses.DISABLED)))},E=function(r,s){const i=EASEL.store.getState();let l;e=!0,EASEL.store.dispatch(EASEL.previewActionCreators.setDesignStatus(EASEL.previewConstants.statuses.WORKING)),t=!1,n=!1,a=EASEL.volumeStore.getVolumes().length;let{dimensions:p}=EASEL.materialStore.getActiveMaterial();EASEL.tileSelectors.isTileSelected(i)&&(l=EASEL.tileSelectors.getSelectedTile(i));let u=EASEL.volumeStore.getVolumes();const d=EASEL.bitSelectors.useDetailBit(i)?EASEL.bit(EASEL.bitSelectors.detailBit(i)):EASEL.bit(EASEL.bitSelectors.bit(i)),h=EASEL.bit(EASEL.bitSelectors.strokeBit(i)),E=function(){EASEL.store.dispatch(EASEL.previewActionCreators.setDesignStatus(EASEL.previewConstants.statuses.READY)),n=!1},m=function(e){console.error(e),o.clearPreview(),EASEL.store.dispatch(EASEL.previewActionCreators.setDesignStatus(EASEL.previewConstants.statuses.DISABLED)),n=!0};return c(EASEL.materialStore.getActiveMaterial()).then((function(t){const n=t.map((e=>e.bottomZ));t=t.map((e=>e.texture));const a={dimensions:p,textureBottoms:n,volumes:u,lastBit:d,strokeBit:h,tile:l};return o.renderPreview(t,a,s,r).then(E,m).then((function(){e=!1}))}))};return{init:function(e){const{designPreview:t,previewPanel:n}=e;({textureLoader:i,materialHeightMap:l}=e),o=EASEL.accuratePreviewer(t),o.initTileTexture(),o.updateTileTexture(),s=EASEL.fastPreviewer(n,l),EASEL.volumeStore.addChangeListener(h),EASEL.materialStore.addChangeListener(h),EASEL.jobSettingsStore.addChangeListener(h),EASEL.store.subscribeWithSelector(EASEL.unitSelectors.getUnitState,h),EASEL.store.subscribeWithSelector(EASEL.bitSelectors.bitParams,h),EASEL.store.subscribeWithSelector(EASEL.machineSettingsSelectors.getMachineType,h),EASEL.store.subscribeWithSelector(EASEL.machineSettingsSelectors.getWorkArea,h),EASEL.store.subscribeWithSelector(EASEL.tileSelectors.getSelectedTile,h),EASEL.store.subscribeWithSelector(EASEL.tileSelectors.getTileOverlapDistance,h),EASEL.store.subscribeWithSelector(EASEL.userSelectors.getStartStopSafetyHeight,h),EASEL.materialStore.addChangeListener(o.updateTileTexture),EASEL.store.subscribeWithSelector(EASEL.tileSelectors.getSelectedTile,o.updateTileTexture),EASEL.store.subscribeWithSelector(EASEL.tileSelectors.getTileOverlapDistance,o.updateTileTexture),r=!0,h()},disableDetailedPreview:function(){t=!0,null!=o&&o.clearPreview(),EASEL.store.dispatch(EASEL.previewActionCreators.setDesignStatus(EASEL.previewConstants.statuses.DISABLED))},enableDetailedPreview:function(){t=!1,h()},generateDetailedPreview:E}}()},function(e,t){EASEL.smartClampMesh=function(){const{WIDTH:e,LENGTH:t,OFFSET:n,FILLET:a,HEIGHT:r}=EASEL.smartClampConstants,o=new THREE.Shape;o.moveTo(e,e),o.lineTo(t-a,e),o.quadraticCurveTo(t,e,t,e-a),o.lineTo(t,a),o.quadraticCurveTo(t,0,t-a,0),o.lineTo(a,0),o.quadraticCurveTo(0,0,0,a),o.lineTo(0,t-a),o.quadraticCurveTo(0,t,a,t),o.lineTo(e-a,t),o.quadraticCurveTo(e,t,e,t-a),o.lineTo(e,e);const s={amount:r,bevelEnabled:!1},i=new THREE.ExtrudeGeometry(o,s);return i.applyMatrix((new THREE.Matrix4).makeTranslation(-n,-n,0)),new THREE.Mesh(i,new THREE.MeshNormalMaterial)}},function(e,t){!function(){const e=1048576,t=$("#stl-file-input"),n=function(e){const n={format:"threejs",geometry:(new THREE.STLLoader).parse(e.target.result).toJSON()};EASEL.store.dispatch(EASEL.threeDPrototypeActionCreators.setMesh(n)),EASEL.projectMetadataActions.setShared(!1),EASEL.workpieceActions.updateWorkpiece(EASEL.workpieceStore.getActiveID(),{isImportedMesh:!0}),t.val("")};$((()=>t.on("change",(function(t){EASEL.stats.trackEvent("Imported 3D Mesh",{filetype:"stl"});const a=t.target.files[0];if(a.size>20*e)return void EASEL.oops(`File too large (${(a.size/e).toFixed(1)}MB). Max size is 20MB`);const r=new FileReader;r.onload=n,r.readAsArrayBuffer(a)}))))}()},function(e,t){EASEL.textureLoader=function(){const e=new THREE.TextureLoader;e.setCrossOrigin("");const t={},n=n=>null!=t[n]?t[n]:t[n]=new Promise((function(t,a){return n=EASEL.crossOriginResources.getUrlToRequestWithOriginHeader(n),e.load(n,t,void 0,a)})).catch((function(e){return window.onerror(`Error loading texture: ${e.toString()}`,"EASEL.textureLoader#tryLoadMaterial",0,0,e),Promise.reject(e)}));var a=function(e,t,n){const a=new Uint8Array(3);a[0]=e,a[1]=t,a[2]=n;const r=new THREE.DataTexture(a,1,1,THREE.RGBFormat);return r.needsUpdate=!0,Promise.resolve(r)};return{loadMaterial:function(e){const t=function(e){return e.textureUrl?e.textureUrl:e.category?EASEL.materialStore.imageForMaterialCategory(e.category):void 0}(e);return t?n(t).catch((()=>a(72,140,197))):a(72,140,197)},loadColoredMaterial:function(e,t,r,o){return null==e.baseTextureUrl?a(t,r,o):n(e.baseTextureUrl).then((function(e){const n=document.createElement("canvas");n.width=e.image.width,n.height=e.image.height;const a=n.getContext("2d");return a.drawImage(e.image,0,0),a.globalCompositeOperation="multiply",a.fillStyle=`rgba(${t}, ${r}, ${o}, 1)`,a.fillRect(0,0,e.image.width,e.image.height),Promise.resolve(new THREE.CanvasTexture(n))})).catch((()=>a(t,r,o)))},loadColor:a}}},function(e,t){EASEL.textureUtils=function(){const e={};return e.setNonPowerOfTwoSettings=function(e){return e.generateMipmaps=!1,e.magFilter=e.minFilter=THREE.LinearFilter},e}()},function(e,t){EASEL.threeDimensionalRenderer=function(){const e={};let t=null,n=null,a=null,r=null,o=0;const s=EASEL.subscriber(),i=()=>{a&&t&&n&&a.render(t,n)},l=function(){o+=1,requestAnimationFrame((function(){o-=1,0===o&&i()}))},c=function(){const e=EASEL.materialStore.getActiveMaterial().dimensions,t=e.x+12>=e.y?1.5:2,n=Math.max(e.x,e.y)+3,a=60*Math.PI/180,o=Math.tan(a)*n;r.object.position.set(e.x/2,-n/t,o/t),r.center.set(e.x/2,e.y/2.5,0),r.update(),l()};var p=function(){null==a&&(a=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),a.localClippingEnabled=!0),a.setClearColor(16777215),t=new THREE.Scene;let o=new THREE.AmbientLight(5592405);t.add(o),o=new THREE.DirectionalLight(16777215,.28),o.position.set(0,0,10),t.add(o),o=new THREE.DirectionalLight(16777215,.3),o.position.set(-5,10,10),t.add(o),o=new THREE.DirectionalLight(16777215,.2),o.position.set(0,10,10),t.add(o),o=new THREE.DirectionalLight(16777215,.25),o.position.set(5,-5,-10),t.add(o),o=new THREE.DirectionalLight(16777215,.25),o.position.set(-5,-5,-10),t.add(o),n=new THREE.PerspectiveCamera(45,1,.01,600),n.up=new THREE.Vector3(0,0,1),e.camera=n,r=new THREE.OrbitControls(n,a.domElement),r.minPolarAngle=1e-5,r.maxPolarAngle=Math.PI/2-.25,r.userPan=!1,r.minDistance=.5,r.maxDistance=300,r.userRotateSpeed=.7,r.addEventListener("change",l);const{canvas:i}=a.context;i.classList.add("three-dimensional-renderer"),c(),EASEL.store.subscribeWithSelector(EASEL.machineSettingsSelectors.getWorkArea,c),i.addEventListener("webglcontextlost",(e=>e.preventDefault())),i.addEventListener("webglcontextrestored",(function(){p(),s.notify(e),u()}))},u=function(){const e=a.context.canvas.getContext("webgl");e.getError()!==e.NO_ERROR&&EASEL.alert("WebGL Error","Please exit any other GPU intensive processes and reload the page. If the error persists, please try Easel in another browser.")};return e.init=p,e.render=l,e.add=function(e){t.add(e),l()},e.setSize=function(e,t){a.setSize(e,t),n.aspect=e/t,n.updateProjectionMatrix(),i()},e.getCameraPosition=function(){return r.object.position},e.setCameraPosition=function(e){r.object.position.set(e.x,e.y,e.z),r.update(),i()},e.getCameraViewCenter=function(){return r.center},e.setCameraViewCenter=function(e){r.center.set(e.x,e.y,e.z),r.update(),i()},e.homeControls=c,e.getDOMElement=()=>a.domElement,e.addMeshes=function(e){for(let n of e)null!=n&&t.add(n)},e.removeMeshes=function(e){for(let n of e)t.remove(n)},e.onWebglContextRestored=s,e.onKeyDown=function(e){r.onKeyDown(e),l()},e}},function(e,t,n){const a=n(16);EASEL.toolpathVisualizer=function(){const e={G0:{all:new THREE.Color(12389919),detail:new THREE.Color(65280),roughing:new THREE.Color(12389919)},G1:{all:new THREE.Color(947901),detail:new THREE.Color(2637460),roughing:new THREE.Color(947901)}},t=.125,n=function(e,n,a,r,o){const s=EASEL.math.distance3D(a,r);if(0===s)return;const i=Math.ceil(s/t);for(let l=1;l<i;l++){const i=EASEL.math.pointAtDistance3D(a,r,l*t,s);e.push(new THREE.Vector3(i.x,i.y,i.z)),n.push(o)}e.push(new THREE.Vector3(r.x,r.y,r.z)),n.push(o)},r=function(){const e=EASEL.store.getState();return EASEL.machineSettingsSelectors.isCarvey(e)?{x:20/25.4,y:20/25.4,z:20/25.4}:{x:0,y:0,z:EASEL.userSelectors.getOriginSafetyHeight(EASEL.jobSettingsStore.settings(),e)}},o=function(e,n){let a=0,o=null,s=r();const i=EASEL.gcodeParser(s);let l=null;for(let r=0;r<e.length;r++){let c=e[r];c=i.format(c),o=i.positionFromLine(c);const p=i.commandFromLine(c);if("G0"!==p&&"G1"!==p)continue;l!==p&&(a+=1);const u=EASEL.math.distance3D(s,o);if(a+=Math.ceil(u/t),"function"===typeof n?n(r,a):void 0)return a;s=o,l=p}return a},s=function(t,a){null==a&&(a="all");const o=t?t.split("\n"):[],s=[],i=[];let l=null,c=r();const p=EASEL.gcodeParser(c);let u=null;for(let r of o){r=p.format(r),l=p.positionFromLine(r);const t=p.commandFromLine(r);"G0"!==t&&"G1"!==t||(u!==t&&(s.push(new THREE.Vector3(c.x,c.y,c.z)),i.push(e[t][a])),n(s,i,c,l,e[t][a]),c=l,u=t)}return{vertices:s,colors:i}};return{animateToFrame:function(e,t,n,a){let r=null,o=null,s=0;const i=n.reduce(((e,t)=>e+t.length),0);for(let l=0;l<e.length;l++){const i=e[l],c=Math.max(a-s-1,0);a>=s&&(o=n[l][c],r=t[l]);for(let e=0;e<n[l].length;e++)i.geometry.vertices[e]=n[l][Math.min(e,c)];s+=n[l].length,i.geometry.verticesNeedUpdate=!0}t.forEach((e=>{if(null!=e)if(e===r&&null!=o){const{x:t,y:n,z:r}=o;e.position.set(t,n,r),e.visible=a!==i}else e.visible=!1}))},createMesh:function(e,t){if(DISABLE_3D)return;const n=new THREE.Geometry,{vertices:a,colors:r}=s(e,t);n.vertices=a,n.colors=r;const o=new THREE.LineBasicMaterial({opacity:1,linewidth:1,vertexColors:THREE.VertexColors});return new THREE.Line(n,o)},createBitMesh:function(e){const t=e.inchWidth()/2;let n,r;switch(e.type()){case a.v:r=t/Math.tan(e.radianTipAngle()/2),n=new THREE.ConeBufferGeometry(t,r,20);break;default:r=4*t,n=new THREE.CylinderBufferGeometry(t,t,r,20)}n.rotateX(-Math.PI/2),n.translate(0,0,r/2);const o=new THREE.MeshPhongMaterial({color:13421772});o.transparent=!0,o.opacity=.7;const s=new THREE.Mesh(n,o);return s.visible=!1,s},gcodeToVerticesAndColors:s,indexOfFrameNumber:function(e,t){if(t<=0)return 0;let n=0;return o(e,(function(e,a){return n=e,a>=t})),n},getFrameCount:e=>o(e.split("\n"))}}()},function(e,t){EASEL.unitSquareBufferGeometry=function(e){const t=new THREE.BufferGeometry,n=new Float32Array(3*(e*e*2)*3);t.addAttribute("position",new THREE.BufferAttribute(n,3));const a=function(){let t=0;return function(n,a,r){n[t]=a/e-.5,n[t+1]=.5-r/e,n[t+2]=0,t+=3}}();for(let r=0;r<e;r++)for(let t=0;t<e;t++)a(n,t,r),a(n,t,r+1),a(n,t+1,r),a(n,t,r+1),a(n,t+1,r+1),a(n,t+1,r);return t}},function(e,t){EASEL.wasteboard=function(){const e={};let t=null,n=null,a=null;const r=144;let o=null,s=null;const i=function(){const e=EASEL.machineSettingsSelectors.getWorkArea(EASEL.store.getState());return{x:e.x||11.2,y:e.y||11.2}},l=()=>({x:i().x+2,y:i().y+2}),c=function(){o=EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState()),n.width=l().x*r,n.height=l().y*r,EASEL.wasteboardRenderer.render({drawingContext:n.getContext("2d"),units:o,pixelsPerInch:r,size:{width:i().x,height:i().y},workAreaPadding:1}),s.needsUpdate=!0,s.map.needsUpdate=!0},p=function(){t.scale.set(l().x,l().y,1),t.position.set(i().x/2,i().y/2,0)};return e.getMesh=()=>t,e.init=function(i){n=document.createElement("canvas"),n.width=l().x*r,n.height=l().y*r,a=new THREE.Texture(n),EASEL.textureUtils.setNonPowerOfTwoSettings(a),a.needsUpdate=!0;const u=new THREE.PlaneGeometry(1,1);return s=new THREE.MeshBasicMaterial({map:a,transparent:!0}),t=new THREE.Mesh(u,s),p(),c(),EASEL.store.subscribeWithSelector(EASEL.machineSettingsSelectors.getWorkArea,(function(){p(),c()})),EASEL.store.subscribeWithSelector(EASEL.unitSelectors.getPreferredUnit,(function(e){o!==e&&(c(),i())})),e},e}},function(e,t,n){const a=n(1135),r=n(1138);EASEL.mesh=function(e){if(null==e)return null;let t=null;return{_json:e,dispose(){null!=t&&(t.dispose(),t=null)},equals:t=>"threejs"===e.format&&"threejs"===t._json.format?e.geometry.id===t._json.geometry.id:EASEL.isEqual(e,t._json),geometry(){if(null==t&&"threejs"===e.format){const n=(new THREE.ObjectLoader).parseGeometries([e.geometry]);t=Object.values(n)[0],t.computeBoundingBox()}return null!=t?t.clone():null},bbox:()=>null!=t?t.boundingBox:null,center(){const e=this.bbox();if(null!=e){const t=new THREE.Vector3;return e.getCenter(t),t}return null},transform(t,n){const a=e.geometry.data.attributes.position.array.slice(),r=new THREE.Vector3;for(let e=0;e<a.length;e+=3)r.set(a[e],a[e+1],a[e+2]),r.applyMatrix4(t),r.z-=n,a[e]=r.x,a[e+1]=r.y,a[e+2]=r.z;return a},toolpaths(e,t,n,a){return[this.roughingPass(e.dpp,e.bitWidth,e.stepOver,n,a),this.finishingPass(t.bitWidth,t.stepOver,t.rasterAngle,a)]},roughingPass(t,n,r,o,s){if("threejs"!==e.format)return null;const i=o.safez,l=this.transform(s,o.z);return a.generate({vertices:l,dz:t,bitWidth:n,stepOver:r,safetyHeight:i,zBot:-o.z,zTop:0})},finishingPass(t,n,a,o,s){if("threejs"!==e.format)return null;const i=(new THREE.Matrix4).makeRotationZ(a||0);i.multiply(s);const l=this.transform(i,0);return r.generate({vertices:l,bitWidth:t,stepOver:n,material:o})}}}},function(e,t,n){const a=n(1136),r=n(44),o=n(45),s=n(98),i=n(99),l=function(){const e=function(e,n){let a=o();return e.map((({contours:e,z:r})=>{if(0===e.length)return{paths:o(),z:r};const s=e.map((e=>e.map((([e,t])=>({x:e,y:t}))))),i=t(s,!0);return a=a.union(i).expand(n/2),{paths:a,z:r}}))},t=function(e,t){t=t||!1;const n=[];let a=s.pathTree(e,0).map((e=>({node:e,depth:0})));for(;a.length>0;){const{node:{points:e,children:r},depth:o}=a.shift(),i=s.area(e)>0,l=o%2===1;i!==l||t?i!==l&&t&&e.reverse():e.reverse(),n.push(e),a=a.concat(r.map((e=>({node:e,depth:o+1}))))}return o.fromPointArrays(n)};return{generate:function({vertices:t,dz:n,bitWidth:s,stepOver:l,safetyHeight:c,zBot:p,zTop:u}){const d=s*l,h=u+c,[E,m]=a.alignFaces(t);p=Math.max(p,m.min.z);const S=a.slice(E,n,p,u-n),g=e(S,s),f=g[g.length-1].paths.expand(d).all().map((e=>e.points.reverse())),A=g.map((({paths:e,z:t})=>{const a=o.fromPointArrays(f.concat(e.all().map((e=>e.points)))),s=i(a,t,t-n,d).all();for(let n=s.length-1;n>0;n--){const e=s[n-1].lastPoint(),t=s[n].firstPoint();Math.hypot(e.x-t.x,e.y-t.y)<1.2*d||s.splice(n,0,r([{x:e.x,y:e.y,z:e.z},{x:e.x,y:e.y,z:h},{x:t.x,y:t.y,z:h},{x:t.x,y:t.y,z:t.z}]).withProps({rapid:!0}))}return o(s)}));for(let e=A.length-1;e>0;e--){const t=A[e-1].last().lastPoint(),n=A[e].first().firstPoint(),a=r([{x:t.x,y:t.y,z:t.z},{x:t.x,y:t.y,z:h},{x:n.x,y:n.y,z:h},{x:n.x,y:n.y,z:n.z}]).withProps({rapid:!0});A.splice(e,0,o([a]))}return A[0].add(...A.slice(1))},orientNestedPath:t}}();e.exports=l},function(e,t,n){const a=n(1137),{pointOnSegmentAtZ:r}=n(55),o=function(e,t,n){const a=u(n),r=u(t),o=[];for(let s=a;s>r;s=u(s-e))o.push(s);return o.push(r),o},s=function(e,t){let n=[];const r=[],o=t.slice();for(const s of e){for(;o.length>0&&o[0].zTop>s;)n.push(o.shift());const e=a(p+1);for(let t=n.length-1;t>=0;t--){const a=n[t];if(s<a.zBot){n.splice(t,1);continue}const r=l(a,s);if(2!==r.length)throw new Error("3d: face intersection failure");e.add(...r)}r.push({segments:e,z:s})}return r},i=function(e){return e.map((({segments:e,z:t})=>({contours:e.contours(),z:t})))},l=function(e,t){return[c(e.a,e.b,t),c(e.a,e.c,t),c(e.b,e.c,t)].filter((e=>null!=e))},c=function(e,t,n){if(e.z===t.z){if(e.z===n)throw new Error("3d: unexpected line on plane");return null}return e.z<n&&t.z<n||e.z>n&&t.z>n?null:r(e,t,n)},p=6,u=function(e){return h(h(e)+4e-7,p+1)},d=function(e,t){return new THREE.Vector3(h(e[t]),h(e[t+1]),h(e[t+2]))},h=function(e,t){return parseFloat(e.toFixed(null!=t?t:p))};e.exports={slice:function(e,t,n,a){const r=o(t,n,a),l=s(r,e);return i(l)},alignFaces:function(e){const t=[],n=new THREE.Box3,a=new THREE.Box3;for(let r=0;r<e.length;r+=9){const o=d(e,r),s=d(e,r+3),i=d(e,r+6);a.setFromPoints([o,s,i]),n.union(a);const l={a:o,b:s,c:i,zBot:a.min.z,zTop:a.max.z};t.push(l)}return t.sort(((e,t)=>t.zTop-e.zTop)),[t,n]},calcPlanes:o,cutSegments:s,buildContours:i,alignPlane:u}},function(e,t){const n=function([e,t,n],[a,r,o]){let s=e-a;return 0===s&&(s=t-r),0===s&&(s=n-o),0===s?0:s<0?-1:1};e.exports=function(e){const t=new Map,a=t=>parseFloat(t.toFixed(e)),r=({x:e,y:t,z:n})=>JSON.stringify([a(e),a(t),a(n)]),o=(e,n)=>{if(t.has(e)){const a=t.get(e);if(a.push(n),a.length>2)throw new Error(`3d: too many endpoints key=${e} ends=${a}`)}else t.set(e,[n])};return{add(e,t){const n=r(e),a=r(t);return n===a?null:(o(n,a),o(a,n),[JSON.parse(n),JSON.parse(a)])},contours(){const e=[];for(;t.size>0;){let[n,[a,r]]=t.entries().next().value;if(null==r)throw new Error(`3d: open starting contour first=${n} next=${a}`);const o=[JSON.parse(n)];t.delete(n);let s=n;do{if(null==a){if(null==r)break;a=r,s=n,r=null,o.reverse()}o.push(JSON.parse(a));const e=t.get(a);if(null==e){if(null==r)break;a=r,s=n,r=null,o.reverse();continue}const[i,l]=e;if(t.delete(a),s===i)s=a,a=l;else{if(s!==l)throw new Error(`3d: unmatched contour points pt0=${i} pt1=${l}`);s=a,a=i}}while(a!==r);if(null!=r)o.push(JSON.parse(r),o[0]),t.delete(r);else{const e=o[0],t=o[o.length-1],n=Math.hypot(e[0]-t[0],e[1]-t[1]);if(EASEL.isEqual(e,t)||!(n<1e-5))throw new Error(`3d: open slice segment start=${e} end=${t}`);o[o.length-1]=e}e.push(o)}return e},segments(){const e=new Set;for(const[a,r]of t){const t=JSON.parse(a);for(const a of r){let r=t,o=JSON.parse(a);1===n(r,o)&&(r=o,o=t),e.add(JSON.stringify([r,o]))}}return Array.from(e,(e=>JSON.parse(e))).sort(((e,t)=>{const a=n(e[0],t[0]);return 0!==a?a:n(e[1],t[1])}))}}}},function(e,t,n){const a=n(44),r=n(45),o={generate({vertices:e,bitWidth:t,stepOver:n,material:o}){const s=t*n,i=(new THREE.Box3).setFromArray(e),l=new THREE.Vector3(0,0,-1),c=new Array;for(let a=0;a<e.length;a+=9){const t=new THREE.Vector3(e[a+0],e[a+1],e[a+2]),n=new THREE.Vector3(e[a+3],e[a+4],e[a+5]),r=new THREE.Vector3(e[a+6],e[a+7],e[a+8]);THREE.Triangle.normal(t,n,r).z>=0&&c.push({a:t,b:n,c:r,bbox:(new THREE.Box3).setFromPoints([t,n,r])})}c.sort(((e,t)=>e.bbox.min.y-t.bbox.min.y));const p=[],u=s;let d=[];for(let a=i.min.y;a<=i.max.y;a+=u){for(d=d.filter((e=>a<=e.bbox.max.y));c.length>0&&!(a<c[0].bbox.min.y);)d.push(c.shift());const e=[];for(let t=i.min.x;t<=i.max.x;t+=u){let n={x:t,y:a,z:0};const r=new THREE.Ray(new THREE.Vector3(t,a,i.max.z+10),l);for(const e of d){if(e.bbox.max.x<t||t<e.bbox.min.x)continue;const a=r.intersectTriangle(e.a,e.b,e.c,!1);null!=a&&a.z>n.z&&(n=a)}e.push(n)}p.push(e)}let h=EASEL.merge(p);const E=t/2,m=Math.floor(E/u),S=[];for(let a=-m;a<=m;a++)for(let e=-m;e<=m;e++){const t=u*e,n=u*a,r=Math.hypot(t,n),o=r<E?Math.sqrt(E*E-r*r):-1/0;S.push({kx:e,ky:a,dz:o})}for(let a=0;a<h.length;a++)for(let e=0;e<h[a].length;e++){const t=h[a][e],n={x:t.x,y:t.y,z:t.z+E};for(const r of S){if(0==r.kx&&0==r.ky)continue;const o=a+r.kx,s=e+r.ky;if(o<0||s<0||o>=p.length||s>=p[a].length)continue;const i=p[o][s];i.z+r.dz<=n.z||(n.z=i.z+r.dz,t.z=n.z-E)}}return h=h.map(((e,t)=>{t%2===1&&e.reverse();const n=[];for(;e.length>0;){const t=e.findIndex((e=>0!==e.z));if(-1===t)break;e.splice(0,t-1);let r=e.findIndex(((e,t)=>t>0&&0===e.z));-1===r&&(r=e.length);const s=e.splice(0,r+1).map((e=>({x:e.x,y:e.y,z:e.z-o.z})));n.push(a(s))}for(let r=n.length-1;r>0;r--){const e=n[r-1].lastPoint(),t=n[r].firstPoint();n.splice(r,0,a([{x:e.x,y:e.y,z:e.z},{x:e.x,y:e.y,z:.1-o.z},{x:t.x,y:t.y,z:.1-o.z},{x:t.x,y:t.y,z:t.z}]).withProps({rapid:!0}))}return n})).flat(),r(h)}};e.exports=o},function(e,t,n){n(1140),n(1141),n(1142),n(1143)},function(e,t){EASEL.fontManager=function(){const e={},t=(t,n)=>new Promise((function(a){if(!e[t]){let r=!1,o=!1;const s=function(){r&&o&&a()};return function(e,t){let n=document.createElement("span");n.innerHTML="giItT1WQy@!-/#";const a="serif";n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontFamily=a,n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",document.body.appendChild(n);const r=n.offsetWidth;n.style.fontFamily=`'${e}', serif`;var o=function(){n&&n.offsetWidth!==r?(n.parentNode.removeChild(n),n=null,t()):setTimeout(o,200)};setTimeout(o,1)}(t,(function(){r=!0,s()})),opentype.load(n,(function(n,a){if(null!=n){const e=`Failed to load font ${t}: ${n}`;console.log(e),null!=EASEL.stats&&EASEL.stats.trackEventOnce("Failed to load font",{name:t,message:n})}e[t]=EASEL.fontAdapters.opentype(a,t),o=!0,s()}))}a()}));return{load:t,loadExternalFont:function({fontFamily:e,stylesheetURL:n,opentypePath:a}){return function(e){const t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,t.media="all",document.head.appendChild(t)}(n),t(e,a)},getFont:t=>e[t]}}()},function(e,t){EASEL.fonts={Homestead:{displayName:"Homestead",weight:"normal",opentypePath:EASEL.assets.fonts.homestead,baselineOffsetFraction:.28},Bemio:{displayName:"Bemio",weight:"normal",opentypePath:EASEL.assets.fonts.bemio,baselineOffsetFraction:.16},BlanchCondensed:{displayName:"Blanch",weight:"normal",opentypePath:EASEL.assets.fonts.blanch,baselineOffsetFraction:.27},Lavanderia_Sturdy:{displayName:"Lavanderia",weight:"normal",opentypePath:EASEL.assets.fonts.lavanderia,baselineOffsetFraction:.3},OCRA:{displayName:"OCR A",weight:"normal",opentypePath:EASEL.assets.fonts.ocra,baselineOffsetFraction:.25},Bebas:{displayName:"Bebas",weight:"normal",opentypePath:EASEL.assets.fonts.bebas,baselineOffsetFraction:.1},Track:{displayName:"Track",weight:"normal",opentypePath:EASEL.assets.fonts.track,baselineOffsetFraction:.15},Josefin:{displayName:"Josefin",weight:"normal",opentypePath:EASEL.assets.fonts.josefin,baselineOffsetFraction:.15},Cinzel:{displayName:"Cinzel",weight:"normal",opentypePath:EASEL.assets.fonts.cinzel,baselineOffsetFraction:.25},Montserrat:{displayName:"Montserrat",weight:"normal",opentypePath:EASEL.assets.fonts.montserrat,baselineOffsetFraction:.2},Amatic_SC:{displayName:"Amatic SC",weight:"normal",opentypePath:EASEL.assets.fonts.amaticsc,baselineOffsetFraction:.25},Code_Pro:{displayName:"Code Pro",weight:"normal",opentypePath:EASEL.assets.fonts.codepro,baselineOffsetFraction:.25},Intro:{displayName:"Intro",weight:"normal",opentypePath:EASEL.assets.fonts.intro,baselineOffsetFraction:.25},Baskerville:{displayName:"Baskerville",weight:"normal",opentypePath:EASEL.assets.fonts.baskerville,baselineOffsetFraction:.25},Bangers:{displayName:"Bangers",weight:"normal",opentypePath:EASEL.assets.fonts.bangers,baselineOffsetFraction:.25}}},function(e,t,n){const a=n(92);null==EASEL.fontAdapters&&(EASEL.fontAdapters={}),EASEL.fontAdapters.opentype=function(e,t){return{getWidth:function(n,a){null==a&&(a=1);try{let t=0,r=null;for(let a of n){const n=e.charToGlyph(a);t+=n.advanceWidth,r&&(t+=e.getKerningValue(r,n)),r=n}return t*a/e.unitsPerEm}catch(r){return window.onerror(r.toString(),`opentype font adapter (${t})`,0,0,r),0}},getPathPoints:function(n,r,o,s){null==s&&(s=1);try{const{commands:t}=e.getPath(n,r,o,s),i=(e=>e.map((e=>{let{type:t,x1:n,y1:a,x2:r,y2:o,x:s,y:i}=e;return[t,n,a,r,o,s,i].filter((e=>null!=e))})))(t);return a(i)}catch(i){return window.onerror(i.toString(),`opentype font adapter (${t})`,0,0,i),a([])}}}}},function(e,t,n){const a=n(18);EASEL.googleFontManager=function(){const e={},t=a((()=>Promise.resolve($.ajax({url:"/google_fonts.json"})).then((e=>e.items))));return{loadFont:n=>t().then((function(t){if(null!=e[n])return e[n];for(var a of Array.from(t))if(a.family===n)return e[n]=new Promise((function(t,r){const o=a.files.regular||a.files[400]||a.files[300];if(o){const a=(s=o).startsWith("http://")?s.substring(5):s,i=`https://fonts.googleapis.com/css?family=${n}`;return EASEL.fontManager.loadExternalFont({fontFamily:n,stylesheetURL:i,opentypePath:a}).then((()=>(delete e[n],t({opentypePath:a,baselineOffsetFraction:.25,displayName:n})))).catch((()=>r()))}return r();var s}));return Promise.reject(`Cannot find font family ${n}`)}))}}()},function(e,t,n){n(1145),n(1146),n(1147),n(1148),n(1149),n(1150),n(1151),n(1152),n(1153),n(1154),n(1155),n(1156),n(1157),n(1158),n(1159),n(1160),n(1161),n(1162),n(1165),n(1166),n(1167),n(1168),n(1169),n(1170),n(1171),n(1172),n(1173),n(1174),n(1175),n(1176),n(1177)},function(e,t){EASEL.loader.group("init").register("access grants",(function(e){EASEL.stats.setProperties({"Access Grants":EASEL.ACCESS_GRANTS.filter((e=>null!=e)).map((e=>`<${e}>`)).join(",")}),e()}))},function(e,t,n){const a=n(337);EASEL.loader.group("init").register("bits",((e,t)=>a.loadBits().fail((function(e,n,a){t("There was a problem loading the milling bits list."),console.error(a,e)})).done((function(t){EASEL.store.dispatch(EASEL.bitActionCreators.setBits(t)),e()}))))},function(e,t){EASEL.loader.group("project-list").register("boot storage",(function(e){EASEL.machineAPI.areSettingsSaved()&&EASEL.userActions.noteLoadedMachineSettings(EASEL.store.dispatch),EASEL.webAPIUtils.loadMachine(),EASEL.machineSettingsSelectors.isMachineSetupComplete(EASEL.store.getState())&&0===EASEL.userSelectors.getMachineProfiles(EASEL.store.getState()).length&&EASEL.machineAPI.createProfile().then((e=>{EASEL.store.dispatch(EASEL.userActionCreators.addMachineProfile(e)),EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setProfileId(e.id))}));const t="reduxStore",n=EASEL.redux.composeSelectors({unit:EASEL.unitSelectors.getPreferredUnit,projectListView:e=>e.projects.view});EASEL.store.subscribeWithSelector(n,(e=>localStorage.setItem(t,JSON.stringify({redux:e}))));let{unit:a,projectListView:r}=JSON.parse(localStorage.getItem(t)||"{}").redux||{};EASEL.hasAccessGrant("custom_project_defaults")||("object"===typeof a&&(a=null!=a?a.unitPreference:void 0),null!=a&&EASEL.store.dispatch(EASEL.unitActionCreators.setUnit(a))),null!=r&&EASEL.store.dispatch(EASEL.projectListActionCreators.setProjectListView(r)),e()}))},function(e,t,n){const a=n(97);EASEL.loader.group("init").register("braintree",(e=>a.loadScripts("https://js.braintreegateway.com/js/braintree-2.32.1.min.js").then(e).catch((function(){console.error("There was a problem loading the Braintree library."),e()}))))},function(e,t){EASEL.loader.group("init").register("clipboard",(function(e){const t="easel-clipboard",n={write:e=>{window.localStorage.setItem(t,JSON.stringify(e))},read:()=>{let e=window.localStorage.getItem(t);if(e)return JSON.parse(e)}},a=EASEL.clipboard(n);EASEL.mainMenu.register("copy",a.copy),EASEL.keyboardController.register({keyboard:"default",command:a.copy,key:EASEL.keys.c,meta:!0}),EASEL.mainMenu.register("cut",a.cut),EASEL.keyboardController.register({keyboard:"default",command:a.cut,key:EASEL.keys.x,meta:!0}),EASEL.mainMenu.register("paste",a.paste),EASEL.keyboardController.register({keyboard:"default",command:a.paste,key:EASEL.keys.v,meta:!0});const r=function(){$(".clipboard-contents").toggle(a.hasContents())};$(window).focus(r),a.onCopy(r),e()}))},function(e,t){EASEL.loader.group("init").register("components",(function(e){const t={"EASEL.component":EASEL.component,"EASEL.component.DOM":EASEL.component.DOM,"EASEL.component.utils":EASEL.component.utils};for(let n in t){const e=t[n];for(let t in e){const a=e[t];"function"===typeof a&&(null==a.displayName&&(a.displayName=`${n}.${t}`),null!=a.unconnected&&null==a.unconnected.displayName&&(a.unconnected.displayName=`${n}.${t}'s unconnected child`))}}e()}))},function(e,t,n){const a=n(96);EASEL.loader.group("init").register("cutSettings",(function(e){if(EASEL.USER.loggedIn)return a.loadCutSettings().fail((function(t,n,a){console.error(a,t),e()})).done((function(t){EASEL.store.dispatch(EASEL.cutSettingsActionCreators.setCutSettings(t)),e()}));e()}))},function(e,t){EASEL.loader.group("post-launch").register("design elements",(e=>EASEL.webAPIUtils.loadDesignElements().fail((function(e,t,n){console.error("There was a problem loading the design elements."),console.error(n,e)})).always((()=>e()))))},function(e,t,n){const a=n(36);EASEL.loader.group("post-launch").register("pro-features",(function(e){!function(){const e=function(){const e=EASEL.store.getState();if(e){const n=EASEL.proSelectors.getInUseProFeatures(e);return t(n)}};var t=function(t){if(t.length>0){const r={};return t.map((e=>`${e.label} last use`)).forEach((e=>{r[e]=a.currentMidnightUTC()})),EASEL.userSelectors.isLoggedInUser(EASEL.store.getState())&&EASEL.stats.trackEventOnce(EASEL.events.usedProFeature,{features:t.map((e=>e.label))},r),EASEL.volumeStore.removeChangeListener(e),n()}};EASEL.volumeStore.addChangeListener(e);var n=EASEL.store.subscribeWithSelector(EASEL.proSelectors.getInUseProFeatures,t);e()}(),e()}))},function(e,t,n){const a=n(97);EASEL.loader.group("init").register("filestack",(e=>a.loadScripts("https://static.filestackapi.com/v3/filestack.js").catch((()=>{console.error("There was a problem loading FileStack library. This may be due to restrictions on your network. If this is the case we recommend that your network administrator whitelist the following domains: .filestackapi.com, .filestack.com, *.filestackcontent.com, filepicker.io")})).finally(e)))},function(e,t){EASEL.loader.group("init").register("firmware versions",(e=>$.ajax({url:"/firmware_versions/supported.json",dataType:"json",cache:!1}).done((function(t){const n={},a={},r={};for(let{version_number:e,machine_type:o,hex_file_link:s,current:i}of t)n[o]||(n[o]=[]),n[o].push(e),i&&(a[o]=s,r[o]=e);EASEL.store.dispatch(EASEL.firmwareVersionActionCreators.setSupportedVersions(n,a,r)),e()}))))},function(e,t){EASEL.loader.group("init").register("features",((e,t)=>EASEL.webAPIUtils.loadFeatures().then((function(t){EASEL.store.dispatch(EASEL.featuresActionCreators.loadedFeatures(t)),e()})).catch((function(e,n,a){t("There was a problem loading features list."),console.error(a,e)}))))},function(e,t){EASEL.loader.group("init").register("font library",(e=>EASEL.webAPIUtils.loadFontLibrary().then((()=>e())).catch((function(t){console.log("There was a problem loading the font library: "+t),EASEL.oops("Easel was unable to load the font library. If this issue persists please contact help@inventables.com."),e()}))))},function(e,t){EASEL.loader.group("post-launch").register("fonts",(function(e,t){const n=[];EASEL.store.dispatch(EASEL.fontActionCreators.setGroupTotal({group:"toolbar",total:Object.keys(EASEL.fonts).length}));for(let a in EASEL.fonts){const e=EASEL.fonts[a];if(e.loaded)EASEL.store.dispatch(EASEL.fontActionCreators.incrementGroupLoaded({group:"toolbar"})),n.push(Promise.resolve({name:a,font:e}));else{const t=EASEL.fontManager.load(a,e.opentypePath).then((function(){return EASEL.store.dispatch(EASEL.fontActionCreators.incrementGroupLoaded({group:"toolbar"})),{name:a,font:e}}));n.push(t)}}return Promise.all(n).then((function(t){const n=t.map((e=>e.name));EASEL.store.dispatch(EASEL.fontActionCreators.setFontData(t)),EASEL.store.dispatch(EASEL.fontActionCreators.addFontsToToolbar(n)),e()})).catch((()=>t("There was a problem loading the default Easel fonts.")))}))},function(e,t){EASEL.loader.group("post-launch").register("gcode-volumes",(function(e){let t=EASEL.workpieceStore.getActiveID(),n=!1;const a=function(){const e=EASEL.workpieceStore.getActiveID();t!=e&&(t=e,n=!0,requestAnimationFrame((()=>n=!1))),n||EASEL.store.dispatch(EASEL.internalGcodeActionCreators.clearGcodePasses())},r=[EASEL.volumeStore,EASEL.materialStore,EASEL.jobSettingsStore];for(const s of r)s.addChangeListener(a);const o=[EASEL.unitSelectors.getUnitState,EASEL.bitSelectors.bitParams,EASEL.machineSettingsSelectors.getMachineType,EASEL.machineSettingsSelectors.getWorkArea,EASEL.tileSelectors.getSelectedTile,EASEL.tileSelectors.getTileOverlapDistance,EASEL.userSelectors.getStartStopSafetyHeight];for(const s of o)EASEL.store.subscribeWithSelector(s,a);EASEL.gcodeForVolumes.onFinish((e=>requestAnimationFrame((function(){EASEL.store.dispatch(EASEL.internalGcodeActionCreators.setGcodePasses(e)),EASEL.store.dispatch(EASEL.previewActionCreators.setToolpathsGenerated(!0))})))),EASEL.gcodeForMeshes.onFinish((e=>requestAnimationFrame((function(){EASEL.store.dispatch(EASEL.internalGcodeActionCreators.setGcodePasses(e)),EASEL.store.dispatch(EASEL.previewActionCreators.setToolpathsGenerated(!0))})))),e()}))},function(e,t){EASEL.loader.group("init").register("page_tracking",(function(e){EASEL.googleAnalytics.init(),EASEL.stats.trackPage(),e()}))},function(e,t){EASEL.loader.group("init").register("keyboard bindings",(function(e){EASEL.keyboardController.use("default"),$("body").keydown(EASEL.keyboardController.handle),$("body").keypress(EASEL.keyboardController.handleChar),e()}))},function(e,t,n){const a=n(1163),r=n(1164);EASEL.loader.group("init").register("Easel Driver versions",(e=>$.ajax({url:"/sender_versions/supported.json",dataType:"json",cache:!1}).done((function(e){const t={};for(let n of Array.from(e))t[n.version_number]={current:n.current,deprecated:n.deprecated,macInstallerURL:n.mac_link,windowsInstallerURL:n.windows_link,linuxInstallerURL:n.linux_link};EASEL.localSenderVersionActions.setSupportedVersions(t)})).always((function(){const t=EASEL.stateMachine("machine").create({localSender:EASEL.localSender});EASEL.machineStateActions.reportConnectionState(t.getState()),t.addChangeListener((()=>EASEL.machineStateActions.reportConnectionState(t.getState()))),EASEL.localSender.onEvent(t.triggerEvent),EASEL.localSender.onEvent(EASEL.walkthroughManager.triggerEvent),EASEL.localSender.onEvent(r.triggerEvent),EASEL.localSender.onEvent(EASEL.serialNumberTracker.triggerEvent),EASEL.localSender.onEvent(a.triggerEvent),EASEL.localSender.onEvent((function(e,t,n){switch(e){case"portsListed":EASEL.machineStateActions.reportAvailablePorts(t);break;case"localSenderConnected":{EASEL.localSenderVersionActions.setRunningVersionNumber(t),EASEL.connectionModalManager.hideDriverNotInstalledModal();const e=EASEL.localSenderVersionStore.getVersionInfo(t);null!=e&&(EASEL.connectionModalManager.hideDriverUnsupportedModal(),e.deprecated?EASEL.navbarPrompt.show("A new Easel Driver is available! Learn more\u2026",{action(){EASEL.connectionModalManager.showDriverDeprecatedModal()}}):(EASEL.navbarPrompt.hide(),EASEL.connectionModalManager.hideDriverDeprecatedModal()));break}case"receivedLocalSenderAbilities":EASEL.localSenderVersionActions.setRunningVersionAbilities(t);break;case"localSenderDisconnected":EASEL.localSenderVersionActions.disconnected();break;case"receivedConnectionStatus":null!=t&&EASEL.connectionModalManager.hideMachineNotFoundModal();break;case"receivedProbeStatus":EASEL.machineStateActions.reportProbeStatus(t);break;case"receivedProbeResult":EASEL.machineStateActions.reportProbeResult(t);break;case"receivedSpindleCurrent":EASEL.machineStateActions.reportSpindleCurrent(t);break;case"machineSettings":EASEL.machineStateActions.reportSetting(t);break;case"grblState":EASEL.machineStateActions.reportState(t,n);break;case"grblPosition":EASEL.machineStateActions.reportPosition(t);break;case"grblError":EASEL.machineStateActions.logEvent("error",t);break;case"grblAlarm":EASEL.machineStateActions.logEvent("alarm",t);break;case"grblOverCurrent":{const e="Oops! We stopped your carve because the electrical current flowing to your spindle reached unsafe levels. Please double check your cut settings for the material you are using. If you have questions or if this issue persists, please contact the Inventables Customer Success team at help@inventables.com or by phone at 312-775-7009.";EASEL.alert("Spindle overloaded!",e);break}case"machineRunning":case"machinePaused":EASEL.store.dispatch(EASEL.jobStatusActionCreators.setProjectName(t)),EASEL.store.dispatch(EASEL.jobStatusActionCreators.setPercentComplete(n));break;case"receivedOverrides":EASEL.store.dispatch(EASEL.jobStatusActionCreators.setOverrides(t));break;case"startingFirmwareUpload":EASEL.machineStateActions.startUploadingFirmware();break;case"stoppingFirmwareUpload":t.success?(EASEL.stats.trackEvent("Firmware Upload - Success",t),EASEL.stats.trackEventOnServer("Firmware Upload - Success",t),setTimeout((function(){EASEL.machineStateActions.stopUploadingFirmware(),EASEL.machineStateActions.refreshSettings(),EASEL.localSender.getMachineSettings()}),1e3)):(EASEL.stats.trackEvent("Firmware Upload - Error",t),EASEL.stats.trackEventOnServer("Firmware Upload - Error",t),EASEL.machineStateActions.stopUploadingFirmware(),EASEL.alert("Update failed","The firmware update failed."));break;case"receiveFirmwareProgress":EASEL.machineStateActions.receiveFirmwareProgress(t)}})),e()}))))},function(e,t){const n={triggerEvent:function(e,t){switch(e){case"receivedMachineBuildInfo":!function(e){const t=e.match(/^\[(.+)\]$/);if(t){const n=t[1].split(":");let a=null;for(let e of n)if(e.match(/^\d+-\d+$/)){a=e;break}const r=EASEL.machineStateStore.getSerialNumber();EASEL.machineStateActions.receiveSerialNumber(a),EASEL.machineSettingsSelectors.isCarvey(EASEL.store.getState())&&r!==a&&EASEL.webAPIUtils.loadZAxisOffset(a),EASEL.machineStateActions.receiveBuildInfoString(e)}}(t)}}};e.exports=n},function(e,t){const n=function(){const e={};return e.triggerEvent=function(e,t){let n=null;switch(e){case"grblError":n="Grbl Error";break;case"grblAlarm":n="Grbl Alarm";break;default:n=null}if(null!=n)return EASEL.stats.trackEventSometimes(n,{"Serial number":EASEL.machineStateStore.getSerialNumber(),message:t})},e}();e.exports=n},function(e,t){EASEL.loader.group("init").register("location hash",(function(e){const{hash:t}=window.location;if(t){switch(t){case"#projects":EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalProjectsTab());break;case"#account":EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalAccountTab());break;case"#options":EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalOptionsTab());break;case"#learn":EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalLearnTab())}history.replaceState("",document.title,window.location.pathname+window.location.search)}e()}))},function(e,t){EASEL.loader.group("init").register("materials",((e,t)=>EASEL.webAPIUtils.loadMaterials().fail((function(e,n,a){t("There was a problem loading the material list."),console.error(a,e)})).done((()=>e()))))},function(e,t){EASEL.loader.group("init").register("panel manager",(e=>{const t=()=>{EASEL.store.dispatch(EASEL.viewportActionCreators.setWindowSize({width:window.innerWidth,height:window.innerHeight}))};window.onresize=t,t();const n=EASEL.storageMixin("workpiece-storage",{});let a=!n.get()||n.get().showing;EASEL.store.dispatch(EASEL.viewportActionCreators.setWorkpiecesVisible(a)),EASEL.store.subscribeWithSelector(EASEL.viewportSelectors.getWorkpiecesVisible,(e=>{n.set({showing:e})})),e()}))},function(e,t){EASEL.loader.group("init").register("post processors",(function(e){EASEL.shapeokoPostProcessor.init(EASEL.postProcessor),EASEL.gCarvinPostProcessor.init(EASEL.postProcessor),e()}))},function(e,t){EASEL.loader.group("project-list").register("projects",(function(e){let t=EASEL.projectMetadataStore.getName();EASEL.projectMetadataStore.addChangeListener((function(){const e=EASEL.projectMetadataStore.getName();e!==t&&(document.title=e?`Easel - ${e}`:"Easel",t=e)})),EASEL.USER.loggedIn&&EASEL.labelsAPI.index().then((e=>{EASEL.labelActions.setUserLabels(e.labels)}));EASEL.flux.events.addListener("create-project",(function(){EASEL.store.dispatch(EASEL.userModalActionCreators.hideUserModal()),EASEL.projectAPI.create().done((function(e){const t=null!=e?e.link_token:void 0;EASEL.projectManager.appropriatelyLoadProject(t)})).fail((()=>EASEL.oops("Something went wrong trying to create a project."))),EASEL.stats.trackEvent("New Project")})),EASEL.flux.events.addListener("open-project",(function(e){EASEL.store.dispatch(EASEL.userModalActionCreators.hideUserModal()),EASEL.projectManager.appropriatelyLoadProject(e)})),null!=EASEL.projectLinkToken?e():EASEL.projectListActionCreators.loadPage({offset:0,query:"",clear:!1},EASEL.store.dispatch).done((function(){const t=Date.now(),n=EASEL.store.getState(),a=EASEL.userSelectors.unactivatedEaselProProductKeys(n)&&EASEL.userSelectors.unactivatedEaselProProductKeys(n)[0],r=EASEL.userSelectors.isProSubscriber(t,n),o=EASEL.userSelectors.activatedEaselProProductKey(n)&&EASEL.userSelectors.activatedEaselProProductKey(n).activated_at;serverInfo&&serverInfo.newUser?(EASEL.stats.trackEvent(EASEL.events.newUser),EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalLearnTab())):r||!o&&!a?EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalProjectsTab()):EASEL.store.dispatch(EASEL.userModalActionCreators.showUserModalAccountTab()),e()}))}))},function(e,t){EASEL.loader.group("post-init").register("repeat-carve-disabler",(function(e){const t=()=>EASEL.store.dispatch(EASEL.walkthroughActionCreators.setHasCompletedCarve(!1));EASEL.jobSettingsStore.addChangeListener(t),EASEL.volumeStore.addChangeListener(t),EASEL.materialStore.addChangeListener(t),EASEL.store.subscribeWithSelector(EASEL.machineSettingsSelectors.getWorkArea,t),EASEL.store.subscribeWithSelector(EASEL.machineSettingsSelectors.getMachineType,t),EASEL.store.subscribeWithSelector(EASEL.bitSelectors.bitParams,t),EASEL.store.subscribeWithSelector(EASEL.externalGcodeSelectors.getGcode,t),e()}))},function(e,t){EASEL.loader.group("post-init").register("analytics",(function(e){EASEL.stats.load(),e()}))},function(e,t,n){const a=n(344);EASEL.loader.group("init").register("toolpath progress callbacks",(function(e){EASEL.gcodeForVolumes.onBeginPass((function(e){a.initialize(),a.setTotal(1),"all"===e?a.setText("Simulating toolpaths"):a.setText(`Simulating ${e} toolpaths`)})),EASEL.gcodeForVolumes.onUpdate((e=>a.setValue(e))),EASEL.gcodeForVolumes.onFinish((()=>requestAnimationFrame((()=>a.close())))),e()}))},function(e,t){EASEL.loader.group("init").register("user",(function(e){const t=EASEL.redux.composeSelectors({"Easel Pro User":e=>EASEL.userSelectors.isProEnabled(Date.now(),e),"Easel Pro Status":e=>EASEL.userSelectors.getSubscriptionStatus(e)});EASEL.store.subscribeWithSelector(t,EASEL.stats.setProperties),EASEL.USER.loggedIn?EASEL.easelProActions.getEaselProInfoWithoutSubscription(EASEL.store.dispatch,{done:e}):e()}))},function(e,t){EASEL.loader.group("post-launch").register("user fonts",(e=>EASEL.webAPIUtils.loadUserFonts().then((function(t){const n=t.filter((e=>!e.success)).map((e=>e.name));n.length>0&&EASEL.store.dispatch(EASEL.fontActionCreators.setFontErrors({errorType:"custom_fonts",fontNames:n})),e()})).catch((function(t){console.log("There was a problem loading custom user fonts: "+t),e()}))))},function(e,t){EASEL.loader.group("init").register("user notifications",(function(e){EASEL.USER.loggedIn&&EASEL.webAPIUtils.loadUserNotifications(),e()}))},function(e,t,n){const a=n(27);EASEL.loader.group("init").register("project-mismatch",(function(e){EASEL.store.subscribeWithSelector(EASEL.saveStatusSelectors.getError,(function(e){e===a.saveVersionMismatchError&&(EASEL.stats.trackEventOnServer(EASEL.events.saveVersionMismatchError,{"Link Token":EASEL.projectMetadataStore.getLinkToken()}),EASEL.alert("Project out of date","This project has been modified by another instance of Easel. If you wish to keep the changes in this window, you can make a copy.",[{text:"Close"},{text:"Make a copy",action:()=>EASEL.projectActions.duplicate()}]))})),e()}))},function(e,t){EASEL.loader.group("init").register("workpieces",(function(e){const t=EASEL.thumbnailRenderer({height:250,width:322.22222222222223,passedVolumes:null,material:null}),n=EASEL.debounce((()=>setTimeout((function(){const e=t.render();if(e){let t=EASEL.workpieceStore.getActiveID();t&&EASEL.store.dispatch(EASEL.workpieceActionCreators.setWorkpieceThumbnail(t,e.getElement().toDataURL("image/jpeg",.8)))}}),0)),100);EASEL.editorStore.addChangeListener(n),EASEL.volumeStore.addChangeListener(n),EASEL.materialStore.addChangeListener(n),EASEL.store.subscribeWithSelector(EASEL.machineSettingsSelectors.getWorkArea,n),EASEL.store.subscribeWithSelector(EASEL.unitSelectors.getUnitState,n),EASEL.store.subscribeWithSelector(EASEL.bitSelectors.bitParams,n),EASEL.store.subscribeWithSelector(EASEL.externalGcodeSelectors.getGcode,n),e()}))},function(e,t,n){n(346),n(347),n(348),n(349),n(350),n(1179),n(351),n(1180),n(1181),n(352),n(1182),n(353),n(354),n(1183),n(1184),n(1185),n(1186),n(1187),n(1188),n(1189),n(1190),n(1191),n(1192),n(1193),n(1194),n(1195)},function(e,t){null==EASEL.controllers&&(EASEL.controllers={}),EASEL.controllers.grbl_xcp_57600_baud={name:"GRBL 1.1h (XCP, 57600 baud) Config",baud:57600,separator:"\r\n",readyResponses:["Grbl 1.1h-XCP"],successResponse:"ok",realTimeCommands:["pause","resume","flush","status","resetFeedRate","increaseFeedRate","decreaseFeedRate","resetSpindleSpeed","increaseSpindleSpeed","decreaseSpindleSpeed"],gcode:{flush:"\x18",home:"$H",resetFeedRate:"\x90",increaseFeedRate:"\x91",decreaseFeedRate:"\x92",resetSpindleSpeed:"\x99",increaseSpindleSpeed:"\x9a",decreaseSpindleSpeed:"\x9b",liftToSafeHeight:"G20 G90 Z0.25",lockMotors:"$1=255\nG91 X0 Y0",park:"G20 G90 G0 X0 Y0",pause:"!",recallCoordinateSystem:"G54",readSerialNumber:"$I",resume:"~",saveOrigin:"G10 L20 P0 X0 Y0 Z0",saveXYorigin:"G10 L20 P0 X0 Y0",saveZorigin:"G10 L20 P0 Z0",settings:"$$",spindleOff:"M5",spindleOn:"M3",status:"?",unlock:"$X",unlockMotors:"$1=0\nG91 X0 Y0",zProbe:"G21 G38.2 Z-100 F80"},firmwareUpload:{avrDevice:"atmega2560",programmer:"wiring",baudRate:115200,preReset:!1},overrides:{feedRate:{minimumOverride:10,maximumOverride:200,overrideIncrement:10}}}},function(e,t,n){const a=n(16);EASEL.gcodeForVolumes=function(){const e=EASEL.subscriber(),t=EASEL.subscriber(),n=EASEL.subscriber(),r=EASEL.subscriber(),o=EASEL.subscriber(),s=function(e){let t,n,r;const o=EASEL.store.getState(),s="detail"===e?EASEL.bitSelectors.detailBit(o):EASEL.bitSelectors.bit(o),i="detail"===e||"all"===e?{fill:"fill",outline:"outline",drill:"drill"}:{fill:"fill"},l=EASEL.bit(EASEL.bitSelectors.bit(o)).inchWidth();let c=l/2;s.type===a.v&&(c=l/8);let p=EASEL.jobSettingsStore.settings();p=EASEL.merge(p,{volumes:EASEL.volumeStore.getVolumes(),passType:e,materialThickness:EASEL.materialStore.getCurrentDepth(),cutTypes:i,preferredUnit:EASEL.unitSelectors.getPreferredUnit(o),retractHeight:c}),"detail"===p.passType?(({fillAngle:t,rampingAngle:r}=p.detailBit),n=EASEL.utility.jobSettingsCalculator(EASEL.jobSettingsConstants.bitKeys.detailBit),p=EASEL.merge(p,n.getSettings()),p.useCustom=p.detailBit.useCustom):(({fillAngle:t,rampingAngle:r}=p.bit),n=EASEL.utility.jobSettingsCalculator(EASEL.jobSettingsConstants.bitKeys.bit),p=EASEL.merge(p,n.getSettings()),p.useCustom=p.bit.useCustom),EASEL.bitSelectors.useDetailBit(o)&&(p.roughingDepthPerPass=p.bit.depthPerPass),delete p.bit,delete p.detailBit,p.bit=EASEL.bitSelectors.bit(o),p.detailBit=EASEL.bitSelectors.detailBit(o),p.strokeBit=EASEL.bitSelectors.strokeBit(o),p.useDetailBit=null!=EASEL.bitSelectors.useDetailBit(o)&&EASEL.bitSelectors.useDetailBit(o);const u={jobSettings:p,materialSize:EASEL.materialStore.getActiveMaterial().dimensions,machineProfileId:EASEL.machineSettingsSelectors.getMachineProfileId(o)};return EASEL.tileSelectors.isTileSelected(o)&&(u.tile=EASEL.tileSelectors.getSelectedTile(o)),null!=t?(u.fillingMethod="raster",u.fillingDirection=t*Math.PI/180):u.fillingMethod="offset",null!=r&&(u.rampingAngle=r*Math.PI/180),u},i=function(e,a){return t.notify(a),Promise.resolve().then((function(){const t=s(a),{jobSettings:o,tile:i,machineProfileId:l,rampingAngle:c}=t;return EASEL.toolpathsWorker.generateToolpaths(e,t,n.notify).then((function(e){const t=EASEL.store.getState(),n=EASEL.machineSettingsSelectors.isCarvey(t)?{x:20/25.4,y:20/25.4,z:20/25.4}:{x:0,y:0,z:EASEL.userSelectors.getOriginSafetyHeight(EASEL.jobSettingsStore.settings(),t)},a=EASEL.userSelectors.getRapidRetractsEnabled(t),r=Math.max(o.volumes.map((e=>e.cut.additionalDepthAmount||0)))+o.materialThickness,s=EASEL.toolpathProcessor.process(e,n,o.feedRate,o.plungeRate,r,a);return EASEL.hasAccessGrant("pair_programming_exercise")?s.then((t=>EASEL.merge(t,{paths:e}))):s})).then((e=>{console.log(`Generated gcode: estimated ${e.timeEstimate.toFixed(2)} minutes`);const t=EASEL.merge(e,{jobSettings:o,tile:i?i.explode():null,machineProfileId:l,rampingAngle:c});return r.notify(t),t}))}))};return{process:function({style:t,done:n,error:r}){"function"!=typeof r&&(r=()=>{}),e.notify();let s="layer_by_layer";const l=EASEL.store.getState();(EASEL.bitSelectors.bit(l).type===a.v||EASEL.bitSelectors.useDetailBit(l)&&EASEL.bitSelectors.detailBit(l).type===a.v)&&(s="v_carving"),"all"===t&&EASEL.bitSelectors.useDetailBit(l)?i(s,"roughing").then((e=>i(s,"detail").then((function(t){return o.notify([e,t]),n(e,t)})))).catch((function(e){return o.notify(),r(e)})):i(s,t).then((function(e){return o.notify([e]),n(e)})).catch((function(e){return o.notify(),r(e)}))},onBegin:e.subscribe,onBeginPass:t.subscribe,onUpdate:n.subscribe,onFinishPass:r.subscribe,onFinish:o.subscribe,getParams:s}}()},function(e,t){EASEL.gcodeForMeshes=function(){const e=EASEL.subscriber(),t=EASEL.subscriber(),n=EASEL.subscriber(),a=EASEL.subscriber(),r=EASEL.subscriber(),o=function(e,n,r){return t.notify(r),Promise.resolve(e).then((function(e){const t=function(e){const t=EASEL.store.getState(),n=EASEL.threeDPrototypeSelectors.getMesh(t);return{jobSettings:{passType:e},mesh:EASEL.mesh(n)}}(r),{material:n,matrix:o}=e,{mesh:s,jobSettings:i}=t,l="roughing"==r?e.roughing:e.finishing,c="roughing"==r?s.roughingPass(l.dpp,l.bitWidth,l.stepOver,n,o):s.finishingPass(l.bitWidth,l.stepOver,l.rasterAngle,n,o);return EASEL.toolpathProcessor.process(c,{x:0,y:0,z:1},l.feed,l.plunge,n.z,!0).then((e=>{console.log(`Generated gcode: estimated ${e.timeEstimate.toFixed(2)} minutes`);const t=EASEL.merge(e,{jobSettings:i});return a.notify(t),t}))}))};return{process:function({cutParams:t,style:n,done:a,error:s}){"function"!=typeof s&&(s=()=>{}),e.notify();"all"===n?o(t,0,"roughing").then((e=>o(t,0,"detail").then((function(t){return r.notify([e,t]),a(e,t)})))).catch((function(e){return r.notify(),s(e)})):o(t,0,n).then((function(e){return r.notify([e]),a(e)})).catch((function(e){return r.notify(),s(e)}))},onBegin:e.subscribe,onBeginPass:t.subscribe,onUpdate:n.subscribe,onFinishPass:a.subscribe,onFinish:r.subscribe}}()},function(e,t,n){EASEL.machineConnectionAuthority={shouldConnect:()=>!document.hidden}},function(e,t){EASEL.serialNumberTracker={triggerEvent:function(e,t){switch(e){case"receivedRunTime":if(null!=EASEL.machineStateStore.getSerialNumber()){const e=(t.end-t.start)/1e3;EASEL.stats.trackEvent(EASEL.events.machineRunTime,{Duration:e}),EASEL.machineRunTimeAPI.create(EASEL.machineStateStore.getSerialNumber(),e)}}}}},function(e,t){EASEL.settingsUpdater=function({starting:e,always:t}){let n=null;return{start:function(){return EASEL.machineRegisters.hasSettings(EASEL.machineSettingsSelectors.getRecommendedSettings(EASEL.store.getState()),EASEL.machineStateStore.getSettings())?t():(e(),(()=>{const e=EASEL.machineSettingsSelectors.getRecommendedSettings(EASEL.store.getState());for(let t in e){const n=e[t];EASEL.machineRegisters.setValue(t,n)}})(),n=setTimeout((function(){EASEL.machineStateActions.refreshSettings(),EASEL.localSender.getMachineSettings(),t()}),2e3)),function(){null!=n&&clearTimeout(n),n=null}}}}},function(e,t){EASEL.stateMachine("machine").register("alarm_lock",(function(e){e.grblState=function(e){if("idle"===e)return"ready_idle"},e.grblAlarm=function(e){const{homingFailed:t}=(EASEL.machineStateStore.getFeatures()||{}).errorResponses;if(null!=t&&t.test(e))return EASEL.alert(EASEL.stringConstants.alerts.homingFailed.title,EASEL.stringConstants.alerts.homingFailed.message(EASEL.machineSettingsSelectors.getMachineType(EASEL.store.getState()))),null},e.grblError=function(e){const{checkDoor:t}=(EASEL.machineStateStore.getFeatures()||{}).errorResponses;if(null!=t&&t.test(e))return EASEL.flux.events.emit("door-error"),void EASEL.alert("Cannot move the machine while the door is open","Close the door and try again.")},e.machineRunning=()=>"running",e.machineDisconnected=()=>"connecting_to_machine",e.localSenderDisconnected=()=>"connecting_to_local_sender"}))},function(e,t){EASEL.stateMachine("machine").register("checking_connection_status",(function(e,t){e.enter=function(){let e={socket:!0,file:EASEL.hasAccessGrant("iris_serial_logging")};t.localSender.serialEcho(e),t.localSender.getConnectionStatus()},e.localSenderDisconnected=()=>"connecting_to_local_sender",e.receivedConnectionStatus=function(e){if(null!=e){const t=EASEL.machineTypeHelper.firmwareVersionForReadyResponse(e);return EASEL.machineStateActions.receiveFirmwareVersion(t),console.log(`Connected to ${t}`),"checking_machine_status"}return console.log("Not connected"),"connecting_to_machine"}}))},function(e,t){EASEL.stateMachine("machine").register("checking_machine_status",(function(e,t){e.enter=function(){t.localSender.getJobStatus(),t.localSender.getMachineBuildInfo()},e.localSenderDisconnected=()=>"connecting_to_local_sender",e.machineDisconnected=()=>"connecting_to_machine",e.machineReady=function(){return EASEL.machineStateActions.refreshSettings(),EASEL.localSender.getMachineSettings(),"ready_idle"},e.machineRunning=()=>"running",e.machinePaused=()=>"paused",e.machineStopping=()=>"stopping"}))},function(e,t){EASEL.stateMachine("machine").register("connecting_to_local_sender",(function(e,t){e.enter=()=>t.localSender.initSocket(),e.localSenderConnected=function(e){return null!=EASEL.localSenderVersionStore.getVersionInfo(e)?"checking_connection_status":"local_sender_out_of_date"},e.initial(!0)}))},function(e,t,n){const a=n(355);EASEL.stateMachine("machine").register("connecting_to_machine",(function(e,t){let n=null,r=0,o=!1;var s=EASEL.interval((function(){if(!EASEL.machineConnectionAuthority.shouldConnect())return;const e=EASEL.machineTypeHelper.currentControllers();if(r>=e.length)return s.stop(),void l.startNow(500);t.localSender.setConfig(e[r++]);let a=n;setTimeout((()=>{t.localSender.initPort(a)}),100)}));const i=function(e){l.stop(),n=e,r=0,s.startNow(4e3)};var l=EASEL.interval((function(){if(EASEL.info.shouldAutoDetectMachine())o||(t.localSender.listPorts(),o=!0);else{const e=EASEL.machineSettingsSelectors.getComPort(EASEL.store.getState());null!=e&&i(e)}}));e.enter=function(){l.startNow(500),o=!1},e.exit=function(){s.stop(),l.stop()},e.portsListed=function(e){const t=a.findMachinePort(e);return null!=t&&i(t.comName),o=!1,null},e.localSenderDisconnected=()=>"connecting_to_local_sender",e.receivedConnectionStatus=function(e){if(null!=e){const t=EASEL.machineTypeHelper.firmwareVersionForReadyResponse(e);return EASEL.machineStateActions.receiveFirmwareVersion(t),console.log(`Connected to ${t}`),EASEL.websocketMessageActions.clearWebsocketMessages(),"checking_machine_status"}return null},e.sentFeedback=function(){return EASEL.flux.events.emit("close-job-status-modal"),null}}))},function(e,t){EASEL.stateMachine("machine").register("local_sender_out_of_date",(e=>{e.localSenderDisconnected=()=>"connecting_to_local_sender"}))},function(e,t){EASEL.stateMachine("machine").register("paused",(function(e){const t=e=>EASEL.flux.events.emit("ended-job",e);e.machineDisconnected=function(e){return t(e),"connecting_to_machine"},e.localSenderDisconnected=function(){return t(),"connecting_to_local_sender"},e.machineReady=()=>"ready_idle",e.grblState=function(e){if("alarm"===e)return"alarm_lock"},e.machineRunning=()=>"running",e.machinePaused=()=>null,e.machineStopping=()=>"stopping"}))},function(e,t){EASEL.stateMachine("machine").register("ready_idle",(function(e){e.machineDisconnected=()=>"connecting_to_machine",e.localSenderDisconnected=()=>"connecting_to_local_sender",e.grblState=function(e){if("alarm"===e)return"alarm_lock"},e.grblError=function(e){const{checkDoor:t}=(EASEL.machineStateStore.getFeatures()||{}).errorResponses;if(null!=t&&t.test(e))return EASEL.flux.events.emit("door-error"),void EASEL.alert("Cannot move the machine while the door is open","Close the door and try again.")},e.machineRunning=()=>"running",e.sentFeedback=function(){return EASEL.flux.events.emit("close-job-status-modal"),null}}))},function(e,t){EASEL.stateMachine("machine").register("running",(function(e,t){const n=EASEL.stopwatch("running"),a=e=>EASEL.flux.events.emit("ended-job",e),r=function(e){EASEL.carvingInfo.percentComplete(EASEL.jobStatusSelectors.getPercentComplete(EASEL.store.getState())),a(e)};e.enter=function(){0===EASEL.jobStatusSelectors.getPercentComplete(EASEL.store.getState())&&n.reset(),n.start(),EASEL.sleep.prevent()},e.exit=function(){n.stop(),EASEL.sleep.allow()},e.machineDisconnected=function(e){return r(e),"connecting_to_machine"},e.localSenderDisconnected=function(){return r(),"connecting_to_local_sender"},e.machineReady=()=>"ready_idle",e.machineRunning=function(e,t){return 100===t?(function(){let e;if(0!==(e=n.stop())){const t=EASEL.carvingInfo.data().timeEstimate,a=e/1e3/60,r=Math.abs(a-t)/a*100;EASEL.stats.trackEventSometimes("Job Times",{estimate:t,actual:a,percentError:r}),n.reset(),EASEL.jobTracker.finish()}EASEL.projectStatus.flash("Job completed"),EASEL.store.dispatch(EASEL.walkthroughActionCreators.setHasCompletedCarve(!0)),a()}(),"ready_idle"):null},e.machinePaused=()=>"paused",e.machineStopping=function(){return EASEL.carvingInfo.percentComplete(EASEL.jobStatusSelectors.getPercentComplete(EASEL.store.getState())),"stopping"},e.grblState=function(e){if("alarm"===e)return"alarm_lock"},e.grblAlarm=function(e){const{homingFailed:n,probeFailed:a}=(EASEL.machineStateStore.getFeatures()||{}).errorResponses;if(null==n||!n.test(e))return null!=a&&a.test(e)?(EASEL.stats.trackEvent("Probe fail"),EASEL.alert("Smart Clamp probing failed","The Smart Clamp button is stuck and needs to be cleaned. Refer to the Carvey manual for cleaning instructions. Please contact customer support if you continue to have problems.",[{text:"Cleaning Info",action:()=>window.open("http://carvey-instructions.inventables.com/smart_clamp/","_blank")},{text:"OK"}]),t.localSender.reset(),"alarm_lock"):void 0;EASEL.alert(EASEL.stringConstants.alerts.homingFailed.title,EASEL.stringConstants.alerts.homingFailed.message(EASEL.machineSettingsSelectors.getMachineType(EASEL.store.getState())))}}))},function(e,t){EASEL.stateMachine("machine").register("stopping",(function(e){return e.enter=function(){EASEL.jobTracker.finish(),EASEL.flux.events.emit("ended-job",null)},e.machineReady=()=>"ready_idle",e.grblState=function(e){if("alarm"===e)return"alarm_lock"}}))},function(e,t){EASEL.walkthroughManager=function(){const e=()=>EASEL.flux.events.emit("hide-walkthrough");let t=null;return{triggerEvent:function(n,a){switch(n){case"localSenderDisconnected":e();break;case"machineDisconnected":EASEL.machineStateStore.isFirmwareUploading()||e();break;case"releaseWalkthrough":a!==t&&e()}},openWalkthrough:function(){EASEL.flux.events.emit("show-walkthrough"),t=(new Date).getTime(),EASEL.localSender.acquireWalkthrough(t)}}}()},function(e,t,n){n(1197),n(1198),n(1199),n(1200),n(356),n(1201),n(98),n(357),n(358),n(1202),n(1203),n(1204),n(359),n(1205),n(1206)},function(e,t){EASEL.gcodeComments=function(){const e={};let t=[],n=[];return e.explain=function(e){t=e.linePrint(),n=[];for(let a of t)null!=a.match(/^M3/)?n.push({gcode:a,comment:"Spindle on"}):null!=a.match(/^M5/)?n.push({gcode:a,comment:"Spindle off"}):"G20"===a?n.push({gcode:a,comment:"Set inches"}):"G21"===a?n.push({gcode:a,comment:"Set mm"}):"M7"===a||"M9"===a?n.push({gcode:a,comment:"Accessories on"}):"G90"===a?n.push({gcode:a,comment:"Absolute programming"}):a.match(/^G1/)?n.push({gcode:a,comment:"Custom position"}):a.match(/^G0 X0/)&&a.match(/Y0/)?n.push({gcode:a,comment:"Rapid 0,0"}):a.match(/^G4 P/)?n.push({gcode:a,comment:"Dwell & sync"}):n.push({gcode:a});return t=n},e}()},function(e,t){EASEL.gcodeToMotions=function(e){const t=.00127,n=e=>JSON.parse(JSON.stringify(e)),a=(e,t)=>e.map(((e,n)=>[e,t[n]])),r={current_xyz:[0,0,0],feed_rate:0,motion_mode:"SEEK",plane_axis:[0,1,2],inches_mode:!1,inverse_feedrate_mode:!1,absolute_mode:!0},o=function(e){return r.inches_mode&&(e*=25.4),e},s=[];for(let h of e){var i,l,c,p,u;let e=h.replace(/\s|\(.*?\)/g,"").toUpperCase();if(e=e.replace(/;.*/,""),e=e.replace(/\\\\/g,""),e=e.replace(/%/g,""),0===e.length)continue;let E=e.match(/[^0-9.-]+/g),m=e.match(/[0-9.-]+/g);if(E.includes("N")){if("N"!==E[0])throw new Error("Line number must be first command in line.");if(E.count("N")>1)throw new Error("More than one line number in block.");E=E.slice(1),m=m.slice(1)}const S={next_action:"DEFAULT",absolute_override:!1,target_xyz:n(r.current_xyz),offset_ijk:[0,0,0],radius_mode:!1};for([i,c]of a(E,m)){l=parseFloat(c);const e=parseInt(l);if("G"===i)switch(e){case 0:r.motion_mode="SEEK";break;case 1:r.motion_mode="LINEAR";break;case 2:r.motion_mode="CW_ARC";break;case 3:r.motion_mode="CCW_ARC";break;case 4:S.next_action="DWELL";break;case 17:r.plane_axis=[0,1,2];break;case 18:r.plane_axis=[0,2,1];break;case 19:r.plane_axis=[1,2,0];break;case 20:r.inches_mode=!0;break;case 21:r.inches_mode=!1;break;case 28:case 30:S.next_action="GO_HOME";break;case 53:S.absolute_override=!0;break;case 54:break;case 80:r.motion_mode="MOTION_CANCEL";break;case 90:r.absolute_mode=!0;break;case 91:r.absolute_mode=!1;break;case 92:S.next_action="SET_OFFSET";break;case 93:r.inverse_feedrate_mode=!0;break;case 94:r.inverse_feedrate_mode=!1}}for([i,c]of a(E,m))switch(l=parseFloat(c),i){case"F":r.feed_rate=o(l);break;case"I":case"J":case"K":S.offset_ijk[i.charCodeAt()-"I".charCodeAt()]=o(l);break;case"N":break;case"P":p=l;break;case"R":u=o(l),S.radius_mode=!0;break;case"S":break;case"X":case"Y":case"Z":r.absolute_mode|S.absolute_override?S.target_xyz[i.charCodeAt()-"X".charCodeAt()]=o(l):S.target_xyz[i.charCodeAt()-"X".charCodeAt()]+=o(l)}if("GO_HOME"===S.next_action)r.current_xyz=n(S.target_xyz);else if("SET_OFFSET"===S.next_action);else if("DWELL"===S.next_action){if(p<0)throw new Error("Dwell time negative.")}else if("SEEK"===r.motion_mode)s.push([0,r.feed_rate,S.target_xyz[0],S.target_xyz[1],S.target_xyz[2]]),r.current_xyz=n(S.target_xyz);else if("LINEAR"===r.motion_mode)s.push([1,r.feed_rate,S.target_xyz[0],S.target_xyz[1],S.target_xyz[2]]),r.current_xyz=n(S.target_xyz);else if(["CW_ARC","CCW_ARC"].includes(r.motion_mode)){var d;const e=r.plane_axis;if(S.radius_mode){const t=S.target_xyz[e[0]]-r.current_xyz[e[0]],n=S.target_xyz[e[1]]-r.current_xyz[e[1]];if(0!=t||0!=n)throw new Error("Same target and current XYZ not allowed in arc radius mode.");let a=-Math.sqrt(4*u*u-t*t-n*n)/Math.hypot(t,n);if(isNaN(a))throw new Error("Floating point error in arc conversion");"CCW_ARC"===r.motion_mode&&(a=-a),u<0&&(a=-a),S.offset_ijk[e[0]]=(t-n*a)/2,S.offset_ijk[e[1]]=(n+t*a)/2}else d=Math.sqrt(Math.pow(S.offset_ijk[e[0]],2)+Math.pow(S.offset_ijk[e[1]],2));const a=r.current_xyz[e[0]]+S.offset_ijk[e[0]],o=r.current_xyz[e[1]]+S.offset_ijk[e[1]],i=S.target_xyz[e[2]]-r.current_xyz[e[2]];let l=-S.offset_ijk[e[0]],c=-S.offset_ijk[e[1]];const p=S.target_xyz[e[0]]-a,h=S.target_xyz[e[1]]-o;let E=Math.atan2(l*h-c*p,l*p+c*h);"CW_ARC"===r.motion_mode?E>=0&&(E-=2*Math.PI):E<=0&&(E+=2*Math.PI);const m=Math.sqrt(Math.pow(E*d,2)+Math.pow(Math.abs(i),2)),g=Math.sqrt(4*(2*d*t-Math.pow(t,2))),f=parseInt(m/g),A=E/f,b=i/f,L=1-.5*A*A,y=A-Math.pow(A,3)/6;let R=[0,0,0];R[e[2]]=r.current_xyz[e[2]];let v=0;for(let t=1,u=f,d=1<=u;d?t<=u:t>=u;d?t++:t--){if(t<f){if(v<20){const e=l*y+c*L;l=l*L-c*y,c=n(e),v+=1}else{let n=Math.cos((t-1)*A),a=Math.sin((t-1)*A);console.log(20*l(-(-S.offset_ijk[e[0]]*n+S.offset_ijk[e[1]]*a))),console.log(20*c(-(-S.offset_ijk[e[0]]*a-S.offset_ijk[e[1]]*n))),n=Math.cos(t*A),a=Math.sin(t*A),l=-S.offset_ijk[e[0]]*n+S.offset_ijk[e[1]]*a,c=-S.offset_ijk[e[0]]*a-S.offset_ijk[e[1]]*n,v=0}R[e[0]]=a+l,R[e[1]]=o+c,R[e[2]]+=b}else R=n(S.target_xyz);s.push([1,r.feed_rate,R[0],R[1],R[2]]),r.current_xyz=n(R)}}}return s}},function(e,t){EASEL.gcodeGenerator=function(){const e={};let t=!1,n=[],a=5,r="inches",o=1,s=0;let i=0;const l=e=>(e*o).toFixed(a),c=e=>(e*o).toFixed(1),p=function(t){return n=n.concat(t.split("\n")),e},u=function(t){return n.push(`G4 P${t}`),e};return e.accessoriesOn=function(){n.push("M7"),n.push("M8")},e.accessoriesOff=()=>n.push("M9"),e.absolute=function(){return n.push("G90"),e},e.custom=p,e.external=function(n){return t=!0,p(n),e},e.inches=function(){return n.push("G20"),r="inches",o=1,a=5,e},e.fastXY=function(t,a){return n.push(`G0 X${l(t)} Y${l(a)}`),e},e.feedRate=function(t){return s=t,e},e.millimeters=function(){return n.push("G21"),r="millimeters",o=25.4,a=3,e},e.plungeRate=function(t){return i=t,e},e.spindleOff=function(){return n.push("M5"),e},e.spindleOn=function(t){let a="M3";return null!=t&&(a+=` S${t}`),n.push(a),e},e.comment=function(t){if(EASEL.hasAccessGrant("gcode_comments"))for(let e of Array.from(t.split("\n")))n.push(`; ${e}`);return e},e.dwell=u,e.sync=function(){return u(.1),e},e.time=function(){const e=EASEL.gcodeToMotions(n),t=EASEL.grblPlanningBufferSize(n);return EASEL.motionsToJobTime(e,EASEL.machineStateStore.getSettings(),t)},e.xy=function(a,r){return t=!0,n.push(`G1 X${l(a)} Y${l(r)} F${c(s)}`),e},e.xyz=function(a,r,o){t=!0;const p=Math.min(i,s);return n.push(`G1 X${l(a)} Y${l(r)} Z${l(o)} F${c(p)}`),e},e.z=function(a){return a<0&&(t=!0),n.push(`G1 Z${l(a)} F${c(i)}`),e},e.fastZ=a=>(a<0&&(t=!0),n.push(`G0 Z${l(a)}`),e),e.linePrint=()=>n,e.lineCount=()=>n.length,e.gcodeUnits=()=>r,e.string=function(){return t?n.join("\n"):null},e}},function(e,t){EASEL.motionsToJobTime=function(e,t,n){null==n&&(n=8);const a=1e10,r=e=>JSON.parse(JSON.stringify(e));null==t&&(t=[]);const o=EASEL.machineStateStore.getFeatures()&&EASEL.machineStateStore.getFeatures().registers||{},s=function(e,n){let a;const r=o[e];return null!=r&&(a=EASEL.machineRegisters.getValue(t,r)),a||n},i=[60*s("maxAccelerationX",500)*60,60*s("maxAccelerationY",500)*60,60*s("maxAccelerationZ",50)*60],l=[s("maxSpeedX",8e3),s("maxSpeedY",8e3),s("maxSpeedZ",500)],c=s("junctionDeviation",.02);let p=0,u=0,d=1,h=0;const E=function(){let e=[];for(let t=0;t<n+1;t++)e.push({id:0,millimeters:0,acceleration:0,max_rate:0,programmed_rate:0,max_entry_speed:0,max_junction_speed:0,entry_speed:0});return e}(),m=[0,0,0];let S=[0,0,0],g=[0,0,0],f=0;const A=function(e){return(e+=1)===n&&(e=0),e},b=function(e){return 0===e?e=n-1:e-=1,e},L=function(){let e,t,n=b(p);if(n===h)return;let a=n;if(E[a].entry_speed=Math.min(E[a].max_entry_speed,Math.sqrt(2*E[a].acceleration*E[a].millimeters)),n=b(n),n!==h)for(;n!==h;)t=a,a=n,n=b(n),E[a].entry_speed!==E[a].max_entry_speed&&(e=Math.sqrt(Math.pow(E[t].entry_speed,2)+2*E[a].acceleration*E[a].millimeters),e<E[a].max_entry_speed?E[a].entry_speed=e:E[a].entry_speed=E[a].max_entry_speed);for(t=h,n=A(h);n!==p;)a=t,t=n,E[a].entry_speed<E[t].entry_speed&&(e=Math.sqrt(Math.pow(E[a].entry_speed,2)+2*E[a].acceleration*E[a].millimeters),e<E[t].entry_speed&&(E[t].entry_speed=e,h=n)),E[t].entry_speed===E[t].max_entry_speed&&(h=n),n=A(n)},y=function(){let e=0;const t=[];let n=u,a=A(u);for(;n!==h;){var r,o;const s=E[n].entry_speed,i=E[n].programmed_rate,l=E[n].millimeters;o=a===p?0:E[a].entry_speed;const c=.5*(l+(Math.pow(s,2)-Math.pow(o,2))/(2*E[n].acceleration));if(c>0)if(c<l){const e=(Math.pow(i,2)-Math.pow(o,2))/(2*E[n].acceleration);if(e<c)if(s<i){const t=l-(Math.pow(i,2)-Math.pow(s,2))/(2*E[n].acceleration);r=(2*i-s-o)/E[n].acceleration+(t-e)/i}else r=0,e<l&&(r+=(l-e)/i),i>o&&(r+=(i-o)/E[n].acceleration);else{r=(2*Math.sqrt(2*E[n].acceleration*c+Math.pow(o,2))-s-o)/E[n].acceleration}}else r=(s-o)/E[n].acceleration;else r=(o-s)/E[n].acceleration;e+=r,t.push(E[n].id),n=a,a=A(a)}return e},R=e.map((e=>({type:e[0],feedrate:e[1],x:e[2],y:e[3],z:e[4]})));let v=0;for(let P=0;P<R.length;P++){E[p].id=P,m[0]=R[P].x,m[1]=R[P].y,m[2]=R[P].z;const e=m[0]-S[0],t=m[1]-S[1],n=m[2]-S[2];if(0===e&&0===t&&0===n);else{const o=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2));E[p].millimeters=o;const s=[e/o,t/o,n/o];E[p].acceleration=a;for(let e=0;e<3;e++)0!==s[e]&&(E[p].acceleration=Math.min(E[p].acceleration,Math.abs(i[e]/s[e])));E[p].max_rate=a;for(let e=0;e<3;e++)0!==s[e]&&(E[p].max_rate=Math.min(E[p].max_rate,Math.abs(l[e]/s[e])));if(0===R[P].type?E[p].programmed_rate=E[p].max_rate:E[p].programmed_rate=R[P].feedrate,p===u)E[p].entry_speed=0,E[p].max_junction_speed=0;else{const e=-g[0]*s[0]-g[1]*s[1]-g[2]*s[2],t=[s[0]-g[0],s[1]-g[1],s[2]-g[2]];if(e>.999999)E[p].max_junction_speed=0;else if(e<-.999999)E[p].max_junction_speed=a;else{const n=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2));let r=a;for(let e=0;e<3;e++)t[e]/=n,0!==t[e]&&(r=Math.min(r,Math.abs(i[e]/t[e])));const o=Math.sqrt(.5*(1-e));E[p].max_junction_speed=Math.max(0,Math.sqrt(r*c*o/(1-o)))}}const b=E[p].programmed_rate;E[p].max_entry_speed=b>f?f:b,E[p].max_entry_speed>E[p].max_junction_speed&&(E[p].max_entry_speed=E[p].max_junction_speed),f=r(b),g=r(s),S=r(m),p=d,d=A(p),d===u&&(L(),u===h&&(h=A(u)),v+=y(),u=h)}}return L(),h=p,v+=y(),v},EASEL.grblPlanningBufferSize=function(e){if(null==e||0==e.length)return 8;let t=0,n=0;const a=[];for(const o of e){const e=o.length+1;for(;e+t>127&&a.length>0;)t-=a.shift();t+=e,n+=a.push(e)}const r=n/e.length;return Math.max(2,Math.round(r))}},function(e,t){EASEL.pathNormalizer=function(){const e={};let t=null,n=null,a=null,r=null;const o=function(e,t){const n=e.slice(1);for(let a=0;a<n.length;a++){const r=n[a];e[a+1]=r+t}return e};return e.process=function(e){return a=r=0,e.map((e=>function(e){if((e=>e[0]===e[0].toLowerCase())(e))switch(e[0]=e[0].toUpperCase(),e[0]){case"H":e=o(e,a);break;case"V":e=o(e,r);break;default:e=function(e,t,n){const a=e.slice(1);for(let r=0;r<a.length;r+=2)e[r+1]=a[r]+t,e[r+2]=a[r+1]+n;return e}(e,a,r)}switch("M"===e[0]&&(t=e[1],n=e[2]),e[0]){case"H":a=e[1];break;case"V":break;case"Z":a=t;break;default:a=e[e.length-2]}switch(e[0]){case"H":break;case"V":r=e[1];break;case"Z":r=n;break;default:r=e[e.length-1]}return e}(e.slice(0))))},e}()},function(e,t){EASEL.gCarvinPostProcessor=function(){const e={},t=function(e){e.absolute().millimeters().custom(`    G28\n    G21 G38.2 Z-71 F80\n    G10 L20 P1 X17 Y-12.25 Z${12.7+EASEL.machineStateStore.getZAxisOffset()}\n    G54\n    G0 Z20\n    G0 X20 Y20  `).spindleOn(EASEL.machineSettingsSelectors.getSpindleRPM(EASEL.store.getState())).dwell(1),"in"===EASEL.unitSelectors.getPreferredUnit(EASEL.store.getState())&&e.inches()},n=e=>e.absolute().millimeters().custom("    G53 G0 Z-1\n    G54  ").custom("G30").spindleOff().sync();return e.init=e=>e.register("gCarvin",t,n),e}()},function(e,t){EASEL.postProcessor=function(){const e={},t={};return e.register=(e,n,a)=>t[e]={header:n,footer:a},e.addHeader=(e,n)=>t[e].header(n),e.addFooter=(e,n,a)=>t[e].footer(n,a),e}()},function(e,t){EASEL.shapeokoPostProcessor=function(){const e={},t=function(e){const t=EASEL.store.getState();if("in"===EASEL.unitSelectors.getPreferredUnit(t)?e.inches():e.millimeters(),EASEL.machineSettingsSelectors.getAccessoriesEnabled(t)&&e.accessoriesOn(),EASEL.machineSettingsSelectors.getAutomaticSpindleControl(t)){const n=EASEL.walkthroughSelectors.getPassType(t);let a,r;"detail"===n?(a=EASEL.utility.jobSettingsCalculator(EASEL.jobSettingsConstants.bitKeys.detailBit),r=a.getSettings().spindleSpeed):"roughing"===n&&(a=EASEL.utility.jobSettingsCalculator(EASEL.jobSettingsConstants.bitKeys.bit),r=a.getSettings().spindleSpeed),r=r||EASEL.machineSettingsSelectors.getSpindleRPM(t),e.spindleOn(r)}e.absolute().plungeRate(9).z(EASEL.userSelectors.getOriginSafetyHeight(EASEL.jobSettingsStore.settings(),t))},n=function(e,t){const n=EASEL.store.getState();"in"===EASEL.unitSelectors.getPreferredUnit(n)?e.inches():e.millimeters(),t?e.absolute().fastZ(EASEL.userSelectors.getOriginSafetyHeight(EASEL.jobSettingsStore.settings(),n)):e.absolute().z(EASEL.userSelectors.getOriginSafetyHeight(EASEL.jobSettingsStore.settings(),n)),e.fastXY(0,0),e.sync(),EASEL.machineSettingsSelectors.getAutomaticSpindleControl(n)&&e.spindleOff(),EASEL.machineSettingsSelectors.getAccessoriesEnabled(n)&&e.accessoriesOff()};return e.init=e=>e.register("shapeoko",t,n),e}()},function(e,t){EASEL.toolpathProcessor={process:(e,t,n,a,r,o)=>e.toPromise().then((function(e){const s=EASEL.gcodeGenerator();EASEL.postProcessor.addHeader(EASEL.machineTypeHelper.currentPostProcessor(),s),s.feedRate(n).plungeRate(a);let i=t,l=!0;const c=-(r+.001);let p=null;const u=s.lineCount(),d=s.gcodeUnits();for(let t of e){null!=t.props.comment&&s.comment(t.props.comment);const e=t.props.rapid;for(let n of t.points)EASEL.pathUtils.pointsEqual(i,n)||(n.z<c-.001&&(p="toolpath_plunge"),i.z===n.z?e?s.fastXY(n.x,n.y):s.xy(n.x,n.y):i.x===n.x&&i.y===n.y?o&&i.z<n.z?s.fastZ(n.z):s.z(n.z):l?(s.fastXY(n.x,n.y),s.z(n.z),l=!1):s.xyz(n.x,n.y,n.z),i=n)}const h=s.lineCount()-1;return EASEL.postProcessor.addFooter(EASEL.machineTypeHelper.currentPostProcessor(),s,o),{gcode:s.string(),gcodeMetadata:{gcodeBodyStartLineIndex:u,gcodeBodyEndLineIndex:h,gcodeUnits:d},timeEstimate:s.time(),error:p}}))}},function(e,t){EASEL.toolpathsWorker=function(){const e=EASEL.taskRunner(EASEL.assets.javascripts.toolpathGenerator);return{generateToolpaths:function(t,n,a){const r=EASEL.shallowMerge(n.jobSettings);return n=EASEL.shallowMerge(n,{jobSettings:r,strategy:t,tile:null!=n.tile?n.tile.explode():void 0,vcarveNearestNeighbor:!0}),e.postTask({type:"calculate-toolpaths",params:n,update:a}).then((function(e){return e=e.map((e=>EASEL.path(e.points,e.props))),EASEL.paths(e)}))},generatePreview:function(t,n,a){return t=EASEL.shallowMerge(t,{bit:null!=t.bit?t.bit.explode():void 0,detailBit:null!=t.detailBit?t.detailBit.explode():void 0,strokeBit:null!=t.strokeBit?t.strokeBit.explode():void 0,lastBit:null!=t.lastBit?t.lastBit.explode():void 0,tile:null!=t.tile?t.tile.explode():void 0}),e.postTask({maxRunTime:a,type:"calculate-meshes",params:t,update:n})},generateExplodedObjects:t=>e.postTask({type:"calculate-exploded-objects",params:t}),generateMedialAxis:t=>e.postTask({type:"calculate-medial-axis",params:t}),generateSimpleShapes:t=>e.postTask({type:"calculate-simple-shapes",params:t})}}()},function(e,t,n){n(1208),n(1209),n(1210)},function(e,t){EASEL.carveyTour={start:function(){EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setMachineType(EASEL.machineType.CARVEY)),EASEL.store.dispatch(EASEL.bitActionCreators.setBitParams({bit:{width:.0625,unit:"in"}})),EASEL.materialActions.select(null,"Two-Color HDPE"),EASEL.materialActions.setDimensions({x:6,y:6,z:.125}),EASEL.volumeActions.removeAll(),fetch(EASEL.crossOriginResources.getUrlToRequestWithOriginHeader(EASEL.assets.svgs.carveyFirstJob)).then((e=>e.text())).then((e=>EASEL.svgImporter.svgStringToVolumes(e))).then((e=>{e=e.map((e=>EASEL.merge(e,{shape:{center:{x:e.shape.center.x+.6,y:e.shape.center.y+.5}},cut:{depth:.062}}))),EASEL.volumeActions.add(...e),EASEL.flux.events.emit("show-carvey-welcome")}))}}},function(e,t,n){EASEL.interfaceWalkthrough=function(){const e=()=>$("#main-bit-link"),t=()=>$("#material");let n=null,a=null;return{start:function(r){const o="Josefin",s=EASEL.fonts.Josefin;return EASEL.fontManager.load(o,s.opentypePath).then((()=>EASEL.store.dispatch(EASEL.fontActionCreators.setFontData([{name:o,font:s}])))).then((()=>function(r){EASEL.previewScheduler.disableDetailedPreview();const o=$(".app-container"),s=$(".material-library__material-types"),i=[{content:"<p>Here&#8217;s where you&#8217;ll create your design.</p><p>Select the text by clicking it to get started.</p>",container:o,target:$("#left-panel"),my:"bottom center",at:"center center",closeButton:!0,bind:["onSelectShape"],onSelectShape(e){let t=EASEL.volumeStore.getVolumes(EASEL.editorStore.getSelectedVolumeIds());1===t.length&&"text"===t[0].shape.type&&e.next()},setup(){EASEL.editorStore.addChangeListener(this.onSelectShape)},teardown(){EASEL.editorStore.removeChangeListener(this.onSelectShape),EASEL.stats.trackEvent("Intro Walkthrough - Select Text")}},{content:"<p>You can change your cut and shape settings here.</p>",highlightTarget:!0,container:o,setup:()=>({target:$(".object-properties")}),nextButton:!0,my:"right center",at:"left center",closeButton:!0,teardown(){EASEL.stats.trackEvent("Intro Walkthrough - Cut Settings")}},{content:"<p>This is the 3D preview. As you adjust your design, you can see your changes here in real-time. Click and drag to rotate the preview, or Shift+click and drag to pan. Use the scroll wheel to zoom in and out.</p>",highlightTarget:!1,nextButton:!0,container:o,target:$("#right-panel"),my:"bottom center",at:"center center",closeButton:!0,teardown(){EASEL.stats.trackEvent("Intro Walkthrough - 3D Preview")}},{content:"<p>If your design is complex, a rough 3D preview will be shown until you click the &ldquo;Detailed view&rdquo; button. Try it now.</p>",highlightTarget:!1,container:o,target:$("#preview-controls__status"),my:"bottom center",at:"top center",closeButton:!0,bind:["onDesignVisible"],onDesignVisible(e){EASEL.previewSelectors.designStatus(EASEL.store.getState())===EASEL.previewConstants.statuses.READY&&e.next()},setup(){a=EASEL.store.subscribeWithSelector(EASEL.previewSelectors.designStatus,this.onDesignVisible)},teardown(){a(),EASEL.stats.trackEvent("Intro Walkthrough - Generated Detailed Preview")}},{content:"<p>Notice how the preview shows that some of the details won't be carved? That&#8217;s because your current bit size is too large to carve those parts out.</p>",highlightTarget:!1,nextButton:!0,container:o,target:$("#right-panel"),my:"bottom center",at:"center center",closeButton:!0,teardown(){EASEL.stats.trackEvent("Intro Walkthrough - Red Preview")}},{content:"<p>Click here to choose a smaller bit.</p>",highlightTarget:!0,container:o,target:e(),my:"top center",at:"bottom center",closeButton:!0,bind:["onBitMenu"],onBitMenu(e){e.next()},setup(){e().parent().on("shown.bs.dropdown",this.onBitMenu)},teardown(){e().parent().off("shown.bs.dropdown",this.onBitMenu),EASEL.stats.trackEvent("Intro Walkthrough - Open Bit Menu")}},{content:"<p>Try changing your bit to the 60 degree V-Bit</p>",container:o,target:$("#main-bit-selector"),my:"right center",at:"left center",closeButton:!0,bind:["onBitSizeChange"],onBitSizeChange(e){EASEL.bitSelectors.isVCarvingBitInUse(EASEL.store.getState())&&e.next()},setup(){$("#main-bit-selector input[type='text']").focus().select(),n=EASEL.store.subscribeWithSelector(EASEL.bitSelectors.bitParams,this.onBitSizeChange)},teardown(){n(),e().dropdown("toggle"),EASEL.stats.trackEvent("Intro Walkthrough - Change Bit")}},{content:"<p>Awesome! Now you&#8217;ll be able to carve the whole design.</p>",highlightTarget:!1,nextButton:!0,closeButton:!0,container:o,target:$("#right-panel"),my:"bottom center",at:"center center",teardown(){EASEL.stats.trackEvent("Intro Walkthrough - Red Goes Away")}},{content:"<p>Almost ready to carve. But first, set your material.</p>",container:o,target:s,nextButton:!0,closeButton:!0,setup(){t().dropdown("toggle")},teardown(){EASEL.stats.trackEvent("Intro Walkthrough - Open Material Library")},my:"right center",at:"left center"},{content:"<p>Enter your material dimensions. Make sure that the thickness (Z) is accurate.</p>",container:o,target:$("#dimensions"),nextButton:!0,closeButton:!0,teardown(){t().dropdown("toggle")},my:"top center",at:"bottom center"},{content:"<p>You&#8217;re good to go! Make sure your machine&#8217;s connected, then just click Carve.</p>",highlightTarget:!1,container:o,target:$(".machine-status-indicator"),my:"top right",at:"bottom center",closeButton:!0,bind:["onCarve"],onCarve(){p.next()},setup(){return $(".machine-status-indicator").on("click",this.onCarve),EASEL.stats.trackEventOnServer(EASEL.events.completedTutorial),{target:$(".machine-status-indicator").filter(":visible")}},teardown(){$(".machine-status-indicator").off("click",this.onCarve),EASEL.stats.trackEvent("Intro Walkthrough - Click Carve")}}];EASEL.store.dispatch(EASEL.bitActionCreators.setBitParams({bit:{id:"INVENTABLES_BLACK_BIT",width:.125,unit:"in"}})),EASEL.volumeActions.removeAll();const l="Josefin",c=EASEL.textHelper.measure({text:r,font:l});c.width*=2.25/c.height,c.height=2.25,EASEL.volumeActions.add({shape:{type:"text",text:r,font:l,width:c.width,height:c.height,center:{x:4+c.width/2,y:1.875},rotation:0,flipping:{}},cut:{type:"fill",depth:.4*EASEL.materialStore.getCurrentDepth()}});const p=new Tourist.Tour({steps:i,tipClass:"Bootstrap",tipOptions:{offset:2,showEffect:"slidein"}});fetch(EASEL.crossOriginResources.getUrlToRequestWithOriginHeader(EASEL.assets.svgs.firstJob)).then((e=>e.text())).then((e=>EASEL.svgImporter.svgStringToVolumes(e))).then((e=>{const t=.4*EASEL.materialStore.getCurrentDepth(),n=e.map((e=>EASEL.merge(e,{cut:{depth:t}})));EASEL.volumeActions.add(...n)})).then((()=>{EASEL.stats.trackEventOnServer(EASEL.events.startedTutorial),p.start()}))}(r)))}}}()},function(e,t){EASEL.planingProjectWalkthrough={start:function(e){const t=parseInt(e.x),n=parseInt(e.y),a=EASEL.userSelectors.getMachineProfiles(EASEL.store.getState()).find((e=>EASEL.machineProfilesAPI.machineTypeFromProfile(e)===EASEL.machineType.XCARVE_PRO));null!=a?EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setProfileId(a.id)):(EASEL.store.dispatch(EASEL.machineSettingsActionCreators.setMachineType(EASEL.machineType.XCARVE_PRO)),EASEL.store.dispatch(EASEL.machineSettingsActionCreators.updateWorkArea({x:t,y:n})));EASEL.store.dispatch(EASEL.bitActionCreators.setBitParams({bit:{width:1.125,unit:"in"}})),EASEL.materialActions.select(null,"MDF"),EASEL.materialActions.setDimensions({x:t,y:n,z:.75}),EASEL.jobSettingsActions.setUseCustom(EASEL.jobSettingsConstants.bitKeys.bit,!0),EASEL.jobSettingsActions.setSpindleSpeed(EASEL.jobSettingsConstants.bitKeys.bit,18e3),EASEL.jobSettingsActions.setDepthPerPass(EASEL.jobSettingsConstants.bitKeys.bit,.01),EASEL.jobSettingsActions.setPlungeRate(EASEL.jobSettingsConstants.bitKeys.bit,50),EASEL.jobSettingsActions.setFeedRate(EASEL.jobSettingsConstants.bitKeys.bit,200),EASEL.jobSettingsActions.setFillAngle(EASEL.jobSettingsConstants.bitKeys.bit,0),EASEL.volumeActions.removeAll(),EASEL.volumeActions.add({shape:{type:"rectangle",width:t,height:n+1.125,center:{x:t/2,y:n/2},rotation:0,flipping:{},isProportionLocked:!0},cut:{type:"fill",depth:.01}}),EASEL.viewportActions.homeViewport(),EASEL.flux.events.emit("show-planing-welcome")}}},function(e,t,n){n(1212),n(1213),n(1214),n(1215),n(1216),n(1217),n(1218),n(1219)},function(e,t){EASEL.alert=function(e,t,n,a){const r=e=>function(){return EASEL.flux.events.emit("hide-alert"),e()};null==n&&(n=[{text:"OK"}]);const o=n.map((e=>{let{text:t,action:n}=e;return null==n&&(n=()=>{}),{text:t,action:r(n)}}));return EASEL.flux.events.emit("show-alert",{title:e,message:t,detail:a,buttons:o})}},function(e,t){EASEL.confirm=function(e,t,n){const a={text:"OK",action:n};return EASEL.alert(e,t,[{text:"Cancel",action:()=>{}},a])}},function(e,t,n){const a=n(332);EASEL.errorReporter=function(){const e={},t=$("#new_error_report");let n=!1;const r=function(e){const n=EASEL.store.getState();s("user_reported_error",e.userReported),s("easel_version",EASEL.VERSION),s("sender_version",EASEL.localSenderVersionStore.getRunningVersionNumber()),s("firmware_version",EASEL.machineStateStore.getFirmwareVersion()),s("serial_number",EASEL.machineStateStore.getSerialNumber()),s("overrides",JSON.stringify(EASEL.jobStatusSelectors.getOverridePercentages(n))),s("connection_log",JSON.stringify(null!=e.connectionLog?e.connectionLog:EASEL.websocketMessageStore.getWebsocketMessages())),s("detected_garbled_message",null!=e.detectedGarbledMessage?e.detectedGarbledMessage:EASEL.websocketMessageStore.hasDetectedGarbledMessage()),s("build_info_string",EASEL.machineStateStore.getBuildInfoString()),s("user_agent_data",JSON.stringify(e.userAgentData)),s("machine_type",EASEL.machineSettingsSelectors.getMachineType(n)),s("machine_third_party_type",EASEL.machineSettingsSelectors.getThirdPartyModel(n)),s("max_spindle_current",e.maxSpindleCurrent),s("user_notes",e.userNotes),s("media_url",e.mediaUrl),s("media_mimetype",e.mediaMimetype),e.machineSettings&&s("machine_settings",e.machineSettings),e.error&&(s("active_buffer",e.error.active_buffer),s("last_instruction",e.error.last_instruction),s("sender_note",e.error.sender_note)),e.gcode&&s("gcode",e.gcode),null!=e.isExternalGcode&&s("is_external_gcode",e.isExternalGcode),e.project&&o("name",e.project.name);const a=$('<input type="hidden" name="error_report[project_attributes][workpieces_attributes][0][saved_data]">');return e.savedData.job_settings=e.jobSettings,a.val(JSON.stringify(e.savedData)),t.append(a)},o=(e,t)=>s(`project_attributes_${e}`,t),s=function(e,n){const a=t.find(`#error_report_${e}`);if(1!==a.length)throw new Error(`Cannot find field 'error_report_${e}' in the error report form!`);return a.val(n)},i=function(e){return r(e),function(){if(!n){n=!0;const e=$.ajax({url:t.attr("action"),data:t.serialize(),method:t.attr("method"),dataType:"json"});return e.always((()=>n=!1)),e}}()};return e.submitUserReportedError=e=>i(EASEL.merge(e,{userReported:!0})),e.submitNonUserReportedError=e=>i(EASEL.merge(a.getDataForCurrentProject(),e)),e.populate=r,e}()},function(e,t){EASEL.navbarPrompt=function(){const e={};let t=null;const n=function(){clearTimeout(t),$("#navbar-prompt").removeClass("slidedown").delay(1e3).hide(0)};return e.show=function(e,a){null==a&&(a={}),clearTimeout(t),t=a.dismiss?setTimeout(n,a.dismiss):void 0;const r=$("#navbar-prompt");if(r.empty(),null!=a.action){const t=$('<a href="#">');t.text(e),t.click((function(e){return e.preventDefault(),a.action(),n()})),r.append(t)}else r.text(e);r.append($("<span>",{class:"dismiss-prompt",html:"&times;"}).click(n)),r.show(0).addClass("slidedown")},e.hide=n,e}()},function(e,t){EASEL.oops=e=>EASEL.alert("Oops!",e)},function(e,t){EASEL.publishProjectDialog=function(){const e={};let t=!1,n=!1,a=null;const r=function(e){if(e.preventDefault(),n)return;const t=$(this);if(o()){const e=t.find('button[type="submit"]'),a=e.find("span"),r=a.text();a.text("Publishing..."),e.addClass("publishing"),n=!0,$.ajax({url:t.attr("action"),data:t.serialize(),type:"POST"}).done((e=>{const t=e.url;EASEL.projectMetadataActions.setShared(!0),EASEL.projectMetadataActions.setInventablesURL(t);const n=$("#inventables-project-published");n.find("a").attr("href",t),$("#inventables-project-not-published").fadeOut("fast",(()=>n.fadeIn("fast"))),EASEL.stats.trackEvent("Published Inventables Project",{url:t})})).fail((()=>EASEL.oops("Something went wrong trying to publish your project."))).always((function(){n=!1,e.removeClass("publishing"),a.text(r)}))}},o=function(){a.find("button.publish").removeClass("inactive"),a.find(".validation").hide();const e=$("#project-title").val(),t=$("#project-description").val(),n=$("#inventables_project_image_urls").val();return e.length<=0?i("Please add a project title."):e.length>=70&&i(`Your title is too long. (${e.length} / 70)`),t.length<=0?s("Please add a project description."):t.length>=300&&s(`Your description is too long. (${t.length} / 300)`),n.length<=0&&$("#inventables_project_image_urls_validation").show(),0===a.find(".validation:visible").length},s=e=>$("#inventables_project_description_validation").text(e).show(),i=e=>$("#inventables_project_title_validation").text(e).show(),l=function(e){e.length>0&&$("#inventables_project_image_urls_validation").hide();const t=$("#inventables_project_image_thumbnails").empty(),n=e.map((({url:e})=>e));return n.forEach((e=>{$("<img>",{src:e}).appendTo(t)})),$("#inventables_project_image_urls").val(n.join(","))};return e.show=()=>(t||(a=$("#publish-modal"),t=!0),EASEL.stats.trackEvent("Opened Publishing Menu"),null!=EASEL.projectMetadataStore.getInventablesURL()?a.modal("show"):$.ajax({url:"/inventables_projects/new",data:{project:EASEL.projectMetadataStore.getLinkToken()},method:"get"}).done((function(e){return a.find("#inventables-project-not-published").html(e).show(),a.find(".validation").hide(),a.find("form").on("submit",r).find("#publish-upload-image").on("click",(function(e){e.preventDefault(),EASEL.filepickerUtils.pickAndStore({access:"public",maxFiles:10,accept:["image/png","image/gif","image/jpeg"],path:"published-projects/"}).then(l)})),a.modal("show")})).fail((()=>EASEL.oops("Unable to publish a project at this time.")))),e}()},function(e,t){EASEL.splashScreen=function(){return{finished:()=>$(".global-loading .loading-container").fadeOut((()=>$(".global-loading").hide()))}}},function(e,t,n){const a=n(18);EASEL.troubleshooting=function(){const e=a(EASEL.webAPIUtils.loadProblemSymptoms),t=a(EASEL.webAPIUtils.loadUserFeedback),n=function(e){EASEL.flux.events.emit("show-troubleshooting-modal",e||function(){const e=EASEL.utility.jobSettingsCalculator(EASEL.jobSettingsConstants.bitKeys.bit),t=EASEL.utility.jobSettingsCalculator(EASEL.jobSettingsConstants.bitKeys.detailBit),n={bit:e.getSettings(),detailBit:t.getSettings()},a=EASEL.machineStateStore.getSettings().join("\n");return{project:EASEL.projectManager.getCurrentData(),jobSettings:n,gcode:"(Submitted via Help Menu)",machineSettings:a}}())};return{showModal:n,showProblemSymptom:function(t){e().then((function(){EASEL.store.dispatch(EASEL.troubleshootingActionCreators.setSelectedProblemSymptomLinkIdentifier(t)),n()}))},ensureTroubleshootingData:()=>Promise.all([e(),t()])}}()},function(e,t){EASEL.APTCutter=function(e){const t={},{f:n,r:a,a:r,b:o,m:s,n:i,R:l}=e,c=0===r&&0===o?n+a:n+a*o/Math.hypot(r,o),p=i+Math.sqrt(a*a-(s-n)*(s-n)),u=p-Math.sqrt(a*a-(c-n)*(c-n)),d=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2],h=function(e,t){const d=Math.hypot(e,t);return 0===s&&0===d?0:d>l?u+o:d<=s?i/s*d:s<d&&d<c?p-Math.sqrt(a*a-(d-n)*(d-n)):c<=d&&d<=c+r?u+o/r*(d-c):null},E=function(e,t){let a;const l=Math.abs(e),p=Math.abs(t),u=0!==s&&p<i/s?s*Math.sqrt(1-t*s/i*(t*s/i)):0,d=p<o/r?c*Math.sqrt(1-t*r/o*(t*r/o)):c+r,h=0===t?1:t/p;var E;return l<u?a=l/Math.sqrt(1-t*s/i*(t*s/i)):u<=l&&l<=d?(E=e,a=l<n?n:E):d<=l&&(a=l/Math.sqrt(1-t*r/o*(t*r/o))),h*Math.sqrt(a*a-e*e)};return t.cutterSweptSurface=function(e,t,n,a){const r=e.x,o=e.y,s=e.z,i=t.x,c=t.y,p=t.z,u=i-r,m=c-o,S=p-s,g=Math.hypot(u,m),f=S/g,A=[u/g,m/g,0],b=[n-r,a-o,0],L=d([-m/g,u/g,0],b),y=d(A,b);if(Math.abs(L)>l||y<0&&Math.hypot(L,y)>l||y>g&&Math.hypot(L,g-y)>l)return null;const R=E(L,f);return y<=R?s+h(L,y):R<y&&y<R+g?s+h(L,R)+f*(y-R):y>=R+g?p+h(L,y-g):void 0},t}},function(e,t,n){const a=n(16);EASEL.cutArea=(()=>{const e=function(e,t,n){const r=Math.max(-e.z,-t.z),o=n.type()===a.v&&0===r?0:n.inchWidth(r)/2;return function(n){const a=new THREE.Vector3(n.x,n.y,0),r=new THREE.Vector3(e.x,e.y,0),s=new THREE.Vector3(t.x,t.y,0),i=(new THREE.Vector3).subVectors(a,r),l=(new THREE.Vector3).subVectors(s,r),c=THREE.Math.clamp(i.dot(l)/l.dot(l),0,1);return(new THREE.Vector3).subVectors(i,l.multiplyScalar(c)).length()-o||1/0}},t=function(e,t,n){const r=function(e){const t=e.inchWidth()/2;return e.type()===a.v?EASEL.APTCutter({f:0,r:0,a:t,b:t,m:0,n:0,R:t}):EASEL.APTCutter({f:t,r:0,a:0,b:0,m:t,n:0,R:t})}(n);return n=>r.cutterSweptSurface(e,t,n.x,n.y)||1/0};return(n,a,r)=>({z:t(n,a,r),distanceTo:e(n,a,r)})})()},function(e,t){EASEL.cutAreaGenerator=({paths:e,bit:t})=>{const n=[];for(let{points:a}of Array.from(e.all()))for(let e=0;e<a.length;e++){const r=a[e];0===e||r.z>0||n.push(EASEL.cutArea(a[e-1],a[e],t))}return n}},function(e,t){EASEL.simulator={process:e=>{const t=[];for(let n=0;n<5e4;n++)t.push({x:8*Math.random(),y:8*Math.random(),z:0});return e.forEach((e=>{t.forEach((t=>{t.z=Math.min(t.z,e.z(t))}))})),t}}},function(e,t,n){n(1225),n(1226),n(1227),n(1228),n(1229),n(1230),n(1231),n(1232),n(1233),n(1234),n(1235),n(1236),n(1237),n(1238),n(1239),n(1240),n(1241),n(1242),n(1243),n(1244),n(1245),n(1246),n(1247),n(1248),n(1249),n(1250),n(1251)},function(e,t,n){(function(e){fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!==typeof e&&"undefined"===typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width"],fabric.DPI=96,function(){function e(e,t){this.__eventListeners[e]&&(t?fabric.util.removeFromArray(this.__eventListeners[e],t):this.__eventListeners[e].length=0)}function t(e,t){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in e)this.on(n,e[n]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t);return this}function n(t,n){if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&&"object"===typeof arguments[0])for(var a in t)e.call(this,a,t[a]);else e.call(this,t,n);return this}}function a(e,t){if(this.__eventListeners){var n=this.__eventListeners[e];if(n){for(var a=0,r=n.length;a<r;a++)n[a].call(this,t||{});return this}}}fabric.Observable={observe:t,stopObserving:n,fire:a,on:t,off:n,trigger:a}}()}).call(this,n(37).Buffer)},function(e,t){var n,a,r,o;n=this,a=Math.sqrt,r=Math.atan2,o=Math.PI/180,fabric.util={removeFromArray:function(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*o},radiansToDegrees:function(e){return e/o},rotatePoint:function(e,t,n){var a=Math.sin(n),r=Math.cos(n);e.subtractEquals(t);var o=e.x*r-e.y*a,s=e.x*a+e.y*r;return new fabric.Point(o,s).addEquals(t)},transformPoint:function(e,t,n){return n?new fabric.Point(t[0]*e.x+t[1]*e.y,t[2]*e.x+t[3]*e.y):new fabric.Point(t[0]*e.x+t[1]*e.y+t[4],t[2]*e.x+t[3]*e.y+t[5])},invertTransform:function(e){var t=e.slice(),n=1/(e[0]*e[3]-e[1]*e[2]);t=[n*e[3],-n*e[1],-n*e[2],n*e[0],0,0];var a=fabric.util.transformPoint({x:e[4],y:e[5]},t);return t[4]=-a.x,t[5]=-a.y,t},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e){var t=/\D{0,2}$/.exec(e),n=parseFloat(e);switch(t[0]){case"mm":return n*fabric.DPI/25.4;case"cm":return n*fabric.DPI/2.54;case"in":return n*fabric.DPI;case"pt":return n*fabric.DPI/72;case"pc":return n*fabric.DPI/72*12;default:return n}},falseFunction:function(){return!1},getKlass:function(e,t){return e=fabric.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),fabric.util.resolveNamespace(t)[e]},resolveNamespace:function(e){if(!e)return fabric;for(var t=e.split("."),a=t.length,r=n||fabric.window,o=0;o<a;++o)r=r[t[o]];return r},enlivenObjects:function(e,t,n,a){function r(){++s===i&&t&&t(o)}var o=[],s=0,i=(e=e||[]).length;i?e.forEach((function(e,t){if(e&&e.type){var s=fabric.util.getKlass(e.type,n);s.async?s.fromObject(e,(function(n,s){s||(o[t]=n,a&&a(e,o[t])),r()})):(o[t]=s.fromObject(e),a&&a(e,o[t]),r())}else r()})):t&&t(o)},groupSVGElements:function(e,t,n){var a;return a=new fabric.PathGroup(e,t),"undefined"!==typeof n&&a.setSourcePath(n),a},populateWithProperties:function(e,t,n){if(n&&"[object Array]"===Object.prototype.toString.call(n))for(var a=0,r=n.length;a<r;a++)n[a]in e&&(t[n[a]]=e[n[a]])},drawDashedLine:function(e,t,n,o,s,i){var l=o-t,c=s-n,p=a(l*l+c*c),u=r(c,l),d=i.length,h=0,E=!0;for(e.save(),e.translate(t,n),e.moveTo(0,0),e.rotate(u),t=0;p>t;)(t+=i[h++%d])>p&&(t=p),e[E?"lineTo":"moveTo"](t,0),E=!E;e.restore()},createCanvasElement:function(e){return e||(e=fabric.document.createElement("canvas")),e.getContext||"undefined"===typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(e),e},createImage:function(){return fabric.document.createElement("img")},createAccessors:function(e){for(var t=e.prototype,n=t.stateProperties.length;n--;){var a=t.stateProperties[n],r=a.charAt(0).toUpperCase()+a.slice(1),o="set"+r,s="get"+r;t[s]||(t[s]=new Function('return this.get("'+a+'")')),t[o]||(t[o]=function(e){return new Function("value",'return this.set("'+e+'", value)')}(a))}},clipContext:function(e,t){t.save(),t.beginPath(),e.clipTo(t),t.clip()},multiplyTransformMatrices:function(e,t){for(var n=[[e[0],e[2],e[4]],[e[1],e[3],e[5]],[0,0,1]],a=[[t[0],t[2],t[4]],[t[1],t[3],t[5]],[0,0,1]],r=[],o=0;o<3;o++){r[o]=[];for(var s=0;s<3;s++){for(var i=0,l=0;l<3;l++)i+=n[o][l]*a[l][s];r[o][s]=i}}return[r[0][0],r[1][0],r[0][1],r[1][1],r[0][2],r[1][2]]},getFunctionBody:function(e){return(String(e).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(e,t,n,a){a>0&&(t>a?t-=a:t=0,n>a?n-=a:n=0);for(var r=!0,o=e.getImageData(t,n,2*a||1,2*a||1),s=3,i=o.data.length;s<i&&!1!==(r=o.data[s]<=0);s+=4);return o=null,r}},function(){var e,t={},n={},a=Array.prototype.join;function r(e,t,n,a,r,o,s){var i=e*(Math.PI/180),l=Math.sin(i),c=Math.cos(i),p=c*(a-o)+l*(r-s),u=c*(r-s)-l*(a-o),d=p*p/((t=Math.abs(t))*t)+u*u/((n=Math.abs(n))*n);(d*=.25)>1&&(t*=d=Math.sqrt(d),n*=d);var h=c/t,E=l/t,m=-l/n,S=c/n;return{x0:h*a+E*r,y0:m*a+S*r,x1:h*o+E*s,y1:m*o+S*s,sinTh:l,cosTh:c}}function o(t,r,o,s,i,l,c,p){if(e=a.call(arguments),n[e])return n[e];var u=Math.sin(o),d=Math.cos(o),h=Math.sin(s),E=Math.cos(s),m=p*i,S=-c*l,g=c*i,f=p*l,A=.25*(s-o),b=8/3*Math.sin(A)*Math.sin(A)/Math.sin(2*A),L=t+d-b*u,y=r+u+b*d,R=t+E,v=r+h,P=R+b*h,C=v-b*E;return n[e]=[m*L+S*y,g*L+f*y,m*P+S*C,g*P+f*C,m*R+S*v,g*R+f*v],n[e]}fabric.util.drawArc=function(n,s,i,l){for(var c=l[0],p=l[1],u=l[2],d=l[3],h=l[4],E=function(n,o,s,i,l,c,p,u,d){if(e=a.call(arguments),t[e])return t[e];var h=r(p,s,i,u,d,n,o),E=1/((h.x1-h.x0)*(h.x1-h.x0)+(h.y1-h.y0)*(h.y1-h.y0))-.25;E<0&&(E=0);var m=Math.sqrt(E);c===l&&(m=-m);var S=.5*(h.x0+h.x1)-m*(h.y1-h.y0),g=.5*(h.y0+h.y1)+m*(h.x1-h.x0),f=Math.atan2(h.y0-g,h.x0-S),A=Math.atan2(h.y1-g,h.x1-S)-f;A<0&&1===c?A+=2*Math.PI:A>0&&0===c&&(A-=2*Math.PI);for(var b=Math.ceil(Math.abs(A/(.5*Math.PI+.001))),L=[],y=0;y<b;y++){var R=f+y*A/b,v=f+(y+1)*A/b;L[y]=[S,g,R,v,s,i,h.sinTh,h.cosTh]}return t[e]=L,L}(l[5],l[6],c,p,d,h,u,s,i),m=0;m<E.length;m++){var S=o.apply(this,E[m]);n.bezierCurveTo.apply(n,S)}}}(),function(){function e(e,t){for(var n in t)e[n]=t[n];return e}fabric.util.object={extend:e,clone:function(t){return e({},t)}}}(),fabric.util.string={camelize:function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(){var e=Array.prototype.slice,t=function(){},n=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),a=function(e,t,a){for(var r in t)r in e.prototype&&"function"===typeof e.prototype[r]&&(t[r]+"").indexOf("callSuper")>-1?e.prototype[r]=function(e){return function(){var n=this.constructor.superclass;this.constructor.superclass=a;var r=t[e].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==e)return r}}(r):e.prototype[r]=t[r],n&&(t.toString!==Object.prototype.toString&&(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=t.valueOf))};function r(){}function o(t){var n=this.constructor.superclass.prototype[t];return arguments.length>1?n.apply(this,e.call(arguments,1)):n.call(this)}fabric.util.createClass=function(){var n=null,s=e.call(arguments,0);function i(){this.initialize.apply(this,arguments)}"function"===typeof s[0]&&(n=s.shift()),i.superclass=n,i.subclasses=[],n&&(r.prototype=n.prototype,i.prototype=new r,n.subclasses.push(i));for(var l=0,c=s.length;l<c;l++)a(i,s[l],n);return i.prototype.initialize||(i.prototype.initialize=t),i.prototype.constructor=i,i.prototype.callSuper=o,i}}()},function(e,t){var n,a,r,o,s;n=fabric.document.createElement("div"),a="string"===typeof n.style.opacity,r="string"===typeof n.style.filter,o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(e){return e},a?s=function(e,t){return e.style.opacity=t,e}:r&&(s=function(e,t){var n=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(n.zoom=1),o.test(n.filter)?(t=t>=.9999?"":"alpha(opacity="+100*t+")",n.filter=n.filter.replace(o,t)):n.filter+=" alpha(opacity="+100*t+")",e}),fabric.util.setStyle=function(e,t){var n=e.style;if(!n)return e;if("string"===typeof t)return e.style.cssText+=";"+t,t.indexOf("opacity")>-1?s(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var a in t)"opacity"===a?s(e,t[a]):n["float"===a||"cssFloat"===a?"undefined"===typeof n.styleFloat?"cssFloat":"styleFloat":a]=t[a];return e},function(){var e=Array.prototype.slice;var t,n,a,r,o=function(t){return e.call(t,0)};try{t=o(fabric.document.childNodes)instanceof Array}catch(i){}function s(e,t){var n=fabric.document.createElement(e);for(var a in t)"class"===a?n.className=t[a]:"for"===a?n.htmlFor=t[a]:n.setAttribute(a,t[a]);return n}t||(o=function(e){for(var t=new Array(e.length),n=e.length;n--;)t[n]=e[n];return t}),n=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(e,t){return fabric.document.defaultView.getComputedStyle(e,null)[t]}:function(e,t){var n=e.style[t];return!n&&e.currentStyle&&(n=e.currentStyle[t]),n},a=fabric.document.documentElement.style,r="userSelect"in a?"userSelect":"MozUserSelect"in a?"MozUserSelect":"WebkitUserSelect"in a?"WebkitUserSelect":"KhtmlUserSelect"in a?"KhtmlUserSelect":"",fabric.util.makeElementUnselectable=function(e){return"undefined"!==typeof e.onselectstart&&(e.onselectstart=fabric.util.falseFunction),r?e.style[r]="none":"string"===typeof e.unselectable&&(e.unselectable="on"),e},fabric.util.makeElementSelectable=function(e){return"undefined"!==typeof e.onselectstart&&(e.onselectstart=null),r?e.style[r]="":"string"===typeof e.unselectable&&(e.unselectable=""),e},fabric.util.getScript=function(e,t){var n=fabric.document.getElementsByTagName("head")[0],a=fabric.document.createElement("script"),r=!0;a.onload=a.onreadystatechange=function(e){if(r){if("string"===typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;r=!1,t(e||fabric.window.event),a=a.onload=a.onreadystatechange=null}},a.src=e,n.appendChild(a)},fabric.util.getById=function(e){return"string"===typeof e?fabric.document.getElementById(e):e},fabric.util.toArray=o,fabric.util.makeElement=s,fabric.util.addClass=function(e,t){e&&-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=(e.className?" ":"")+t)},fabric.util.wrapElement=function(e,t,n){return"string"===typeof t&&(t=s(t,n)),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},fabric.util.getScrollLeftTop=function(e,t){var n,a,r=0,o=0,s=fabric.document.documentElement,i=fabric.document.body||{scrollLeft:0,scrollTop:0};for(a=e;e&&e.parentNode&&!n;)(e=e.parentNode)!==fabric.document&&"fixed"===fabric.util.getElementStyle(e,"position")&&(n=e),e!==fabric.document&&a!==t&&"absolute"===fabric.util.getElementStyle(e,"position")?(r=0,o=0):e===fabric.document?(r=i.scrollLeft||s.scrollLeft||0,o=i.scrollTop||s.scrollTop||0):(r+=e.scrollLeft||0,o+=e.scrollTop||0);return{left:r,top:o}},fabric.util.getElementOffset=function(e){var t,a,r=e&&e.ownerDocument,o={left:0,top:0},s={left:0,top:0},i={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return{left:0,top:0};for(var l in i)s[i[l]]+=parseInt(n(e,l),10)||0;return t=r.documentElement,"undefined"!==typeof e.getBoundingClientRect&&(o=e.getBoundingClientRect()),a=fabric.util.getScrollLeftTop(e,null),{left:o.left+a.left-(t.clientLeft||0)+s.left,top:o.top+a.top-(t.clientTop||0)+s.top}},fabric.util.getElementStyle=n}()},function(e,t){!function(){var e="unknown";function t(e){var t,n,a=Array.prototype.slice.call(arguments,1),r=a.length;for(n=0;n<r;n++)if(t=typeof e[a[n]],!/^(?:function|object|unknown)$/.test(t))return!1;return!0}var n,a,r,o,s=(r=0,function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+r++)});function i(e,t){return function(a){t.call(n(e),a||fabric.window.event)}}o={},n=function(e){return o[e]},a=function(e,t){o[e]=t};var l,c,p=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),u=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),d={},h={};p?(l=function(e,t,n){e.addEventListener(t,n,!1)},c=function(e,t,n){e.removeEventListener(t,n,!1)}):u?(l=function(e,t,n){var r=s(e);a(r,e),d[r]||(d[r]={}),d[r][t]||(d[r][t]=[]);var o=function(e,t){return{handler:t,wrappedHandler:i(e,t)}}(r,n);d[r][t].push(o),e.attachEvent("on"+t,o.wrappedHandler)},c=function(e,t,n){var a,r=s(e);if(d[r]&&d[r][t])for(var o=0,i=d[r][t].length;o<i;o++)(a=d[r][t][o])&&a.handler===n&&(e.detachEvent("on"+t,a.wrappedHandler),d[r][t][o]=null)}):(l=function(e,t,n){var a=s(e);if(h[a]||(h[a]={}),!h[a][t]){h[a][t]=[];var r=e["on"+t];r&&h[a][t].push(r),e["on"+t]=function(e,t){return function(n){if(h[e]&&h[e][t])for(var a=h[e][t],r=0,o=a.length;r<o;r++)a[r].call(this,n||fabric.window.event)}}(a,t)}h[a][t].push(n)},c=function(e,t,n){var a=s(e);if(h[a]&&h[a][t])for(var r=h[a][t],o=0,i=r.length;o<i;o++)r[o]===n&&r.splice(o,1)}),fabric.util.addListener=l,fabric.util.removeListener=c;var E=function(t){return typeof t.clientX!==e?t.clientX:0},m=function(t){return typeof t.clientY!==e?t.clientY:0};function S(e,t,n){var a="touchend"===e.type?"changedTouches":"touches";return e[a]&&e[a][0]&&e[a][0][t]-(e[a][0][t]-e[a][0][n])||e[n]}fabric.isTouchSupported&&(E=function(e){return S(e,"pageX","clientX")},m=function(e){return S(e,"pageY","clientY")}),fabric.util.getPointer=function(t,n){t||(t=fabric.window.event);var a=t.target||(typeof t.srcElement!==e?t.srcElement:null),r=fabric.util.getScrollLeftTop(a,n);return{x:E(t)+r.left,y:m(t)+r.top}},fabric.util.object.extend(fabric.util,fabric.Observable)}()},function(e,t){!function(e){"use strict";function t(e,t){this.x=e,this.y=t}fabric.Point?fabric.warn("fabric.Point is already defined"):(fabric.Point=t,t.prototype={constructor:t,add:function(e){return new t(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new t(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new t(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new t(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new t(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new t(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,n){return new t(this.x+(e.x-this.x)*n,this.y+(e.y-this.y)*n)},distanceFrom:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},midPointFrom:function(e){return new t(this.x+(e.x-this.x)/2,this.y+(e.y-this.y)/2)},min:function(e){return new t(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new t(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){this.x=e,this.y=t},setFromPoint:function(e){this.x=e.x,this.y=e.y},swap:function(e){var t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}})}()},function(e,t){fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(e,t,n){var a=this.getObjects();return n?a[t]=e:a.splice(t,0,e),this._onObjectAdded(e),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var e,t=this.getObjects(),n=0,a=arguments.length;n<a;n++)-1!==(e=t.indexOf(arguments[n]))&&(t.splice(e,1),this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&this.renderAll(),this},forEachObject:function(e,t){for(var n=this.getObjects(),a=n.length;a--;)e.call(t,n[a],a,n);return this},getObjects:function(e){return"undefined"===typeof e?this._objects:this._objects.filter((function(t){return t.type===e}))},item:function(e){return this.getObjects()[e]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(e){return this.getObjects().indexOf(e)>-1},complexity:function(){return this.getObjects().reduce((function(e,t){return e+=t.complexity?t.complexity():0}),0)}}},function(e,t){var n;!function(e){"use strict";var t=fabric.util.object.extend,n=fabric.util.toFixed,a=fabric.util.string.capitalize,r=fabric.util.degreesToRadians;fabric.Object||(fabric.Object=fabric.util.createClass({type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"source-over",backgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule clipTo visible backgroundColor".split(" "),initialize:function(e){e&&this.setOptions(e)},_initClipping:function(e){if(e.clipTo&&"string"===typeof e.clipTo){var t=fabric.util.getFunctionBody(e.clipTo);"undefined"!==typeof t&&(this.clipTo=new Function("ctx",t))}},setOptions:function(e){for(var t in e)this.set(t,e[t]);this._initClipping(e)},transform:function(e,t){this.group&&this.group.transform(e,t),e.globalAlpha=this.opacity;var n=t?this._getLeftTopCoords():this.getCenterPoint();e.translate(n.x,n.y),e.rotate(r(this.angle)),e.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(e){var t=fabric.Object.NUM_FRACTION_DIGITS,a={type:this.type,originX:this.originX,originY:this.originY,left:n(this.left,t),top:n(this.top,t),width:n(this.width,t),height:n(this.height,t),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,t),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,t),scaleX:n(this.scaleX,t),scaleY:n(this.scaleY,t),angle:n(this.getAngle(),t),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,t),visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor};return this.includeDefaultValues||(a=this._removeDefaultValues(a)),fabric.util.populateWithProperties(this,a,e),a},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var t=fabric.util.getKlass(e.type).prototype;return t.stateProperties.forEach((function(n){e[n]===t[n]&&delete e[n]})),e},toString:function(){return"#<fabric."+a(this.type)+">"},get:function(e){return this[e]},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){return"object"===typeof e?this._setObject(e):"function"===typeof t&&"clipTo"!==e?this._set(e,t(this.get(e))):this._set(e,t),this},_set:function(e,t){return("scaleX"===e||"scaleY"===e)&&(t=this._constrainScale(t)),"scaleX"===e&&t<0?(this.flipX=!this.flipX,t*=-1):"scaleY"===e&&t<0?(this.flipY=!this.flipY,t*=-1):"width"!==e&&"height"!==e||(this.minScaleLimit=n(Math.min(.1,1/Math.max(this.width,this.height)),2)),this[e]=t,this},toggle:function(e){var t=this.get(e);return"boolean"===typeof t&&this.set(e,!t),this},setSourcePath:function(e){return this.sourcePath=e,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(e,t){if((0!==this.width||0!==this.height)&&this.visible){e.save(),this._setupFillRule(e),this._transform(e,t),this._setStrokeStyles(e),this._setFillStyles(e);var n=this.transformMatrix;n&&this.group&&(e.translate(-this.group.width/2,-this.group.height/2),e.transform(n[0],n[1],n[2],n[3],n[4],n[5])),this.clipTo&&fabric.util.clipContext(this,e),this._render(e,t),this.clipTo&&e.restore(),this._restoreFillRule(e),e.restore()}},_transform:function(e,t){var n=this.transformMatrix;n&&!this.group&&e.setTransform(n[0],n[1],n[2],n[3],n[4],n[5]),t||this.transform(e)},_setStrokeStyles:function(e){this.stroke&&(e.lineWidth=this.strokeWidth,e.lineCap=this.strokeLineCap,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,e.strokeStyle=this.stroke.toLive?this.stroke.toLive(e):this.stroke)},_setFillStyles:function(e){this.fill&&(e.fillStyle=this.fill.toLive?this.fill.toLive(e):this.fill)},_renderControls:function(e,t){var n,a=this.getViewportTransform();(e.save(),this.active&&!t)&&(this.group&&(n=fabric.util.transformPoint(this.group.getCenterPoint(),a),e.translate(n.x,n.y),e.rotate(r(this.group.angle))),n=fabric.util.transformPoint(this.getCenterPoint(),a,null!=this.group),this.group&&(n.x*=this.group.scaleX,n.y*=this.group.scaleY),e.translate(n.x,n.y),e.rotate(r(this.angle)),this.drawBorders(e),this.drawControls(e));e.restore()},_renderFill:function(e){this.fill&&(this.fill.toLive&&(e.save(),e.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0)),"destination-over"===this.fillRule?e.fill("evenodd"):e.fill(),this.fill.toLive&&e.restore())},_renderStroke:function(e){if(this.stroke&&0!==this.strokeWidth){var t,n,a=0;this.easel&&this.easel.cut&&null!=this.easel.cut.offset&&(a=this.easel.cut.offset),e.save(),this.strokeDashArray?(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),fabric.StaticCanvas.supports("setLineDash")?(e.setLineDash(this.strokeDashArray),this._stroke&&this._stroke(e)):this._renderDashedStroke&&this._renderDashedStroke(e),e.stroke()):this._stroke?this._stroke(e):(e.save(),-1==a?(e.lineWidth=2*e.lineWidth,e.clip()):1==a&&(e.lineWidth=2*e.lineWidth,t=this,n=Math.max(e.canvas.width,e.canvas.height)*(1/Math.min(Math.abs(t.scaleX),Math.abs(t.scaleY)))*10,e.rect(-n,-n,2*n,2*n),e.clip("evenodd")),e.stroke(),e.restore(),this.active&&function(t){e.save();var n=1/Math.min(Math.abs(t.scaleX),Math.abs(t.scaleY));e.lineWidth=n,e.strokeStyle="#3f7ac3",e.stroke(),e.restore()}(this)),e.restore()}},clone:function(e,t){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(t),e):new fabric.Object(this.toObject(t))},toDataURL:function(e){e||(e={});var t=fabric.util.createCanvasElement(),n=this.getBoundingRect();t.width=n.width,t.height=n.height,fabric.util.wrapElement(t,"div");var a=new fabric.Canvas(t);"jpg"===e.format&&(e.format="jpeg"),"jpeg"===e.format&&(a.backgroundColor="#fff");var r={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new fabric.Point(t.width/2,t.height/2),"center","center");var o=this.canvas;a.add(this);var s=a.toDataURL(e);return this.set(r).setCoords(),this.canvas=o,a.dispose(),a=null,s},isType:function(e){return this.type===e},complexity:function(){return 0},toJSON:function(e){return this.toObject(e)},setColor:function(e){return this.set("fill",e),this},setAngle:function(e){var t=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin(),this},centerH:function(){return this.canvas.centerObjectH(this),this},centerV:function(){return this.canvas.centerObjectV(this),this},center:function(){return this.canvas.centerObject(this),this},remove:function(){return this.canvas.remove(this),this},getLocalPointer:function(e,t){t=t||this.canvas.getPointer(e);var n=this.translateToOriginPoint(this.getCenterPoint(),"left","top");return{x:t.x-n.x,y:t.y-n.y}},_setupFillRule:function(e){this.fillRule&&(this._prevFillRule=e.globalCompositeOperation,e.globalCompositeOperation=this.fillRule)},_restoreFillRule:function(e){this.fillRule&&this._prevFillRule&&(e.globalCompositeOperation=this._prevFillRule)}}),fabric.util.createAccessors(fabric.Object),fabric.Object.prototype.rotate=fabric.Object.prototype.setAngle,t(fabric.Object.prototype,fabric.Observable),fabric.Object.NUM_FRACTION_DIGITS=20,fabric.Object.__uid=0)}(),n=fabric.util.degreesToRadians,fabric.util.object.extend(fabric.Object.prototype,{translateToCenterPoint:function(e,t,a){var r=e.x,o=e.y,s=this.stroke?this.strokeWidth:0;return"left"===t?r=e.x+(this.getWidth()+s*this.scaleX)/2:"right"===t&&(r=e.x-(this.getWidth()+s*this.scaleX)/2),"top"===a?o=e.y+(this.getHeight()+s*this.scaleY)/2:"bottom"===a&&(o=e.y-(this.getHeight()+s*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,n(this.angle))},translateToOriginPoint:function(e,t,a){var r=e.x,o=e.y,s=this.stroke?this.strokeWidth:0;return"left"===t?r=e.x-(this.getWidth()+s*this.scaleX)/2:"right"===t&&(r=e.x+(this.getWidth()+s*this.scaleX)/2),"top"===a?o=e.y-(this.getHeight()+s*this.scaleY)/2:"bottom"===a&&(o=e.y+(this.getHeight()+s*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,n(this.angle))},translateToOriginPointIgnoringStroke:function(e,t,a){var r=e.x,o=e.y;return"left"===t?r=e.x-this.getWidth()/2:"right"===t&&(r=e.x+this.getWidth()/2),"top"===a?o=e.y-this.getHeight()/2:"bottom"===a&&(o=e.y+this.getHeight()/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,n(this.angle))},getCenterPoint:function(){var e=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var n=this.getCenterPoint();return this.translateToOriginPoint(n,e,t)},toLocalPoint:function(e,t,a){var r,o,s=this.getCenterPoint(),i=this.stroke?this.strokeWidth:0;return t&&a?(r="left"===t?s.x-(this.getWidth()+i*this.scaleX)/2:"right"===t?s.x+(this.getWidth()+i*this.scaleX)/2:s.x,o="top"===a?s.y-(this.getHeight()+i*this.scaleY)/2:"bottom"===a?s.y+(this.getHeight()+i*this.scaleY)/2:s.y):(r=this.left,o=this.top),fabric.util.rotatePoint(new fabric.Point(e.x,e.y),s,-n(this.angle)).subtractEquals(new fabric.Point(r,o))},setPositionByOrigin:function(e,t,n){var a=this.translateToCenterPoint(e,t,n),r=this.translateToOriginPoint(a,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(e){var t=n(this.angle),a=this.getWidth()/2,r=Math.cos(t)*a,o=Math.sin(t)*a,s=this.getWidth(),i=Math.cos(t)*s,l=Math.sin(t)*s;"center"===this.originX&&"left"===e||"right"===this.originX&&"center"===e?(this.left-=r,this.top-=o):"left"===this.originX&&"center"===e||"center"===this.originX&&"right"===e?(this.left+=r,this.top+=o):"left"===this.originX&&"right"===e?(this.left+=i,this.top+=l):"right"===this.originX&&"left"===e&&(this.left-=i,this.top-=l),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","center")}}),function(){var e=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(e,t){var n=this.oCoords,a=new fabric.Point(n.tl.x,n.tl.y),r=new fabric.Point(n.tr.x,n.tr.y),o=new fabric.Point(n.bl.x,n.bl.y),s=new fabric.Point(n.br.x,n.br.y);return"Intersection"===fabric.Intersection.intersectPolygonRectangle([a,r,s,o],e,t).status},intersectsWithObject:function(e){function t(e){return{tl:new fabric.Point(e.tl.x,e.tl.y),tr:new fabric.Point(e.tr.x,e.tr.y),bl:new fabric.Point(e.bl.x,e.bl.y),br:new fabric.Point(e.br.x,e.br.y)}}var n=t(this.oCoords),a=t(e.oCoords);return"Intersection"===fabric.Intersection.intersectPolygonPolygon([n.tl,n.tr,n.br,n.bl],[a.tl,a.tr,a.br,a.bl]).status},isContainedWithinObject:function(e){var t=e.getBoundingRect(),n=new fabric.Point(t.left,t.top),a=new fabric.Point(t.left+t.width,t.top+t.height);return this.isContainedWithinRect(n,a)},isContainedWithinRect:function(e,t){var n=this.getBoundingRect();return n.left>=e.x&&n.left+n.width<=t.x&&n.top>=e.y&&n.top+n.height<=t.y},containsPoint:function(e){var t=this._getImageLines(this.oCoords),n=this._findCrossPoints(e,t);return 0!==n&&n%2===1},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var n,a,r,o,s=0;for(var i in t)if(!((o=t[i]).o.y<e.y&&o.d.y<e.y)&&!(o.o.y>=e.y&&o.d.y>=e.y)&&(o.o.x===o.d.x&&o.o.x>=e.x?(r=o.o.x,e.y):(0,n=(o.d.y-o.o.y)/(o.d.x-o.o.x),(a=e.y-0*e.x)+0*(r=-(a-(o.o.y-n*o.o.x))/(0-n))),r>=e.x&&(s+=1),2===s))break;return s},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var e=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],t=fabric.util.array.min(e),n=fabric.util.array.max(e),a=Math.abs(t-n),r=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],o=fabric.util.array.min(r),s=fabric.util.array.max(r);return{left:t,top:o,width:a,height:Math.abs(o-s)}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e},scale:function(e){return(e=this._constrainScale(e))<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,e*=-1),this.scaleX=e,this.scaleY=e,this.setCoords(),this},scaleToWidth:function(e){var t=this.getBoundingRectWidth()/this.getWidth();return this.scale(e/this.width/t)},scaleToHeight:function(e){var t=this.getBoundingRectHeight()/this.getHeight();return this.scale(e/this.height/t)},setCoords:function(){var t=this.strokeWidth,n=e(this.angle),a=this.getViewportTransform(),r=function(e){return fabric.util.transformPoint(e,a)},o=this.width,s=this.height;o+=t,s+=t,this.currentWidth=o*this.scaleX,this.currentHeight=s*this.scaleY,this.currentWidth<0&&(this.currentWidth=Math.abs(this.currentWidth));var i=Math.sqrt(Math.pow(this.currentWidth/2,2)+Math.pow(this.currentHeight/2,2)),l=Math.atan2(this.currentHeight,this.currentWidth),c=Math.cos(l+n)*i,p=Math.sin(l+n)*i,u=Math.sin(n),d=Math.cos(n),h=this.getCenterPoint(),E=new fabric.Point(this.currentWidth,this.currentHeight),m=new fabric.Point(h.x-c,h.y-p),S=new fabric.Point(m.x+E.x*d,m.y+E.x*u),g=new fabric.Point(m.x-E.y*u,m.y+E.y*d),f=new fabric.Point(m.x+E.x/2*d,m.y+E.x/2*u),A=r(m),b=r(S),L=r(new fabric.Point(S.x-E.y*u,S.y+E.y*d)),y=r(g),R=r(new fabric.Point(m.x-E.y/2*u,m.y+E.y/2*d)),v=r(f),P=r(new fabric.Point(S.x-E.y/2*u,S.y+E.y/2*d)),C=r(new fabric.Point(g.x+E.x/2*d,g.y+E.x/2*u)),T=r(new fabric.Point(f.x,f.y)),_=Math.cos(l+n)*this.padding*Math.sqrt(2),w=Math.sin(l+n)*this.padding*Math.sqrt(2);return A=A.add(new fabric.Point(-_,-w)),b=b.add(new fabric.Point(w,-_)),L=L.add(new fabric.Point(_,w)),y=y.add(new fabric.Point(-w,_)),R=R.add(new fabric.Point((-_-w)/2,(-w+_)/2)),v=v.add(new fabric.Point((w-_)/2,-(w+_)/2)),P=P.add(new fabric.Point((w+_)/2,(w-_)/2)),C=C.add(new fabric.Point((_-w)/2,(_+w)/2)),T=T.add(new fabric.Point((w-_)/2,-(w+_)/2)),this.oCoords={tl:A,tr:b,br:L,bl:y,ml:R,mt:v,mr:P,mb:C,mtr:T},this._setCornerCoords&&this._setCornerCoords(),this}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas.moveTo(this,e),this}}),fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(){var e=this.fill?this.fill.toLive?"url(#SVGID_"+this.fill.id+")":this.fill:"none";return["stroke: ",this.stroke?this.stroke.toLive?"url(#SVGID_"+this.stroke.id+")":this.stroke:"none","; ","stroke-width: ",this.strokeWidth?this.strokeWidth:"0","; ","stroke-dasharray: ",this.strokeDashArray?this.strokeDashArray.join(" "):"","; ","stroke-linecap: ",this.strokeLineCap?this.strokeLineCap:"butt","; ","stroke-linejoin: ",this.strokeLineJoin?this.strokeLineJoin:"miter","; ","stroke-miterlimit: ",this.strokeMiterLimit?this.strokeMiterLimit:"4","; ","fill: ",e,"; ","opacity: ","undefined"!==typeof this.opacity?this.opacity:"1",";",this.visible?"":" visibility: hidden;"].join("")},getSvgTransform:function(){var e=fabric.util.toFixed,t=this.getAngle(),n=this.getViewportTransform(),a=fabric.util.transformPoint(this.getCenterPoint(),n),r=fabric.Object.NUM_FRACTION_DIGITS;return["translate("+e(a.x,r)+" "+e(a.y,r)+")",0!==t?" rotate("+e(t,r)+")":"",1===this.scaleX&&1===this.scaleY&&1===n[0]&&1===n[3]?"":" scale("+e(this.scaleX*n[0],r)+" "+e(this.scaleY*n[3],r)+")",this.flipX?"matrix(-1 0 0 1 0 0) ":"",this.flipY?"matrix(1 0 0 -1 0 0)":""].join("")},_createBaseSVGMarkup:function(){var e=[];return this.fill&&this.fill.toLive&&e.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&e.push(this.stroke.toSVG(this,!1)),e}}),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some((function(e){return this.get(e)!==this.originalState[e]}),this)},saveState:function(e){return this.stateProperties.forEach((function(e){this.originalState[e]=this.get(e)}),this),e&&e.stateProperties&&e.stateProperties.forEach((function(e){this.originalState[e]=this.get(e)}),this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(){var e=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(e){if(!this.hasControls||!this.active)return!1;var t,n,a=e.x,r=e.y;for(var o in this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(n=this._getImageLines(this.oCoords[o].corner),0!==(t=this._findCrossPoints({x:a,y:r},n))&&t%2===1))return this.__corner=o,o;return!1},_setCornerCoords:function(){var t=this.oCoords,n=e(this.angle),a=e(45-this.angle),r=Math.sqrt(2*Math.pow(this.cornerSize,2))/2,o=r*Math.cos(a),s=r*Math.sin(a),i=Math.sin(n),l=Math.cos(n);t.tl.corner={tl:{x:t.tl.x-s,y:t.tl.y-o},tr:{x:t.tl.x+o,y:t.tl.y-s},bl:{x:t.tl.x-o,y:t.tl.y+s},br:{x:t.tl.x+s,y:t.tl.y+o}},t.tr.corner={tl:{x:t.tr.x-s,y:t.tr.y-o},tr:{x:t.tr.x+o,y:t.tr.y-s},br:{x:t.tr.x+s,y:t.tr.y+o},bl:{x:t.tr.x-o,y:t.tr.y+s}},t.bl.corner={tl:{x:t.bl.x-s,y:t.bl.y-o},bl:{x:t.bl.x-o,y:t.bl.y+s},br:{x:t.bl.x+s,y:t.bl.y+o},tr:{x:t.bl.x+o,y:t.bl.y-s}},t.br.corner={tr:{x:t.br.x+o,y:t.br.y-s},bl:{x:t.br.x-o,y:t.br.y+s},br:{x:t.br.x+s,y:t.br.y+o},tl:{x:t.br.x-s,y:t.br.y-o}},t.ml.corner={tl:{x:t.ml.x-s,y:t.ml.y-o},tr:{x:t.ml.x+o,y:t.ml.y-s},bl:{x:t.ml.x-o,y:t.ml.y+s},br:{x:t.ml.x+s,y:t.ml.y+o}},t.mt.corner={tl:{x:t.mt.x-s,y:t.mt.y-o},tr:{x:t.mt.x+o,y:t.mt.y-s},bl:{x:t.mt.x-o,y:t.mt.y+s},br:{x:t.mt.x+s,y:t.mt.y+o}},t.mr.corner={tl:{x:t.mr.x-s,y:t.mr.y-o},tr:{x:t.mr.x+o,y:t.mr.y-s},bl:{x:t.mr.x-o,y:t.mr.y+s},br:{x:t.mr.x+s,y:t.mr.y+o}},t.mb.corner={tl:{x:t.mb.x-s,y:t.mb.y-o},tr:{x:t.mb.x+o,y:t.mb.y-s},bl:{x:t.mb.x-o,y:t.mb.y+s},br:{x:t.mb.x+s,y:t.mb.y+o}},t.mtr.corner={tl:{x:t.mtr.x-s+i*this.rotatingPointOffset,y:t.mtr.y-o-l*this.rotatingPointOffset},tr:{x:t.mtr.x+o+i*this.rotatingPointOffset,y:t.mtr.y-s-l*this.rotatingPointOffset},bl:{x:t.mtr.x-o+i*this.rotatingPointOffset,y:t.mtr.y+s-l*this.rotatingPointOffset},br:{x:t.mtr.x+s+i*this.rotatingPointOffset,y:t.mtr.y+o-l*this.rotatingPointOffset}}},drawBorders:function(e){if(!this.hasBorders)return this;var t=this.padding,n=2*t,a=this.getViewportTransform();e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,e.strokeStyle=this.borderColor;var r=1/this._constrainScale(this.scaleX),o=1/this._constrainScale(this.scaleY);e.lineWidth=1/this.borderScaleFactor;var s=this.getWidth(),i=this.getHeight(),l=this.strokeWidth;s+=l/r,i+=l/o;var c=fabric.util.transformPoint(new fabric.Point(s,i),a,!0),p=c.x,u=c.y;if(this.group&&(p*=this.group.scaleX,u*=this.group.scaleY),e.strokeRect(~~(-p/2-t)-.5,~~(-u/2-t)-.5,1+~~(p+n),1+~~(u+n)),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var d=(-u-2*t)/2;e.beginPath(),e.moveTo(0,d),e.lineTo(0,d-this.rotatingPointOffset),e.closePath(),e.stroke()}return e.restore(),this},drawControls:function(e){if(!this.hasControls)return this;var t=this.cornerSize,n=t/2,a=this.getViewportTransform(),r=this.strokeWidth,o=this.width,s=this.height;o+=r,s+=r,o*=this.scaleX,s*=this.scaleY;var i=fabric.util.transformPoint(new fabric.Point(o,s),a,!0),l=i.x,c=i.y,p=-l/2,u=-c/2,d=this.padding,h=n,E=n-t,m=this.transparentCorners?"strokeRect":"fillRect";return e.save(),e.lineWidth=1,e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,e.strokeStyle=e.fillStyle=this.cornerColor,this._drawControl("tl",e,m,p-h-d,u-h-d),this._drawControl("tr",e,m,p+l-h+d,u-h-d),this._drawControl("bl",e,m,p-h-d,u+c+E+d),this._drawControl("br",e,m,p+l+E+d,u+c+E+d),this.get("lockUniScaling")||(this._drawControl("mt",e,m,p+l/2-h,u-h-d),this._drawControl("mb",e,m,p+l/2-h,u+c+E+d),this._drawControl("mr",e,m,p+l+E+d,u+c/2-h),this._drawControl("ml",e,m,p-h-d,u+c/2-h)),this.hasRotatingPoint&&this._drawControl("mtr",e,m,p+l/2-h,u-this.rotatingPointOffset-this.cornerSize/2-d),e.restore(),this},_drawControl:function(e,t,n,a,r){var o=this.cornerSize;this.isControlVisible(e)&&("undefined"!==typeof G_vmlCanvasManager||this.transparentCorners||t.clearRect(a,r,o,o),t[n](a,r,o,o))},isControlVisible:function(e){return this._getControlsVisibility()[e]},setControlVisible:function(e,t){return this._getControlsVisibility()[e]=t,this},setControlsVisibility:function(e){for(var t in e||(e={}),e)this.setControlVisible(t,e[t]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var e,t,n=[];for(e in arguments[0])n.push(e);for(var a=0,r=n.length;a<r;a++)e=n[a],t=a!==r-1,this._animate(e,arguments[0][e],arguments[1],t)}else this._animate.apply(this,arguments);return this},_animate:function(e,t,n,a){var r,o=this;t=t.toString(),n=n?fabric.util.object.clone(n):{},~e.indexOf(".")&&(r=e.split("."));var s=r?this.get(r[0])[r[1]]:this.get(e);"from"in n||(n.from=s),t=~t.indexOf("=")?s+parseFloat(t.replace("=","")):parseFloat(t),fabric.util.animate({startValue:n.from,endValue:t,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(){return n.abort.call(o)},onChange:function(t){r?o[r[0]][r[1]]=t:o.set(e,t),a||n.onChange&&n.onChange()},onComplete:function(){a||(o.setCoords(),n.onComplete&&n.onComplete())}})}})},function(e,t){!function(){var e=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(e){fabric.window.setTimeout(e,1e3/60)};function t(){return e.apply(fabric.window,arguments)}fabric.util.animate=function(e){t((function(n){e||(e={});var a,r=n||+new Date,o=e.duration||500,s=r+o,i=e.onChange||function(){},l=e.abort||function(){return!1},c=e.easing||function(e,t,n,a){return-n*Math.cos(e/a*(Math.PI/2))+n+t},p="startValue"in e?e.startValue:0,u="endValue"in e?e.endValue:100,d=e.byValue||u-p;e.onStart&&e.onStart(),function n(u){var h=(a=u||+new Date)>s?o:a-r;l()?e.onComplete&&e.onComplete():(i(c(h,p,d,o)),a>s?e.onComplete&&e.onComplete():t(n))}(r)}))},fabric.util.requestAnimFrame=t}(),function(){function e(e,t,n,a){return e<Math.abs(t)?(e=t,a=n/4):a=n/(2*Math.PI)*Math.asin(t/e),{a:e,c:t,p:n,s:a}}function t(e,t,n){return e.a*Math.pow(2,10*(t-=1))*Math.sin((t*n-e.s)*(2*Math.PI)/e.p)}function n(e,t,n,r){return n-a(r-e,0,n,r)+t}function a(e,t,n,a){return(e/=a)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t}fabric.util.ease={easeInQuad:function(e,t,n,a){return n*(e/=a)*e+t},easeOutQuad:function(e,t,n,a){return-n*(e/=a)*(e-2)+t},easeInOutQuad:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,a){return n*(e/=a)*e*e+t},easeOutCubic:function(e,t,n,a){return n*((e=e/a-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,a){return n*(e/=a)*e*e*e+t},easeOutQuart:function(e,t,n,a){return-n*((e=e/a-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,a){return n*(e/=a)*e*e*e*e+t},easeOutQuint:function(e,t,n,a){return n*((e=e/a-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,a){return-n*Math.cos(e/a*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,a){return n*Math.sin(e/a*(Math.PI/2))+t},easeInOutSine:function(e,t,n,a){return-n/2*(Math.cos(Math.PI*e/a)-1)+t},easeInExpo:function(e,t,n,a){return 0===e?t:n*Math.pow(2,10*(e/a-1))+t},easeOutExpo:function(e,t,n,a){return e===a?t+n:n*(1-Math.pow(2,-10*e/a))+t},easeInOutExpo:function(e,t,n,a){return 0===e?t:e===a?t+n:(e/=a/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,a){return-n*(Math.sqrt(1-(e/=a)*e)-1)+t},easeOutCirc:function(e,t,n,a){return n*Math.sqrt(1-(e=e/a-1)*e)+t},easeInOutCirc:function(e,t,n,a){return(e/=a/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(n,a,r,o){var s=0;return 0===n?a:1===(n/=o)?a+r:(s||(s=.3*o),-t(e(r,r,s,1.70158),n,o)+a)},easeOutElastic:function(t,n,a,r){var o=0;if(0===t)return n;if(1===(t/=r))return n+a;o||(o=.3*r);var s=e(a,a,o,1.70158);return s.a*Math.pow(2,-10*t)*Math.sin((t*r-s.s)*(2*Math.PI)/s.p)+s.c+n},easeInOutElastic:function(n,a,r,o){var s=0;if(0===n)return a;if(2===(n/=o/2))return a+r;s||(s=o*(.3*1.5));var i=e(r,r,s,1.70158);return n<1?-.5*t(i,n,o)+a:i.a*Math.pow(2,-10*(n-=1))*Math.sin((n*o-i.s)*(2*Math.PI)/i.p)*.5+i.c+a},easeInBack:function(e,t,n,a,r){return void 0===r&&(r=1.70158),n*(e/=a)*e*((r+1)*e-r)+t},easeOutBack:function(e,t,n,a,r){return void 0===r&&(r=1.70158),n*((e=e/a-1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(e,t,n,a,r){return void 0===r&&(r=1.70158),(e/=a/2)<1?n/2*(e*e*((1+(r*=1.525))*e-r))+t:n/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},easeInBounce:n,easeOutBounce:a,easeInOutBounce:function(e,t,r,o){return e<o/2?.5*n(2*e,0,r,o)+t:.5*a(2*e-o,0,r,o)+.5*r+t}}}()},function(e,t){!function(){var e=Array.prototype.slice;function t(e,t,n){if(e&&0!==e.length){var a=e.length-1,r=t?e[a][t]:e[a];if(t)for(;a--;)n(e[a][t],r)&&(r=e[a][t]);else for(;a--;)n(e[a],r)&&(r=e[a]);return r}}fabric.util.array={invoke:function(t,n){for(var a=e.call(arguments,2),r=[],o=0,s=t.length;o<s;o++)r[o]=a.length?t[o][n].apply(t[o],a):t[o][n].call(t[o]);return r},min:function(e,n){return t(e,n,(function(e,t){return e<t}))},max:function(e,n){return t(e,n,(function(e,t){return e>=t}))}}}()},function(e,t){!function(e){"use strict";function t(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function n(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}fabric.Color?fabric.warn("fabric.Color is already defined."):(fabric.Color=t,fabric.Color.prototype={_tryParsingColor:function(e){var n;e in t.colorNameMap&&(e=t.colorNameMap[e]),"transparent"!==e?((n=t.sourceFromHex(e))||(n=t.sourceFromRgb(e)),n||(n=t.sourceFromHsl(e)),n&&this.setSource(n)):this.setSource([255,255,255,0])},_rgbToHsl:function(e,t,n){e/=255,t/=255,n/=255;var a,r,o,s=fabric.util.array.max([e,t,n]),i=fabric.util.array.min([e,t,n]);if(o=(s+i)/2,s===i)a=r=0;else{var l=s-i;switch(r=o>.5?l/(2-s-i):l/(s+i),s){case e:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-e)/l+2;break;case n:a=(e-t)/l+4}a/=6}return[Math.round(360*a),Math.round(100*r),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+t[0]+","+t[1]+"%,"+t[2]+"%,"+e[3]+")"},toHex:function(){var e,t,n,a=this.getSource();return e=1===(e=a[0].toString(16)).length?"0"+e:e,t=1===(t=a[1].toString(16)).length?"0"+t:t,n=1===(n=a[2].toString(16)).length?"0"+n:n,e.toUpperCase()+t.toUpperCase()+n.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();return t[3]=e,this.setSource(t),this},toGrayscale:function(){var e=this.getSource(),t=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),n=e[3];return this.setSource([t,t,t,n]),this},toBlackWhite:function(e){var t=this.getSource(),n=(.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),a=t[3];return e=e||127,n=Number(n)<Number(e)?0:255,this.setSource([n,n,n,a]),this},overlayWith:function(e){e instanceof t||(e=new t(e));for(var n=[],a=this.getAlpha(),r=this.getSource(),o=e.getSource(),s=0;s<3;s++)n.push(Math.round(.5*r[s]+.5*o[s]));return n[3]=a,this.setSource(n),this}},fabric.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,fabric.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,fabric.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,fabric.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},fabric.Color.fromRgb=function(e){return t.fromSource(t.sourceFromRgb(e))},fabric.Color.sourceFromRgb=function(e){var n=e.match(t.reRGBa);if(n){var a=parseInt(n[1],10)/(/%$/.test(n[1])?100:1)*(/%$/.test(n[1])?255:1),r=parseInt(n[2],10)/(/%$/.test(n[2])?100:1)*(/%$/.test(n[2])?255:1),o=parseInt(n[3],10)/(/%$/.test(n[3])?100:1)*(/%$/.test(n[3])?255:1);return[parseInt(a,10),parseInt(r,10),parseInt(o,10),n[4]?parseFloat(n[4]):1]}},fabric.Color.fromRgba=t.fromRgb,fabric.Color.fromHsl=function(e){return t.fromSource(t.sourceFromHsl(e))},fabric.Color.sourceFromHsl=function(e){var a=e.match(t.reHSLa);if(a){var r,o,s,i=(parseFloat(a[1])%360+360)%360/360,l=parseFloat(a[2])/(/%$/.test(a[2])?100:1),c=parseFloat(a[3])/(/%$/.test(a[3])?100:1);if(0===l)r=o=s=c;else{var p=c<=.5?c*(l+1):c+l-c*l,u=2*c-p;r=n(u,p,i+1/3),o=n(u,p,i),s=n(u,p,i-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*s),a[4]?parseFloat(a[4]):1]}},fabric.Color.fromHsla=t.fromHsl,fabric.Color.fromHex=function(e){return t.fromSource(t.sourceFromHex(e))},fabric.Color.sourceFromHex=function(e){if(e.match(t.reHex)){var n=e.slice(e.indexOf("#")+1),a=3===n.length,r=a?n.charAt(0)+n.charAt(0):n.substring(0,2),o=a?n.charAt(1)+n.charAt(1):n.substring(2,4),s=a?n.charAt(2)+n.charAt(2):n.substring(4,6);return[parseInt(r,16),parseInt(o,16),parseInt(s,16),1]}},fabric.Color.fromSource=function(e){var n=new t;return n.setSource(e),n})}()},function(e,t){fabric.log=function(){},fabric.warn=function(){},"undefined"!==typeof console&&["log","warn"].forEach((function(e){"undefined"!==typeof console[e]&&console[e].apply&&(fabric[e]=function(){return console[e].apply(console,arguments)})}))},function(e,t){!function(e){"use strict";function t(e){this.status=e,this.points=[]}fabric.Intersection?fabric.warn("fabric.Intersection is already defined"):(fabric.Intersection=t,fabric.Intersection.prototype={appendPoint:function(e){this.points.push(e)},appendPoints:function(e){this.points=this.points.concat(e)}},fabric.Intersection.intersectLineLine=function(e,n,a,r){var o,s=(r.x-a.x)*(e.y-a.y)-(r.y-a.y)*(e.x-a.x),i=(n.x-e.x)*(e.y-a.y)-(n.y-e.y)*(e.x-a.x),l=(r.y-a.y)*(n.x-e.x)-(r.x-a.x)*(n.y-e.y);if(0!==l){var c=s/l,p=i/l;0<=c&&c<=1&&0<=p&&p<=1?(o=new t("Intersection")).points.push(new fabric.Point(e.x+c*(n.x-e.x),e.y+c*(n.y-e.y))):o=new t}else o=new t(0===s||0===i?"Coincident":"Parallel");return o},fabric.Intersection.intersectLinePolygon=function(e,n,a){for(var r=new t,o=a.length,s=0;s<o;s++){var i=a[s],l=a[(s+1)%o],c=t.intersectLineLine(e,n,i,l);r.appendPoints(c.points)}return r.points.length>0&&(r.status="Intersection"),r},fabric.Intersection.intersectPolygonPolygon=function(e,n){for(var a=new t,r=e.length,o=0;o<r;o++){var s=e[o],i=e[(o+1)%r],l=t.intersectLinePolygon(s,i,n);a.appendPoints(l.points)}return a.points.length>0&&(a.status="Intersection"),a},fabric.Intersection.intersectPolygonRectangle=function(e,n,a){var r=n.min(a),o=n.max(a),s=new fabric.Point(o.x,r.y),i=new fabric.Point(r.x,o.y),l=t.intersectLinePolygon(r,s,e),c=t.intersectLinePolygon(s,o,e),p=t.intersectLinePolygon(o,i,e),u=t.intersectLinePolygon(i,r,e),d=new t;return d.appendPoints(l.points),d.appendPoints(c.points),d.appendPoints(p.points),d.appendPoints(u.points),d.points.length>0&&(d.status="Intersection"),d})}()},function(e,t){!function(e){"use strict";var t,n,a,r,o,s,i,l=fabric.util.object.extend,c=(fabric.util.string.capitalize,fabric.util.object.clone),p=fabric.util.toFixed,u=fabric.util.parseUnit,d=fabric.util.multiplyTransformMatrices,h={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor"},E={stroke:"strokeOpacity",fill:"fillOpacity"};function m(e){return e in h?h[e]:e}function S(e,t,n){var a,r="[object Array]"===Object.prototype.toString.call(t);return"fill"!==e&&"stroke"!==e||"none"!==t?"fillRule"===e?t="evenodd"===t?"destination-over":t:"strokeDashArray"===e?t=t.replace(/,/g," ").split(/\s+/).map((function(e){return parseInt(e)})):"transformMatrix"===e?t=n&&n.transformMatrix?d(n.transformMatrix,fabric.parseTransformAttribute(t)):fabric.parseTransformAttribute(t):"visible"===e?(t="none"!==t&&"hidden"!==t,n&&!1===n.visible&&(t=!1)):"textAnchor"===e?t="start"===t?"left":"end"===t?"right":"center":a=r?t.map(u):u(t):t="",!r&&isNaN(a)?t:a}function g(e,t){var n=e.match(/(normal|italic)?\s*(normal|small-caps)?\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\s*(\d+)px(?:\/(normal|[\d\.]+))?\s+(.*)/);if(n){var a=n[1],r=n[3],o=n[4],s=n[5],i=n[6];a&&(t.fontStyle=a),r&&(t.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(t.fontSize=parseFloat(o)),i&&(t.fontFamily=i),s&&(t.lineHeight="normal"===s?1:s)}}fabric.parseTransformAttribute=(t=[1,0,0,1,0,0],n="(?:(?:(matrix)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))\\s*\\))|(?:(translate)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)))?\\s*\\))|(?:(scale)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)))?\\s*\\))|(?:(rotate)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)))?\\s*\\))|(?:(skewX)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))\\s*\\))|(?:(skewY)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))\\s*\\)))",a=new RegExp("^\\s*(?:(?:(?:(?:(matrix)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))\\s*\\))|(?:(translate)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)))?\\s*\\))|(?:(scale)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)))?\\s*\\))|(?:(rotate)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)))?\\s*\\))|(?:(skewX)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))\\s*\\))|(?:(skewY)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))\\s*\\)))(?:(?:\\s+,?\\s*|,\\s*)(?:(?:(matrix)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))\\s*\\))|(?:(translate)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)))?\\s*\\))|(?:(scale)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)))?\\s*\\))|(?:(rotate)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)))?\\s*\\))|(?:(skewX)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))\\s*\\))|(?:(skewY)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?))\\s*\\))))*)?)\\s*$"),r=new RegExp(n,"g"),function(e){var o=t.concat(),s=[];if(!e||e&&!a.test(e))return o;e.replace(r,(function(e){var a=new RegExp(n).exec(e).filter((function(e){return""!==e&&null!=e})),r=a[1],i=a.slice(2).map(parseFloat);switch(r){case"translate":!function(e,t){e[4]=t[0],2===t.length&&(e[5]=t[1])}(o,i);break;case"rotate":i[0]=fabric.util.degreesToRadians(i[0]),function(e,t){var n=t[0],a=3===t.length?t[1]:0,r=3===t.length?t[2]:0;e[0]=Math.cos(n),e[1]=Math.sin(n),e[2]=-Math.sin(n),e[3]=Math.cos(n),e[4]=a-(e[0]*a+e[2]*r),e[5]=r-(e[1]*a+e[3]*r)}(o,i);break;case"scale":!function(e,t){var n=t[0],a=2===t.length?t[1]:t[0];e[0]=n,e[3]=a}(o,i);break;case"skewX":!function(e,t){e[2]=t[0]}(o,i);break;case"skewY":!function(e,t){e[1]=t[0]}(o,i);break;case"matrix":o=i}s.push(o.concat()),o=t.concat()}));for(var i=s[0];s.length>1;)s.shift(),i=fabric.util.multiplyTransformMatrices(i,s[0]);return i}),fabric.parseSVGDocument=(o=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,s="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",i=new RegExp("^\\s*("+s+"+)\\s*,?\\s*("+s+"+)\\s*,?\\s*("+s+"+)\\s*,?\\s*("+s+"+)\\s*$"),function(e,t,n){if(e){var a=new Date;!function(e){for(var t=e.getElementsByTagName("use");t.length;){for(var n=t[0],a=n.getAttribute("xlink:href").substr(1),r=n.getAttribute("x")||0,o=n.getAttribute("y")||0,s=e.getElementById(a).cloneNode(!0),i=(n.getAttribute("transform")||"")+" translate("+r+", "+o+")",l=0,c=n.attributes,p=c.length;l<p;l++){var u=c.item(l);"x"!==u.nodeName&&"y"!==u.nodeName&&"xlink:href"!==u.nodeName&&("transform"===u.nodeName?i=i+" "+u.nodeValue:s.setAttribute(u.nodeName,u.nodeValue))}s.setAttribute("transform",i),s.removeAttribute("id"),n.parentNode.replaceChild(s,n)}}(e);var r,s,p=e.getAttribute("viewBox"),d=u(e.getAttribute("width")),h=u(e.getAttribute("height"));if(p&&(p=p.match(i))){var E=parseFloat(p[1]),m=parseFloat(p[2]),S=1,g=1;r=parseFloat(p[3]),s=parseFloat(p[4]),d&&d!==r&&(S=d/r),h&&h!==s&&(g=h/s),function(e,t){if(t[3]=t[0]=t[0]>t[3]?t[3]:t[0],1!==t[0]||1!==t[3]||0!==t[4]||0!==t[5]){for(var n=document.createElement("g");null!=e.firstChild;){var a=e.firstChild;n.appendChild(a)}n.setAttribute("transform","matrix("+t[0]+" "+t[1]+" "+t[2]+" "+t[3]+" "+t[4]+" "+t[5]+")"),e.appendChild(n)}}(e,[S,0,0,g,-E,-m])}var f=fabric.util.toArray(e.getElementsByTagName("*"));if(0===f.length&&fabric.isLikelyNode){for(var A=[],b=0,L=(f=e.selectNodes('//*[name(.)!="svg"]')).length;b<L;b++)A[b]=f[b];f=A}var y=f.filter((function(e){return o.test(e.tagName)&&!function(e,t){for(;e&&(e=e.parentNode);)if(t.test(e.nodeName))return!0;return!1}(e,/^(?:pattern|defs|metadata)$/)}));if(!y||y&&!y.length)t&&t([],{});else{var R={width:d||r,height:h||s,widthAttr:d,heightAttr:h};fabric.cssRules=l(fabric.getCSSRules(e),fabric.cssRules),fabric.parseElements(y,(function(e){fabric.documentParsingTime=new Date-a,t&&t(e,R)}),c(R),n)}}}),l(fabric,{parseAttributes:function(e,t){if(e){var n,a={};e.parentNode&&/^[g|a]$/i.test(e.parentNode.nodeName)&&(a=fabric.parseAttributes(e.parentNode,t));var r=t.reduce((function(t,r){return(n=e.getAttribute(r))&&(r=m(r),n=S(r,n,a),t[r]=n),t}),{});return r=l(r,l(function(e){var t=e.nodeName,n=e.getAttribute("class"),a=e.getAttribute("id"),r={};for(var o in fabric.cssRules)if(n&&new RegExp("^\\."+n).test(o)||a&&new RegExp("^#"+a).test(o)||new RegExp("^"+t).test(o))for(var s in fabric.cssRules[o]){var i=m(s),l=S(i,fabric.cssRules[o][s]);r[i]=l}return r}(e),fabric.parseStyleAttribute(e))),function(e){for(var t in E)if(e[t]&&"undefined"!==typeof e[E[t]]&&0!==e[t].indexOf("url(")){var n=new fabric.Color(e[t]);e[t]=n.setAlpha(p(n.getAlpha()*e[E[t]],2)).toRgba(),delete e[E[t]]}return e}(l(a,r))}},parseElements:function(e,t,n,a){new fabric.ElementsParser(e,t,n,a).parse()},parseStyleAttribute:function(e){var t={},n=e.getAttribute("style");return n?("string"===typeof n?function(e,t){var n,a;e.replace(/;\s*$/,"").split(";").forEach((function(e){var r=e.split(":");n=m(r[0].trim().toLowerCase()),a=S(n,r[1].trim()),"font"===n?g(a,t):t[n]=a}))}(n,t):function(e,t){var n,a;for(var r in e)"undefined"!==typeof e[r]&&(a=S(n=m(r.toLowerCase()),e[r]),"font"===n?g(a,t):t[n]=a)}(n,t),t):t},parsePointsAttribute:function(e){if(!e)return null;var t,n,a=[];for(t=0,n=(e=(e=e.replace(/,/g," ").trim()).split(/\s+/)).length;t<n;t+=2)a.push({x:parseFloat(e[t]),y:parseFloat(e[t+1])});return a},getCSSRules:function(e){for(var t,n=e.getElementsByTagName("style"),a={},r=0,o=n.length;r<o;r++){var s=n[0].textContent;null!==(t=(s=s.replace(/\/\*[\s\S]*?\*\//g,"")).match(/[^{]*\{[\s\S]*?\}/g))&&(t=t.map((function(e){return e.trim()}))).forEach((function(e){var t=e.match(/([\s\S]*?)\s*\{([^}]*)\}/);e=t[1];var n=t[2].trim().replace(/;$/,"").split(/\s*;\s*/);a[e]||(a[e]={});for(var r=0,o=n.length;r<o;r++){var s=n[r].split(/\s*:\s*/),i=s[0],l=s[1];a[e][i]=l}}))}return a},loadSVGFromString:function(e,t,n){var a=(new DOMParser).parseFromString(e.trim(),"text/xml");fabric.parseSVGDocument(a.documentElement,(function(e,n){t(e,n)}),n)}})}(),fabric.ElementsParser=function(e,t,n,a){this.elements=e,this.callback=t,this.options=n,this.reviver=a},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var e=0,t=this.elements.length;e<t;e++)!function(e,t){setTimeout((function(){e.createObject(e.elements[t],t)}),0)}(this,e)},fabric.ElementsParser.prototype.createObject=function(e,t){var n=fabric[fabric.util.string.capitalize(e.tagName)];if(n&&n.fromElement)try{this._createObject(n,e,t)}catch(a){fabric.log(a)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(e,t,n){if(e.async)e.fromElement(t,this.createCallback(n,t),this.options);else{var a=e.fromElement(t,this.options);this.reviver&&this.reviver(t,a),this.instances[n]=a,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(e,t){var n=this;return function(a){n.reviver&&n.reviver(t,a),n.instances[e]=a,n.checkIfDone()}},fabric.ElementsParser.prototype.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter((function(e){return null!=e})),this.callback(this.instances))}},function(e,t){!function(e){"use strict";var t=2*Math.PI,n=fabric.util.object.extend;fabric.Circle?fabric.warn("fabric.Circle is already defined."):(fabric.Circle=fabric.util.createClass(fabric.Object,{type:"circle",radius:0,initialize:function(e){e=e||{},this.set("radius",e.radius||0),this.callSuper("initialize",e)},_set:function(e,t){return this.callSuper("_set",e,t),"radius"===e&&this.setRadius(t),this},toObject:function(e){return n(this.callSuper("toObject",e),{radius:this.get("radius")})},toSVG:function(e){var t=this._createBaseSVGMarkup();return t.push("<circle ",'cx="0" cy="0" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),e?e(t.join("")):t.join("")},_render:function(e,n){e.beginPath(),e.globalAlpha=this.group?e.globalAlpha*this.opacity:this.opacity,e.arc(n?this.left:0,n?this.top:0,this.radius,0,t,!1),this._renderFill(e),this.stroke&&this._renderStroke(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){this.radius=e,this.set("width",2*e).set("height",2*e)},complexity:function(){return 1}}),fabric.Circle.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),fabric.Circle.fromElement=function(e,t){t||(t={});var a,r=fabric.parseAttributes(e,fabric.Circle.ATTRIBUTE_NAMES);if(!("radius"in(a=r)&&a.radius>0))throw new Error("value of `r` attribute is required and can not be negative");r.left=r.left||0,r.top=r.top||0;var o=new fabric.Circle(n(r,t));return o.left-=o.radius,o.top-=o.radius,o},fabric.Circle.fromObject=function(e){return new fabric.Circle(e)})}()},function(e,t){!function(e){"use strict";var t=2*Math.PI,n=fabric.util.object.extend;fabric.Ellipse?fabric.warn("fabric.Ellipse is already defined."):(fabric.Ellipse=fabric.util.createClass(fabric.Object,{type:"ellipse",rx:0,ry:0,initialize:function(e){e=e||{},this.callSuper("initialize",e),this.set("rx",e.rx||0),this.set("ry",e.ry||0),this.set("width",2*this.get("rx")),this.set("height",2*this.get("ry"))},toObject:function(e){return n(this.callSuper("toObject",e),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(e){var t=this._createBaseSVGMarkup();return t.push("<ellipse ",'rx="',this.get("rx"),'" ry="',this.get("ry"),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),e?e(t.join("")):t.join("")},render:function(e,t){if(0!==this.rx&&0!==this.ry)return this.callSuper("render",e,t)},_render:function(e,n){e.beginPath(),e.globalAlpha=this.group?e.globalAlpha*this.opacity:this.opacity,e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(n?this.left:0,n?this.top*this.rx/this.ry:0,this.rx,0,t,!1),e.restore(),this._renderFill(e),this._renderStroke(e)},complexity:function(){return 1}}),fabric.Ellipse.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),fabric.Ellipse.fromElement=function(e,t){t||(t={});var a=fabric.parseAttributes(e,fabric.Ellipse.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0;var r=new fabric.Ellipse(n(a,t));return r.top-=r.ry,r.left-=r.rx,r},fabric.Ellipse.fromObject=function(e){return new fabric.Ellipse(e)})}()},function(e,t){!function(e){"use strict";var t=fabric.util.object.extend,n=fabric.util.array.min,a=fabric.util.array.max,r=fabric.util.array.invoke;if(!fabric.Group){var o={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};fabric.Group=fabric.util.createClass(fabric.Object,fabric.Collection,{type:"group",initialize:function(e,n){n=n||{},this._objects=e||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;this.originalState={},this.callSuper("initialize"),this._calcBounds(),this._updateObjectsCoords(),n&&t(this,n),this._setOpacityIfSame(),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(){this.forEachObject(this._updateObjectCoords,this)},_updateObjectCoords:function(e){var t=e.getLeft(),n=e.getTop();e.set({originalLeft:t,originalTop:n,left:t-this.left,top:n-this.top}),e.setCoords(),e.__origHasControls=e.hasControls,e.hasControls=!1},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){return this._restoreObjectsState(),e&&(this._objects.push(e),e.group=this),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this},_setObjectActive:function(e){e.set("active",!0),e.group=this},removeWithUpdate:function(e){return this._moveFlippedObject(e),this._restoreObjectsState(),this.forEachObject(this._setObjectActive,this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(e){e.group=this},_onObjectRemoved:function(e){delete e.group,e.set("active",!1)},delegatedProperties:{fill:!0,opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(e,t){if(e in this.delegatedProperties){var n=this._objects.length;for(this[e]=t;n--;)this._objects[n].set(e,t)}else this[e]=t},toObject:function(e){return t(this.callSuper("toObject",e),{objects:r(this._objects,"toObject",e)})},render:function(e){if(this.visible){e.save(),this.clipTo&&fabric.util.clipContext(this,e);for(var t=0,n=this._objects.length;t<n;t++)this._renderObject(this._objects[t],e);this.clipTo&&e.restore(),e.restore()}},_renderControls:function(e,t){this.callSuper("_renderControls",e,t);for(var n=0,a=this._objects.length;n<a;n++)this._objects[n]._renderControls(e)},_renderObject:function(e,t){var n=e.hasRotatingPoint;e.visible&&(e.hasRotatingPoint=!1,e.render(t),e.hasRotatingPoint=n)},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(e){return this._moveFlippedObject(e),this._setObjectPosition(e),e},_moveFlippedObject:function(e){var t=e.get("originX"),n=e.get("originY"),a=e.getCenterPoint();e.set({originX:"center",originY:"center",left:a.x,top:a.y}),this._toggleFlipping(e);var r=e.getPointByOrigin(t,n);return e.set({originX:t,originY:n,left:r.x,top:r.y}),this},_toggleFlipping:function(e){this.flipX&&(e.toggle("flipX"),e.set("left",-e.get("left")),e.setAngle(-e.getAngle())),this.flipY&&(e.toggle("flipY"),e.set("top",-e.get("top")),e.setAngle(-e.getAngle()))},_restoreObjectState:function(e){return this._setObjectPosition(e),e.setCoords(),e.hasControls=e.__origHasControls,delete e.__origHasControls,e.set("active",!1),e.setCoords(),delete e.group,this},_setObjectPosition:function(e){var t=this.getLeft(),n=this.getTop(),a=this._getRotatedLeftTop(e);e.set({angle:e.getAngle()+this.getAngle(),left:t+a.left,top:n+a.top,scaleX:e.get("scaleX")*this.get("scaleX"),scaleY:e.get("scaleY")*this.get("scaleY")})},_getRotatedLeftTop:function(e){var t=this.getAngle()*(Math.PI/180);return{left:-Math.sin(t)*e.getTop()*this.get("scaleY")+Math.cos(t)*e.getLeft()*this.get("scaleX"),top:Math.cos(t)*e.getTop()*this.get("scaleY")+Math.sin(t)*e.getLeft()*this.get("scaleX")}},destroy:function(){return this._objects.forEach(this._moveFlippedObject,this),this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject((function(e){e.setCoords()})),this},_setOpacityIfSame:function(){var e=this.getObjects(),t=e[0]?e[0].get("opacity"):1;e.every((function(e){return e.get("opacity")===t}))&&(this.opacity=t)},_calcBounds:function(e){for(var t,n=[],a=[],r=0,o=this._objects.length;r<o;++r)for(var s in(t=this._objects[r]).setCoords(),t.oCoords)n.push(t.oCoords[s].x),a.push(t.oCoords[s].y);this.set(this._getBounds(n,a,e))},_getBounds:function(e,t,r){var o=fabric.util.invertTransform(this.getViewportTransform()),s=fabric.util.transformPoint(new fabric.Point(n(e),n(t)),o),i=fabric.util.transformPoint(new fabric.Point(a(e),a(t)),o),l={width:i.x-s.x||0,height:i.y-s.y||0};return r||(l.left=(s.x+i.x)/2||0,l.top=(s.y+i.y)/2||0),l},toSVG:function(e){for(var t=["<g ",'transform="',this.getSvgTransform(),'">'],n=0,a=this._objects.length;n<a;n++)t.push(this._objects[n].toSVG(e));return t.push("</g>"),e?e(t.join("")):t.join("")},get:function(e){if(e in o){if(this[e])return this[e];for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t][e])return!0;return!1}return e in this.delegatedProperties?this._objects[0]&&this._objects[0].get(e):this[e]}}),fabric.Group.fromObject=function(e,t){fabric.util.enlivenObjects(e.objects,(function(n){delete e.objects,t&&t(new fabric.Group(n,e))}))},fabric.Group.async=!0}}()},function(e,t){fabric.Image=fabric.util.createClass(fabric.Object,{type:"image"}),fabric.Image.fromElement=function(e,t){return new fabric.Image}},function(e,t){!function(e){"use strict";var t=fabric.util.object.extend,n=fabric.util.object.clone,a=fabric.util.toFixed;if(fabric.Text)fabric.warn("fabric.Text is already defined");else{var r=fabric.Object.prototype.stateProperties.concat();r.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","useNative","path"),fabric.Text=fabric.util.createClass(fabric.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,textDecoration:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0},_reNewline:/\r?\n/,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.3,textBackgroundColor:"",path:null,useNative:!0,stateProperties:r,stroke:null,initialize:function(e,t){t=t||{},this.text=e,this.__skipDimension=!0,this.setOptions(t),this.__skipDimension=!1,this._initDimensions()},_initDimensions:function(){if(!this.__skipDimension){var e=fabric.util.createCanvasElement();this._render(e.getContext("2d"))}},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(e){"undefined"===typeof Cufon||!0===this.useNative?this._renderViaNative(e):this._renderViaCufon(e)},_renderViaNative:function(e){var t=this.text.split(this._reNewline);this._setTextStyles(e),this.width=this._getTextWidth(e,t),this.height=this._getTextHeight(e,t),this.clipTo&&fabric.util.clipContext(this,e),this._renderTextBackground(e,t),this._translateForTextAlign(e),this._renderText(e,t),"left"!==this.textAlign&&"justify"!==this.textAlign&&e.restore(),this._renderTextDecoration(e,t),this.clipTo&&e.restore(),this._setBoundaries(e,t),this._totalLineHeight=0},_renderText:function(e,t){e.save(),this._renderTextFill(e,t),this._renderTextStroke(e,t),e.restore()},_translateForTextAlign:function(e){"left"!==this.textAlign&&"justify"!==this.textAlign&&(e.save(),e.translate("center"===this.textAlign?this.width/2:this.width,0))},_setBoundaries:function(e,t){this._boundaries=[];for(var n=0,a=t.length;n<a;n++){var r=this._getLineWidth(e,t[n]),o=this._getLineLeftOffset(r);this._boundaries.push({height:this.fontSize*this.lineHeight,width:r,left:o})}},_setTextStyles:function(e){this._setFillStyles(e),this._setStrokeStyles(e),e.textBaseline="alphabetic",this.skipTextAlign||(e.textAlign=this.textAlign),e.font=this._getFontDeclaration()},_getTextHeight:function(e,t){return this.fontSize*t.length*this.lineHeight},_getTextWidth:function(e,t){for(var n=e.measureText(t[0]||"i").width,a=1,r=t.length;a<r;a++){var o=e.measureText(t[a]).width;o>n&&(n=o)}return n},_renderChars:function(e,t,n,a,r){t[e](n,a,r)},_renderTextLine:function(e,t,n,a,r,o){if(r-=this.fontSize/4,"justify"===this.textAlign){var s=t.measureText(n).width,i=this.width;if(i>s)for(var l=n.split(/\s+/),c=(i-t.measureText(n.replace(/\s+/g,"")).width)/(l.length-1),p=0,u=0,d=l.length;u<d;u++)this._renderChars(e,t,l[u],a+p,r,o),p+=t.measureText(l[u]).width+c;else this._renderChars(e,t,n,a,r,o)}else this._renderChars(e,t,n,a,r,o)},_getLeftOffset:function(){return fabric.isLikelyNode?0:-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextFill:function(e,t){if(this.fill||this._skipFillStrokeCheck){this._boundaries=[];for(var n=0,a=0,r=t.length;a<r;a++){n+=this._getHeightOfLine(e,a,t),this._renderTextLine("fillText",e,t[a],this._getLeftOffset(),this._getTopOffset()+n,a)}}},_renderTextStroke:function(e,t){if(this.stroke&&0!==this.strokeWidth||this._skipFillStrokeCheck){var n=0;e.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),fabric.StaticCanvas.supports("setLineDash")&&e.setLineDash(this.strokeDashArray)),e.beginPath();for(var a=0,r=t.length;a<r;a++){n+=this._getHeightOfLine(e,a,t),this._renderTextLine("strokeText",e,t[a],this._getLeftOffset(),this._getTopOffset()+n,a)}e.closePath(),e.restore()}},_getHeightOfLine:function(){return this.fontSize*this.lineHeight},_renderTextBackground:function(e,t){this._renderTextBoxBackground(e),this._renderTextLinesBackground(e,t)},_renderTextBoxBackground:function(e){this.backgroundColor&&(e.save(),e.fillStyle=this.backgroundColor,e.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),e.restore())},_renderTextLinesBackground:function(e,t){if(this.textBackgroundColor){e.save(),e.fillStyle=this.textBackgroundColor;for(var n=0,a=t.length;n<a;n++)if(""!==t[n]){var r=this._getLineWidth(e,t[n]),o=this._getLineLeftOffset(r);e.fillRect(this._getLeftOffset()+o,this._getTopOffset()+n*this.fontSize*this.lineHeight,r,this.fontSize*this.lineHeight)}e.restore()}},_getLineLeftOffset:function(e){return"center"===this.textAlign?(this.width-e)/2:"right"===this.textAlign?this.width-e:0},_getLineWidth:function(e,t){return"justify"===this.textAlign?this.width:e.measureText(t).width},_renderTextDecoration:function(e,t){if(this.textDecoration){var n=this._getTextHeight(e,t)/2,a=this;this.textDecoration.indexOf("underline")>-1&&r(this.fontSize*this.lineHeight),this.textDecoration.indexOf("line-through")>-1&&r(this.fontSize*this.lineHeight-this.fontSize/2),this.textDecoration.indexOf("overline")>-1&&r(this.fontSize*this.lineHeight-this.fontSize)}function r(r){for(var o=0,s=t.length;o<s;o++){var i=a._getLineWidth(e,t[o]),l=a._getLineLeftOffset(i);e.fillRect(a._getLeftOffset()+l,~~(r+o*a._getHeightOfLine(e,o,t)-n),i,1)}}},_getFontDeclaration:function(){return[fabric.isLikelyNode?this.fontWeight:this.fontStyle,fabric.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",fabric.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(e,t){if(this.visible){e.save(),this._transform(e,t);var n=this.transformMatrix,a=this.group&&"path-group"===this.group.type;a&&e.translate(-this.group.width/2,-this.group.height/2),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),a&&e.translate(this.left,this.top),this._render(e),e.restore()}},toObject:function(e){var n=t(this.callSuper("toObject",e),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,path:this.path,textBackgroundColor:this.textBackgroundColor,useNative:this.useNative});return this.includeDefaultValues||this._removeDefaultValues(n),n},toSVG:function(e){var t=[],n=this.text.split(this._reNewline),a=this._getSVGLeftTopOffsets(n),r=this._getSVGTextAndBg(a.lineTop,a.textLeft,n);return a.textTop+=this._fontAscent?this._fontAscent/5*this.lineHeight:0,this._wrapSVGTextAndBg(t,r,a),e?e(t.join("")):t.join("")},_getSVGLeftTopOffsets:function(e){var t=this.useNative?this.fontSize*this.lineHeight:-this._fontAscent-this._fontAscent/5*this.lineHeight;return{textLeft:-this.width/2,textTop:this.useNative?this.fontSize-1:this.height/2-e.length*this.fontSize-this._totalLineHeight,lineTop:t}},_wrapSVGTextAndBg:function(e,t,n){e.push('<g transform="',this.getSvgTransform(),'">',t.textBgRects.join(""),"<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(),'" ','transform="translate(',a(n.textLeft,2)," ",a(n.textTop,2),')">',t.textSpans.join(""),"</text>","</g>")},_getSVGTextAndBg:function(e,t,n){var a=[],r=[],o=1;this._setSVGBg(r);for(var s=0,i=n.length;s<i;s++)""!==n[s]?(this._setSVGTextLineText(n[s],s,a,e,o,r),o=1):o++,this.textBackgroundColor&&this._boundaries&&this._setSVGTextLineBg(r,s,t,e);return{textSpans:a,textBgRects:r}},_setSVGTextLineText:function(e,t,n,r,o){var s=this._boundaries&&this._boundaries[t]?a(this._boundaries[t].left,2):0;n.push('<tspan x="',s,'" ',0===t||this.useNative?"y":"dy",'="',a(this.useNative?r*t-this.height/2:r*o,2),'" ',this._getFillAttributes(this.fill),">",fabric.util.string.escapeXml(e),"</tspan>")},_setSVGTextLineBg:function(e,t,n,r){e.push("<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',a(n+this._boundaries[t].left,2),'" y="',a(r*t-this.height/2,2),'" width="',a(this._boundaries[t].width,2),'" height="',a(this._boundaries[t].height,2),'"></rect>')},_setSVGBg:function(e){this.backgroundColor&&this._boundaries&&e.push("<rect ",this._getFillAttributes(this.backgroundColor),' x="',a(-this.width/2,2),'" y="',a(-this.height/2,2),'" width="',a(this.width,2),'" height="',a(this.height,2),'"></rect>')},_getFillAttributes:function(e){var t=e&&"string"===typeof e?new fabric.Color(e):"";return t&&t.getSource()&&1!==t.getAlpha()?'opacity="'+t.getAlpha()+'" fill="'+t.setAlpha(1).toRgb()+'"':'fill="'+e+'"'},_set:function(e,t){"fontFamily"===e&&this.path&&(this.path=this.path.replace(/(.*?)([^\/]*)(\.font\.js)/,"$1"+t+"$3")),this.callSuper("_set",e,t),e in this._dimensionAffectingProps&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),fabric.Text.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),fabric.Text.DEFAULT_SVG_FONT_SIZE=16,fabric.Text.fromElement=function(e,t){if(!e)return null;var n=fabric.parseAttributes(e,fabric.Text.ATTRIBUTE_NAMES);t=fabric.util.object.extend(t?fabric.util.object.clone(t):{},n),"dx"in n&&(t.left+=n.dx),"dy"in n&&(t.top+=n.dy),"fontSize"in t||(t.fontSize=fabric.Text.DEFAULT_SVG_FONT_SIZE),t.originX||(t.originX="left");var a=new fabric.Text(e.textContent,t),r=0;return"left"===a.originX&&(r=a.getWidth()/2),"right"===a.originX&&(r=-a.getWidth()/2),a.set({left:a.getLeft()+r,top:a.getTop()-a.getHeight()/2}),a},fabric.Text.fromObject=function(e){return new fabric.Text(e.text,n(e))},fabric.util.createAccessors(fabric.Text)}}()},function(e,t){var n;n=fabric.util.object.clone,fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,caching:!0,_skipFillStrokeCheck:!0,_reSpace:/\s|\n/,_fontSizeFraction:4,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,_charWidthsCache:{},initialize:function(e,t){this.callSuper("initialize",e,t),this.initBehavior(),fabric.IText.instances.push(this),this.__lineWidths={},this.__lineHeights={},this.__lineOffsets={}},setSelectionStart:function(e){this.selectionStart!==e&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})),this.selectionStart=e,this.hiddenTextarea&&(this.hiddenTextarea.selectionStart=e)},setSelectionEnd:function(e){this.selectionEnd!==e&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})),this.selectionEnd=e,this.hiddenTextarea&&(this.hiddenTextarea.selectionEnd=e)},_render:function(e){this.callSuper("_render",e),this.ctx=e,this.isEditing&&this.renderCursorOrSelection()},renderCursorOrSelection:function(){if(this.active){var e,t=this.text.split("");this.selectionStart===this.selectionEnd?(e=this._getCursorBoundaries(t,"cursor"),this.renderCursor(e)):(e=this._getCursorBoundaries(t,"selection"),this.renderSelection(t,e))}},get2DCursorLocation:function(e){"undefined"===typeof e&&(e=this.selectionStart);var t=this.text.slice(0,e).split(this._reNewline);return{lineIndex:t.length-1,charIndex:t[t.length-1].length}},getCurrentCharStyle:function(e,t){return{fontSize:this.fontSize,fill:this.fill,textBackgroundColor:this.textBackgroundColor,textDecoration:this.textDecoration,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontStyle:this.fontStyle,stroke:this.stroke,strokeWidth:this.strokeWidth}},getCurrentCharFontSize:function(e,t){return this.fontSize},getCurrentCharColor:function(e,t){return this.cursorColor},_getCursorBoundaries:function(e,t){var n=this.get2DCursorLocation(),a=this.text.split(this._reNewline),r=Math.round(this._getLeftOffset()),o=-this.height/2,s=this._getCursorBoundariesOffsets(e,t,n,a);return{left:r,top:o,leftOffset:s.left+s.lineLeft,topOffset:s.top}},_getCursorBoundariesOffsets:function(e,t,n,a){for(var r=0,o=0,s=0,i=0,l="cursor"===t?this._getHeightOfLine(this.ctx,0)-this.getCurrentCharFontSize(n.lineIndex,n.charIndex):0,c=0;c<this.selectionStart;c++){if("\n"===e[c]){i=0;var p=o+("cursor"===t?1:0);l+=this._getCachedLineHeight(p),o++,s=0}else i+=this._getWidthOfChar(this.ctx,e[c],o,s),s++;r=this._getCachedLineOffset(o,a)}return this._clearCache(),{top:l,left:i,lineLeft:r}},_clearCache:function(){this.__lineWidths={},this.__lineHeights={},this.__lineOffsets={}},_getCachedLineHeight:function(e){return this.__lineHeights[e]||(this.__lineHeights[e]=this._getHeightOfLine(this.ctx,e))},_getCachedLineWidth:function(e,t){return this.__lineWidths[e]||(this.__lineWidths[e]=this._getWidthOfLine(this.ctx,e,t))},_getCachedLineOffset:function(e,t){var n=this._getCachedLineWidth(e,t);return this.__lineOffsets[e]||(this.__lineOffsets[e]=this._getLineLeftOffset(n))},renderCursor:function(e){var t=this.ctx;t.save();var n=this.get2DCursorLocation(),a=n.lineIndex,r=n.charIndex,o=this.getCurrentCharFontSize(a,r),s=0===a&&0===r?this._getCachedLineOffset(a,this.text.split(this._reNewline)):e.leftOffset;t.fillStyle=this.getCurrentCharColor(a,r),t.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,t.fillRect(e.left+s,e.top+e.topOffset,this.cursorWidth/this.scaleX,o),t.restore()},renderSelection:function(e,t){var n=this.ctx;n.save(),n.fillStyle=this.selectionColor;for(var a=this.get2DCursorLocation(this.selectionStart),r=this.get2DCursorLocation(this.selectionEnd),o=a.lineIndex,s=r.lineIndex,i=this.text.split(this._reNewline),l=o;l<=s;l++){var c=this._getCachedLineOffset(l,i)||0,p=this._getCachedLineHeight(l),u=0;if(l===o)for(var d=0,h=i[l].length;d<h;d++)d>=a.charIndex&&(l!==s||d<r.charIndex)&&(u+=this._getWidthOfChar(n,i[l][d],l,d)),d<a.charIndex&&(c+=this._getWidthOfChar(n,i[l][d],l,d));else if(l>o&&l<s)u+=this._getCachedLineWidth(l,i)||5;else if(l===s)for(var E=0,m=r.charIndex;E<m;E++)u+=this._getWidthOfChar(n,i[l][E],l,E);n.fillRect(t.left+c,t.top+t.topOffset,u,p),t.topOffset+=p}n.restore()},_renderChars:function(e,t,n,a,r,o){return this._renderCharsFast(e,t,n,a,r)},_renderCharsFast:function(e,t,n,a,r){this.skipTextAlign=!1,"fillText"===e&&this.fill&&this.callSuper("_renderChars",e,t,n,a,r),"strokeText"===e&&this.stroke&&this.callSuper("_renderChars",e,t,n,a,r)},_renderChar:function(e,t,n,a,r,o,s,i){"strokeText"===e&&this.stroke&&t[e](r,o,s),"fillText"===e&&this.fill&&t[e](r,o,s),charWidth=this._applyCharStylesGetWidth(t,r,n,a),this._renderCharDecoration(t,o,s,charWidth,i),t.translate(t.measureText(r).width,0)},_renderCharDecoration:function(e,t,n,a,r,o){var s=this.textDecoration,i=this.fontSize;s&&(s.indexOf("underline")>-1&&this._renderCharDecorationAtOffset(e,t,n+this.fontSize/this._fontSizeFraction,a,0,this.fontSize/20),s.indexOf("line-through")>-1&&this._renderCharDecorationAtOffset(e,t,n+this.fontSize/this._fontSizeFraction,a,o/2,i/20),s.indexOf("overline")>-1&&this._renderCharDecorationAtOffset(e,t,n,a,r-this.fontSize/this._fontSizeFraction,this.fontSize/20))},_renderCharDecorationAtOffset:function(e,t,n,a,r,o){e.fillRect(t,n-r,a,o)},_renderTextLine:function(e,t,n,a,r,o){r+=this.fontSize/4,this.callSuper("_renderTextLine",e,t,n,a,r,o)},_renderTextLinesBackground:function(e,t){if(this.textBackgroundColor){e.save(),this.textBackgroundColor&&(e.fillStyle=this.textBackgroundColor);for(var n=0,a=this.fontSize/this._fontSizeFraction,r=0,o=t.length;r<o;r++){var s=this._getHeightOfLine(e,r,t);if(""!==t[r]){var i=this._getWidthOfLine(e,r,t),l=this._getLineLeftOffset(i);this.textBackgroundColor&&(e.fillStyle=this.textBackgroundColor,e.fillRect(this._getLeftOffset()+l,this._getTopOffset()+n+a,i,s)),n+=s}else n+=s}e.restore()}},_getCacheProp:function(e,t){return e+t.fontFamily+t.fontSize+t.fontWeight+t.fontStyle},_applyCharStylesGetWidth:function(e,t,n,a){var r={};this._applyFontStyles(r);var o=this._getCacheProp(t,r);if(this._charWidthsCache[o]&&this.caching)return this._charWidthsCache[o];var s=this.fill;return e.fillStyle=s.toLive?s.toLive(e):s,e.lineWidth=this.strokeWidth,e.font=this._getFontDeclaration.call(r),this.caching?(this._charWidthsCache[o]||(this._charWidthsCache[o]=e.measureText(t).width),this._charWidthsCache[o]):e.measureText(t).width},_applyFontStyles:function(e){e.fontFamily=this.fontFamily,e.fontSize=this.fontSize,e.fontWeight=this.fontWeight,e.fontStyle=this.fontStyle},_getWidthOfChar:function(e,t,n,a){var r={};this._applyFontStyles(r);var o=this._getCacheProp(t,r);if(this._charWidthsCache[o]&&this.caching)return this._charWidthsCache[o];if(e){e.save();var s=this._applyCharStylesGetWidth(e,t,n,a);return e.restore(),s}},_getHeightOfChar:function(e,t,n,a){return this.fontSize},_getWidthOfCharAt:function(e,t,n,a){var r=(a=a||this.text.split(this._reNewline))[t].split("")[n];return this._getWidthOfChar(e,r,t,n)},_getHeightOfCharAt:function(e,t,n,a){var r=(a=a||this.text.split(this._reNewline))[t].split("")[n];return this._getHeightOfChar(e,r,t,n)},_getWidthOfCharsAt:function(e,t,n,a){for(var r=0,o=0;o<n;o++)r+=this._getWidthOfCharAt(e,t,o,a);return r},_getWidthOfLine:function(e,t,n){return this._getWidthOfCharsAt(e,t,n[t].length,n)},_getTextWidth:function(e,t){return this.callSuper("_getTextWidth",e,t)},_getHeightOfLine:function(e,t,n){n=n||this.text.split(this._reNewline);for(var a=this._getHeightOfChar(e,n[t][0],t,0),r=n[t].split(""),o=1,s=r.length;o<s;o++){var i=this._getHeightOfChar(e,r[o],t,o);i>a&&(a=i)}return a*this.lineHeight},_getTextHeight:function(e,t){for(var n=0,a=0,r=t.length;a<r;a++)n+=this._getHeightOfLine(e,a,t);return n},_getTopOffset:function(){return fabric.Text.prototype._getTopOffset.call(this)-this.fontSize/this._fontSizeFraction},_renderTextBoxBackground:function(e){this.backgroundColor&&(e.save(),e.fillStyle=this.backgroundColor,e.fillRect(this._getLeftOffset(),this._getTopOffset()+this.fontSize/this._fontSizeFraction,this.width,this.height),e.restore())}}),fabric.IText.fromObject=function(e){return new fabric.IText(e.text,n(e))},fabric.IText.instances=[],fabric.IText.flushInstances=function(){fabric.IText.instances.forEach((function(e){e.isEditing&&e.exitEditing()})),fabric.IText.instances=[]},function(){fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation()},initSelectedHandler:function(){this.on("selected",(function(){var e=this;setTimeout((function(){e.selected=!0}),100)}))},initAddedHandler:function(){this.on("added",(function(){this.canvas&&!this.canvas._hasITextHandlers&&(this.canvas._hasITextHandlers=!0,this._initCanvasHandlers())}))},_initCanvasHandlers:function(){this.canvas.on("selection:cleared",(function(){fabric.IText.prototype.exitEditingOnOthers.call(null,this)})),this.canvas.on("mouse:up",(function(){fabric.IText.instances.forEach((function(e){e.__isMousedown=!1}))})),this.canvas.on("object:selected",(function(e){fabric.IText.prototype.exitEditingOnOthers.call(e.target,this.canvas)}))},_tick:function(){var e=this;!this._abortCursorAnimation&&this.isEditing&&this.animate("_currentCursorOpacity",1,{duration:this.cursorDuration,onComplete:function(){e._onTickComplete()},onChange:function(){e.canvas&&e.canvas.doRenderAll()},abort:function(){return e._abortCursorAnimation||!e.isEditing}})},_onTickComplete:function(){if(!this._abortCursorAnimation&&this.isEditing){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){e.animate("_currentCursorOpacity",0,{duration:e.cursorDuration/2,onComplete:function(){e._tick()},onChange:function(){e.canvas&&e.canvas.doRenderAll()},abort:function(){return e._abortCursorAnimation||!e.isEditing}})}),100)}},initDelayedCursor:function(e){var t=this,n=e?0:this.cursorDelay;e&&(this._abortCursorAnimation=!0,clearTimeout(this._cursorTimeout1),this._currentCursorOpacity=1,this.canvas&&this.canvas.doRenderAll()),this._cursorTimeout2&&clearTimeout(this._cursorTimeout2),this._cursorTimeout2=setTimeout((function(){t._abortCursorAnimation=!1,t._tick()}),n)},abortCursorAnimation:function(){this._abortCursorAnimation=!0,clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,this.canvas&&this.canvas.doRenderAll();var e=this;setTimeout((function(){e._abortCursorAnimation=!1}),10)},selectAll:function(){this.selectionStart=0,this.selectionEnd=this.text.length,this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(e){var t=0,n=e-1;if(this._reSpace.test(this.text.charAt(n)))for(;this._reSpace.test(this.text.charAt(n));)t++,n--;for(;/\S/.test(this.text.charAt(n))&&n>-1;)t++,n--;return e-t},findWordBoundaryRight:function(e){var t=0,n=e;if(this._reSpace.test(this.text.charAt(n)))for(;this._reSpace.test(this.text.charAt(n));)t++,n++;for(;/\S/.test(this.text.charAt(n))&&n<this.text.length;)t++,n++;return e+t},findLineBoundaryLeft:function(e){for(var t=0,n=e-1;!/\n/.test(this.text.charAt(n))&&n>-1;)t++,n--;return e-t},findLineBoundaryRight:function(e){for(var t=0,n=e;!/\n/.test(this.text.charAt(n))&&n<this.text.length;)t++,n++;return e+t},getNumNewLinesInSelectedText:function(){for(var e=0,t=0,n=this.getSelectedText().split(""),a=n.length;t<a;t++)"\n"===n[t]&&e++;return e},searchWordBoundary:function(e,t){for(var n=this._reSpace.test(this.text.charAt(e))?e-1:e,a=this.text.charAt(n),r=/[ \n\.,;!\?\-]/;!r.test(a)&&n>0&&n<this.text.length;)n+=t,a=this.text.charAt(n);return r.test(a)&&"\n"!==a&&(n+=1===t?0:1),n},selectWord:function(e){var t=this.searchWordBoundary(e,-1),n=this.searchWordBoundary(e,1);this.setSelectionStart(t),this.setSelectionEnd(n),this.initDelayedCursor(!0)},selectLine:function(e){var t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);this.setSelectionStart(t),this.setSelectionEnd(n),this.initDelayedCursor(!0)},enterEditing:function(){if(!this.isEditing&&this.editable)return this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.initHiddenTextarea(),this._updateTextarea(),this.hiddenTextarea.focus(),this._saveEditingProps(),this._setEditingProps(),this._tick(),this.canvas&&this.canvas.doRenderAll(),this.fire("editing:entered"),this.canvas&&this.canvas.fire("text:editing:entered",{target:this}),this},exitEditingOnOthers:function(e){fabric.IText.instances.forEach((function(t){t.canvas===e&&(t.selected=!1,t.isEditing&&t.exitEditing())}),this)},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){this.hiddenTextarea&&(this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart)},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),this.canvas&&this.canvas.fire("text:editing:exited",{target:this}),this},_removeCharsFromTo:function(e,t){for(var n=t;n!==e;){var a=this.get2DCursorLocation(n).charIndex;n--;this.get2DCursorLocation(n).charIndex}this.text=this.text.slice(0,e)+this.text.slice(t)},insertChars:function(e){this.text.slice(this.selectionStart,this.selectionStart+1);this.text=this.text.slice(0,this.selectionStart)+e+this.text.slice(this.selectionEnd),this.selectionStart+=e.length,this.selectionEnd=this.selectionStart,this.canvas&&this.canvas.volumeActions?this.canvas.volumeActions.setText(this.canvas,this.text):(this.canvas&&this.canvas.renderAll().renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this}))},insertNewline:function(e){this.insertChars("\n"),e.preventDefault()}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(e){this.__newClickTime=+new Date;var t=this.canvas.getPointer(e.e);this.isTripleClick(t)?(this.fire("tripleclick",e),this._stopEvent(e.e)):this.isDoubleClick(t)&&(this.fire("dblclick",e),this._stopEvent(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y&&this.__lastIsEditing},isTripleClick:function(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initSelectedHandler(),this.initMousedownHandler(),this.initMousemoveHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",(function(e){this.selectWord(this.getSelectionStartFromPointer(e.e))})),this.on("tripleclick",(function(e){this.selectLine(this.getSelectionStartFromPointer(e.e))}))},initMousedownHandler:function(){this.on("mousedown",(function(e){var t=this.canvas.getPointer(e.e);this.__mousedownX=t.x,this.__mousedownY=t.y,this.__isMousedown=!0,this.hiddenTextarea&&this.canvas&&this.canvas.wrapperEl.appendChild(this.hiddenTextarea),this.selected&&this.setCursorByClick(e.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.initDelayedCursor(!0))}))},initMousemoveHandler:function(){this.on("mousemove",(function(e){if(this.__isMousedown&&this.isEditing){var t=this.getSelectionStartFromPointer(e.e);t>=this.__selectionStartOnMouseDown?(this.setSelectionStart(this.__selectionStartOnMouseDown),this.setSelectionEnd(t)):(this.setSelectionStart(t),this.setSelectionEnd(this.__selectionStartOnMouseDown))}}))},_isObjectMoved:function(e){var t=this.canvas.getPointer(e);return this.__mousedownX!==t.x||this.__mousedownY!==t.y},initMouseupHandler:function(){this.on("mouseup",(function(e){this.__isMousedown=!1,this._isObjectMoved(e.e)||(this.__lastSelected&&(this.enterEditing(),this.initDelayedCursor(!0)),this.selected=!0)}))},setCursorByClick:function(e){var t=this.getSelectionStartFromPointer(e);e.shiftKey?t<this.selectionStart?(this.setSelectionEnd(this.selectionStart),this.setSelectionStart(t)):this.setSelectionEnd(t):(this.setSelectionStart(t),this.setSelectionEnd(t))},_getLocalRotatedPointer:function(e){var t=this.canvas.getPointer(e),n=new fabric.Point(t.x,t.y),a=new fabric.Point(this.left,this.top),r=fabric.util.rotatePoint(n,a,fabric.util.degreesToRadians(-this.angle));return this.getLocalPointer(e,r)},getSelectionStartFromPointer:function(e){for(var t=this._getLocalRotatedPointer(e),n=this.text.split(this._reNewline),a=0,r=0,o=0,s=0,i=0,l=n.length;i<l;i++){o+=this._getHeightOfLine(this.ctx,i)*this.scaleY;var c=this._getWidthOfLine(this.ctx,i,n);r=this._getLineLeftOffset(c)*this.scaleX,this.flipX&&(n[i]=n[i].split("").reverse().join(""));for(var p=0,u=n[i].length;p<u;p++){var d=n[i][p];if(a=r,r+=this._getWidthOfChar(this.ctx,d,i,this.flipX?u-p:p)*this.scaleX,!(o<=t.y||r<=t.x))return this._getNewSelectionStartFromOffset(t,a,r,s+i,u);s++}if(t.y<o)return this._getNewSelectionStartFromOffset(t,a,r,s+i,u,p)}return this.text.length},_getNewSelectionStartFromOffset:function(e,t,n,a,r,o){var s=e.x-t,i=a+(n-e.x>s?0:1);return this.flipX&&(i=r-i),i>this.text.length&&(i=this.text.length),o===r&&i--,i}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.style.cssText="position: absolute; top: 0; left: -9999px",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keypress",this.onKeyPress.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",13:"insertNewline",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete",27:"exitEditing"},_ctrlKeysMap:{65:"selectAll",88:"cut"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing){if(e.keyCode in this._keysMap)this[this._keysMap[e.keyCode]](e);else{if(!(e.keyCode in this._ctrlKeysMap)||!e.ctrlKey&&!e.metaKey)return;this[this._ctrlKeysMap[e.keyCode]](e)}e.stopPropagation(),this.canvas&&this.canvas.renderAll()}},forwardDelete:function(e){this.selectionStart===this.selectionEnd&&this.moveCursorRight(e),this.removeChars(e)},copy:function(e){var t=this.getSelectedText(),n=this._getClipboardData(e);n&&n.setData("text",t),this.copiedText=t},paste:function(e){var t=null,n=this._getClipboardData(e);(t=n?n.getData("text"):this.copiedText)&&(this.insertChars(t),e.preventDefault())},cut:function(e){this.selectionStart!==this.selectionEnd&&(this.copy(),this.removeChars(e))},_getClipboardData:function(e){return e&&(e.clipboardData||fabric.window.clipboardData)},onKeyPress:function(e){!this.isEditing||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode||(this.insertChars(String.fromCharCode(e.which)),e.stopPropagation(),e.preventDefault())},getDownCursorOffset:function(e,t){var n,a=t?this.selectionEnd:this.selectionStart,r=this.text.split(this._reNewline),o=this.text.slice(0,a),s=this.text.slice(a),i=o.slice(o.lastIndexOf("\n")+1),l=s.match(/(.*)\n?/)[1],c=(s.match(/.*\n(.*)\n?/)||{})[1]||"",p=this.get2DCursorLocation(a);if(p.lineIndex===r.length-1||e.metaKey)return this.text.length-a;for(var u=this._getWidthOfLine(this.ctx,p.lineIndex,r),d=this._getLineLeftOffset(u),h=p.lineIndex,E=0,m=i.length;E<m;E++)n=i[E],d+=this._getWidthOfChar(this.ctx,n,h,E);var S=this._getIndexOnNextLine(p,c,d,r);return l.length+1+S},_getIndexOnNextLine:function(e,t,n,a){for(var r,o=e.lineIndex+1,s=this._getWidthOfLine(this.ctx,o,a),i=this._getLineLeftOffset(s),l=0,c=0,p=t.length;c<p;c++){var u=t[c],d=this._getWidthOfChar(this.ctx,u,o,c);if((i+=d)>n){r=!0;var h=i-d,E=i,m=Math.abs(h-n);l=Math.abs(E-n)<m?c+1:c;break}}return r||(l=t.length),l},moveCursorDown:function(e){this.abortCursorAnimation(),this._currentCursorOpacity=1;var t=this.getDownCursorOffset(e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorDownWithShift(t):this.moveCursorDownWithoutShift(t),this.initDelayedCursor()},moveCursorDownWithoutShift:function(e){this._selectionDirection="right",this.selectionStart+=e,this.selectionStart>this.text.length&&(this.selectionStart=this.text.length),this.selectionEnd=this.selectionStart},moveCursorDownWithShift:function(e){if("left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd)return this.selectionStart+=e,void(this._selectionDirection="left");this._selectionDirection="right",this.selectionEnd+=e,this.selectionEnd>this.text.length&&(this.selectionEnd=this.text.length)},getUpCursorOffset:function(e,t){var n=t?this.selectionEnd:this.selectionStart,a=this.get2DCursorLocation(n);if(0===a.lineIndex||e.metaKey)return n;for(var r,o=this.text.slice(0,n),s=o.slice(o.lastIndexOf("\n")+1),i=(o.match(/\n?(.*)\n.*$/)||{})[1]||"",l=this.text.split(this._reNewline),c=this._getWidthOfLine(this.ctx,a.lineIndex,l),p=this._getLineLeftOffset(c),u=a.lineIndex,d=0,h=s.length;d<h;d++)r=s[d],p+=this._getWidthOfChar(this.ctx,r,u,d);var E=this._getIndexOnPrevLine(a,i,p,l);return i.length-E+s.length},_getIndexOnPrevLine:function(e,t,n,a){for(var r,o=e.lineIndex-1,s=this._getWidthOfLine(this.ctx,o,a),i=this._getLineLeftOffset(s),l=0,c=0,p=t.length;c<p;c++){var u=t[c],d=this._getWidthOfChar(this.ctx,u,o,c);if((i+=d)>n){r=!0;var h=i-d,E=i,m=Math.abs(h-n);l=Math.abs(E-n)<m?c:c-1;break}}return r||(l=t.length-1),l},moveCursorUp:function(e){this.abortCursorAnimation(),this._currentCursorOpacity=1;var t=this.getUpCursorOffset(e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorUpWithShift(t):this.moveCursorUpWithoutShift(t),this.initDelayedCursor()},moveCursorUpWithShift:function(e){if(this.selectionStart===this.selectionEnd)this.selectionStart-=e;else{if("right"===this._selectionDirection)return this.selectionEnd-=e,void(this._selectionDirection="right");this.selectionStart-=e}this.selectionStart<0&&(this.selectionStart=0),this._selectionDirection="left"},moveCursorUpWithoutShift:function(e){this.selectionStart===this.selectionEnd&&(this.selectionStart-=e),this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd=this.selectionStart,this._selectionDirection="left"},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||(this.abortCursorAnimation(),this._currentCursorOpacity=1,e.shiftKey?this.moveCursorLeftWithShift(e):this.moveCursorLeftWithoutShift(e),this.initDelayedCursor())},_move:function(e,t,n){e.altKey?this[t]=this["findWordBoundary"+n](this[t]):e.metaKey?this[t]=this["findLineBoundary"+n](this[t]):this[t]+="Left"===n?-1:1},_moveLeft:function(e,t){this._move(e,t,"Left")},_moveRight:function(e,t){this._move(e,t,"Right")},moveCursorLeftWithoutShift:function(e){this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this._moveLeft(e,"selectionStart"),this.selectionEnd=this.selectionStart},moveCursorLeftWithShift:function(e){"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):(this._selectionDirection="left",this._moveLeft(e,"selectionStart"),"\n"===this.text.charAt(this.selectionStart)&&this.selectionStart--,this.selectionStart<0&&(this.selectionStart=0))},moveCursorRight:function(e){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||(this.abortCursorAnimation(),this._currentCursorOpacity=1,e.shiftKey?this.moveCursorRightWithShift(e):this.moveCursorRightWithoutShift(e),this.initDelayedCursor())},moveCursorRightWithShift:function(e){"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):(this._selectionDirection="right",this._moveRight(e,"selectionEnd"),"\n"===this.text.charAt(this.selectionEnd-1)&&this.selectionEnd++,this.selectionEnd>this.text.length&&(this.selectionEnd=this.text.length))},moveCursorRightWithoutShift:function(e){this._selectionDirection="right",this.selectionStart===this.selectionEnd?(this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):(this.selectionEnd+=this.getNumNewLinesInSelectedText(),this.selectionEnd>this.text.length&&(this.selectionEnd=this.text.length),this.selectionStart=this.selectionEnd)},removeChars:function(e){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(e):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.selectionEnd=this.selectionStart,this.canvas&&this.canvas.volumeActions?this.canvas.volumeActions.setText(this.canvas,this.text):(this.canvas&&this.canvas.renderAll().renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})),e.preventDefault()},_removeCharsNearCursor:function(e){if(0!==this.selectionStart){if(e.metaKey){var t=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(t,this.selectionStart),this.selectionStart=t}else if(e.altKey){var n=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(n,this.selectionStart),this.selectionStart=n}else this.selectionStart--,this.text=this.text.slice(0,this.selectionStart)+this.text.slice(this.selectionStart+1);e.preventDefault()}}}),function(){var e=fabric.util.object.clone;fabric.EText=fabric.util.createClass(fabric.IText,{type:"e-text",asPath:null,initialize:function(e,t){t.pathObject&&(this.asPath=new fabric.Path(t.pathObject.path,t.pathObject)),this.callSuper("initialize",e,t)},render:function(e){!this.isEditing&&this.asPath?this.asPath.render(e):this.callSuper("render",e)}}),fabric.EText.fromObject=function(t){return new fabric.EText(t.text,e(t))}}()},function(e,t){!function(e){"use strict";var t=fabric.util.object.extend,n={x1:1,x2:1,y1:1,y2:1};function a(e,t){var n=e.origin,a=e.axis1,r=e.axis2,o=e.dimension,s=t.nearest,i=t.center,l=t.farthest;return function(){switch(this.get(n)){case s:return Math.min(this.get(a),this.get(r));case i:return Math.min(this.get(a),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(a),this.get(r))}}}fabric.Line?fabric.warn("fabric.Line is already defined"):(fabric.Line=fabric.util.createClass(fabric.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,initialize:function(e,t){t=t||{},e||(e=[0,0,0,0]),this.callSuper("initialize",t),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(t)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,t){return this[e]=t,"undefined"!==typeof n[e]&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){if(e.beginPath(),this.group&&"path-group"===this.group.type){var t=this.getCenterPoint();e.translate(t.x,t.y),this.transformMatrix||e.translate(-this.group.width/2,-this.group.height/2)}if(!this.strokeDashArray||this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")){var n=this.x1<=this.x2?-1:1,a=this.y1<=this.y2?-1:1;e.moveTo(n*this.width/2,a*this.height/2),e.lineTo(-1*n*this.width/2,-1*a*this.height/2)}e.lineWidth=this.strokeWidth;var r=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r},_renderDashedStroke:function(e){var t=this.x1<=this.x2?-1:1,n=this.y1<=this.y2?-1:1,a=t*this.width/2,r=n*this.height/2;e.beginPath(),fabric.util.drawDashedLine(e,a,r,-a,-r,this.strokeDashArray),e.closePath()},toObject:function(e){return t(this.callSuper("toObject",e),{x1:this.get("x1"),y1:this.get("y1"),x2:this.get("x2"),y2:this.get("y2")})},toSVG:function(e){var t=this._createBaseSVGMarkup();return t.push("<line ",'x1="',this.get("x1"),'" y1="',this.get("y1"),'" x2="',this.get("x2"),'" y2="',this.get("y2"),'" style="',this.getSvgStyles(),'"/>'),e?e(t.join("")):t.join("")},complexity:function(){return 1}}),fabric.Line.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),fabric.Line.fromElement=function(e,n){var a=fabric.parseAttributes(e,fabric.Line.ATTRIBUTE_NAMES),r=[a.x1||0,a.y1||0,a.x2||0,a.y2||0];return new fabric.Line(r,t(a,n))},fabric.Line.fromObject=function(e){var t=[e.x1,e.y1,e.x2,e.y2];return new fabric.Line(t,e)})}()},function(e,t){!function(e){"use strict";var t=fabric.util.array.min,n=fabric.util.array.max,a=fabric.util.object.extend,r=Object.prototype.toString,o=fabric.util.drawArc,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i={m:"l",M:"L"};function l(e){return"H"===e[0]?e[1]:e[e.length-2]}function c(e){return"V"===e[0]?e[1]:e[e.length-1]}fabric.Path?fabric.warn("fabric.Path is already defined"):(fabric.Path=fabric.util.createClass(fabric.Object,{type:"path",path:null,initialize:function(e,t){t=t||{},this.setOptions(t),e||(e=[]);var n="[object Array]"===r.call(e);this.path=n?e:e.match&&e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(n||(this.path=this._parsePath()),this._initializePath(t),t.sourcePath&&this.setSourcePath(t.sourcePath))},_initializePath:function(e){var t="width"in e&&null!=e.width,n="height"in e&&null!=e.width,r="left"in e,o="top"in e,s=r?this.left:0,i=o?this.top:0;t&&n?(o||(this.top=this.height/2),r||(this.left=this.width/2)):(a(this,this._parseDimensions()),t&&(this.width=e.width),n&&(this.height=e.height)),this.pathOffset=this.pathOffset||this._calculatePathOffset(s,i)},_calculatePathOffset:function(e,t){return{x:this.left-e-this.width/2,y:this.top-t-this.height/2}},_render:function(e,t){var n,a,r,s=null,i=0,l=0,c=0,p=0,u=0,d=0,h=-(this.width/2+this.pathOffset.x),E=-(this.height/2+this.pathOffset.y);t&&(h+=this.width/2,E+=this.height/2);for(var m=0,S=this.path.length;m<S;++m){switch((n=this.path[m])[0]){case"l":c+=n[1],p+=n[2],e.lineTo(c+h,p+E);break;case"L":c=n[1],p=n[2],e.lineTo(c+h,p+E);break;case"h":c+=n[1],e.lineTo(c+h,p+E);break;case"H":c=n[1],e.lineTo(c+h,p+E);break;case"v":p+=n[1],e.lineTo(c+h,p+E);break;case"V":p=n[1],e.lineTo(c+h,p+E);break;case"m":i=c+=n[1],l=p+=n[2],e.moveTo(c+h,p+E);break;case"M":i=c=n[1],l=p=n[2],e.moveTo(c+h,p+E);break;case"c":a=c+n[5],r=p+n[6],u=c+n[3],d=p+n[4],e.bezierCurveTo(c+n[1]+h,p+n[2]+E,u+h,d+E,a+h,r+E),c=a,p=r;break;case"C":c=n[5],p=n[6],u=n[3],d=n[4],e.bezierCurveTo(n[1]+h,n[2]+E,u+h,d+E,c+h,p+E);break;case"s":a=c+n[3],r=p+n[4],null===s[0].match(/[CcSs]/)?(u=c,d=p):(u=2*c-u,d=2*p-d),e.bezierCurveTo(u+h,d+E,c+n[1]+h,p+n[2]+E,a+h,r+E),u=c+n[1],d=p+n[2],c=a,p=r;break;case"S":a=n[3],r=n[4],null===s[0].match(/[CcSs]/)?(u=c,d=p):(u=2*c-u,d=2*p-d),e.bezierCurveTo(u+h,d+E,n[1]+h,n[2]+E,a+h,r+E),c=a,p=r,u=n[1],d=n[2];break;case"q":a=c+n[3],r=p+n[4],u=c+n[1],d=p+n[2],e.quadraticCurveTo(u+h,d+E,a+h,r+E),c=a,p=r;break;case"Q":a=n[3],r=n[4],e.quadraticCurveTo(n[1]+h,n[2]+E,a+h,r+E),c=a,p=r,u=n[1],d=n[2];break;case"t":a=c+n[1],r=p+n[2],null===s[0].match(/[QqTt]/)?(u=c,d=p):(u=2*c-u,d=2*p-d),e.quadraticCurveTo(u+h,d+E,a+h,r+E),c=a,p=r;break;case"T":a=n[1],r=n[2],null===s[0].match(/[QqTt]/)?(u=c,d=p):(u=2*c-u,d=2*p-d),e.quadraticCurveTo(u+h,d+E,a+h,r+E),c=a,p=r;break;case"a":o(e,c+h,p+E,[n[1],n[2],n[3],n[4],n[5],n[6]+c+h,n[7]+p+E]),c+=n[6],p+=n[7];break;case"A":o(e,c+h,p+E,[n[1],n[2],n[3],n[4],n[5],n[6]+h,n[7]+E]),c=n[6],p=n[7];break;case"z":case"Z":c=i,p=l,e.closePath()}s=n}},render:function(e,t){if(this.visible){e.save(),t&&e.translate(-this.width/2,-this.height/2);var n=this.transformMatrix;n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t||this.transform(e),this._setStrokeStyles(e),this._setFillStyles(e),this.clipTo&&fabric.util.clipContext(this,e),e.beginPath(),e.globalAlpha=this.group?e.globalAlpha*this.opacity:this.opacity,this._render(e,t),this._renderFill(e),this._renderStroke(e),this.clipTo&&e.restore(),e.restore()}},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){var t=a(this.callSuper("toObject",e),{path:this.path.map((function(e){return e.slice()})),pathOffset:this.pathOffset});return this.sourcePath&&(t.sourcePath=this.sourcePath),this.transformMatrix&&(t.transformMatrix=this.transformMatrix),t},toDatalessObject:function(e){var t=this.toObject(e);return this.sourcePath&&(t.path=this.sourcePath),delete t.sourcePath,t},toSVG:function(e){for(var t=[],n=this._createBaseSVGMarkup(),a=0,r=this.path.length;a<r;a++)t.push(this.path[a].join(" "));var o=t.join(" ");return n.push('<g transform="',this.group?"":this.getSvgTransform(),'">',"<path ",'d="',o,'" style="',this.getSvgStyles(),'" transform="translate(',-this.width/2," ",-this.height/2,")",'" stroke-linecap="round" ',"/>","</g>"),e?e(n.join("")):n.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var e,t,n,a,r,o=[],l=[],c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,p=0,u=this.path.length;p<u;p++){for(a=(e=this.path[p]).slice(1).trim(),l.length=0;n=c.exec(a);)l.push(n[0]);r=[e.charAt(0)];for(var d=0,h=l.length;d<h;d++)t=parseFloat(l[d]),isNaN(t)||r.push(t);var E=r[0],m=s[E.toLowerCase()],S=i[E]||E;if(r.length-1>m)for(var g=1,f=r.length;g<f;g+=m)o.push([E].concat(r.slice(g,g+m))),E=S;else o.push(r)}return o},_parseDimensions:function(){var e=[],a=[],r={};this.path.forEach((function(t,n){this._getCoordsFromCommand(t,n,e,a,r)}),this);var o=t(e)||0,s=t(a)||0,i=(n(e)||0)-o,l=(n(a)||0)-s;return{left:this.left+(o+i/2),top:this.top+(s+l/2),width:i,height:l}},_getCoordsFromCommand:function(e,t,n,a,r){var o=!1;"H"!==e[0]&&(r.x=l(0===t?e:this.path[t-1])),"V"!==e[0]&&(r.y=c(0===t?e:this.path[t-1])),e[0]===e[0].toLowerCase()&&(o=!0);var s,i=this._getXY(e,o,r);s=parseInt(i.x,10),isNaN(s)||n.push(s),s=parseInt(i.y,10),isNaN(s)||a.push(s)},_getXY:function(e,t,n){return{x:t?n.x+l(e):"V"===e[0]?n.x:l(e),y:t?n.y+c(e):"H"===e[0]?n.y:c(e)}}}),fabric.Path.fromObject=function(e,t){t(new fabric.Path(e.path,e))},fabric.Path.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat(["d"]),fabric.Path.fromElement=function(e,t,n){var r=fabric.parseAttributes(e,fabric.Path.ATTRIBUTE_NAMES);t&&t(new fabric.Path(r.d,a(r,n)))},fabric.Path.async=!0)}()},function(e,t){!function(e){"use strict";var t=fabric.util.object.extend,n=fabric.util.array.invoke,a=fabric.Object.prototype.toObject;fabric.PathGroup?fabric.warn("fabric.PathGroup is already defined"):(fabric.PathGroup=fabric.util.createClass(fabric.Path,{type:"path-group",fill:"",initialize:function(e,t){t=t||{},this.paths=e||[];for(var n=this.paths.length;n--;)this.paths[n].group=this;this.setOptions(t),t.widthAttr&&(this.scaleX=t.widthAttr/t.width),t.heightAttr&&(this.scaleY=t.heightAttr/t.height),this.setCoords(),t.sourcePath&&this.setSourcePath(t.sourcePath)},render:function(e){if(this.visible){e.save();var t=this.transformMatrix;t&&e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this.transform(e),this.clipTo&&fabric.util.clipContext(this,e);for(var n=0,a=this.paths.length;n<a;++n)this.paths[n].render(e,!0);this.clipTo&&e.restore(),e.restore()}},_set:function(e,t){if("fill"===e&&t&&this.isSameColor())for(var n=this.paths.length;n--;)this.paths[n]._set(e,t);return this.callSuper("_set",e,t)},toObject:function(e){var r=t(a.call(this,e),{paths:n(this.getObjects(),"toObject",e)});return this.sourcePath&&(r.sourcePath=this.sourcePath),r},toDatalessObject:function(e){var t=this.toObject(e);return this.sourcePath&&(t.paths=this.sourcePath),t},toSVG:function(e){for(var t=this.getObjects(),n=["<g ",'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransform(),'" ',">"],a=0,r=t.length;a<r;a++)n.push(t[a].toSVG(e));return n.push("</g>"),e?e(n.join("")):n.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var e=(this.getObjects()[0].get("fill")||"").toLowerCase();return this.getObjects().every((function(t){return(t.get("fill")||"").toLowerCase()===e}))},complexity:function(){return this.paths.reduce((function(e,t){return e+(t&&t.complexity?t.complexity():0)}),0)},getObjects:function(){return this.paths}}),fabric.PathGroup.fromObject=function(e,t){fabric.util.enlivenObjects(e.paths,(function(n){delete e.paths,t(new fabric.PathGroup(n,e))}))},fabric.PathGroup.async=!0)}()},function(e,t){!function(e){"use strict";var t=fabric.util.object.extend,n=fabric.util.array.min,a=fabric.util.array.max,r=fabric.util.toFixed;fabric.Polygon?fabric.warn("fabric.Polygon is already defined"):(fabric.Polygon=fabric.util.createClass(fabric.Object,{type:"polygon",points:null,initialize:function(e,t,n){t=t||{},this.points=e,this.callSuper("initialize",t),this._calcDimensions(n)},_calcDimensions:function(e){var t=this.points,r=n(t,"x"),o=n(t,"y"),s=a(t,"x"),i=a(t,"y");if(this.width=s-r||1,this.height=i-o||1,this.minX=r,this.minY=o,!e){var l=this.width/2+this.minX,c=this.height/2+this.minY;this.points.forEach((function(e){e.x-=l,e.y-=c}),this)}},toObject:function(e){return t(this.callSuper("toObject",e),{points:this.points.concat()})},toSVG:function(e){for(var t=[],n=this._createBaseSVGMarkup(),a=0,o=this.points.length;a<o;a++)t.push(r(this.points[a].x,2),",",r(this.points[a].y,2)," ");return n.push("<polygon ",'points="',t.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),e?e(n.join("")):n.join("")},_render:function(e){var t;e.beginPath(),e.globalAlpha=this.group?e.globalAlpha*this.opacity:this.opacity,e.moveTo(this.points[0].x,this.points[0].y);for(var n=0,a=this.points.length;n<a;n++)t=this.points[n],e.lineTo(t.x,t.y);this._renderFill(e),(this.stroke||this.strokeDashArray)&&(e.closePath(),this._renderStroke(e))},_renderDashedStroke:function(e){var t,n;e.beginPath();for(var a=0,r=this.points.length;a<r;a++)t=this.points[a],n=this.points[a+1]||this.points[0],fabric.util.drawDashedLine(e,t.x,t.y,n.x,n.y,this.strokeDashArray);e.closePath()},complexity:function(){return this.points.length}}),fabric.Polygon.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat(),fabric.Polygon.fromElement=function(e,n){if(!e)return null;n||(n={});var a=fabric.parsePointsAttribute(e.getAttribute("points")),r=fabric.parseAttributes(e,fabric.Polygon.ATTRIBUTE_NAMES);return new fabric.Polygon(a,t(r,n),!0)},fabric.Polygon.fromObject=function(e){return new fabric.Polygon(e.points,e,!0)})}()},function(e,t){!function(e){"use strict";var t=fabric.util.toFixed;fabric.Polyline?fabric.warn("fabric.Polyline is already defined"):(fabric.Polyline=fabric.util.createClass(fabric.Object,{type:"polyline",points:null,initialize:function(e,t,n){t=t||{},this.set("points",e),this.callSuper("initialize",t),this._calcDimensions(n)},_calcDimensions:function(e){return fabric.Polygon.prototype._calcDimensions.call(this,e)},toObject:function(e){return fabric.Polygon.prototype.toObject.call(this,e)},toSVG:function(e){for(var n=[],a=this._createBaseSVGMarkup(),r=0,o=this.points.length;r<o;r++)n.push(t(this.points[r].x,2),",",t(this.points[r].y,2)," ");return a.push("<polyline ",'points="',n.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),e?e(a.join("")):a.join("")},_render:function(e){var t;e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y);for(var n=0,a=this.points.length;n<a;n++)t=this.points[n],e.lineTo(t.x,t.y);this._renderFill(e),this._renderStroke(e)},_renderDashedStroke:function(e){var t,n;e.beginPath();for(var a=0,r=this.points.length;a<r;a++)t=this.points[a],n=this.points[a+1]||t,fabric.util.drawDashedLine(e,t.x,t.y,n.x,n.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),fabric.Polyline.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat(),fabric.Polyline.fromElement=function(e,t){if(!e)return null;t||(t={});var n=fabric.parsePointsAttribute(e.getAttribute("points")),a=fabric.parseAttributes(e,fabric.Polyline.ATTRIBUTE_NAMES);return new fabric.Polyline(n,fabric.util.object.extend(a,t),!0)},fabric.Polyline.fromObject=function(e){var t=e.points;return new fabric.Polyline(t,e,!0)})}()},function(e,t){!function(e){"use strict";var t=fabric.util.object.extend;if(fabric.Rect)console.warn("fabric.Rect is already defined");else{var n=fabric.Object.prototype.stateProperties.concat();n.push("rx","ry","x","y"),fabric.Rect=fabric.util.createClass(fabric.Object,{stateProperties:n,type:"rect",rx:0,ry:0,x:0,y:0,strokeDashArray:null,initialize:function(e){e=e||{},this.callSuper("initialize",e),this._initRxRy(),this.x=e.x||0,this.y=e.y||0},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){if(1!==this.width||1!==this.height){var t=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,a=this.width,r=this.height,o=-a/2,s=-r/2,i=this.group&&"path-group"===this.group.type,l=0!==t||0!==n,c=.4477152502;e.beginPath(),e.globalAlpha=i?e.globalAlpha*this.opacity:this.opacity,this.transformMatrix&&i&&e.translate(this.width/2+this.x,this.height/2+this.y),!this.transformMatrix&&i&&e.translate(-this.group.width/2+this.width/2+this.x,-this.group.height/2+this.height/2+this.y),e.moveTo(o+t,s),e.lineTo(o+a-t,s),l&&e.bezierCurveTo(o+a-c*t,s,o+a,s+c*n,o+a,s+n),e.lineTo(o+a,s+r-n),l&&e.bezierCurveTo(o+a,s+r-c*n,o+a-c*t,s+r,o+a-t,s+r),e.lineTo(o+t,s+r),l&&e.bezierCurveTo(o+c*t,s+r,o,s+r-c*n,o,s+r-n),e.lineTo(o,s+n),l&&e.bezierCurveTo(o,s+c*n,o+c*t,s,o+t,s),e.closePath(),this._renderFill(e),this._renderStroke(e)}else e.fillRect(0,0,1,1)},_renderDashedStroke:function(e){var t=-this.width/2,n=-this.height/2,a=this.width,r=this.height;e.beginPath(),fabric.util.drawDashedLine(e,t,n,t+a,n,this.strokeDashArray),fabric.util.drawDashedLine(e,t+a,n,t+a,n+r,this.strokeDashArray),fabric.util.drawDashedLine(e,t+a,n+r,t,n+r,this.strokeDashArray),fabric.util.drawDashedLine(e,t,n+r,t,n,this.strokeDashArray),e.closePath()},_normalizeLeftTopProperties:function(e){return"left"in e&&this.set("left",e.left+this.getWidth()/2),this.set("x",e.left||0),"top"in e&&this.set("top",e.top+this.getHeight()/2),this.set("y",e.top||0),this},toObject:function(e){var n=t(this.callSuper("toObject",e),{rx:this.get("rx")||0,ry:this.get("ry")||0,x:this.get("x"),y:this.get("y")});return this.includeDefaultValues||this._removeDefaultValues(n),n},toSVG:function(e){var t=this._createBaseSVGMarkup();return t.push("<rect ",'x="',-1*this.width/2,'" y="',-1*this.height/2,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),e?e(t.join("")):t.join("")},complexity:function(){return 1}}),fabric.Rect.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),fabric.Rect.fromElement=function(e,n){if(!e)return null;var a,r=fabric.parseAttributes(e,fabric.Rect.ATTRIBUTE_NAMES);(a=r).left=a.left||0,a.top=a.top||0,r=a;var o=new fabric.Rect(t(n?fabric.util.object.clone(n):{},r));return o._normalizeLeftTopProperties(r),o},fabric.Rect.fromObject=function(e){return new fabric.Rect(e)}}}()},function(e,t){!function(){"use strict";if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var e=fabric.util.object.extend,t=fabric.util.getElementOffset,n=fabric.util.removeFromArray,a=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass({initialize:function(e,t){t||(t={}),this._initStatic(e,t),fabric.StaticCanvas.activeInstance=this},backgroundColor:"",overlayColor:"",includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:[1,0,0,1,0,0],onBeforeScaleRotate:function(){},_initStatic:function(e,t){this._objects=[],this._createLowerCanvas(e),this._initOptions(t),this._setImageSmoothing(),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,this.renderAll.bind(this)),t.overlayColor&&this.setOverlayColor(t.overlayColor,this.renderAll.bind(this)),this.calcOffset()},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},_setImageSmoothing:function(){var e=this.getContext();e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.webkitImageSmoothingEnabled=this.imageSmoothingEnabled,e.msImageSmoothingEnabled=this.imageSmoothingEnabled,e.oImageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayColor:function(e,t,n){return this[e]=t,n&&n(),this},_createCanvasElement:function(){var e=fabric.document.createElement("canvas");if(e.style||(e.style={}),!e)throw a;return this._initCanvasElement(e),e},_initCanvasElement:function(e){if(fabric.util.createCanvasElement(e),"undefined"===typeof e.getContext)throw a},_initOptions:function(e){for(var t in e)this[t]=e[t];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){this.lowerCanvasEl=fabric.util.getById(e)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e){return this._setDimension("width",e)},setHeight:function(e){return this._setDimension("height",e)},setDimensions:function(e){for(var t in e)this._setDimension(t,e[t]);return this},_setDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.lowerCanvasEl.style[e]=t+"px",this.upperCanvasEl&&(this.upperCanvasEl[e]=t,this.upperCanvasEl.style[e]=t+"px"),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t),this.wrapperEl&&(this.wrapperEl.style[e]=t+"px"),this[e]=t,this.calcOffset(),this.renderAll(),this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(e){var t=this.getActiveGroup();this.viewportTransform=e,this.renderAll();for(var n=0,a=this._objects.length;n<a;n++)this._objects[n].setCoords();return t&&t.setCoords(),this},zoomToPoint:function(e,t){var n=e;e=fabric.util.transformPoint(e,fabric.util.invertTransform(this.viewportTransform)),this.viewportTransform[0]=t,this.viewportTransform[3]=t;var a=fabric.util.transformPoint(e,this.viewportTransform);this.viewportTransform[4]+=n.x-a.x,this.viewportTransform[5]+=n.y-a.y,this.renderAll();for(var r=0,o=this._objects.length;r<o;r++)this._objects[r].setCoords();return this},setZoom:function(e){return this.zoomToPoint(new fabric.Point(0,0),e),this},absolutePan:function(e){this.viewportTransform[4]=-e.x,this.viewportTransform[5]=-e.y,this.renderAll();for(var t=0,n=this._objects.length;t<n;t++)this._objects[t].setCoords();return this},relativePan:function(e){return this.absolutePan(new fabric.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(e,t){if(t){e.save();var n=this.viewportTransform;e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.render(e),e.restore(),this.controlsAboveOverlay||t._renderControls(e)}},_onObjectAdded:function(e){this.stateful&&e.setupState(),e.canvas=this,e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.getActiveObject()===e&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared")),this.fire("object:removed",{target:e}),e.fire("removed")},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&&this.discardActiveGroup(),this.discardActiveObject&&this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&&this.clearContext(this.contextTop),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(e){return this},doRenderAll:function(e){var t=this[!0===e&&this.interactive?"contextTop":"contextContainer"],n=this.getActiveGroup();return this.contextTop&&this.selection&&!this._groupSelector&&this.clearContext(this.contextTop),e||this.clearContext(t),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,t),this._renderBackground(t),this._renderObjects(t,n),this._renderActiveGroup(t,n),this.clipTo&&t.restore(),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render"),this},_renderObjects:function(e,t){var n,a;if(t)for(n=0,a=this._objects.length;n<a;++n)this._objects[n]&&!t.contains(this._objects[n])&&this._draw(e,this._objects[n]);else for(n=0,a=this._objects.length;n<a;++n)this._draw(e,this._objects[n])},_renderActiveGroup:function(e,t){if(t){var n=[];this.forEachObject((function(e){t.contains(e)&&n.push(e)})),t._set("objects",n),this._draw(e,t)}},_renderBackground:function(e){this.backgroundColor&&(e.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(e):this.backgroundColor,e.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height))},_renderOverlay:function(e){this.overlayColor&&(e.fillStyle=this.overlayColor.toLive?this.overlayColor.toLive(e):this.overlayColor,e.fillRect(this.overlayColor.offsetX||0,this.overlayColor.offsetY||0,this.width,this.height))},renderTop:function(){var e=this.contextTop||this.contextContainer;this.clearContext(e),this.selection&&this._groupSelector&&this._drawSelection();var t=this.getActiveGroup();return t&&t.render(e),this._renderOverlay(e),this.fire("after:render"),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(e){return this._centerObject(e,new fabric.Point(this.getCenter().left,e.getCenterPoint().y)),this.renderAll(),this},centerObjectV:function(e){return this._centerObject(e,new fabric.Point(e.getCenterPoint().x,this.getCenter().top)),this.renderAll(),this},centerObject:function(e){var t=this.getCenter();return this._centerObject(e,new fabric.Point(t.left,t.top)),this.renderAll(),this},_centerObject:function(e,t){return e.setPositionByOrigin(t,"center","center"),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(t,n){var a={objects:this._toObjects(t,n)};return e(a,this.__serializeBgOverlay()),fabric.util.populateWithProperties(this,a,n),a},_toObjects:function(e,t){return this.getObjects().map((function(n){return this._toObject(n,e,t)}),this)},_toObject:function(e,t,n){var a;this.includeDefaultValues||(a=e.includeDefaultValues,e.includeDefaultValues=!1);var r=this._realizeGroupTransformOnObject(e),o=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=a),this._unwindGroupTransformOnObject(e,r),o},_realizeGroupTransformOnObject:function(e){if(e.group&&e.group===this.getActiveGroup()){var t={};return["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"].forEach((function(n){t[n]=e[n]})),this.getActiveGroup().realizeTransform(e),t}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},__serializeBgOverlay:function(){var e={background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.overlayColor&&(e.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor),e},toSVG:function(e,t){e||(e={});var n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this._setSVGBgOverlayColor(n,"backgroundColor"),this._setSVGObjects(n,t),this._setSVGBgOverlayColor(n,"overlayColor"),n.push("</svg>"),n.join("")},_setSVGPreamble:function(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,t){e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',t.viewBox?t.viewBox.width:this.width,'" ','height="',t.viewBox?t.viewBox.height:this.height,'" ',this.backgroundColor&&!this.backgroundColor.toLive?'style="background-color: '+this.backgroundColor+'" ':null,t.viewBox?'viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':null,'xml:space="preserve">',"<desc>Created with Fabric.js ",fabric.version,"</desc>","<defs>",fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),"</defs>")},_setSVGObjects:function(e,t){for(var n=0,a=this.getObjects(),r=a.length;n<r;n++){var o=a[n],s=this._realizeGroupTransformOnObject(o);e.push(o.toSVG(t)),this._unwindGroupTransformOnObject(o,s)}},_setSVGBgOverlayColor:function(e,t){this[t]&&"overlayColor"===t&&e.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[t],'"',"></rect>")},sendToBack:function(e){return n(this._objects,e),this._objects.unshift(e),this.renderAll&&this.renderAll()},bringToFront:function(e){return n(this._objects,e),this._objects.push(e),this.renderAll&&this.renderAll()},sendBackwards:function(e,t){var a=this._objects.indexOf(e);if(0!==a){var r=this._findNewLowerIndex(e,a,t);n(this._objects,e),this._objects.splice(r,0,e),this.renderAll&&this.renderAll()}return this},_findNewLowerIndex:function(e,t,n){var a;if(n){a=t;for(var r=t-1;r>=0;--r){if(e.intersectsWithObject(this._objects[r])||e.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(e)){a=r;break}}}else a=t-1;return a},bringForward:function(e,t){var a=this._objects.indexOf(e);if(a!==this._objects.length-1){var r=this._findNewUpperIndex(e,a,t);n(this._objects,e),this._objects.splice(r,0,e),this.renderAll&&this.renderAll()}return this},_findNewUpperIndex:function(e,t,n){var a;if(n){a=t;for(var r=t+1;r<this._objects.length;++r){if(e.intersectsWithObject(this._objects[r])||e.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(e)){a=r;break}}}else a=t+1;return a},moveTo:function(e,t){return n(this._objects,e),this._objects.splice(t,0,e),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this.interactive&&this.removeListeners(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),e(fabric.StaticCanvas.prototype,fabric.Observable),e(fabric.StaticCanvas.prototype,fabric.Collection),e(fabric.StaticCanvas.prototype,fabric.DataURLExporter),e(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=fabric.util.createCanvasElement();if(!t||!t.getContext)return null;var n=t.getContext("2d");if(!n)return null;switch(e){case"getImageData":return"undefined"!==typeof n.getImageData;case"setLineDash":return"undefined"!==typeof n.setLineDash;case"toDataURL":return"undefined"!==typeof t.toDataURL;case"toDataURLWithQuality":try{return t.toDataURL("image/jpeg",0),!0}catch(a){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var t=e.format||"png",n=e.quality||1,a=e.multiplier||1,r={left:e.left,top:e.top,width:e.width,height:e.height};return 1!==a?this.__toDataURLWithMultiplier(t,n,r,a):this.__toDataURL(t,n,r)},__toDataURL:function(e,t,n){this.renderAll(!0);var a=this.upperCanvasEl||this.lowerCanvasEl,r=this.__getCroppedCanvas(a,n);"jpg"===e&&(e="jpeg");var o=fabric.StaticCanvas.supports("toDataURLWithQuality")?(r||a).toDataURL("image/"+e,t):(r||a).toDataURL("image/"+e);return this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),r&&(r=null),o},__getCroppedCanvas:function(e,t){var n,a;return("left"in t||"top"in t||"width"in t||"height"in t)&&(a=(n=fabric.util.createCanvasElement()).getContext("2d"),n.width=t.width||this.width,n.height=t.height||this.height,a.drawImage(e,-t.left||0,-t.top||0)),n},__toDataURLWithMultiplier:function(e,t,n,a){var r=this.getWidth(),o=this.getHeight(),s=r*a,i=o*a,l=this.getActiveObject(),c=this.getActiveGroup(),p=this.contextTop||this.contextContainer;a>1&&this.setWidth(s).setHeight(i),p.scale(a,a),n.left&&(n.left*=a),n.top&&(n.top*=a),n.width?n.width*=a:a<1&&(n.width=s),n.height?n.height*=a:a<1&&(n.height=i),c?this._tempRemoveBordersControlsFromGroup(c):l&&this.deactivateAll&&this.deactivateAll(),this.renderAll(!0);var u=this.__toDataURL(e,t,n);return this.width=r,this.height=o,p.scale(1/a,1/a),this.setWidth(r).setHeight(o),c?this._restoreBordersControlsOnGroup(c):l&&this.setActiveObject&&this.setActiveObject(l),this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),u},toDataURLWithMultiplier:function(e,t,n){return this.toDataURL({format:e,multiplier:t,quality:n})},_tempRemoveBordersControlsFromGroup:function(e){e.origHasControls=e.hasControls,e.origBorderColor=e.borderColor,e.hasControls=!0,e.borderColor="rgba(0,0,0,0)",e.forEachObject((function(e){e.origBorderColor=e.borderColor,e.borderColor="rgba(0,0,0,0)"}))},_restoreBordersControlsOnGroup:function(e){e.hideControls=e.origHideControls,e.borderColor=e.origBorderColor,e.forEachObject((function(e){e.borderColor=e.origBorderColor,delete e.origBorderColor}))}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(e,t,n){return this.loadFromJSON(e,t,n)},loadFromJSON:function(e,t,n){if(e){var a="string"===typeof e?JSON.parse(e):e;this._objects=[],this.contextTop&&this.clearContext(this.contextTop);var r=this;return this._enlivenObjects(a.objects,(function(){r._setBgOverlay(a,t)}),n),this}},_setBgOverlay:function(e,t){var n=this,a={backgroundColor:!1,overlayColor:!1};if(e.background||e.overlay){var r=function(){a.backgroundColor&&a.overlayColor&&(n.renderAll(),t&&t())};this.__setBgOverlay("backgroundColor",e.background,a,r),this.__setBgOverlay("overlayColor",e.overlay,a,r),r()}else t&&t()},__setBgOverlay:function(e,t,n,a){t?this["set"+fabric.util.string.capitalize(e,!0)](t,(function(){n[e]=!0,a&&a()})):n[e]=!0},_enlivenObjects:function(e,t,n){var a=this;if(e&&0!==e.length){var r=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(e,(function(e){e.forEach((function(e,t){a.insertAt(e,t,!0)})),a.renderOnAddRemove=r,t&&t()}),null,n)}else t&&t()},_toDataURL:function(e,t){this.clone((function(n){t(n.toDataURL(e))}))},_toDataURLWithMultiplier:function(e,t,n){this.clone((function(a){n(a.toDataURLWithMultiplier(e,t))}))},clone:function(e,t){var n=JSON.stringify(this.toJSON(t));this.cloneWithoutData((function(t){t.loadFromJSON(n,(function(){e&&e(t)}))}))},cloneWithoutData:function(e){var t=fabric.document.createElement("canvas");t.width=this.getWidth(),t.height=this.getHeight();var n=new fabric.Canvas(t);n.clipTo=this.clipTo,e&&e(n)}})},function(e,t){var n,a,r,o,s,i;!function(){var e=fabric.util.getPointer,t=fabric.util.degreesToRadians,n=fabric.util.radiansToDegrees,a=Math.atan2,r=Math.abs,o=.5;for(var s in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(e,t){t||(t={}),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas(),fabric.Canvas.activeInstance=this},uniScaleTransform:!1,centeredScaling:!1,centeredRotation:!1,interactive:!0,selection:!0,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this.calcOffset()},_resetCurrentTransform:function(e){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(e,t.target)?"rotate"===t.action?this._setOriginToCenter(t.target):("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(e,t){var n=this.getPointer(e,!0),a=this._normalizePointer(t,n);return t.containsPoint(a)||t._findTargetCorner(n)},_normalizePointer:function(e,t){var n,a=this.getActiveGroup(),r=t.x,o=t.y;return a&&"group"!==e.type&&a.contains(e)&&(n=new fabric.Point(a.left,a.top),r-=(n=fabric.util.transformPoint(n,this.viewportTransform,!0)).x,o-=n.y),{x:r,y:o}},isTargetTransparent:function(e,t,n){var a=e.hasBorders,r=e.transparentCorners;e.hasBorders=e.transparentCorners=!1,this._draw(this.contextCache,e),e.hasBorders=a,e.transparentCorners=r;var o=fabric.util.isTransparent(this.contextCache,t,n,this.targetFindTolerance);return this.clearContext(this.contextCache),o},_shouldClearSelection:function(e,t){var n=this.getActiveGroup(),a=this.getActiveObject();return!t||t&&n&&!n.contains(t)&&n!==t&&!e.shiftKey||t&&!t.evented||t&&!t.selectable&&a&&a!==t},_shouldCenterTransform:function(e,t){if(t){var n,a=this._currentTransform;return"scale"===a.action||"scaleX"===a.action||"scaleY"===a.action?n=this.centeredScaling||t.centeredScaling:"rotate"===a.action&&(n=this.centeredRotation||t.centeredRotation),n?!e.altKey:e.altKey}},_getOriginFromCorner:function(e,t){var n={x:e.originX,y:e.originY};return"ml"===t||"tl"===t||"bl"===t?n.x="right":"mr"!==t&&"tr"!==t&&"br"!==t||(n.x="left"),"tl"===t||"mt"===t||"tr"===t?n.y="bottom":"bl"!==t&&"mb"!==t&&"br"!==t||(n.y="top"),n},_getActionFromCorner:function(e,t){var n="drag";return t&&(n="ml"===t||"mr"===t?"scaleX":"mt"===t||"mb"===t?"scaleY":"mtr"===t?"rotate":"scale"),n},_setupCurrentTransform:function(e,n){if(n){var a=this.getPointer(e),r=n._findTargetCorner(this.getPointer(e,!0)),o=this._getActionFromCorner(n,r),s=this._getOriginFromCorner(n,r),i=null;null!==n&&"undefined"!==typeof n&&null!==n.easel&&"undefined"!==typeof n.easel&&"tab"===n.easel.type&&this.volumeActions&&(i=this.volumeActions.getTabIndexAtPoint(a.x,a.y,n.easel.id)),this._currentTransform={target:n,action:o,scaleX:n.scaleX,scaleY:n.scaleY,offsetX:a.x-n.left,offsetY:a.y-n.top,originX:s.x,originY:s.y,ex:a.x,ey:a.y,previousX:a.x,previousY:a.y,selectedTabIndex:i,left:n.left,top:n.top,theta:t(n.angle),width:n.width*n.scaleX,mouseXSign:1,mouseYSign:1},this._currentTransform.original={left:n.left,top:n.top,scaleX:n.scaleX,scaleY:n.scaleY,originX:s.x,originY:s.y},this._resetCurrentTransform(e)}},_translateObject:function(e,t){var n=this._currentTransform.target;if(this.volumeActions){var a=e-this._currentTransform.previousX,r=t-this._currentTransform.previousY,o=this._currentTransform.selectedTabIndex;null!==o&&"undefined"!==typeof o?this.volumeActions.translateTab(n.easel.id,o,a,r):this.volumeActions.translate(a,r)}else n.get("lockMovementX")||n.set("left",e-this._currentTransform.offsetX),n.get("lockMovementY")||n.set("top",t-this._currentTransform.offsetY)},_scaleObject:function(e,t,n){var a=this._currentTransform,r=a.target,o=r.get("lockScalingX"),s=r.get("lockScalingY");if(!o||!s)if(this.volumeActions){var i,l,c=r.translateToOriginPointIgnoringStroke(r.getCenterPoint(),a.originX,a.originY),p=r.angle*Math.PI/180,u=a.previousX-c.x,d=a.previousY-c.y,h=e-c.x,E=t-c.y,m=Math.atan2(d,u),S=Math.atan2(E,h),g=Math.hypot(d,u),f=Math.hypot(E,h);"x"===n?(i=f*Math.cos(p-S)/(g*Math.cos(p-m)),l=1):"y"===n?(p+=Math.PI/2,i=1,l=f*Math.cos(p-S)/(g*Math.cos(p-m))):"equally"===n?i=l=f/g:(i=h/u,l=E/d),0!==i&&isFinite(i)&&0!==l&&isFinite(l)&&this.volumeActions.scale(i,l,c.x,c.y)}else{c=r.translateToOriginPoint(r.getCenterPoint(),a.originX,a.originY);var A=r.toLocalPoint(new fabric.Point(e,t),a.originX,a.originY);this._setLocalMouse(A,a),this._setObjectScale(A,a,o,s,n),r.setPositionByOrigin(c,a.originX,a.originY)}},_setObjectScale:function(e,t,n,a,r){var o=t.target;t.newScaleX=o.scaleX,t.newScaleY=o.scaleY,"equally"!==r||n||a?r?"x"!==r||o.get("lockUniScaling")?"y"!==r||o.get("lockUniScaling")||(t.newScaleY=e.y/(o.height+o.strokeWidth),a||o.set("scaleY",t.newScaleY)):(t.newScaleX=e.x/(o.width+o.strokeWidth),n||o.set("scaleX",t.newScaleX)):(t.newScaleX=e.x/(o.width+o.strokeWidth),t.newScaleY=e.y/(o.height+o.strokeWidth),n||o.set("scaleX",t.newScaleX),a||o.set("scaleY",t.newScaleY)):this._scaleObjectEqually(e,o,t),this._flipObject(t)},_scaleObjectEqually:function(e,t,n){var a=e.y+e.x,r=(t.height+t.strokeWidth)*n.original.scaleY+(t.width+t.strokeWidth)*n.original.scaleX;n.newScaleX=n.original.scaleX*a/r,n.newScaleY=n.original.scaleY*a/r,t.set("scaleX",n.newScaleX),t.set("scaleY",n.newScaleY)},_flipObject:function(e){e.newScaleX<0&&("left"===e.originX?e.originX="right":"right"===e.originX&&(e.originX="left")),e.newScaleY<0&&("top"===e.originY?e.originY="bottom":"bottom"===e.originY&&(e.originY="top"))},_setLocalMouse:function(e,t){var n=t.target;"right"===t.originX?e.x*=-1:"center"===t.originX&&(e.x*=2*t.mouseXSign,e.x<0&&(t.mouseXSign=-t.mouseXSign)),"bottom"===t.originY?e.y*=-1:"center"===t.originY&&(e.y*=2*t.mouseYSign,e.y<0&&(t.mouseYSign=-t.mouseYSign)),r(e.x)>n.padding?e.x<0?e.x+=n.padding:e.x-=n.padding:e.x=0,r(e.y)>n.padding?e.y<0?e.y+=n.padding:e.y-=n.padding:e.y=0},_rotateObject:function(e,t){var r=this._currentTransform;if(!r.target.get("lockRotation")){var o=a(t-r.top,e-r.left);if(this.volumeActions){var s=a(r.previousY-r.top,r.previousX-r.left);this.volumeActions.rotate(o-s,r.left,r.top)}else{s=a(r.ey-r.top,r.ex-r.left);var i=n(o-s+r.theta);i<0&&(i=360+i),r.target.angle=i}}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.setAngle(0)},_drawSelection:function(){var e=this.contextTop,t=this._groupSelector,n=t.left,a=t.top,s=r(n),i=r(a);if(e.fillStyle=this.selectionColor,e.fillRect(t.ex-(n>0?0:-n),t.ey-(a>0?0:-a),s,i),e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1){var l=t.ex+o-(n>0?0:s),c=t.ey+o-(a>0?0:i);e.beginPath(),fabric.util.drawDashedLine(e,l,c,l+s,c,this.selectionDashArray),fabric.util.drawDashedLine(e,l,c+i-1,l+s,c+i-1,this.selectionDashArray),fabric.util.drawDashedLine(e,l,c,l,c+i,this.selectionDashArray),fabric.util.drawDashedLine(e,l+s-1,c,l+s-1,c+i,this.selectionDashArray),e.closePath(),e.stroke()}else e.strokeRect(t.ex+o-(n>0?0:s),t.ey+o-(a>0?0:i),s,i)},_isLastRenderedObject:function(e){return this.controlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay.visible&&this.containsPoint(e,this.lastRenderedObjectWithControlsAboveOverlay)&&this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(this.getPointer(e,!0))},findTarget:function(e,t){if(!this.skipTargetFind){if(this._isLastRenderedObject(e))return this.lastRenderedObjectWithControlsAboveOverlay;var n=this.getActiveGroup();if(n&&!t&&this.containsPoint(e,n))return n;var a=this._searchPossibleTargets(e);return this._fireOverOutEvents(a),a}},_fireOverOutEvents:function(e){e?this._hoveredTarget!==e&&(this.fire("mouse:over",{target:e}),e.fire("mouseover"),this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget}),this._hoveredTarget.fire("mouseout")),this._hoveredTarget=e):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(e,t,n){if(t&&t.visible&&t.evented&&this.containsPoint(e,t)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return!0;if(!this.isTargetTransparent(t,n.x,n.y))return!0}},_searchPossibleTargets:function(e){for(var t,n=this.getPointer(e,!0),a=this._objects.length;a--;)if(this._checkTarget(e,this._objects[a],n)){this.relatedTarget=this._objects[a],t=this._objects[a];break}return t},getPointer:function(t,n,a){a||(a=this.upperCanvasEl);var r,o=e(t,a),s=a.getBoundingClientRect();return o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,n||(o=fabric.util.transformPoint(o,fabric.util.invertTransform(this.viewportTransform))),r=0===s.width||0===s.height?{width:1,height:1}:{width:a.width/s.width,height:a.height/s.height},{x:o.x*r.width,y:o.y*r.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+e),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.getWidth()||e.width,n=this.getHeight()||e.height;fabric.util.setStyle(e,{position:"absolute",width:t+"px",height:n+"px",left:0,top:0}),e.width=t,e.height=n,fabric.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(e){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=e,e.set("active",!0)},setActiveObject:function(e,t){return this._setActiveObject(e),this.renderAll(),this.fire("object:selected",{target:e,e:t}),e.fire("selected",{e:t}),this},getActiveObject:function(){return this._activeObject},_discardActiveObject:function(){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=null},discardActiveObject:function(e){return this._discardActiveObject(),this.renderAll(),this.fire("selection:cleared",{e:e}),this},_setActiveGroup:function(e){this._activeGroup=e,e&&e.set("active",!0)},setActiveGroup:function(e,t){return this._setActiveGroup(e),e&&(this.fire("object:selected",{target:e,e:t}),e.fire("selected",{e:t})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var e=this.getActiveGroup();e&&e.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(e){return this._discardActiveGroup(),this.fire("selection:cleared",{e:e}),this},deactivateAll:function(){for(var e=this.getObjects(),t=0,n=e.length;t<n;t++)e[t].set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(e){var t=this.getActiveGroup()||this.getActiveObject();return t&&this.fire("before:selection:cleared",{target:t,e:e}),this.deactivateAll(),t&&this.fire("selection:cleared",{e:e}),this},drawControls:function(e){var t=this.getActiveGroup();t?this._drawGroupControls(e,t):this._drawObjectsControls(e)},_drawGroupControls:function(e,t){t._renderControls(e)},_drawObjectsControls:function(e){for(var t=0,n=this._objects.length;t<n;++t)this._objects[t]&&this._objects[t].active&&(this._objects[t]._renderControls(e),this.lastRenderedObjectWithControlsAboveOverlay=this._objects[t])}}),fabric.StaticCanvas)"prototype"!==s&&(fabric.Canvas[s]=fabric.StaticCanvas[s]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),a={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},r=fabric.util.addListener,o=fabric.util.removeListener,fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this._bindEvents(),r(fabric.window,"resize",this._onResize),r(this.upperCanvasEl,"mousedown",this._onMouseDown),r(this.upperCanvasEl,"mousemove",this._onMouseMove),r(this.upperCanvasEl,"mousewheel",this._onMouseWheel),r(this.upperCanvasEl,"touchstart",this._onMouseDown),r(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!==typeof Event&&"add"in Event&&(Event.add(this.upperCanvasEl,"gesture",this._onGesture),Event.add(this.upperCanvasEl,"drag",this._onDrag),Event.add(this.upperCanvasEl,"orientation",this._onOrientationChange),Event.add(this.upperCanvasEl,"shake",this._onShake))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this)},removeListeners:function(){o(fabric.window,"resize",this._onResize),o(this.upperCanvasEl,"mousedown",this._onMouseDown),o(this.upperCanvasEl,"mousemove",this._onMouseMove),o(this.upperCanvasEl,"mousewheel",this._onMouseWheel),o(this.upperCanvasEl,"touchstart",this._onMouseDown),o(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!==typeof Event&&"remove"in Event&&(Event.remove(this.upperCanvasEl,"gesture",this._onGesture),Event.remove(this.upperCanvasEl,"drag",this._onDrag),Event.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),Event.remove(this.upperCanvasEl,"shake",this._onShake))},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e,t){this.__onMouseWheel&&this.__onMouseWheel(e,t)},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onMouseDown:function(e){this.__onMouseDown(e),r(fabric.document,"touchend",this._onMouseUp),r(fabric.document,"touchmove",this._onMouseMove),o(this.upperCanvasEl,"mousemove",this._onMouseMove),o(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===e.type?o(this.upperCanvasEl,"mousedown",this._onMouseDown):(this.volumeActions&&this.volumeActions.beginDrag(),r(fabric.document,"mouseup",this._onMouseUp),r(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(e){if(this.__onMouseUp(e),o(fabric.document,"mouseup",this._onMouseUp),o(fabric.document,"touchend",this._onMouseUp),o(fabric.document,"mousemove",this._onMouseMove),o(fabric.document,"touchmove",this._onMouseMove),r(this.upperCanvasEl,"mousemove",this._onMouseMove),r(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchend"===e.type){var t=this;setTimeout((function(){r(t.upperCanvasEl,"mousedown",t._onMouseDown)}),400)}this.volumeActions&&this.volumeActions.endDrag()},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e,t){var n=this.getActiveGroup()||this.getActiveObject();return!!(e&&(e.isMoving||e!==n)||!e&&n||!e&&!n&&!this._groupSelector||t&&this._previousPointer&&this.selection&&(t.x!==this._previousPointer.x||t.y!==this._previousPointer.y))},__onMouseUp:function(e){var t;this._currentTransform?(this._finalizeCurrentTransform(),t=this._currentTransform.target):t=this.findTarget(e,!0);var n=this._shouldRender(t,this.getPointer(e));this._maybeGroupObjects(e),t&&(t.isMoving=!1),n&&this.renderAll(),this._handleCursorAndEvent(e,t)},_handleCursorAndEvent:function(e,t){this._setCursorFromEvent(e,t);var n=this;setTimeout((function(){n._setCursorFromEvent(e,t)}),50),this.fire("mouse:up",{target:t,e:e}),t&&t.fire("mouseup",{e:e})},_finalizeCurrentTransform:function(){var e=this._currentTransform.target;e._scaling&&(e._scaling=!1),e.setCoords(),this.stateful&&e.hasStateChanged()&&(this.fire("object:modified",{target:e}),e.fire("modified")),this._restoreOriginXY(e)},_restoreOriginXY:function(e){if(this._previousOriginX&&this._previousOriginY){var t=e.translateToOriginPoint(e.getCenterPoint(),this._previousOriginX,this._previousOriginY);e.originX=this._previousOriginX,e.originY=this._previousOriginY,e.left=t.x,e.top=t.y,this._previousOriginX=null,this._previousOriginY=null}},__onMouseDown:function(e){if(!this._currentTransform){var t=this.findTarget(e),n=this.getPointer(e,!0);this._previousPointer=n;var a=this._shouldRender(t,n),r=this._shouldGroup(e,t);this._shouldClearSelection(e,t)?this._clearSelection(e,t,n):r&&(this._handleGrouping(e,t),t=this.getActiveGroup()),t&&t.selectable&&!r&&(this._beforeTransform(e,t),this._setupCurrentTransform(e,t)),a&&this.renderAll(),this.fire("mouse:down",{target:t,e:e}),t&&t.fire("mousedown",{e:e})}},_beforeTransform:(n=null,function(e,t){var a=300;"undefined"!==typeof EASEL&&EASEL.interactionConstants&&(a=EASEL.interactionConstants.DOUBLE_CLICK_TIME),this.stateful&&t.saveState(),t._findTargetCorner(this.getPointer(e))&&this.onBeforeScaleRotate(t);var r=this.volumeActions&&null!==t.easel&&"undefined"!==typeof t.easel;t!==this.getActiveGroup()&&t!==this.getActiveObject()?r?this.volumeActions.select(t.easel.id):(this.deactivateAll(),this.setActiveObject(t,e)):t===this.getActiveObject()&&r&&n&&Date.now()-n<a&&this.volumeActions.edit(t.easel.id),n=Date.now()}),_clearSelection:function(e,t,n){this.volumeActions&&this.volumeActions.deselect(),this.deactivateAllWithDispatch(e),t&&t.selectable?this.volumeActions&&null!==t.easel&&"undefined"!==typeof t.easel?this.volumeActions.select(t.easel.id):this.setActiveObject(t,e):this.selection&&(this._groupSelector={ex:n.x,ey:n.y,top:0,left:0})},_setOriginToCenter:function(e){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var t=e.getCenterPoint();e.originX="center",e.originY="center",e.left=t.x,e.top=t.y,this._currentTransform.left=e.left,this._currentTransform.top=e.top},_setCenterToOrigin:function(e){var t=e.translateToOriginPoint(e.getCenterPoint(),this._previousOriginX,this._previousOriginY);e.originX=this._previousOriginX,e.originY=this._previousOriginY,e.left=t.x,e.top=t.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(e){var t,n,a=this._groupSelector;a?(n=this.getPointer(e,!0),a.left=n.x-a.ex,a.top=n.y-a.ey,this.renderTop()):this._currentTransform?this._transformObject(e):!(t=this.findTarget(e))||t&&!t.selectable?this.setCursor(this.defaultCursor):this._setCursorFromEvent(e,t),this.fire("mouse:move",{target:t,e:e}),t&&t.fire("mousemove",{e:e})},_transformObject:function(e){var t=this.getPointer(e),n=this._currentTransform;n.reset=!1,n.target.isMoving=!0,this._beforeScaleTransform(e,n),this._performTransformAction(e,n,t),this.renderAll()},_performTransformAction:function(e,t,n){var a=n.x,r=n.y,o=t.target,s=t.action;"rotate"===s?(this._rotateObject(a,r),this._fire("rotating",o,e)):"scale"===s?(this._onScale(e,t,a,r),this._fire("scaling",o,e)):"scaleX"===s?(this._scaleObject(a,r,"x"),this._fire("scaling",o,e)):"scaleY"===s?(this._scaleObject(a,r,"y"),this._fire("scaling",o,e)):(this._translateObject(a,r),this._fire("moving",o,e),this.setCursor(this.moveCursor)),this._currentTransform.previousX=a,this._currentTransform.previousY=r},_fire:function(e,t,n){this.fire("object:"+e,{target:t,e:n}),t.fire(e,{e:n})},_beforeScaleTransform:function(e,t){if("scale"===t.action||"scaleX"===t.action||"scaleY"===t.action){var n=this._shouldCenterTransform(e,t.target);(n&&("center"!==t.originX||"center"!==t.originY)||!n&&"center"===t.originX&&"center"===t.originY)&&(this._resetCurrentTransform(e),t.reset=!0)}},_onScale:function(e,t,n,a){!e.shiftKey&&!this.uniScaleTransform||t.target.get("lockUniScaling")?(t.reset||"scale"!==t.currentAction||this._resetCurrentTransform(e,t.target),t.currentAction="scaleEqually",this._scaleObject(n,a,"equally")):(t.currentAction="scale",this._scaleObject(n,a))},_setCursorFromEvent:function(e,t){if(!t||!t.selectable)return this.setCursor(this.defaultCursor),!1;var n=this.getActiveGroup(),a=t._findTargetCorner&&(!n||!n.contains(t))&&t._findTargetCorner(this.getPointer(e,!0));return a?this._setCornerCursor(a,t):this.setCursor(t.hoverCursor||this.hoverCursor),!0},_setCornerCursor:function(e,t){if(e in a)this.setCursor(this._getRotatedCornerCursor(e,t));else{if("mtr"!==e||!t.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(e,t){var n=Math.round(t.getAngle()%360/45);return n<0&&(n+=8),n+=a[e],n%=8,this.cursorMap[n]}}),s=Math.min,i=Math.max,fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(e,t){var n=this.getActiveObject();return e.shiftKey&&(this.getActiveGroup()||n&&n!==t)&&this.selection},_handleGrouping:function(e,t){(t!==this.getActiveGroup()||(t=this.findTarget(e,!0))&&!t.isType("group"))&&(this.getActiveGroup()?this._updateActiveGroup(t,e):this._createActiveGroup(t,e),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(e,t){var n=this.getActiveGroup();if(n.contains(e)){if(n.removeWithUpdate(e),this._resetObjectTransform(n),e.set("active",!1),1===n.size()){if(this.volumeActions){var a=[];return n.getObjects().forEach((function(e){null!==e.easel&&"undefined"!==typeof e.easel&&a.push(e.easel.id)})),void this.volumeActions.select.apply(null,a)}return this.discardActiveGroup(t),void this.setActiveObject(n.item(0))}}else n.addWithUpdate(e),this._resetObjectTransform(n);if(this.volumeActions)return a=[],n.getObjects().forEach((function(e){null!==e.easel&&"undefined"!==typeof e.easel&&a.push(e.easel.id)})),void this.volumeActions.select.apply(null,a);this.fire("selection:created",{target:n,e:t}),n.set("active",!0)},_createActiveGroup:function(e,t){if(this._activeObject&&e!==this._activeObject){var n=this._createGroup(e);if(this.volumeActions){var a=[];return n.getObjects().forEach((function(e){null!==e.easel&&"undefined"!==typeof e.easel&&a.push(e.easel.id)})),void this.volumeActions.select.apply(null,a)}n.addWithUpdate(),this.setActiveGroup(n),this._activeObject=null,this.fire("selection:created",{target:n,e:t})}e.set("active",!0)},_createGroup:function(e){var t=this.getObjects(),n=t.indexOf(this._activeObject)<t.indexOf(e)?[this._activeObject,e]:[e,this._activeObject];return new fabric.Group(n,{originX:"center",originY:"center",canvas:this})},_groupSelectedObjects:function(e){var t=this._collectObjects();if(this.volumeActions){var n=[];return t.forEach((function(e){null!==e.easel&&"undefined"!==typeof e.easel&&n.push(e.easel.id)})),void this.volumeActions.select.apply(null,n)}1===t.length?this.setActiveObject(t[0],e):t.length>1&&((t=new fabric.Group(t.reverse(),{originX:"center",originY:"center",canvas:this})).addWithUpdate(),this.setActiveGroup(t,e),t.saveCoords(),this.fire("selection:created",{target:t}),this.renderAll())},_collectObjects:function(){for(var e,t=[],n=this._groupSelector.ex,a=this._groupSelector.ey,r=n+this._groupSelector.left,o=a+this._groupSelector.top,l=new fabric.Point(s(n,r),s(a,o)),c=new fabric.Point(i(n,r),i(a,o)),p=n===r&&a===o,u=this._objects.length;u--&&!((e=this._objects[u])&&e.selectable&&e.visible&&(e.intersectsWithRect(l,c)||e.isContainedWithinRect(l,c)||e.containsPoint(l)||e.containsPoint(c))&&(e.set("active",!0),t.push(e),p)););return t},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e);var t=this.getActiveGroup();t&&(t.setObjectsCoords().setCoords(),t.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}]);